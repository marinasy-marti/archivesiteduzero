<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/rogrammez-sur-votre-ds-avec-microlua.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 20:56:43 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/rogrammez-sur-votre-ds-avec-microlua.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:55:13 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Programmez sur votre DS avec MicroLua</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Programmez sur votre DS avec MicroLua</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#ProgrammezsurvotreDSavecMicroLua">Programmez sur votre DS avec MicroLua</a><br/><a href="#AproposdeMicroLuaetinstallation">A propos de MicroLua et installation</a><br/><a href="#IntroductionMicroLua">Introduction à MicroLua</a><br/><a href="#InstallationdeMicroLua">Installation de MicroLua</a><br/><a href="#TestdeMicroLua">Test de MicroLua</a><br/><a href="#LesbasesdelaprogrammationavecLua">Les bases de la programmation avec Lua</a><br/><a href="#LesbasesdelaprogrammationenLua1">Les bases de la programmation en Lua (1)</a><br/><a href="#LesbasesdelaprogrammationenLua2">Les bases de la programmation en Lua (2)</a><br/><a href="#EtpourMicroLua">Et pour MicroLua ?</a><br/><a href="#LeBA.-BadeMicroLua">Le BA.-Ba de MicroLua</a><br/><a href="#Gnralitssurlesfonctionsdedessin">Généralités sur les fonctions de dessin</a><br/><a href="#Afficherdutextel039cran">Afficher du texte à l&#039;écran</a><br/><a href="#Afficherdesimagesl039cran">Afficher des images à l&#039;écran</a><br/><a href="#UtiliserlescontrlesdelaNintendoDS">Utiliser les contrôles de la Nintendo DS</a><br/><a href="#Unpeud039art...">Un peu d&#039;art...</a><br/><a href="#Ledessinclassique">Le dessin classique</a><br/><a href="#LedessinavecunCanevas">Le dessin avec un Canevas</a><br/><a href="#Quechoisir">Que choisir ?</a><br/><a href="#LatransparenceAlpha">La transparence Alpha</a><br/><a href="#TPsgogo">TPs à gogo</a><br/><a href="#TP1L039imagequibouge">TP1 : L&#039;image qui bouge</a><br/><a href="#TP2Unmorpion">TP2 : Un morpion</a><br/><a href="#LesMapsetScrollMaps">Les Maps et ScrollMaps</a><br/><a href="#Prparationdelamap">Préparation de la map</a><br/><a href="#Utilisationdansvosprogrammes">Utilisation dans vos programmes</a><br/><a href="#LesScrollmaps">Les Scrollmaps</a><br/><a href="#Lessprites">Les sprites</a><br/><a href="#Qu039est-cequ039unsprite">Qu&#039;est-ce qu&#039;un sprite ?</a><br/><a href="#Oncommencedoucement">On commence doucement</a><br/><a href="#Lesanimationsdesprites">Les animations de sprites</a><br/><a href="#Exemple">Exemple</a><br/><a href="#Leson">Le son</a><br/><a href="#LagestiondusonparMicroLua">La gestion du son par MicroLua</a><br/><a href="#LesMods">Les Mods</a><br/><a href="#LesSFX">Les SFX</a><br/><a href="#Fonctionsspcialespourlinkersspciaux">Fonctions spéciales pour linkers spéciaux</a><br/><a href="#asecoue">Ça secoue !</a><br/><a href="#BougezavecvotreDS">Bougez avec votre DS !</a><br/><a href="#LesfonctionsSystemetlesfichiersINI">Les fonctions System et les fichiers INI</a><br/><a href="#Lesfichiers">Les fichiers</a><br/><a href="#Lesdossiers">Les dossiers</a><br/><a href="#TPutilisationdesfichiersINI">TP : utilisation des fichiers INI</a><br/><a href="#Dutempsetdespolicesd039criture">Du temps et des polices (d&#039;écriture)</a><br/><a href="#Lesfontes">Les fontes</a><br/><a href="#Datetime">Datetime</a><br/><a href="#Lestimers">Les timers</a><br/><a href="#TayPay">TayPay</a><br/><a href="#Foireauxastuces">Foire aux astuces</a><br/><a href="#Desliens">Des liens</a><br/><a href="#Desutilitaires">Des utilitaires</a><br/><a href="#Leslibrairies">Les librairies</a><br/><a href="#L039instructiondofile">L&#039;instruction dofile()</a><br/><a href="#L039instructionrequire">L&#039;instruction require()</a><br/></div>
<a name="ProgrammezsurvotreDSavecMicroLua"></a><h2>Programmez sur votre DS avec MicroLua</h2><div class="content" role="article">
<div id="r-513656" data-claire-element-id="513656" data-claire-semantic="question"><p id="r-513655" data-claire-element-id="513655">Vous voulez programmer pour votre DS simplement ?</p></div><p id="r-513657" data-claire-element-id="513657">Ce cours est fait pour vous.</p><p id="r-513658" data-claire-element-id="513658">Je vais donc vous apprendre à utiliser MicroLua. Comme son nom l'indique, il est microscopique il est basé sur le langage de programmation <a href="http://www.lua.org/">Lua</a>.</p><aside id="r-513660" data-claire-element-id="513660" data-claire-semantic="information"><p id="r-513659" data-claire-element-id="513659">Vous n'aurez pas à apprendre toutes les facettes du Lua pour bien maîtriser µLua. En revanche, je considèrerai que vous avez les bases de la programmation en général, même si vous ne maîtrisez pas forcément le Lua. Le chapitre &quot;Les bases de la programmation avec Lua&quot; n'a pour but que de vous inculquer la syntaxe basique du langage. Bien sûr, avoir des connaissances dans ce langage est une bonne chose :)</p></aside><p id="r-513661" data-claire-element-id="513661">Bon allez au boulot !</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="AproposdeMicroLuaetinstallation"></a><h2>A propos de MicroLua et installation</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
<span class="next">Introduction à MicroLua</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-513664" data-claire-element-id="513664">Dans ce chapitre (le plus petit mais le plus important :-° ), je vais vous enseigner comment installer et tester µLua. Je vais aussi vous faire un petit briefing sur µLua.</p><p id="r-513665" data-claire-element-id="513665">C'est parti ! :D</p>
</div><a name="IntroductionMicroLua"></a><h2>Introduction à MicroLua</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">
<span class="arrow"></span>
<span class="next">A propos de MicroLua et installation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
<span class="next">Installation de MicroLua</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-introduction-a-microlua" data-claire-element-id="513675">Introduction à MicroLua</h4><h5 id="r-lua" data-claire-element-id="513667">Lua</h5><p id="r-513666" data-claire-element-id="513666">Je dois commencer par vous faire comprendre la différence entre Lua et MicroLua.<br/> Le premier est un langage informatique, créé par une équipe de développeurs portugais d'une université de Rio de Janeiro au Brésil (au passage, &quot;Lua&quot; signifie &quot;lune&quot; en portugais, vous comprendrez ainsi son logo ). Tel qu'il est dit sur le <a href="http://www.lua.org/">site officiel</a>, c'est un langage &quot;puissant, rapide, léger et embarquable&quot;. Pour vous donner une idée de ses utilisations, ce langage de script est souvent utilisé par des applications pour le développement et l'intégration d'addons, je citerai notamment World of Warcraft ou encore Allods Online, ainsi que VLC.<br/> Le second, et bien... Lisez la suite :)</p><h5 id="r-microlua" data-claire-element-id="513674">MicroLua</h5><p id="r-513668" data-claire-element-id="513668">MicroLua est un homebrew (c'est-à-dire un programme amateur) développé pour la DS par Risike. C'est un portage du langage de script Lua sur la DS, par l'intermédiaire de la <a href="http://brunni.dev-fr.org/index.php?page=ndssoft_ulib">µLibrary</a> de Brunni (d'où le &quot;Micro&quot; ;) ). Vous ne devez donc pas confondre Lua, qui est un langage à part entière, et MicroLua, qui est une adaptation du Lua sur la DS.</p><aside id="r-513670" data-claire-element-id="513670" data-claire-semantic="warning"><p id="r-513669" data-claire-element-id="513669">Je tiens aussi à faire remarquer qu'il existe un projet DSLua. Il n'y a pas vraiment de rapport entre celui-ci et MicroLua, si ce n'est le même langage (et aucun n'a copié sur l'autre). Ce que je veux dire, c'est que vous ne devez pas les confondre, car les caractéristiques, les fonctions, etc. ne sont pas les mêmes.</p></aside><p id="r-513671" data-claire-element-id="513671">Il y a un <a href="http://microlua.risike.com/">site officiel</a> (carrément pas à jour) et surtout un <a href="http://microlua.xooit.fr/index.php">forum</a>, qui lui est très actif et possède une communauté vivante (nan, nan, j'fais pas de la pub :p ). Donc, si vous avez le moindre souci, vous savez où chercher !</p><p id="r-513672" data-claire-element-id="513672">A l'heure où ces lignes sont écrites d'une main experte, la dernière version de MicroLua est la 4.1. Quelques membres s'occupent de son amélioration. Je parle bien de membres de la communauté puisque le 9 juillet 2009 Risike a libéré les sources du homebrew, en expliquant qu'il n'avait plus trop le temps de s'y investir pleinement.</p><p id="r-513673" data-claire-element-id="513673">Maintenant, nous pouvons passer à l'installation de MicroLua !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">
<span class="arrow"></span>
<span class="next">A propos de MicroLua et installation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
<span class="next">Installation de MicroLua</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="InstallationdeMicroLua"></a><h2>Installation de MicroLua</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
<span class="arrow"></span>
<span class="next">Introduction à MicroLua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
<span class="next">Test de MicroLua</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-installation-de-microlua" data-claire-element-id="513720">Installation de MicroLua</h4><aside id="r-513677" data-claire-element-id="513677" data-claire-semantic="information"><p id="r-513676" data-claire-element-id="513676">Avant de commencer à programmer, on va installer µLua !</p></aside><p id="r-513678" data-claire-element-id="513678">Tout d'abord, de quoi avons-nous besoin ?</p><ul id="r-513687" data-claire-element-id="513687"><li id="r-513680" data-claire-element-id="513680"><p id="r-513679" data-claire-element-id="513679">D'une DS (encore que vous pouvez très bien n'utiliser que des émulateurs pour ordinateur, mais c'est mieux en vrai :D ).</p></li><li id="r-513682" data-claire-element-id="513682"><p id="r-513681" data-claire-element-id="513681">D'un linker.</p></li><li id="r-513684" data-claire-element-id="513684"><p id="r-513683" data-claire-element-id="513683">De MicroLua 4.0.2, disponible <a href="http://code.google.com/p/microlua/downloads/detail?name=MicroLua%204.0.2.zip">sur le Google Code</a>.</p></li><li id="r-513686" data-claire-element-id="513686"><p id="r-513685" data-claire-element-id="513685">D'un éditeur de texte (le mieux est de pouvoir bénéficier de la coloration syntaxique pour Lua, même si bien sûr les fonctions de µLua ne seront pas reconnues – je pense que la plupart des IDE permettent cependant de personnaliser la coloration en rajoutant des mots-clés).</p></li></ul><p id="r-513688" data-claire-element-id="513688">En décompressant l'archive de MicroLua, vous obtenez un dossier <em>Micro Lua 4.0</em>, qui contient :</p><ul id="r-513699" data-claire-element-id="513699"><li id="r-513690" data-claire-element-id="513690"><p id="r-513689" data-claire-element-id="513689">Un dossier <em><strong>Documentation</strong></em>, sous forme de fichiers HTML : c'est en fait une version hors-ligne du wiki auquel vous pouvez accéder via le Google Code <a href="http://code.google.com/p/microlua/wiki/MicroLua?tm=6">ici (majoritairement en anglais)</a> ; il va de soit que la version en ligne sera plus à jour que celle de votre dossier. Il y a par ailleurs un dossier &quot;fr&quot; contenant les pages traduites</p></li><li id="r-513692" data-claire-element-id="513692"><p id="r-513691" data-claire-element-id="513691">Un dossier <em><strong>lua</strong></em> : c'est ce dossier qui contient les fichiers nécessaires au bon fonctionnement de MicroLua.</p></li><li id="r-513694" data-claire-element-id="513694"><p id="r-513693" data-claire-element-id="513693">Trois fichiers <em><strong>microlua.nds</strong></em>, <em><strong>microlua.sc.nds</strong></em> et <em><strong>microlua.ds.gba</strong></em> : ce sont les trois versions différentes de MicroLua, à choisir en fonction de votre linker.</p></li><li id="r-513696" data-claire-element-id="513696"><p id="r-513695" data-claire-element-id="513695">Un fichier <em><strong>README</strong></em> : il est là pour présenter MicroLua, son installation, et donne encore quelques informations intéressantes ; cela dit, ce tutoriel se suffit à lui-même ;)</p></li><li id="r-513698" data-claire-element-id="513698"><p id="r-513697" data-claire-element-id="513697">Un fichier <em><strong>CHANGELOG</strong></em> : si vous voulez savoir ce qui a changé depuis la dernière version 3, lisez-le !</p></li></ul><p id="r-513700" data-claire-element-id="513700">Suivant votre linker, choisissez <em>microlua.nds</em> (le plus souvent), <em>microlua.sc.nds</em> (pour les SuperCard) ou <em>microlua.ds.gba</em> (pour les linkers GBA). Copiez ce fichier ainsi que le répertoire <em>lua</em> à la racine de votre linker.</p><aside id="r-513702" data-claire-element-id="513702" data-claire-semantic="warning"><p id="r-513701" data-claire-element-id="513701">Copiez bien le dossier <em>lua</em> à la racine de votre linker ! En revanche, vous pouvez mettre où vous voulez l'exécutable.</p></aside><p id="r-513703" data-claire-element-id="513703">Dans ce fameux dossier <em>lua</em>, vous trouverez le dossier <em>libs</em>, qui contient à juste titre les fichiers que MicroLua utilise, ainsi que le dossier <em>scripts</em> : c'est celui qui est prévu pour contenir vos scripts Lua, bien qu'il ne soit pas obligatoire de les mettre là. Ce répertoire contient des exemples d'utilisation des fonctions que nous allons voir.<br/> C'est aussi dans <em>libs</em> que se trouve le <em>shell</em> de µLua. C'est l'interface noire avec des écritures jaunes que vous voyez en le lançant ; vous pouvez le remplacer sans aucun problème par un des shells qui se trouvent sur le forum.</p><p id="r-513704" data-claire-element-id="513704">Vous devriez avoir une arborescence comme ceci :</p><ul id="r-513718" data-claire-element-id="513718"><li id="r-513706" data-claire-element-id="513706"><p id="r-513705" data-claire-element-id="513705"><em>Racine de votre carte</em></p></li><ul id="r-513717" data-claire-element-id="513717"><li id="r-513708" data-claire-element-id="513708"><p id="r-513707" data-claire-element-id="513707">lua</p></li><ul id="r-513716" data-claire-element-id="513716"><li id="r-513710" data-claire-element-id="513710"><p id="r-513709" data-claire-element-id="513709">libs</p></li><li id="r-513712" data-claire-element-id="513712"><p id="r-513711" data-claire-element-id="513711">scripts</p></li><ul id="r-513715" data-claire-element-id="513715"><li id="r-513714" data-claire-element-id="513714"><p id="r-513713" data-claire-element-id="513713">Examples</p></li></ul></ul></ul></ul><p id="r-513719" data-claire-element-id="513719">Et votre exécutable quelque part dans votre carte.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
<span class="arrow"></span>
<span class="next">Introduction à MicroLua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
<span class="next">Test de MicroLua</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TestdeMicroLua"></a><h2>Test de MicroLua</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
<span class="arrow"></span>
<span class="next">Installation de MicroLua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">
<span class="next">Les bases de la programmation avec Lua</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-test-de-microlua" data-claire-element-id="513733">Test de MicroLua</h4><h5 id="r-hello-world-ou-pas" data-claire-element-id="513728"><em>Hello World!</em>... ou pas</h5><aside id="r-513722" data-claire-element-id="513722" data-claire-semantic="information"><p id="r-513721" data-claire-element-id="513721">Nous allons maintenant vérifier le bon fonctionnement de µLua.</p></aside><p id="r-513723" data-claire-element-id="513723">Créez le fichier <em>test.lua</em> dans le dossier <em>lua/scripts</em>, et copiez/collez-y le code suivant :</p><pre id="r-513724" data-claire-element-id="513724"><code data-claire-semantic="lua">while not Keys.held.Start do
        Controls.read()

	screen.print(SCREEN_UP, 0, 0, &quot;O.K. !&quot;)

	render()
end</code></pre><p id="r-513725" data-claire-element-id="513725">Ne vous inquiétez pas de la signification de ce code : nous verrons ça plus tard.</p><p id="r-513726" data-claire-element-id="513726">Démarrez votre DS et lancez votre linker. Lancez le fichier <em>microlua.nds</em> (ou celui qui correspond à votre linker) puis sélectionnez le fichier <em>test.lua</em> dans la liste (avec la croix directionnelle) et appuyez sur A.</p><p id="r-513727" data-claire-element-id="513727">Si vous voyez &quot;O.K. !&quot; sur l'écran du haut c'est que tout fonctionne : vous pouvez alors éteindre votre DS, sauter de joie et courir partout dans votre maison, et même à poil dans la rue (nan, mais revenez quand même :-° ).</p><h5 id="r-ca-marche-pas" data-claire-element-id="513732">Ça marche pas !</h5><p id="r-513729" data-claire-element-id="513729">En général, MicroLua marche tout de suite correctement. Cependant, il est possible que vous ayez l'erreur &quot;couldn't open libs.lua&quot;. Elle signifie que MicroLua ne peut pas trouver le fichier <em>libs.lua</em>, qui doit être placé dans le dossier <em>/lua</em>. Vérifiez donc que votre arborescence est correcte.</p><aside id="r-513731" data-claire-element-id="513731" data-claire-semantic="information"><p id="r-513730" data-claire-element-id="513730">On a maintenant installé µLua et nous l'avons testé, il ne nous reste donc plus qu'à apprendre à programmer :ninja:</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
<span class="arrow"></span>
<span class="next">Installation de MicroLua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">
<span class="next">Les bases de la programmation avec Lua</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesbasesdelaprogrammationavecLua"></a><h2>Les bases de la programmation avec Lua</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
<span class="arrow"></span>
<span class="next">Test de MicroLua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
<span class="next">Les bases de la programmation en Lua (1)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-513735" data-claire-element-id="513735">Je vais maintenant vous apprendre les bases de la programmation Lua, et rattacher tout ça à µLua.<br/> C'est une partie tout ce qu'il y a de plus théorique, mais c'est obligatoire. Désolé :)</p>
</div><a name="LesbasesdelaprogrammationenLua1"></a><h2>Les bases de la programmation en Lua (1)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">
<span class="arrow"></span>
<span class="next">Les bases de la programmation avec Lua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
<span class="next">Les bases de la programmation en Lua (2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-bases-de-la-programmation-en-lua-1" data-claire-element-id="513779">Les bases de la programmation en Lua (1)</h4><p id="r-513736" data-claire-element-id="513736">Cette partie explique les bases de la programmation en <strong>Lua</strong>. Vous n'y apprendrez rien qui concerne directement µLua, cependant c'est indispensable. Les connaisseurs du langage Lua peuvent quant à eux directement passer à la partie &quot;Et pour MicroLua ?&quot;.</p><h5 id="r-les-commentaires-23" data-claire-element-id="513739">Les commentaires</h5><p id="r-513737" data-claire-element-id="513737">Pour écrire un commentaire en Lua, c'est très simple :</p><pre id="r-513738" data-claire-element-id="513738"><code data-claire-semantic="lua">-- Ça, c'est un commentaire

Ici, des instructions      -- Et là, un commentaire en fin de ligne

--[[ Et ça, c'est
un commentaire sur plusieurs lignes ]]--</code></pre><h5 id="r-les-variables-34" data-claire-element-id="513778">Les variables</h5><p id="r-513740" data-claire-element-id="513740">En Lua, comme dans la plupart des langages, on affecte une variable de cette façon :</p><pre id="r-513741" data-claire-element-id="513741"><code data-claire-semantic="lua">variable = valeur</code></pre><p id="r-513742" data-claire-element-id="513742">Il est aussi possible d'affecter plusieurs variables en même temps :</p><pre id="r-513743" data-claire-element-id="513743"><code data-claire-semantic="lua">i, j = 1, 2
-- Et on peut même échanger les valeurs en une seule ligne !
i, j = j, i</code></pre><p id="r-513744" data-claire-element-id="513744">Et comme dans la plupart des langages (tous ?), Lua est sensible à la casse, c'est-à-dire que <em>variable</em>, <em>VARIABLE</em> et <em>vARiaBlE</em> sont trois variables différentes.</p><p id="r-513745" data-claire-element-id="513745">A la base, toutes les variables sont globales, mais vous pouvez définir une variable locale à un bloc d'instructions (voir à la partie suivante) grâce au mot clé <em>local</em>. La portée des variables n'étant pas une notion essentielle pour coder avec µLua, je ne développerai pas ce point.</p><h6 id="r-les-nombres-5" data-claire-element-id="513750">Les nombres</h6><p id="r-513746" data-claire-element-id="513746">Rien de bien particulier :</p><pre id="r-513747" data-claire-element-id="513747"><code data-claire-semantic="lua">variable = 12
variable2 = 45.72</code></pre><p id="r-513748" data-claire-element-id="513748">Mis à part le fait qu'il n'y a pas de moyen pour incrémenter ou décrémenter une variable rapidement (<em>variable++</em> ou <em>variable--</em> par exemple en C). Vous serez obligés de faire :</p><pre id="r-513749" data-claire-element-id="513749"><code data-claire-semantic="lua">variable = variable + 1
variable = variable - 1
-- Et pas non plus d'opérateurs +=, -=, etc. !</code></pre><h6 id="r-les-chaines-de-caracteres-18" data-claire-element-id="513757">Les chaînes de caractères</h6><p id="r-513751" data-claire-element-id="513751">Les chaînes de caractères (ou strings) sont délimitées par des guillemets (&quot;&quot;), des apostrophes (''), voire même des doubles-crochets ([[]]). Cette dernière notation permet de présenter des strings sur plusieurs lignes, cependant elle ne permet pas l'insertion de caractères spéciaux ; un équivalent à cette notation est l'utilisation de l'antislash &quot;\&quot; en fin de ligne pour écrire un String sur plusieurs lignes (et là vous pouvez mettre des caractères spéciaux ;) ) :</p><pre id="r-513752" data-claire-element-id="513752"><code data-claire-semantic="lua">string = &quot;Chaîne\
sur deux lignes.&quot;</code></pre><p id="r-513753" data-claire-element-id="513753">Comme dans de nombreux langages, on représente le retour à la ligne avec &quot; &quot;.</p><p id="r-513754" data-claire-element-id="513754">Un petit mot sur la concaténation : ce terme barbare signifie que l'on rassemble plusieurs variables en une seule. Elle peut se faire pour des tables grâce à une fonction, mais c'est surtout utile pour les strings. Pour concaténer deux chaînes, on fait comme ceci :</p><pre id="r-513755" data-claire-element-id="513755"><code data-claire-semantic="lua">string = chaine..&quot;du texte&quot;..chaine2</code></pre><p id="r-513756" data-claire-element-id="513756">Comme vous le voyez, on utilise deux points &quot;..&quot; pour relier les chaînes.</p><h6 id="r-les-tableaux-36" data-claire-element-id="513764">Les tableaux</h6><p id="r-513758" data-claire-element-id="513758">Les listes, ou tableaux, sont appelés <strong>tables</strong> en Lua, et sont délimités par des accolades. Les éléments sont séparés par des virgules ou des points-virgules.<br/> Lua est très souple, vous pouvez mettre n'importe quel type de variable dans les tables (nombres, strings, d'autres tables, et même des fonctions, qui sont considérées en Lua comme des variables), excepté bien évidemment le type <em>nil</em>.<br/> Vous pouvez accéder à un élément de la table en faisant :</p><pre id="r-513759" data-claire-element-id="513759"><code data-claire-semantic="lua">table[index]</code></pre><pre id="r-513760" data-claire-element-id="513760"><code data-claire-semantic="lua">table = {stringCle = valeur, [fonction] = valeur2} -- Notez les crochets pour un index du type fonction

-- Et pour y accéder :
table[&quot;stringCle&quot;] = 123
table.stringCle = 123 -- Ça marche aussi, j'en reparlerai plus tard
var = table[fonction]</code></pre><p id="r-513761" data-claire-element-id="513761">&lt;/information&gt;</p><aside id="r-513763" data-claire-element-id="513763" data-claire-semantic="error"><p id="r-513762" data-claire-element-id="513762">Mais attention : Lua est rebelle, et les indices numériques des tables commencent à <strong>1</strong>, et non pas à 0 comme dans la plupart des langages.</p></aside><h6 id="r-les-booleens-6" data-claire-element-id="513768">Les booléens</h6><p id="r-513765" data-claire-element-id="513765">Les booléens en Lua, ce sont deux valeurs : <em>true</em> et <em>false</em>.</p><pre id="r-513766" data-claire-element-id="513766"><code data-claire-semantic="lua">vrai = true
faux = false
-- Attention, il n'y a pas de guillemets autour !</code></pre><p id="r-513767" data-claire-element-id="513767">Au passage, pour Lua, tout ce qui ne vaut pas <em>false</em> ou <em>nil</em> (à voir juste après) vaut <em>true</em>. Autrement dit, le nombre 0, ou même un string ou une table vide valent <em>true</em>.</p><h6 id="r-les-userdatas" data-claire-element-id="513773">Les userdatas</h6><p id="r-513769" data-claire-element-id="513769">Les userdatas sont la représentation en Lua des structures en C (il faut savoir que Lua est très lié au C, il possède par exemple une API complète de contrôle en C). Elles contiennent donc des variables. Et comme les fonctions sont des variables... Les userdatas peuvent être utilisées comme des classes d'objets pour une orientation POO de Lua :) <br/> Vous trouverez donc des variables du style :</p><pre id="r-513770" data-claire-element-id="513770"><code data-claire-semantic="lua">Objet.attribut.sousAttribut    -- Un objet avec plein d'attributs
Objet.methode()                 -- Un objet avec une méthode
Objet:methode2()                -- Une autre façon d'appeler une méthode</code></pre><aside id="r-513772" data-claire-element-id="513772" data-claire-semantic="warning"><p id="r-513771" data-claire-element-id="513771">A vrai dire, pour que l'appel avec un seul point soit équivalent à celui avec les deux points, il faut passer en argument à <em>Objet.methode()</em><em>self</em> ; en effet, l'appel <em>Objet:methode()</em> donne implicitement en argument l'objet parent, désigné par le mot-clé <em>self</em>.</p></aside><h6 id="r-le-nil" data-claire-element-id="513777">Le <em>nil</em></h6><p id="r-513774" data-claire-element-id="513774"><em>nil</em>, c'est la valeur vide. Si une variable vaut nil, elle ne vaut rien. C'est un peu le <em>NULL</em> des pointeurs en C, sauf que <em>nil</em> s'utilise pour toutes les variables.</p><aside id="r-513776" data-claire-element-id="513776" data-claire-semantic="information"><p id="r-513775" data-claire-element-id="513775">La doc officielle de Lua décrit aussi le type thread, qui représente un sous-processus du programme en Lua, mais il n'a pas d'utilité sur la Nintendo DS, qui a une architecture différente de celle d'un PC (et qui a surtout un processeur à 66MHz :-° ).</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">
<span class="arrow"></span>
<span class="next">Les bases de la programmation avec Lua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
<span class="next">Les bases de la programmation en Lua (2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesbasesdelaprogrammationenLua2"></a><h2>Les bases de la programmation en Lua (2)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
<span class="arrow"></span>
<span class="next">Les bases de la programmation en Lua (1)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
<span class="next">Et pour MicroLua ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-bases-de-la-programmation-en-lua-2" data-claire-element-id="513851">Les bases de la programmation en Lua (2)</h4><h5 id="r-les-operateurs-5" data-claire-element-id="513826">Les opérateurs</h5><h6 id="r-mathematiques-3" data-claire-element-id="513793">Mathématiques</h6><p id="r-513780" data-claire-element-id="513780">En Lua, il y a les cinq opérateurs de calcul &quot;classiques&quot; :</p><ul id="r-513791" data-claire-element-id="513791"><li id="r-513782" data-claire-element-id="513782"><p id="r-513781" data-claire-element-id="513781">addition : <strong>+</strong></p></li><li id="r-513784" data-claire-element-id="513784"><p id="r-513783" data-claire-element-id="513783">soustraction : <strong>-</strong></p></li><li id="r-513786" data-claire-element-id="513786"><p id="r-513785" data-claire-element-id="513785">division : <strong>/</strong></p></li><li id="r-513788" data-claire-element-id="513788"><p id="r-513787" data-claire-element-id="513787">multiplication : <strong>*</strong></p></li><li id="r-513790" data-claire-element-id="513790"><p id="r-513789" data-claire-element-id="513789">modulo : <strong>%</strong></p></li></ul><p id="r-513792" data-claire-element-id="513792">Il y a aussi &quot;^&quot;, pour représenter une puissance.</p><h6 id="r-de-comparaison" data-claire-element-id="513809">De comparaison</h6><ul id="r-513806" data-claire-element-id="513806"><li id="r-513795" data-claire-element-id="513795"><p id="r-513794" data-claire-element-id="513794">Est égal à : ==</p></li><li id="r-513797" data-claire-element-id="513797"><p id="r-513796" data-claire-element-id="513796">Est différent de : ~=</p></li><li id="r-513799" data-claire-element-id="513799"><p id="r-513798" data-claire-element-id="513798">Est supérieur à : &gt;</p></li><li id="r-513801" data-claire-element-id="513801"><p id="r-513800" data-claire-element-id="513800">Est inférieur à : &lt;</p></li><li id="r-513803" data-claire-element-id="513803"><p id="r-513802" data-claire-element-id="513802">Est supérieur ou égal à : &gt;=</p></li><li id="r-513805" data-claire-element-id="513805"><p id="r-513804" data-claire-element-id="513804">Est inférieur ou égal à : &lt;=</p></li></ul><aside id="r-513808" data-claire-element-id="513808" data-claire-semantic="warning"><p id="r-513807" data-claire-element-id="513807">L'opérateur d'égalité comporte DEUX signes égal &quot;=&quot;. Notez aussi que contrairement à beaucoup de langages, l'opérateur &quot;différent de&quot; est &quot;~=&quot; et non pas &quot;!=&quot;.</p></aside><h6 id="r-l-operateur-de-longueur" data-claire-element-id="513813">L'opérateur de longueur</h6><p id="r-513810" data-claire-element-id="513810">Cet opérateur est particulier à Lua : le symbole dièse &quot;#&quot; représente la longueur d'une variable possédant des éléments, autrement dit la longueur d'une table ou d'un string.</p><p id="r-513811" data-claire-element-id="513811">Exemple :</p><pre id="r-513812" data-claire-element-id="513812"><code data-claire-semantic="lua">chaine = &quot;bla bla&quot;
tableau = {0, &quot;Hey !&quot;, 36.12, fonction}

#chaine    -- Donne 7
#tableau   -- Donne 4</code></pre><h6 id="r-l-operateur-de-concatenation" data-claire-element-id="513816">L'opérateur de concaténation</h6><p id="r-513814" data-claire-element-id="513814">Ce n'est pas un &quot;+&quot; ; en Lua, on effectue une concaténation avec &quot;..&quot; :</p><pre id="r-513815" data-claire-element-id="513815"><code data-claire-semantic="lua">chaine1 = &quot;Bonjour, &quot;
chaine2 = &quot;ça va ?&quot;

chaine3 = chaine1..&quot;est-ce que &quot;..chaine2    -- chaine3 vaut &quot;Bonjour, est-ce que ça va ?&quot;</code></pre><h6 id="r-operateurs-logiques-3" data-claire-element-id="513825">Opérateurs logiques</h6><p id="r-513817" data-claire-element-id="513817">Ce sont les mots anglais pour dire &quot;ou&quot;, &quot;et&quot;, et &quot;non&quot; :</p><ul id="r-513824" data-claire-element-id="513824"><li id="r-513819" data-claire-element-id="513819"><p id="r-513818" data-claire-element-id="513818">Ou : <em>or</em></p></li><li id="r-513821" data-claire-element-id="513821"><p id="r-513820" data-claire-element-id="513820">Et : <em>and</em></p></li><li id="r-513823" data-claire-element-id="513823"><p id="r-513822" data-claire-element-id="513822">Non (inverser le résultat de l'expression) : <em>not</em></p></li></ul><h5 id="r-les-mots-cles-des-blocs-d-instructions" data-claire-element-id="513844">Les mots-clés des blocs d'instructions</h5><p id="r-513827" data-claire-element-id="513827">Un bloc d'instruction est un ensemble d'instructions plus ou moins séparées des autres. Un bloc délimite aussi la &quot;zone&quot; dans laquelle une variable locale est accessible.</p><h6 id="r-blocs-conditionnels" data-claire-element-id="513830">Blocs conditionnels</h6><p id="r-513828" data-claire-element-id="513828">Une condition se construit de cette façon :</p><pre id="r-513829" data-claire-element-id="513829"><code data-claire-semantic="lua">if &lt;condition&gt; then        -- si &lt;condition&gt; alors
	&lt;instructions&gt;
elseif &lt;condition2&gt; then   -- sinon si &lt;condition2&gt; alors
	&lt;instructions&gt;
elseif &lt;condition3&gt; then
	&lt;...&gt;
else                       -- sinon
	&lt;instructions&gt;
end                        -- fin de la condition</code></pre><h6 id="r-boucles-4" data-claire-element-id="513843">Boucles</h6><p id="r-513831" data-claire-element-id="513831">Il y a en tout trois types de boucles en Lua. Tout d'abord, deux premières que j'appellerai &quot;classiques&quot; :</p><pre id="r-513832" data-claire-element-id="513832"><code data-claire-semantic="lua">while &lt;condition&gt; do      -- tant que &lt;condition&gt; faire
	&lt;instructions&gt;
end                       -- fin de la boucle

repeat                    -- répéter
	&lt;instructions&gt;
until &lt;condition&gt;         -- jusqu'à ce que</code></pre><p id="r-513833" data-claire-element-id="513833">Ces deux boucles sont sensiblement identiques, sauf que dans le cas de la seconde, la condition de sortie de la boucle est évaluée à la fin de chaque tour, et non au début. Ce qui signifie que, quoi qu'il arrive, les instructions de la boucle <em>repeat ... until</em> seront exécutées au moins une fois.</p><p id="r-513834" data-claire-element-id="513834">La troisième boucle est la boucle <em>for</em> :</p><pre id="r-513835" data-claire-element-id="513835"><code data-claire-semantic="lua">for &lt;variable&gt; [= &lt;borne&gt;, &lt;borne&gt;, &lt;pas&gt;] [in &lt;iterateur&gt;] do    -- Pour &lt;variable&gt; [qui prend les valeurs &lt;borne&gt; à &lt;borne&gt;, en allant de &lt;pas&gt; en &lt;pas&gt;] [dans &lt;iterateur&gt;] faire
	&lt;instructions&gt;
end</code></pre><p id="r-513836" data-claire-element-id="513836">Celle-ci est un peu particulière.<br/> Tout d'abord, voyons le cas sans itérateur : à chaque tour de boucle, <em>variable</em> va prendre une nouvelle valeur (sa valeur précédente plus le pas, qui peut être négatif). On sort de la boucle dès que l'on a atteint la deuxième borne.</p><p id="r-513837" data-claire-element-id="513837">Et avec un itérateur...</p><div id="r-513839" data-claire-element-id="513839" data-claire-semantic="question"><p id="r-513838" data-claire-element-id="513838">Houlàààààà, c'est quoi un itérateur ? :euh:</p></div><p id="r-513840" data-claire-element-id="513840">Bonne question. Je vous enjoins à lire <a href="http://www.lua.org/manual/5.1/manual.html#pdf-next">cette page</a> (en anglais, désolé), qui vous explique le fonctionnement de la fonction <em>next</em> ; cette fonction permet de &quot;traverser une table ou assimilé&quot;. En fait, à chaque fois que cette fonction est appelée, avec en argument une table, elle retourne la valeur suivante de la table ainsi que son index. On appelle ça un itérateur. Regardez aussi les fonctions <em>ipairs</em> et <em>pairs</em> (sur le même site).<br/> Ainsi, pour comparer avec ce qu'on a dit plus haut, à chaque tour <em>variable</em> prend la valeur suivante dans la table. On sort de la boucle quand on a fait un tour de boucle avec la dernière valeur.</p><p id="r-513841" data-claire-element-id="513841">Enfin, sachez que toutes ces boucles peuvent être &quot;cassées&quot; à l'aide de l'instruction <em>break</em>, c'est-à-dire qu'elles sont arrêtées.</p><p id="r-513842" data-claire-element-id="513842">Il y a aussi le bloc d'instructions do &lt;instructions&gt; end, qui... ne fait rien si ce n'est exécuter les instructions. Il ne sert qu'à délimiter un bloc.</p><h5 id="r-les-fonctions-26" data-claire-element-id="513850">Les fonctions</h5><p id="r-513845" data-claire-element-id="513845">Les fonctions, c'est tout simple :</p><pre id="r-513846" data-claire-element-id="513846"><code data-claire-semantic="lua">-- Déclaration de la fonction
function nomDeLaFonction(arguments, attendus)
	&lt;instructions&gt;
	return variable, autreVariable     -- instruction pour retourner une voire PLUSIEURS variables
end

-- Appel de la fonction
retour1, retour2 = nomDeLaFonction(arg1, arg2)</code></pre><aside id="r-513848" data-claire-element-id="513848" data-claire-semantic="information"><p id="r-513847" data-claire-element-id="513847">Vous avez pu apercevoir une autre des libertés de µLua : une fonction peut retourner plusieurs valeurs. Mais elle peut très bien n'en retourner qu'une seule, ou même aucune :)</p></aside><p id="r-513849" data-claire-element-id="513849">Bien, je crois n'avoir rien oublié. C'est un peu condensé, peut-être pas très clair, mais je dois vous apprendre µLua moi, pas le Lua ! Namého.<br/> ...<br/> Quoi qu'il en soit, si vous avez besoin d'aide, deux sites utiles : <a href="http://www.lua.org/manual/5.1/index.html">la doc officielle de Lua (en anglais)</a> et <a href="http://lua-users.org/wiki/TutorialDirectory">des tutoriels sur le wiki Lua (en anglais)</a>. Et bien sûr, le forum du SdZ ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
<span class="arrow"></span>
<span class="next">Les bases de la programmation en Lua (1)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
<span class="next">Et pour MicroLua ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="EtpourMicroLua"></a><h2>Et pour MicroLua ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
<span class="arrow"></span>
<span class="next">Les bases de la programmation en Lua (2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">
<span class="next">Le BA.-Ba de MicroLua</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-et-pour-microlua" data-claire-element-id="513874">Et pour MicroLua ?</h4><p id="r-513852" data-claire-element-id="513852">Et pour MicroLua, deux choses :</p><h5 id="r-detruisez-vos-variables-a-la-fin-de-vos-programmes" data-claire-element-id="513857">Détruisez vos variables à la fin de vos programmes !</h5><p id="r-513853" data-claire-element-id="513853">Il faut savoir que notre pauvre DS ne possède pas beaucoup de mémoire, du moins pas assez pour la gâcher. Il faut donc la libérer à la fin de vos programmes, pour la laisser libre aux autres.</p><p id="r-513854" data-claire-element-id="513854">Vous vous souvenez de <em>nil</em> ? La &quot;valeur rien&quot;. Et bien, c'est ici qu'elle va nous être utile.<br/> En effet, pour détruire une variable, il suffit de faire :</p><pre id="r-513855" data-claire-element-id="513855"><code data-claire-semantic="lua">variable = nil</code></pre><p id="r-513856" data-claire-element-id="513856">A la fin du code, et ce pour toutes les variables globales (les variables locales sont détruites automatiquement à la fin de leur bloc d'instructions). Il y a aussi des façons spécifiques à certains types de variables spéciales pour les détruire, qui seront décrites en temps voulu.<br/> En fait, ça ne les détruit pas à proprement parler : le fait de les rendre &quot;vides&quot; fait comprendre à Lua qu'il peut les détruire en faisant ce que l'on appelle un <em>garbage collect</em> (littéralement &quot;collecte d'ordure&quot;). Cette action est réalisée de façon assez aléatoire, mais on peut la demander avec la fonction <em>collectgarbage(&quot;collect&quot;)</em></p><h5 id="r-d-autres-types-de-variables" data-claire-element-id="513873">D'autres types de variables</h5><p id="r-513858" data-claire-element-id="513858">MicroLua définit d'autres types de variables relativement variés :</p><h6 id="r-color-1" data-claire-element-id="513860">Color</h6><p id="r-513859" data-claire-element-id="513859">Ouaip, ces variables contiennent une couleur. On verra ça plus loin...</p><h6 id="r-image-2" data-claire-element-id="513862">Image</h6><p id="r-513861" data-claire-element-id="513861">MicroLua définit un type pour les images. On verra ça plus loin...</p><h6 id="r-font" data-claire-element-id="513864">Font</h6><p id="r-513863" data-claire-element-id="513863">Ca, c'est une variable de police d'écriture. On verra ça plus loin...</p><h6 id="r-map-et-scrollmap" data-claire-element-id="513866">Map et ScrollMap</h6><p id="r-513865" data-claire-element-id="513865">Ces deux types de variables correspondent à des cartes et cartes défilantes. On verra ça plus... comment vous avez deviné ? :o</p><h6 id="r-canvas-et-canvas-object" data-claire-element-id="513868">Canvas et Canvas object</h6><p id="r-513867" data-claire-element-id="513867">Nous verrons plus loin ces variables qui correspondent respectivement à des canevas (des zones pour le dessin ultra-rapide) et des objets de canevas.<br/>(vous voyez je change un peu :ange: )</p><h6 id="r-datetime-2" data-claire-element-id="513872">DateTime</h6><p id="r-513869" data-claire-element-id="513869">Objet représentant... une date ! On verra ça plus loin...</p><p id="r-513870" data-claire-element-id="513870">Voilà donc les types de variables spécifiques à MicroLua.<br/>(vive le copier/coller ! \o/ Nan, je rigole)</p><p id="r-513871" data-claire-element-id="513871">Vous avez maintenant les bases de la programmation avec Lua, et ce qui en découle en µLua. C'est maintenant que ça va devenir vraiment intéressant. Enfin, ça l'était déjà avant, n'est-ce pas ? :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
<span class="arrow"></span>
<span class="next">Les bases de la programmation en Lua (2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">
<span class="next">Le BA.-Ba de MicroLua</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LeBA.-BadeMicroLua"></a><h2>Le BA.-Ba de MicroLua</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
<span class="arrow"></span>
<span class="next">Et pour MicroLua ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
<span class="next">Généralités sur les fonctions de dessin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-513876" data-claire-element-id="513876">Bon, maintenant que tout le monde est au point avec Lua, passons à µLua (parce que c'est pas tout ça, mais on n'a toujours rien vu sur µLua...) !</p><p id="r-513877" data-claire-element-id="513877">Faites chauffer Notepad++ ou Vim ou autre (j'suis pas raciste :) ), c'est parti !</p>
</div><a name="Gnralitssurlesfonctionsdedessin"></a><h2>Généralités sur les fonctions de dessin</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">
<span class="arrow"></span>
<span class="next">Le BA.-Ba de MicroLua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
<span class="next">Afficher du texte à l&#039;écran</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-generalites-sur-les-fonctions-de-dessin" data-claire-element-id="513951">Généralités sur les fonctions de dessin</h4><h5 id="r-description-generale-des-fonctions-de-dessin" data-claire-element-id="513894">Description générale des fonctions de dessin</h5><p id="r-513878" data-claire-element-id="513878">De manière générale, les fonctions de dessin de µLua se présentent de cette manière :</p><pre id="r-513879" data-claire-element-id="513879"><code data-claire-semantic="lua">screen.FONCTION(écran, coordonnées, contenu, couleur)</code></pre><p id="r-513880" data-claire-element-id="513880">Dans l'ordre :</p><ul id="r-513893" data-claire-element-id="513893"><li id="r-513882" data-claire-element-id="513882"><p id="r-513881" data-claire-element-id="513881"><em>screen</em> : c'est la table qui contient les fonctions d'affichage primaires</p></li><li id="r-513884" data-claire-element-id="513884"><p id="r-513883" data-claire-element-id="513883">FONCTION : c'est le nom de la fonction (logique :) )</p></li><li id="r-513886" data-claire-element-id="513886"><p id="r-513885" data-claire-element-id="513885">écran : argument permettant de choisir l'écran de dessin</p></li><li id="r-513888" data-claire-element-id="513888"><p id="r-513887" data-claire-element-id="513887">coordonnées : pour que MicroLua sache où dessiner sur l'écran ;) Ça peut aller d'un seul couple (x, y) (du texte par exemple) jusqu'à deux couples (lignes, rectangles...)</p></li><li id="r-513890" data-claire-element-id="513890"><p id="r-513889" data-claire-element-id="513889">contenu : disons que pour les fonctions qui ne se contentent pas de dessiner des formes, c'est l'élément principal (le contenu du texte, l'image à afficher, etc.)</p></li><li id="r-513892" data-claire-element-id="513892"><p id="r-513891" data-claire-element-id="513891">couleur : argument pour choisir la couleur du dessin</p></li></ul><h5 id="r-reperage-sur-la-surface-de-dessin" data-claire-element-id="513923">Repérage sur la surface de dessin</h5><h6 id="r-quel-ecran" data-claire-element-id="513907">Quel écran ?</h6><p id="r-513895" data-claire-element-id="513895">Déjà, pour afficher quelque chose, il faut savoir où le mettre.</p><p id="r-513896" data-claire-element-id="513896">Pour choisir entre les écrans, ça n'est pas bien compliqué (il n'y en a que deux après tout :p ) :</p><ul id="r-513901" data-claire-element-id="513901"><li id="r-513898" data-claire-element-id="513898"><p id="r-513897" data-claire-element-id="513897">L'écran du haut est SCREEN_UP</p></li><li id="r-513900" data-claire-element-id="513900"><p id="r-513899" data-claire-element-id="513899">Celui du bas est SCREEN_DOWN</p></li></ul><p id="r-513902" data-claire-element-id="513902">Ces variables prennent place dans l'argument <em>écran</em> vu ci-dessus.</p><aside id="r-513904" data-claire-element-id="513904" data-claire-semantic="information"><p id="r-513903" data-claire-element-id="513903">Ces variables sont en fait des &quot;constantes&quot; prédéfinies par µLua (&quot;constantes&quot; entre guillemets car il n'existe pas de vraies constantes en Lua ; disons que ce sont des mnémoniques plus pratiques mais plus long à utiliser que les chiffres directs ;) ). Toutes les &quot;constantes&quot; sont décrites au début de la doc.</p></aside><aside id="r-513906" data-claire-element-id="513906" data-claire-semantic="warning"><p id="r-513905" data-claire-element-id="513905">Attention à bien taper ces variables tout en majuscules !</p></aside><h6 id="r-reperage-dans-l-ecran" data-claire-element-id="513922">Repérage dans l'écran</h6><p id="r-513908" data-claire-element-id="513908">Pour se situer sur les écrans de la DS, on utilise les abscisses et les ordonnées, en partant du coin en haut à gauche de l'écran. Ces écrans sont larges de 256 pixels et hauts de 192 pixels.</p><p id="r-513909" data-claire-element-id="513909">La démo en image ;) :</p><figure id="r-513911" data-claire-element-id="513912"><img id="r-513910" data-claire-element-id="513910" src="medias/uploads.siteduzero.com_files_178001_179000_178653.png" alt="Image utilisateur"/></figure><p id="r-513913" data-claire-element-id="513913">(il va de soi que c'est la même chose pour l'écran du bas :-° )</p><p id="r-513914" data-claire-element-id="513914">Vous remarquerez aussi que ce tuto ne brille pas par la qualité de ses images :)</p><div id="r-513916" data-claire-element-id="513916" data-claire-semantic="question"><p id="r-513915" data-claire-element-id="513915">Attends, y a un problème : si ça commence à zéro, et s'il y a 256px de long sur 192px de haut, les coordonnées maximales devraient être 255 et 191, et non pas 256 et 192 !</p></div><p id="r-513917" data-claire-element-id="513917">Oui mais non. Imaginez une feuille quadrillée (ou prenez-en une, comme ça vous pourrez voir par vous-mêmes ^^ ) ; on prend une partie de cette feuille qui fait dix carreaux de long sur quatre de haut. Chaque carreau représente un pixel. Les coordonnées désignent logiquement les intersections des lignes ; à partir de là, je pense que vous voyez où je veux en venir : si le point tout en haut à gauche est (0, 0), alors le point tout en bas à droite est (10, 4), ce qui correspond bien à la taille du rectangle.</p><p id="r-513918" data-claire-element-id="513918">Convaincus ? Non ? &gt;_<br/> Bon, alors essayez ça (vous allez voir bientôt la signification de ce code) :</p><pre id="r-513919" data-claire-element-id="513919"><code data-claire-semantic="lua">while true do
	screen.drawRect(SCREEN_UP, 0, 0, 256, 192, Color.new(31, 31, 31))
	screen.drawRect(SCREEN_UP, 0, 0, 255, 191, Color.new(31, 0, 0))
	render()
end</code></pre><p id="r-513920" data-claire-element-id="513920">Ce code dessine deux rectangles vides, l'un blanc et l'autre rouge, de coordonnées respectives (coin haut-gauche puis coin bas-droit) ((0, 0),(256, 192)), et ((0, 0),(255, 191)). Que remarque-t-on ? Que le rectangle blanc colle au bord de l'écran, contrairement au rectangle rouge :)</p><p id="r-513921" data-claire-element-id="513921">Maintenant que nous avons mis les choses au point, nous pouvons continuer.</p><h5 id="r-les-couleurs-15" data-claire-element-id="513950">Les couleurs</h5><p id="r-513924" data-claire-element-id="513924">Pur gérer les couleurs, MicroLua utilise un type particulier : le type <em>Color</em>. Pour colorer vos dessins, vous devrez passer une variable de ce type à la fonction.</p><p id="r-513925" data-claire-element-id="513925">Afin de créer une telle variable, vous devez taper ceci :</p><pre id="r-513926" data-claire-element-id="513926"><code data-claire-semantic="lua">couleur = Color.new(r, g, b)</code></pre><p id="r-513927" data-claire-element-id="513927">Chaque argument correspond à un masque de couleur (<em>r</em> pour <em>red</em>, ou rouge, <em>g</em> pour <em>green</em>, ou vert, et enfin <em>b</em> pour <em>blue</em>, ou bleu).</p><p id="r-513928" data-claire-element-id="513928">Une particularité de MicroLua est de devoir donner ces masques avec des valeurs allant de 0 à 31, plutôt que jusqu'à 255 comme souvent.</p><p id="r-513929" data-claire-element-id="513929">Voici une petite liste de quelques couleurs :</p><ul id="r-513944" data-claire-element-id="513944"><li id="r-513931" data-claire-element-id="513931"><p id="r-513930" data-claire-element-id="513930">bleu = <em>Color.new(0, 0, 31)</em></p></li><li id="r-513933" data-claire-element-id="513933"><p id="r-513932" data-claire-element-id="513932">rouge = <em>Color.new(31, 0, 0)</em></p></li><li id="r-513935" data-claire-element-id="513935"><p id="r-513934" data-claire-element-id="513934">vert = <em>Color.new(0, 31, 0)</em></p></li><li id="r-513937" data-claire-element-id="513937"><p id="r-513936" data-claire-element-id="513936">orange = <em>Color.new(31, 17, 0)</em></p></li><li id="r-513939" data-claire-element-id="513939"><p id="r-513938" data-claire-element-id="513938">noir = <em>Color.new(0, 0, 0)</em></p></li><li id="r-513941" data-claire-element-id="513941"><p id="r-513940" data-claire-element-id="513940">blanc = <em>Color.new(31, 31, 31)</em></p></li><li id="r-513943" data-claire-element-id="513943"><p id="r-513942" data-claire-element-id="513942">jaune = <em>Color.new(31, 31, 0)</em></p></li></ul><div id="r-513946" data-claire-element-id="513946" data-claire-semantic="question"><p id="r-513945" data-claire-element-id="513945">C'est quand même carrément pas pratique !</p></div><p id="r-513947" data-claire-element-id="513947">En fait, cette &quot;limitation&quot; vient de la µLibrary, qui code ses couleurs sur 5 bits au lieu de 8, donc on n'y peut rien.<br/> Il n'empêche que c'est vrai, c'est donc pour ça qu'il existe aussi la fonction <em>Color.new256()</em>, qui requiert les mêmes arguments et s'utilise de la même façon, sauf que cette fois-ci vous pouvez donner des masques allant de 0 à 255 ! ;)</p><p id="r-513948" data-claire-element-id="513948">Et pour finir, une petite &quot;astuce&quot; (qui n'en est pas vraiment une sauf pour les néophytes de la programmation) : si vous n'utiliserez une couleur qu'une seule fois, pas la peine de créer une variable rien que pour ça. Vous pouvez donner le retour de la fonction <em>Color.new()</em> directement à l'instruction de dessin, ce qui donne :</p><pre id="r-513949" data-claire-element-id="513949"><code data-claire-semantic="lua">screen.FONCTION(ecran, coordonnées, contenu, Color.new(31, 0, 0))</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">
<span class="arrow"></span>
<span class="next">Le BA.-Ba de MicroLua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
<span class="next">Afficher du texte à l&#039;écran</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Afficherdutextel039cran"></a><h2>Afficher du texte à l&#039;écran</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
<span class="arrow"></span>
<span class="next">Généralités sur les fonctions de dessin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
<span class="next">Afficher des images à l&#039;écran</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-afficher-du-texte-a-l-ecran-1" data-claire-element-id="513991">Afficher du texte à l'écran</h4><p id="r-513952" data-claire-element-id="513952">Il est donc temps de voir la fonction que vous utiliserez probablement le plus souvent : <em>screen.print()</em> !</p><h5 id="r-dis-bonjour" data-claire-element-id="513965">Dis bonjour</h5><p id="r-513953" data-claire-element-id="513953">Si vous avez compris le chapitre précédent, le simple fait de vous donner la structure de la fonction devrait vous permettre de l'utiliser (je devient fainéans :p ) :</p><pre id="r-513954" data-claire-element-id="513954"><code data-claire-semantic="lua">screen.print(écran, x, y, texte[, couleur])</code></pre><aside id="r-513956" data-claire-element-id="513956" data-claire-semantic="information"><p id="r-513955" data-claire-element-id="513955">Le paramètre <em>couleur</em> est facultatif pour cette fonction, et <strong>uniquement</strong> pour cette fonction et celle que nous verrons juste après, d'où les crochets.</p></aside><p id="r-513957" data-claire-element-id="513957">Et donc si vous voulez que votre console vous dise bonjour (sur l'écran du haut, tout en haut à gauche, mais bon finalement c'est comme vous voulez :p ), ça va donner...</p><div id="r-513960" data-claire-element-id="513960"><p id="r-513958" data-claire-element-id="513958">J'espère que vous avez réfléchi un peu !</p><pre id="r-513959" data-claire-element-id="513959"><code data-claire-semantic="lua">screen.print(SCREEN_UP, 0, 0, &quot;Bonjour toi !&quot;)</code></pre></div><p id="r-513961" data-claire-element-id="513961">Et bien allez-y ! Écrivez cette ligne dans un fichier de test, allumez votre console, toussa, et testez pour voir si votre DS est devenue un peu plus polie.</p><div id="r-513963" data-claire-element-id="513963" data-claire-semantic="question"><p id="r-513962" data-claire-element-id="513962">Ça marche pas ! Tu nous as eus !</p></div><p id="r-513964" data-claire-element-id="513964">En fait si ça marche, c'est juste que ça dure une milliseconde grand maximum avant d'atteindre la fin du script et de revenir au shell. Ce qui me permet d'effectuer la transition vers...</p><h5 id="r-la-boucle-principale-6" data-claire-element-id="513978">La boucle principale !</h5><div id="r-513967" data-claire-element-id="513967" data-claire-semantic="question"><p id="r-513966" data-claire-element-id="513966">C'est pas un peu moisi comme transition ?</p></div><p id="r-513968" data-claire-element-id="513968">Si, mais la suite va remonter le niveau :)</p><p id="r-513969" data-claire-element-id="513969">L'astuce si l'on peut dire, afin d'éviter que le résultat du programme ne disparaisse dans les profondeurs insondables et pleines de microbes de l'oubli, c'est de tout placer dans une boucle qui va se répéter le plus vite possible. Cette boucle devient l'élément principal du programme. C'est le &quot;<em>while not Keys.newPress.Start do</em>&quot; que vous voyez depuis le début ;)</p><p id="r-513970" data-claire-element-id="513970">Par conséquent, pour afficher votre message, le code sera :</p><pre id="r-513971" data-claire-element-id="513971"><code data-claire-semantic="lua">while not Keys.held.Start do
    screen.print(SCREEN_UP, 0, 0, &quot;Bonjour toi !&quot;)
end</code></pre><p id="r-513972" data-claire-element-id="513972">Toutes les instructions de votre programme devront être placée à l'intérieur de cette boucle, sauf évidemment les déclarations de variables et autres fonctions, et deux-trois choses particulières. Autrement dit, schématiquement, votre script principal ressemblera à ça :</p><pre id="r-513973" data-claire-element-id="513973"><code data-claire-semantic="lua">-- Inclusion de code depuis d'autres fichiers
-- Déclaration de variables
-- Déclaration de fonctions
-- Autres procédures à n'effectuer qu'au début du programme

while ... do

    -- Code principal

end

-- Autre procédures à n'effectuer qu'à la fin du programme
-- Destruction de variables, fonctions, etc.</code></pre><p id="r-513974" data-claire-element-id="513974">Selon le langage que vous utilisiez avant, l'adaptation à ce &quot;système&quot; de programmation sera plus ou moins difficile.</p><div id="r-513976" data-claire-element-id="513976" data-claire-semantic="question"><p id="r-513975" data-claire-element-id="513975">Ça marche toujours pas !</p></div><p id="r-513977" data-claire-element-id="513977">Je sais, c'était prévu, car attention, seconde transition...</p><h5 id="r-la-fonction-render" data-claire-element-id="513985">La fonction <em>render()</em> !</h5><p id="r-513979" data-claire-element-id="513979">Il manque une fonction essentielle dans notre boucle principale : la fonction <em>render()</em>. Elle fait deux choses : commander l'affichage du résultat des fonctions de dessin, et synchroniser les tours de boucle avec les cycles d'affichage de notre console.</p><p id="r-513980" data-claire-element-id="513980">L'intérêt de la première, et c'est évident, c'est de demander à la NDS d'afficher ce qu'on vient de lui demander. Pour faire simple, ça valide les instructions et les envoie au GPU (processeur graphique) de la machine.<br/> La seconde fonctionnalité est de nous permettre d'avoir un nombre d'images par seconde (FPS pour <em>frames per second</em> en anglais) constant. La NDS nous permet d'atteindre 60FPS, bien que pour des raisons techniques liées à la µLibrary, MicroLua tourne avec 30FPS. Cela dit, ça reste tout à fait jouable ;)</p><p id="r-513981" data-claire-element-id="513981">Sinon, trêve de blabla, voilà le script finalisé (promis, là votre console vous dira vraiment bonjour) :</p><pre id="r-513982" data-claire-element-id="513982"><code data-claire-semantic="lua">while not Keys.held.Start do
    screen.print(SCREEN_UP, 0, 0, &quot;Bonjour toi !&quot;)

    render()
end</code></pre><aside id="r-513984" data-claire-element-id="513984" data-claire-semantic="information"><p id="r-513983" data-claire-element-id="513983">En général, <em>render()</em> se trouvera toujours à la fin de votre boucle, étant donné que toutes les instructions de dessin placées après ne seront effectuées qu'à la prochaine boucle.</p></aside><h5 id="r-zone-de-texte-1" data-claire-element-id="513990">Zone de texte</h5><p id="r-513986" data-claire-element-id="513986">Avant de voir les images, il faut connaître l'existence de la fonction</p><pre id="r-513987" data-claire-element-id="513987"><code data-claire-semantic="lua">screen.drawTextBox(ecran, x1, y1, x2, y2, texte[, couleur])</code></pre><p id="r-513988" data-claire-element-id="513988">qui affiche le texte dans une zone de texte, qui est un rectangle dont le coin haut-gauche est aux coordonnées (x1, y1) et le coin bas-droit aux coordonnées (x2, y2).</p><p id="r-513989" data-claire-element-id="513989">Concrètement, ça fait quoi ? Ça affiche le texte en le limitant à la zone définie, et en effectuant un retour à la ligne quand le texte atteint le bord droit de la zone. Si le texte est trop long, il sera coupé (il n'y a pas d'ascenseur intégré aux TextBox). Cette fonction est très utile pour bien agencer des paragraphes.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
<span class="arrow"></span>
<span class="next">Généralités sur les fonctions de dessin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
<span class="next">Afficher des images à l&#039;écran</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Afficherdesimagesl039cran"></a><h2>Afficher des images à l&#039;écran</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
<span class="arrow"></span>
<span class="next">Afficher du texte à l&#039;écran</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
<span class="next">Utiliser les contrôles de la Nintendo DS</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-afficher-des-images-a-l-ecran" data-claire-element-id="514031">Afficher des images à l'écran</h4><p id="r-513992" data-claire-element-id="513992">Bon maintenant passons aux images ;) !</p><h5 id="r-chargement-de-l-image" data-claire-element-id="514008">Chargement de l'image</h5><p id="r-513993" data-claire-element-id="513993">Il vous faut d'abord savoir que la DS à deux mémoires :</p><ul id="r-513998" data-claire-element-id="513998"><li id="r-513995" data-claire-element-id="513995"><p id="r-513994" data-claire-element-id="513994">la VRAM (video RAM) (mémoire vidéo) qui est de 656 Ko</p></li><li id="r-513997" data-claire-element-id="513997"><p id="r-513996" data-claire-element-id="513996">la RAM (mémoire vive) qui est de 4Mo</p></li></ul><aside id="r-514000" data-claire-element-id="514000" data-claire-semantic="information"><p id="r-513999" data-claire-element-id="513999">La VRAM a peut-être beaucoup moins de place, mais c'est celle-là que vous devez utiliser pour vos images. Lorsqu'on charge une image dans la RAM, on a parfois (j'ai eu ^^ ) des problèmes. Par ailleurs, la VRAM est optimisée pour le dessin.</p></aside><p id="r-514001" data-claire-element-id="514001">MicroLua supporte actuellement les formats PNG (transparence non supportée), JP(E)G et GIF (non animés, transparence supportée).</p><aside id="r-514003" data-claire-element-id="514003" data-claire-semantic="warning"><p id="r-514002" data-claire-element-id="514002">MicroLua ne gère actuellement la transparence que sur les GIF, pas sur les PNG. Cela dit, vous verrez plus loin qu'il est possible d'utiliser la &quot;transparence alpha&quot; sur les dessins.</p></aside><p id="r-514004" data-claire-element-id="514004">D'abord voici la commande pour charger l'image :</p><pre id="r-514005" data-claire-element-id="514005"><code data-claire-semantic="lua">image = Image.load(chemin, destination)</code></pre><p id="r-514006" data-claire-element-id="514006"><em>Image.load()</em> retourne donc une &quot;variable image&quot;.</p><p id="r-514007" data-claire-element-id="514007">Le chemin de l'image peut-être un chemin relatif ou absolu et la destination est VRAM ou RAM (deux constantes, comme SCREEN_UP et SCREEN_DOWN).</p><h5 id="r-affichage-de-l-image-1" data-claire-element-id="514017">Affichage de l'image</h5><p id="r-514009" data-claire-element-id="514009">Maintenant affichons l'image, voici la commande :</p><pre id="r-514010" data-claire-element-id="514010"><code data-claire-semantic="lua">screen.blit(ecran, x, y, image)</code></pre><aside id="r-514012" data-claire-element-id="514012" data-claire-semantic="warning"><p id="r-514011" data-claire-element-id="514011">N'oubliez pas de charger l'image avant.</p></aside><p id="r-514013" data-claire-element-id="514013">Exemple :</p><pre id="r-514014" data-claire-element-id="514014"><code data-claire-semantic="lua">-- On charge l'image dans la VRAM
image = Image.load(&quot;image.png&quot;, VRAM)

while not Keys.held.Start do
	-- On affiche l'image en haut à gauche de l'écran tactile
	screen.blit(SCREEN_DOWN, 0, 0, image) -- Affiche l'image
	
	render()
end

-- Et on efface l'image de la mémoire
Image.destroy(image)
image = nil</code></pre><aside id="r-514016" data-claire-element-id="514016" data-claire-semantic="warning"><p id="r-514015" data-claire-element-id="514015">D'abord on décharge l'image de la mémoire, PUIS on détruit sa variable, et pas l'inverse, sinon on ne peut plus la décharger !</p></aside><h5 id="r-screen-blit-nous-cache-des-choses" data-claire-element-id="514025"><em>screen.blit()</em> nous cache des choses</h5><p id="r-514018" data-claire-element-id="514018">Si vous jetez un coup d’œil à la documentation, vous verrez que celle-ci nous donne pour <em>screen.blit()</em> :</p><p id="r-514019" data-claire-element-id="514019"><cite>Citation : Documentation</cite></p><blockquote id="r-514023" data-claire-element-id="514023"><p id="r-514020" data-claire-element-id="514020">Void screen.blit(ecran, x, y, image [,sourceX, sourceY] [, largeur, hauteur])</p><p id="r-514021" data-claire-element-id="514021">Blitte (affiche) une image à l’écran.</p><p id="r-514022" data-claire-element-id="514022">ecran (Number) : écran sur lequel afficher l'image (SCREEN_UP ou SCREEN_DOWN)<br/> x (Number) : abscisse du coin haut-gauche de l’image<br/> y (Number) : ordonnée du coin haut-gauche de l’image<br/> image (Image) : image à blitter<br/> sourceX, sourceY (Number) : coordonnées de la partie de l’image source à blitter<br/> largeur, hauteur (Number): dimensions de la partie de l’image source à blitter</p></blockquote><p id="r-514024" data-claire-element-id="514024">La fonction nous permet en effet de n'afficher qu'une partie de l'image ; cette partie commence aux coordonnées (sourceX, sourceY), et s'étend vers la droite et vers le bas, soit jusqu'aux limites de l'image, soit sur les dimensions données par <em>largeur</em> et <em>hauteur</em>. Ça n'est pas indispensable, mais je devais vous en parler ;)</p><h5 id="r-bonus-2" data-claire-element-id="514030">Bonus</h5><p id="r-514026" data-claire-element-id="514026">Et en cadeau deux petites fonctions :</p><pre id="r-514027" data-claire-element-id="514027"><code data-claire-semantic="lua">longueur = Image.width(image) 
largeur = Image.height(image)</code></pre><p id="r-514028" data-claire-element-id="514028">La première sert à connaître la longueur d'une image en pixels, la seconde à obtenir sa largeur.</p><p id="r-514029" data-claire-element-id="514029">Il y a d'autres choses à savoir à propos des images, mais ça fera l'objet d'une partie de la manipulation de l'affichage.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
<span class="arrow"></span>
<span class="next">Afficher du texte à l&#039;écran</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
<span class="next">Utiliser les contrôles de la Nintendo DS</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="UtiliserlescontrlesdelaNintendoDS"></a><h2>Utiliser les contrôles de la Nintendo DS</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
<span class="arrow"></span>
<span class="next">Afficher des images à l&#039;écran</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">
<span class="next">Un peu d&#039;art...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utiliser-les-controles-de-la-nintendo-ds" data-claire-element-id="514100">Utiliser les contrôles de la Nintendo DS</h4><h5 id="r-interagir-avec-le-joueur-1" data-claire-element-id="514036">Interagir avec le joueur</h5><p id="r-514032" data-claire-element-id="514032">Comme vous devez le savoir, la DS a un écran tactile, huit boutons (sans le <em>power</em> et le son) ainsi qu'un pad directionnel en croix qui en comporte quatre (et qu'on appelle <em>D-pad</em>).</p><p id="r-514033" data-claire-element-id="514033">Pour réagir en fonction des actions de l'utilisateur, on va utiliser les conditions. Mais d'abord, il faut savoir sur quoi l'utilisateur a appuyé !<br/> C'est l'objectif de la fonction :</p><pre id="r-514034" data-claire-element-id="514034"><code data-claire-semantic="lua">Controls.read()</code></pre><p id="r-514035" data-claire-element-id="514035">Elle est à appeler à chaque fois qu'il faut mettre à jour les contrôles pour réagir en fonction de l'utilisateur (c'est-à-dire au moins à chaque tour de boucle). En général, ce sera la première instruction de votre boucle, comme <em>render()</em> en sera probablement la dernière.</p><h5 id="r-les-controles-sous-microlua" data-claire-element-id="514094">Les contrôles sous MicroLua</h5><p id="r-514037" data-claire-element-id="514037">Maintenant, il faut tester l'état des boutons. Pour cela, les conditions vont porter sur des variables du type</p><pre id="r-514038" data-claire-element-id="514038"><code data-claire-semantic="lua">Keys.[Etat].[Bouton]</code></pre><p id="r-514039" data-claire-element-id="514039">pour les boutons &quot;classiques&quot;, ou bien de la forme</p><pre id="r-514040" data-claire-element-id="514040"><code>Stylus.[Etat]</code></pre><p id="r-514041" data-claire-element-id="514041">pour l'écran tactile.<br/> Ces variables sont des booléens (elles valent donc <em>true</em> ou <em>false</em>).</p><p id="r-514042" data-claire-element-id="514042">Afin de les utiliser, il faut remplacer <em>[Etat]</em> et <em>[Bouton]</em> par les valeurs suivantes :</p><ul id="r-514079" data-claire-element-id="514079"><li id="r-514044" data-claire-element-id="514044"><p id="r-514043" data-claire-element-id="514043">[Bouton]</p></li><ul id="r-514069" data-claire-element-id="514069"><li id="r-514046" data-claire-element-id="514046"><p id="r-514045" data-claire-element-id="514045">A : <em>A</em></p></li><li id="r-514048" data-claire-element-id="514048"><p id="r-514047" data-claire-element-id="514047">B : <em>B</em></p></li><li id="r-514050" data-claire-element-id="514050"><p id="r-514049" data-claire-element-id="514049">X : <em>X</em></p></li><li id="r-514052" data-claire-element-id="514052"><p id="r-514051" data-claire-element-id="514051">Y : <em>Y</em></p></li><li id="r-514054" data-claire-element-id="514054"><p id="r-514053" data-claire-element-id="514053">L : <em>L</em></p></li><li id="r-514056" data-claire-element-id="514056"><p id="r-514055" data-claire-element-id="514055">R : <em>R</em></p></li><li id="r-514058" data-claire-element-id="514058"><p id="r-514057" data-claire-element-id="514057">Start : <em>Start</em></p></li><li id="r-514060" data-claire-element-id="514060"><p id="r-514059" data-claire-element-id="514059">Select : <em>Select</em></p></li><li id="r-514062" data-claire-element-id="514062"><p id="r-514061" data-claire-element-id="514061">Flèche directionnelle haut : <em>Up</em></p></li><li id="r-514064" data-claire-element-id="514064"><p id="r-514063" data-claire-element-id="514063">Flèche directionnelle bas : <em>Down</em></p></li><li id="r-514066" data-claire-element-id="514066"><p id="r-514065" data-claire-element-id="514065">Flèche directionnelle gauche : <em>Left</em></p></li><li id="r-514068" data-claire-element-id="514068"><p id="r-514067" data-claire-element-id="514067">Flèche directionnelle droite : <em>Right</em></p></li></ul><li id="r-514071" data-claire-element-id="514071"><p id="r-514070" data-claire-element-id="514070">[Etat]</p></li><ul id="r-514078" data-claire-element-id="514078"><li id="r-514073" data-claire-element-id="514073"><p id="r-514072" data-claire-element-id="514072">Etat appuyé : <em>held</em></p></li><li id="r-514075" data-claire-element-id="514075"><p id="r-514074" data-claire-element-id="514074">Etat relâché : <em>released</em></p></li><li id="r-514077" data-claire-element-id="514077"><p id="r-514076" data-claire-element-id="514076">Etat nouvelle pression : <em>newPress</em></p></li></ul></ul><p id="r-514080" data-claire-element-id="514080">Sachez de plus qu'avec le Stylet, on peut récupérer quatre informations :</p><ul id="r-514089" data-claire-element-id="514089"><li id="r-514082" data-claire-element-id="514082"><p id="r-514081" data-claire-element-id="514081">Abscisse : <em>Stylus.X</em></p></li><li id="r-514084" data-claire-element-id="514084"><p id="r-514083" data-claire-element-id="514083">Ordonnée : <em>Stylus.Y</em></p></li><li id="r-514086" data-claire-element-id="514086"><p id="r-514085" data-claire-element-id="514085">Augmentation de X dans ce mouvement : <em>Stylus.deltaX</em></p></li><li id="r-514088" data-claire-element-id="514088"><p id="r-514087" data-claire-element-id="514087">Augmentation de Y dans ce mouvement : <em>Stylus.deltaY</em></p></li></ul><aside id="r-514091" data-claire-element-id="514091" data-claire-semantic="warning"><p id="r-514090" data-claire-element-id="514090">Faites attention aux majuscules, elles peuvent être sources d'erreurs car indispensables (ça plante si vous n'en mettez pas !). Lua est sensible à la casse, et ça demande de la rigueur ;)</p></aside><p id="r-514092" data-claire-element-id="514092">Exemple :</p><pre id="r-514093" data-claire-element-id="514093"><code data-claire-semantic="lua">Controls.read()

if Keys.newPress.A then

-- A faire si A est re-pressé

end
if Stylus.held then

-- A faire si le stylet est appuyé

end</code></pre><h5 id="r-retour-sur-la-boucle-principale" data-claire-element-id="514099">Retour sur la boucle principale</h5><p id="r-514095" data-claire-element-id="514095">Vous vous souvenez de la condition ? Maintenant, vous pouvez la comprendre :</p><pre id="r-514096" data-claire-element-id="514096"><code data-claire-semantic="lua">while not Keys.held.Start do</code></pre><p id="r-514097" data-claire-element-id="514097">Elle signifie &quot;tant qu'on n'appuie pas sur le bouton Start&quot;. Remarquez qu'elle est tout à fait équivalente à <em>Keys.newPress.Start</em> dans la cas présent.</p><p id="r-514098" data-claire-element-id="514098">Voilà, voilà... Passons maintenant aux fonctions de dessin primaires, partie essentielle de l'affichage !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
<span class="arrow"></span>
<span class="next">Afficher des images à l&#039;écran</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">
<span class="next">Un peu d&#039;art...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unpeud039art..."></a><h2>Un peu d&#039;art...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
<span class="arrow"></span>
<span class="next">Utiliser les contrôles de la Nintendo DS</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
<span class="next">Le dessin classique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-514102" data-claire-element-id="514102">Ce chapitre vous présente les fonctions de dessin de MicroLua, mais aussi les Canevas. Un chapitre important donc, à lire avec attention :)</p>
</div><a name="Ledessinclassique"></a><h2>Le dessin classique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">
<span class="arrow"></span>
<span class="next">Un peu d&#039;art...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
<span class="next">Le dessin avec un Canevas</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-dessin-classique" data-claire-element-id="514146">Le dessin classique</h4><p id="r-514103" data-claire-element-id="514103">Pour dessiner, la façon la plus simple et intuitive est d'utiliser les fonctions associées à <em>screen</em>.</p><aside id="r-514105" data-claire-element-id="514105" data-claire-semantic="warning"><p id="r-514104" data-claire-element-id="514104">Toutes les fonctions que je vais aborder ici n'auront aucun effet si elles ne sont pas suivies de l'instruction <em>render()</em>, comme vu au chapitre précédent. Je ne la mettrai pas, à vous d'y penser ;)</p></aside><h5 id="r-dessine-moi-un-point" data-claire-element-id="514111">Dessine-moi... Un point.</h5><p id="r-514106" data-claire-element-id="514106">On commence doucement ;) <br/> La fonction est de la forme :</p><pre id="r-514107" data-claire-element-id="514107"><code data-claire-semantic="lua">screen.drawPoint(ecran, x, y, couleur)</code></pre><aside id="r-514109" data-claire-element-id="514109" data-claire-semantic="error"><p id="r-514108" data-claire-element-id="514108">Notez bien que pour toutes ces fonctions, l'argument couleur est obligatoire, contrairement à screen.print().</p></aside><p id="r-514110" data-claire-element-id="514110">Ce n'est pas bien compliqué, je pense que je n'ai rien à ajouter ^^</p><h5 id="r-tracer-une-ligne" data-claire-element-id="514114">Tracer une ligne</h5><pre id="r-514112" data-claire-element-id="514112"><code data-claire-semantic="lua">screen.drawLine(ecran, x1, y1, x2, y2, couleur)</code></pre><p id="r-514113" data-claire-element-id="514113">C'est à mon avis très simple à comprendre : on choisit l'écran, on indique les coordonnées de début (x1, y1) et les coordonnées de fin (x2, y2), et enfin on choisit une couleur.</p><h5 id="r-tracer-des-rectangles-1" data-claire-element-id="514137">Tracer des rectangles</h5><p id="r-514115" data-claire-element-id="514115">Vous avez à votre disposition trois fonctions pour dessiner un rectangle.</p><h6 id="r-rectangle-simple" data-claire-element-id="514119">Rectangle simple</h6><p id="r-514116" data-claire-element-id="514116">La fonction</p><pre id="r-514117" data-claire-element-id="514117"><code data-claire-semantic="lua">screen.drawRect(ecran, x1, y1, x2, y2, couleur)</code></pre><p id="r-514118" data-claire-element-id="514118">dessine un rectangle &quot;vide&quot;, dont le coin haut-gauche se trouve en (x1, y1) et le coin bas-droite en (x2, y2).</p><h6 id="r-rectangle-plein" data-claire-element-id="514123">Rectangle plein</h6><p id="r-514120" data-claire-element-id="514120">La seconde fonction est :</p><pre id="r-514121" data-claire-element-id="514121"><code data-claire-semantic="lua">screen.drawFillRect(ecran, x1, y1, x2, y2, couleur)</code></pre><p id="r-514122" data-claire-element-id="514122">Cette fonction dessine un rectangle plein de la couleur passée en argument. Les coordonnées suivent la même logique que <em>screen.drawRect()</em>.</p><h6 id="r-rectangle-degrade" data-claire-element-id="514136">Rectangle dégradé</h6><p id="r-514124" data-claire-element-id="514124">La troisième et dernière fonction est la plus intéressante et la plus originale.</p><pre id="r-514125" data-claire-element-id="514125"><code data-claire-semantic="lua">screen.drawGradientRect(ecran, x1, y1, x2, y2, couleur1, couleur2, couleur3, couleur4)</code></pre><div id="r-514127" data-claire-element-id="514127" data-claire-semantic="question"><p id="r-514126" data-claire-element-id="514126">Hein ? Il y a quatre couleurs ?</p></div><p id="r-514128" data-claire-element-id="514128">Et oui ! Si vous avez une certaine connaissance de l'anglais, vous aurez certainement compris ce que fait cette fonction : elle affiche un rectangle dégradé.</p><p id="r-514129" data-claire-element-id="514129">C'est en fait très simple : chaque couleur correspond à un coin du rectangle, de cette façon :</p><figure id="r-514131" data-claire-element-id="514132"><img id="r-514130" data-claire-element-id="514130" src="medias/uploads.siteduzero.com_files_184001_185000_184212.png" alt="Image tirée de No$GBA Tester"/></figure><div id="r-514134" data-claire-element-id="514134" data-claire-semantic="question"><p id="r-514133" data-claire-element-id="514133">Et si on veut un dégradé monochrome ou bichrome ?</p></div><p id="r-514135" data-claire-element-id="514135">Dans ce cas-là, il faut passer deux fois la même couleur dans les bons coins. Pour le monochrome, il va falloir passer la couleur du fond, ce qui empêche de faire un dégradé sur une image de façon propre...</p><h5 id="r-inverser-les-ecrans" data-claire-element-id="514145">Inverser les écrans</h5><p id="r-514138" data-claire-element-id="514138">Un gros titre pour une petite fonction de rien du tout :p</p><pre id="r-514139" data-claire-element-id="514139"><code data-claire-semantic="lua">screen.switch()</code></pre><p id="r-514140" data-claire-element-id="514140">Celle-ce permet d'échanger l'affichage des deux écrans. En fait, un unique appel de cette fonction inverse <em>SCREEN_UP</em> et <em>SCREEN_DOWN</em>. Par exemple, si vous faites</p><pre id="r-514141" data-claire-element-id="514141"><code data-claire-semantic="lua">screen.drawFillRect(SCREEN_UP, 0, 0, Color.new(31, 0, 0))</code></pre><p id="r-514142" data-claire-element-id="514142">Vous dessinez sur tout l'écran du haut un rectangle rouge. Appelez <em>screen.switch()</em>, et le rectangle se dessinera en bas. Imaginons qu'ensuite vous fassiez</p><pre id="r-514143" data-claire-element-id="514143"><code data-claire-semantic="lua">screen.drawFillRect(SCREEN_DOWN, 0, 0, Color.new(0, 0, 31))</code></pre><p id="r-514144" data-claire-element-id="514144">Vous dessineriez un rectangle bleu sur tout l'écran. Mais pas sur l'écran du bas comme indiqué ; le rectangle sera sur l'écran du haut à cause de <em>screen.switch()</em>. Vous pouvez tout remettre à l'endroit en appelant une deuxième fois la fonction.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">
<span class="arrow"></span>
<span class="next">Un peu d&#039;art...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
<span class="next">Le dessin avec un Canevas</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LedessinavecunCanevas"></a><h2>Le dessin avec un Canevas</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
<span class="arrow"></span>
<span class="next">Le dessin classique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
<span class="next">Que choisir ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-dessin-avec-un-canevas" data-claire-element-id="514566">Le dessin avec un Canevas</h4><h5 id="r-presentation-des-canevas" data-claire-element-id="514157">Présentation des Canevas</h5><div id="r-514148" data-claire-element-id="514148" data-claire-semantic="question"><p id="r-514147" data-claire-element-id="514147">Donc, si j'ai bien compris, il y a deux façons de dessiner ? Mais pourquoi ?</p></div><p id="r-514149" data-claire-element-id="514149">C'est une bonne question ; à première vue, les fonctions de <em>screen</em> suffisent. C'est d'ailleurs celles-ci que vous utiliserez la plupart du temps.<br/> L'intérêt du Canevas est situé dans un aspect plus technique :</p><ul id="r-514154" data-claire-element-id="514154"><li id="r-514151" data-claire-element-id="514151"><p id="r-514150" data-claire-element-id="514150">il offre une bien meilleure vitesse d'affichage que les fonctions classiques</p></li><li id="r-514153" data-claire-element-id="514153"><p id="r-514152" data-claire-element-id="514152">il permet de manipuler les dessins</p></li></ul><p id="r-514155" data-claire-element-id="514155">Vous pouvez apprécier les capacités d'affichage des Canevas en exécutant l'exemple canevas dans le dossier &quot;Examples&quot; fourni dans le pack de téléchargement de MicroLua.</p><p id="r-514156" data-claire-element-id="514156">Ce qui paraît plus attrayant, c'est la &quot;manipulation&quot; des dessins. Mais d'abord, nous allons voir comment utiliser les Canevas.</p><h5 id="r-vie-et-mort-d-un-canevas" data-claire-element-id="514166">Vie et mort d'un Canevas</h5><p id="r-514158" data-claire-element-id="514158">Pour créer un canevas, rien de plus simple ; il suffit d'écrire en instruction :</p><pre id="r-514159" data-claire-element-id="514159"><code data-claire-semantic="lua">canevas = Canvas.new()</code></pre><p id="r-514160" data-claire-element-id="514160">avant la boucle principale, sinon vous allez recréer le canevas à chaque tour, et ça ne marchera pas.</p><aside id="r-514162" data-claire-element-id="514162" data-claire-semantic="warning"><p id="r-514161" data-claire-element-id="514161">J'attire votre attention sur le fait que si le nom français est &quot;canevas&quot;, le nom anglais est &quot;canvas&quot; (<strong>sans le &quot;e&quot;</strong>). Ceci peut être une source d'erreurs parfois difficiles à trouver.</p></aside><p id="r-514163" data-claire-element-id="514163">La destruction d'un canevas est tout aussi simple :</p><pre id="r-514164" data-claire-element-id="514164"><code data-claire-semantic="lua">Canvas.destroy(canevas)
canevas = nil</code></pre><p id="r-514165" data-claire-element-id="514165">On détruit le canevas à l'aide de <em>Canvas.destroy()</em>, fonction à laquelle on passe en argument le canevas à détruire. Il ne faut pas oublier ensuite de détruire la variable en elle-même, en y donnant la valeur <em>nil</em>.</p><h5 id="r-affichage-6" data-claire-element-id="514171">Affichage</h5><p id="r-514167" data-claire-element-id="514167">Maintenant, comment se passe l'affichage d'un canevas ?</p><p id="r-514168" data-claire-element-id="514168">On utilise la fonction <em>Canvas.draw()</em>, de cette façon :</p><pre id="r-514169" data-claire-element-id="514169"><code data-claire-semantic="lua">Canvas.draw(ecran, canevas, x, y)</code></pre><p id="r-514170" data-claire-element-id="514170">C'est assez explicite, remarquez juste que l'on ne donne que les coordonnées du coin haut-gauche, ce qui signifie que le canevas remplira toute la partie de l'écran situé entre ce point et le coin inférieur droit de l'écran indiqué.</p><h5 id="r-dessiner-sur-un-canevas" data-claire-element-id="514181">Dessiner sur un canevas</h5><div id="r-514173" data-claire-element-id="514173" data-claire-semantic="question"><p id="r-514172" data-claire-element-id="514172">C'est bien beau tout ça, mais comment fait-on pour afficher du dessin ?</p></div><p id="r-514174" data-claire-element-id="514174">Cela se déroule en deux étapes : d'abord, on crée un objet Canevas, puis on l'ajoute au canevas approprié.<br/> Je ne vais pas détailler toutes les fonctions de création d'objets canevas, elles sont tout à fait compréhensibles dans la doc et sont quasiment les mêmes que les &quot;classiques&quot;.</p><p id="r-514175" data-claire-element-id="514175">Je vais donc plutôt décrire cet exemple :</p><pre id="r-514176" data-claire-element-id="514176"><code data-claire-semantic="lua">-- On crée l'objet canevas (ici un rectangle)
objet = Canvas.newRect(x1, y1, x2, y2, couleur)
-- On l'ajoute au canevas
Canvas.add(canevas, objet)</code></pre><p id="r-514177" data-claire-element-id="514177">Comme vous le voyez, c'est très simple : on appelle une fonction <em>Canvas.newXXX()</em> selon l'objet que l'on veut ; cette fonction retourne un <em>Canvas Object</em> (c'est un type spécial de µLua), qui sert de <em>handler</em> (de gestionnaire) pour cet objet (vous verrez plus loin quelle en est l'utilité). Ensuite, on appelle <em>Canvas.add()</em>, qui ajoute l'objet au canevas spécifié.<br/> Lors du prochain appel de la fonction <em>Canvas.draw()</em> (et après le <em>render()</em>), un rectangle des coordonnées et de la couleur demandées sera affiché.</p><p id="r-514178" data-claire-element-id="514178">Notez que, comme pour les couleurs, vous n'êtes pas obligé de passer par une variable : vous pouvez directement donner l'objet à la fonction <em>Canvas.add()</em> comme ceci :</p><pre id="r-514179" data-claire-element-id="514179"><code data-claire-semantic="lua">Canvas.add(canevas, Canvas.newRect(x1, y1, x2, y2, Color.new(31, 0, 0)))</code></pre><p id="r-514180" data-claire-element-id="514180">Cependant, vous perdez l'intérêt des canevas : la manipulation des dessins !</p><h5 id="r-manipuler-les-dessins" data-claire-element-id="514565">Manipuler les dessins</h5><p id="r-514182" data-claire-element-id="514182">Depuis le temps que j'en parle... On y arrive enfin !</p><h6 id="r-changer-les-caracteristiques-des-dessins" data-claire-element-id="514557">Changer les caractéristiques des dessins</h6><p id="r-514183" data-claire-element-id="514183">La grande utilité des Canevas est que les Canvas Objects sont modifiables. Concrètement, ça veut dire quoi ? Cela signifie que vous pouvez changer les coordonnées d'un rectangle, la couleur d'un texte, etc. Vous pouvez changer toutes les propriétés de tous les objets du canevas !</p><p id="r-514184" data-claire-element-id="514184">Pour changer une propriété, on utilise :</p><pre id="r-514185" data-claire-element-id="514185"><code data-claire-semantic="lua">Canvas.setAttr(objet, nomPropriete, nouvelleValeur)</code></pre><p id="r-514186" data-claire-element-id="514186">C'est tout :)</p><div id="r-514188" data-claire-element-id="514188" data-claire-semantic="question"><p id="r-514187" data-claire-element-id="514187">Et comment on connaît le nom de la propriété ?</p></div><p id="r-514189" data-claire-element-id="514189">Ces noms sont indiqués au début de la doc ; ils sont de la forme ATTR_XXX, où XXX va être :</p><ul id="r-514220" data-claire-element-id="514220"><li id="r-514191" data-claire-element-id="514191"><p id="r-514190" data-claire-element-id="514190">X1 : abscisse 1</p></li><li id="r-514193" data-claire-element-id="514193"><p id="r-514192" data-claire-element-id="514192">Y1 : ordonnée 1</p></li><li id="r-514195" data-claire-element-id="514195"><p id="r-514194" data-claire-element-id="514194">X2 : abscisse 2</p></li><li id="r-514197" data-claire-element-id="514197"><p id="r-514196" data-claire-element-id="514196">Y2 : ordonnée 2</p></li><li id="r-514199" data-claire-element-id="514199"><p id="r-514198" data-claire-element-id="514198">X3 : longueur de la zone à prendre dans la source (pour une Image)</p></li><li id="r-514201" data-claire-element-id="514201"><p id="r-514200" data-claire-element-id="514200">Y3 : hauteur de la zone à prendre dans la source (pour une Image)</p></li><li id="r-514203" data-claire-element-id="514203"><p id="r-514202" data-claire-element-id="514202">COLOR : couleur</p></li><li id="r-514205" data-claire-element-id="514205"><p id="r-514204" data-claire-element-id="514204">COLOR1 : couleur 1</p></li><li id="r-514207" data-claire-element-id="514207"><p id="r-514206" data-claire-element-id="514206">COLOR2 : couleur 2</p></li><li id="r-514209" data-claire-element-id="514209"><p id="r-514208" data-claire-element-id="514208">COLOR3 : couleur 3</p></li><li id="r-514211" data-claire-element-id="514211"><p id="r-514210" data-claire-element-id="514210">COLOR4 : couleur 4</p></li><li id="r-514213" data-claire-element-id="514213"><p id="r-514212" data-claire-element-id="514212">TEXT : texte</p></li><li id="r-514215" data-claire-element-id="514215"><p id="r-514214" data-claire-element-id="514214">IMAGE : image soure</p></li><li id="r-514217" data-claire-element-id="514217"><p id="r-514216" data-claire-element-id="514216">FONT : police spéciale</p></li><li id="r-514219" data-claire-element-id="514219"><p id="r-514218" data-claire-element-id="514218">VISIBLE : état visible ou non de l'objet</p></li></ul><p id="r-514221" data-claire-element-id="514221">Bien entendu, tous les objets n'ont pas les mêmes attributs ; le tableau ci-dessous indique quels attributs possèdent tels objets.</p><table id="r-514554" data-claire-element-id="514554"><thead id="r-514255" data-claire-element-id="514255"><tr id="r-514254" data-claire-element-id="514254"><th id="r-514223" data-claire-element-id="514223"><p id="r-514222" data-claire-element-id="514222">Objet</p></th><th id="r-514225" data-claire-element-id="514225"><p id="r-514224" data-claire-element-id="514224">X1</p></th><th id="r-514227" data-claire-element-id="514227"><p id="r-514226" data-claire-element-id="514226">Y1</p></th><th id="r-514229" data-claire-element-id="514229"><p id="r-514228" data-claire-element-id="514228">X2</p></th><th id="r-514231" data-claire-element-id="514231"><p id="r-514230" data-claire-element-id="514230">Y2</p></th><th id="r-514233" data-claire-element-id="514233"><p id="r-514232" data-claire-element-id="514232">X3</p></th><th id="r-514235" data-claire-element-id="514235"><p id="r-514234" data-claire-element-id="514234">Y3</p></th><th id="r-514237" data-claire-element-id="514237"><p id="r-514236" data-claire-element-id="514236">COLOR</p></th><th id="r-514239" data-claire-element-id="514239"><p id="r-514238" data-claire-element-id="514238">COLOR1</p></th><th id="r-514241" data-claire-element-id="514241"><p id="r-514240" data-claire-element-id="514240">COLOR2</p></th><th id="r-514243" data-claire-element-id="514243"><p id="r-514242" data-claire-element-id="514242">COLOR3</p></th><th id="r-514245" data-claire-element-id="514245"><p id="r-514244" data-claire-element-id="514244">COLOR4</p></th><th id="r-514247" data-claire-element-id="514247"><p id="r-514246" data-claire-element-id="514246">TEXT</p></th><th id="r-514249" data-claire-element-id="514249"><p id="r-514248" data-claire-element-id="514248">IMAGE</p></th><th id="r-514251" data-claire-element-id="514251"><p id="r-514250" data-claire-element-id="514250">FONT</p></th><th id="r-514253" data-claire-element-id="514253"><p id="r-514252" data-claire-element-id="514252">VISIBLE</p></th></tr></thead><tbody id="r-514553" data-claire-element-id="514553"><tr id="r-514288" data-claire-element-id="514288"><td id="r-514257" data-claire-element-id="514257"><p id="r-514256" data-claire-element-id="514256">Line</p></td><td id="r-514259" data-claire-element-id="514259"><p id="r-514258" data-claire-element-id="514258">Coordonnée</p></td><td id="r-514261" data-claire-element-id="514261"><p id="r-514260" data-claire-element-id="514260">Coordonnée</p></td><td id="r-514263" data-claire-element-id="514263"><p id="r-514262" data-claire-element-id="514262">Coordonnée</p></td><td id="r-514265" data-claire-element-id="514265"><p id="r-514264" data-claire-element-id="514264">Coordonnée</p></td><td id="r-514267" data-claire-element-id="514267"><p id="r-514266" data-claire-element-id="514266">/</p></td><td id="r-514269" data-claire-element-id="514269"><p id="r-514268" data-claire-element-id="514268">/</p></td><td id="r-514271" data-claire-element-id="514271"><p id="r-514270" data-claire-element-id="514270">Couleur</p></td><td id="r-514273" data-claire-element-id="514273"><p id="r-514272" data-claire-element-id="514272">/</p></td><td id="r-514275" data-claire-element-id="514275"><p id="r-514274" data-claire-element-id="514274">/</p></td><td id="r-514277" data-claire-element-id="514277"><p id="r-514276" data-claire-element-id="514276">/</p></td><td id="r-514279" data-claire-element-id="514279"><p id="r-514278" data-claire-element-id="514278">/</p></td><td id="r-514281" data-claire-element-id="514281"><p id="r-514280" data-claire-element-id="514280">/</p></td><td id="r-514283" data-claire-element-id="514283"><p id="r-514282" data-claire-element-id="514282">/</p></td><td id="r-514285" data-claire-element-id="514285"><p id="r-514284" data-claire-element-id="514284">/</p></td><td id="r-514287" data-claire-element-id="514287"><p id="r-514286" data-claire-element-id="514286">Est visible</p></td></tr><tr id="r-514321" data-claire-element-id="514321"><td id="r-514290" data-claire-element-id="514290"><p id="r-514289" data-claire-element-id="514289">Point</p></td><td id="r-514292" data-claire-element-id="514292"><p id="r-514291" data-claire-element-id="514291">Coordonnée</p></td><td id="r-514294" data-claire-element-id="514294"><p id="r-514293" data-claire-element-id="514293">Coordonnée</p></td><td id="r-514296" data-claire-element-id="514296"><p id="r-514295" data-claire-element-id="514295">Coordonnée</p></td><td id="r-514298" data-claire-element-id="514298"><p id="r-514297" data-claire-element-id="514297">Coordonnée</p></td><td id="r-514300" data-claire-element-id="514300"><p id="r-514299" data-claire-element-id="514299">/</p></td><td id="r-514302" data-claire-element-id="514302"><p id="r-514301" data-claire-element-id="514301">/</p></td><td id="r-514304" data-claire-element-id="514304"><p id="r-514303" data-claire-element-id="514303">Couleur</p></td><td id="r-514306" data-claire-element-id="514306"><p id="r-514305" data-claire-element-id="514305">/</p></td><td id="r-514308" data-claire-element-id="514308"><p id="r-514307" data-claire-element-id="514307">/</p></td><td id="r-514310" data-claire-element-id="514310"><p id="r-514309" data-claire-element-id="514309">/</p></td><td id="r-514312" data-claire-element-id="514312"><p id="r-514311" data-claire-element-id="514311">/</p></td><td id="r-514314" data-claire-element-id="514314"><p id="r-514313" data-claire-element-id="514313">/</p></td><td id="r-514316" data-claire-element-id="514316"><p id="r-514315" data-claire-element-id="514315">/</p></td><td id="r-514318" data-claire-element-id="514318"><p id="r-514317" data-claire-element-id="514317">/</p></td><td id="r-514320" data-claire-element-id="514320"><p id="r-514319" data-claire-element-id="514319">Est visible</p></td></tr><tr id="r-514354" data-claire-element-id="514354"><td id="r-514323" data-claire-element-id="514323"><p id="r-514322" data-claire-element-id="514322">Rect</p></td><td id="r-514325" data-claire-element-id="514325"><p id="r-514324" data-claire-element-id="514324">Coordonnée</p></td><td id="r-514327" data-claire-element-id="514327"><p id="r-514326" data-claire-element-id="514326">Coordonnée</p></td><td id="r-514329" data-claire-element-id="514329"><p id="r-514328" data-claire-element-id="514328">Coordonnée</p></td><td id="r-514331" data-claire-element-id="514331"><p id="r-514330" data-claire-element-id="514330">Coordonnée</p></td><td id="r-514333" data-claire-element-id="514333"><p id="r-514332" data-claire-element-id="514332">/</p></td><td id="r-514335" data-claire-element-id="514335"><p id="r-514334" data-claire-element-id="514334">/</p></td><td id="r-514337" data-claire-element-id="514337"><p id="r-514336" data-claire-element-id="514336">Couleur</p></td><td id="r-514339" data-claire-element-id="514339"><p id="r-514338" data-claire-element-id="514338">/</p></td><td id="r-514341" data-claire-element-id="514341"><p id="r-514340" data-claire-element-id="514340">/</p></td><td id="r-514343" data-claire-element-id="514343"><p id="r-514342" data-claire-element-id="514342">/</p></td><td id="r-514345" data-claire-element-id="514345"><p id="r-514344" data-claire-element-id="514344">/</p></td><td id="r-514347" data-claire-element-id="514347"><p id="r-514346" data-claire-element-id="514346">/</p></td><td id="r-514349" data-claire-element-id="514349"><p id="r-514348" data-claire-element-id="514348">/</p></td><td id="r-514351" data-claire-element-id="514351"><p id="r-514350" data-claire-element-id="514350">/</p></td><td id="r-514353" data-claire-element-id="514353"><p id="r-514352" data-claire-element-id="514352">Est visible</p></td></tr><tr id="r-514387" data-claire-element-id="514387"><td id="r-514356" data-claire-element-id="514356"><p id="r-514355" data-claire-element-id="514355">FillRect</p></td><td id="r-514358" data-claire-element-id="514358"><p id="r-514357" data-claire-element-id="514357">Coordonnée</p></td><td id="r-514360" data-claire-element-id="514360"><p id="r-514359" data-claire-element-id="514359">Coordonnée</p></td><td id="r-514362" data-claire-element-id="514362"><p id="r-514361" data-claire-element-id="514361">Coordonnée</p></td><td id="r-514364" data-claire-element-id="514364"><p id="r-514363" data-claire-element-id="514363">Coordonnée</p></td><td id="r-514366" data-claire-element-id="514366"><p id="r-514365" data-claire-element-id="514365">/</p></td><td id="r-514368" data-claire-element-id="514368"><p id="r-514367" data-claire-element-id="514367">/</p></td><td id="r-514370" data-claire-element-id="514370"><p id="r-514369" data-claire-element-id="514369">Couleur</p></td><td id="r-514372" data-claire-element-id="514372"><p id="r-514371" data-claire-element-id="514371">/</p></td><td id="r-514374" data-claire-element-id="514374"><p id="r-514373" data-claire-element-id="514373">/</p></td><td id="r-514376" data-claire-element-id="514376"><p id="r-514375" data-claire-element-id="514375">/</p></td><td id="r-514378" data-claire-element-id="514378"><p id="r-514377" data-claire-element-id="514377">/</p></td><td id="r-514380" data-claire-element-id="514380"><p id="r-514379" data-claire-element-id="514379">/</p></td><td id="r-514382" data-claire-element-id="514382"><p id="r-514381" data-claire-element-id="514381">/</p></td><td id="r-514384" data-claire-element-id="514384"><p id="r-514383" data-claire-element-id="514383">/</p></td><td id="r-514386" data-claire-element-id="514386"><p id="r-514385" data-claire-element-id="514385">Est visible</p></td></tr><tr id="r-514420" data-claire-element-id="514420"><td id="r-514389" data-claire-element-id="514389"><p id="r-514388" data-claire-element-id="514388">GradientRect</p></td><td id="r-514391" data-claire-element-id="514391"><p id="r-514390" data-claire-element-id="514390">Coordonnée</p></td><td id="r-514393" data-claire-element-id="514393"><p id="r-514392" data-claire-element-id="514392">Coordonnée</p></td><td id="r-514395" data-claire-element-id="514395"><p id="r-514394" data-claire-element-id="514394">Coordonnée</p></td><td id="r-514397" data-claire-element-id="514397"><p id="r-514396" data-claire-element-id="514396">Coordonnée</p></td><td id="r-514399" data-claire-element-id="514399"><p id="r-514398" data-claire-element-id="514398">/</p></td><td id="r-514401" data-claire-element-id="514401"><p id="r-514400" data-claire-element-id="514400">/</p></td><td id="r-514403" data-claire-element-id="514403"><p id="r-514402" data-claire-element-id="514402">/</p></td><td id="r-514405" data-claire-element-id="514405"><p id="r-514404" data-claire-element-id="514404">Couleur</p></td><td id="r-514407" data-claire-element-id="514407"><p id="r-514406" data-claire-element-id="514406">Couleur</p></td><td id="r-514409" data-claire-element-id="514409"><p id="r-514408" data-claire-element-id="514408">Couleur</p></td><td id="r-514411" data-claire-element-id="514411"><p id="r-514410" data-claire-element-id="514410">Couleur</p></td><td id="r-514413" data-claire-element-id="514413"><p id="r-514412" data-claire-element-id="514412">/</p></td><td id="r-514415" data-claire-element-id="514415"><p id="r-514414" data-claire-element-id="514414">/</p></td><td id="r-514417" data-claire-element-id="514417"><p id="r-514416" data-claire-element-id="514416">/</p></td><td id="r-514419" data-claire-element-id="514419"><p id="r-514418" data-claire-element-id="514418">Est visible</p></td></tr><tr id="r-514453" data-claire-element-id="514453"><td id="r-514422" data-claire-element-id="514422"><p id="r-514421" data-claire-element-id="514421">Text</p></td><td id="r-514424" data-claire-element-id="514424"><p id="r-514423" data-claire-element-id="514423">Coordonnée</p></td><td id="r-514426" data-claire-element-id="514426"><p id="r-514425" data-claire-element-id="514425">Coordonnée</p></td><td id="r-514428" data-claire-element-id="514428"><p id="r-514427" data-claire-element-id="514427">/</p></td><td id="r-514430" data-claire-element-id="514430"><p id="r-514429" data-claire-element-id="514429">/</p></td><td id="r-514432" data-claire-element-id="514432"><p id="r-514431" data-claire-element-id="514431">/</p></td><td id="r-514434" data-claire-element-id="514434"><p id="r-514433" data-claire-element-id="514433">/</p></td><td id="r-514436" data-claire-element-id="514436"><p id="r-514435" data-claire-element-id="514435">/</p></td><td id="r-514438" data-claire-element-id="514438"><p id="r-514437" data-claire-element-id="514437">/</p></td><td id="r-514440" data-claire-element-id="514440"><p id="r-514439" data-claire-element-id="514439">/</p></td><td id="r-514442" data-claire-element-id="514442"><p id="r-514441" data-claire-element-id="514441">/</p></td><td id="r-514444" data-claire-element-id="514444"><p id="r-514443" data-claire-element-id="514443">/</p></td><td id="r-514446" data-claire-element-id="514446"><p id="r-514445" data-claire-element-id="514445">Texte</p></td><td id="r-514448" data-claire-element-id="514448"><p id="r-514447" data-claire-element-id="514447">/</p></td><td id="r-514450" data-claire-element-id="514450"><p id="r-514449" data-claire-element-id="514449">/</p></td><td id="r-514452" data-claire-element-id="514452"><p id="r-514451" data-claire-element-id="514451">Est visible</p></td></tr><tr id="r-514486" data-claire-element-id="514486"><td id="r-514455" data-claire-element-id="514455"><p id="r-514454" data-claire-element-id="514454">TextFont</p></td><td id="r-514457" data-claire-element-id="514457"><p id="r-514456" data-claire-element-id="514456">Coordonnée</p></td><td id="r-514459" data-claire-element-id="514459"><p id="r-514458" data-claire-element-id="514458">Coordonnée</p></td><td id="r-514461" data-claire-element-id="514461"><p id="r-514460" data-claire-element-id="514460">/</p></td><td id="r-514463" data-claire-element-id="514463"><p id="r-514462" data-claire-element-id="514462">/</p></td><td id="r-514465" data-claire-element-id="514465"><p id="r-514464" data-claire-element-id="514464">/</p></td><td id="r-514467" data-claire-element-id="514467"><p id="r-514466" data-claire-element-id="514466">/</p></td><td id="r-514469" data-claire-element-id="514469"><p id="r-514468" data-claire-element-id="514468">/</p></td><td id="r-514471" data-claire-element-id="514471"><p id="r-514470" data-claire-element-id="514470">/</p></td><td id="r-514473" data-claire-element-id="514473"><p id="r-514472" data-claire-element-id="514472">/</p></td><td id="r-514475" data-claire-element-id="514475"><p id="r-514474" data-claire-element-id="514474">/</p></td><td id="r-514477" data-claire-element-id="514477"><p id="r-514476" data-claire-element-id="514476">/</p></td><td id="r-514479" data-claire-element-id="514479"><p id="r-514478" data-claire-element-id="514478">Texte</p></td><td id="r-514481" data-claire-element-id="514481"><p id="r-514480" data-claire-element-id="514480">/</p></td><td id="r-514483" data-claire-element-id="514483"><p id="r-514482" data-claire-element-id="514482">Police spéciale</p></td><td id="r-514485" data-claire-element-id="514485"><p id="r-514484" data-claire-element-id="514484">Est visible</p></td></tr><tr id="r-514519" data-claire-element-id="514519"><td id="r-514488" data-claire-element-id="514488"><p id="r-514487" data-claire-element-id="514487">TextBox</p></td><td id="r-514490" data-claire-element-id="514490"><p id="r-514489" data-claire-element-id="514489">Coordonnée</p></td><td id="r-514492" data-claire-element-id="514492"><p id="r-514491" data-claire-element-id="514491">Coordonnée</p></td><td id="r-514494" data-claire-element-id="514494"><p id="r-514493" data-claire-element-id="514493">Coordonnée</p></td><td id="r-514496" data-claire-element-id="514496"><p id="r-514495" data-claire-element-id="514495">Coordonnée</p></td><td id="r-514498" data-claire-element-id="514498"><p id="r-514497" data-claire-element-id="514497">/</p></td><td id="r-514500" data-claire-element-id="514500"><p id="r-514499" data-claire-element-id="514499">/</p></td><td id="r-514502" data-claire-element-id="514502"><p id="r-514501" data-claire-element-id="514501">/</p></td><td id="r-514504" data-claire-element-id="514504"><p id="r-514503" data-claire-element-id="514503">/</p></td><td id="r-514506" data-claire-element-id="514506"><p id="r-514505" data-claire-element-id="514505">/</p></td><td id="r-514508" data-claire-element-id="514508"><p id="r-514507" data-claire-element-id="514507">/</p></td><td id="r-514510" data-claire-element-id="514510"><p id="r-514509" data-claire-element-id="514509">/</p></td><td id="r-514512" data-claire-element-id="514512"><p id="r-514511" data-claire-element-id="514511">Texte</p></td><td id="r-514514" data-claire-element-id="514514"><p id="r-514513" data-claire-element-id="514513">/</p></td><td id="r-514516" data-claire-element-id="514516"><p id="r-514515" data-claire-element-id="514515">/</p></td><td id="r-514518" data-claire-element-id="514518"><p id="r-514517" data-claire-element-id="514517">Est visible</p></td></tr><tr id="r-514552" data-claire-element-id="514552"><td id="r-514521" data-claire-element-id="514521"><p id="r-514520" data-claire-element-id="514520">Point</p></td><td id="r-514523" data-claire-element-id="514523"><p id="r-514522" data-claire-element-id="514522">Coordonnée</p></td><td id="r-514525" data-claire-element-id="514525"><p id="r-514524" data-claire-element-id="514524">Coordonnée</p></td><td id="r-514527" data-claire-element-id="514527"><p id="r-514526" data-claire-element-id="514526">Coordonnée dans l'image source</p></td><td id="r-514529" data-claire-element-id="514529"><p id="r-514528" data-claire-element-id="514528">Coordonnée dans l'image source</p></td><td id="r-514531" data-claire-element-id="514531"><p id="r-514530" data-claire-element-id="514530">Longueur dans la source</p></td><td id="r-514533" data-claire-element-id="514533"><p id="r-514532" data-claire-element-id="514532">Hauteur dans la source</p></td><td id="r-514535" data-claire-element-id="514535"><p id="r-514534" data-claire-element-id="514534">/</p></td><td id="r-514537" data-claire-element-id="514537"><p id="r-514536" data-claire-element-id="514536">/</p></td><td id="r-514539" data-claire-element-id="514539"><p id="r-514538" data-claire-element-id="514538">/</p></td><td id="r-514541" data-claire-element-id="514541"><p id="r-514540" data-claire-element-id="514540">/</p></td><td id="r-514543" data-claire-element-id="514543"><p id="r-514542" data-claire-element-id="514542">/</p></td><td id="r-514545" data-claire-element-id="514545"><p id="r-514544" data-claire-element-id="514544">/</p></td><td id="r-514547" data-claire-element-id="514547"><p id="r-514546" data-claire-element-id="514546">Ressource image</p></td><td id="r-514549" data-claire-element-id="514549"><p id="r-514548" data-claire-element-id="514548">/</p></td><td id="r-514551" data-claire-element-id="514551"><p id="r-514550" data-claire-element-id="514550">Est visible</p></td></tr></tbody></table><p id="r-514555" data-claire-element-id="514555">Sachez aussi que vous pouvez récupérer la valeur d'un attribut grâce à :</p><pre id="r-514556" data-claire-element-id="514556"><code data-claire-semantic="lua">valeur = Canvas.getAttr(objet, attribut)</code></pre><h6 id="r-placer-un-objet-au-premier-plan" data-claire-element-id="514561">Placer un objet au premier plan</h6><p id="r-514558" data-claire-element-id="514558">Si vous avez tout plein d'objets dans votre canevas, il peut être difficile de les organiser après les avoir affichés. Pour cela, vous pouvez remettre un dessin au premier plan : il sera donc affiché par dessus les autres.</p><p id="r-514559" data-claire-element-id="514559">La fonction pour ce faire est :</p><pre id="r-514560" data-claire-element-id="514560"><code data-claire-semantic="lua">Canvas.setObjOnTop(canevas, objet)</code></pre><h6 id="r-enlever-un-objet-d-un-canevas" data-claire-element-id="514564">Enlever un objet d'un canevas</h6><p id="r-514562" data-claire-element-id="514562">Si vous avez toujours tout plein d'objets dans votre canevas, vous pouvez aussi faire de l'ordre par le vide ; autrement dit, enlever un objet d'un canevas. Notez bien que ça ne détruira pas l'objet de la mémoire, pour cela un bon vieux <em>= nil</em> s'impose.</p><pre id="r-514563" data-claire-element-id="514563"><code data-claire-semantic="lua">Canvas.removeObj(canevas, objet)</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
<span class="arrow"></span>
<span class="next">Le dessin classique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
<span class="next">Que choisir ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quechoisir"></a><h2>Que choisir ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
<span class="arrow"></span>
<span class="next">Le dessin avec un Canevas</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
<span class="next">La transparence Alpha</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-que-choisir-2" data-claire-element-id="514579">Que choisir ?</h4><p id="r-514567" data-claire-element-id="514567">Bon c'est bien, on a vu qu'on pouvait dessiner de deux manières assez différentes.<br/> On a vu aussi que les canevas, c'était quand même largement plus intéressant que le dessin basique.</p><p id="r-514568" data-claire-element-id="514568">Alors pourquoi je vous explique quand même comment dessiner sans les canevas ? Et pourquoi on voit autant de scripts qui n'utilisent pas les canevas ?</p><div id="r-514570" data-claire-element-id="514570" data-claire-semantic="question"><p id="r-514569" data-claire-element-id="514569">Oui, c'est vrai ça, pourquoi ?</p></div><p id="r-514571" data-claire-element-id="514571">Chut, c'est moi qui pose les questions ici :pirate:</p><p id="r-514572" data-claire-element-id="514572">Et je donne aussi les réponses : parce que les programmeurs sont des flemmards. Et croyez-moi, entre écrire</p><pre id="r-514573" data-claire-element-id="514573"><code data-claire-semantic="lua">while not Keys.newPress.Start do
    Controls.read()

    screen.print(SCREEN_UP, 0, 0, &quot;Comment ça va ?&quot;)

    render()
end</code></pre><p id="r-514574" data-claire-element-id="514574">et</p><pre id="r-514575" data-claire-element-id="514575"><code data-claire-semantic="lua">canevas = Canvas.new()
Canvas.add(canevas, Canvas.newText(0, 0, &quot;Comment ça va ?&quot;))

while not Keys.newPress.Start do
    Controls.read()

    Canvas.draw(canevas, 0, 0)

    render()
end

Canvas.destroy(canevas)
canevas = nil</code></pre><p id="r-514576" data-claire-element-id="514576">mon choix est très vite fait ! :D</p><p id="r-514577" data-claire-element-id="514577">Disons que l'utilisation un peu lourde des canevas et leurs performances, les destinent à du &quot;dessin de masse&quot;. La possibilité d'agir sur vos dessins facilement doit aussi faire partie des arguments en leur faveur.</p><p id="r-514578" data-claire-element-id="514578">En résumé, pour des scripts rapides, sans grande prétention graphique, vous utiliserez le dessin classique. Et dès que vous voudrez passer à quelque chose d'un peu plus soigné esthétiquement, vous vous tournerez vers les canevas (cela dit, pour les jeux, il y a d'autres fonctionnalités de MicroLua qui y sont dédiées, donc vous n'utiliserez pas les Canevas).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
<span class="arrow"></span>
<span class="next">Le dessin avec un Canevas</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
<span class="next">La transparence Alpha</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LatransparenceAlpha"></a><h2>La transparence Alpha</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
<span class="arrow"></span>
<span class="next">Que choisir ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">
<span class="next">TPs à gogo</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-transparence-alpha-1" data-claire-element-id="514636">La transparence Alpha</h4><p id="r-514580" data-claire-element-id="514580">Vous pouvez dessiner tout ce que vous voulez, mais il manque quand même quelque chose : la transparence.<br/> Si MicroLua affiche correctement la transparence &quot;totale&quot;, c'est-à-dire qu'il élimine le fuschia des sprites par exemple, vous ne pouvez pas afficher quelque chose de semi-transparent, de sorte que l'on voit les dessins qui sont derrière. C'est ce que nous allons aborder maintenant.</p><h5 id="r-les-layers" data-claire-element-id="514587">Les <em>layers</em></h5><p id="r-514581" data-claire-element-id="514581">Le système de transparence de MicroLua repose sur des <em>layers</em>, autrement dit des couches de dessin. Ces couches s'empilent au fur et à mesure que vous dessinez, et vous, vous voyez la pile depuis en haut. Pour les graphistes, considérez que ce sont des calques (sur le principe).</p><p id="r-514582" data-claire-element-id="514582">Chaque <em>layer</em> possède son propre <strong>coefficient de transparence</strong>, qui définit l'opacité de la couche. Un coefficient de 1 équivaut à un <em>layer</em> totalement transparent, tandis qu'une couche à 99 est opaque.</p><div id="r-514584" data-claire-element-id="514584" data-claire-semantic="question"><p id="r-514583" data-claire-element-id="514583">C'est carrément bizarre comme plage de valeurs !</p></div><p id="r-514585" data-claire-element-id="514585">Et bien, de base la µLibrary gère le coefficient de 0 à 31. Nous le prenons donc entre 0 et 99, cependant la valeur de 0 se contente d'afficher les contours du dessin ; par exemple, si vous dessinez un rectangle plein à 0, c'est comme si vous dessiniez un rectangle &quot;vide&quot;. Notez que même si vous pouvez donner 0 en coefficient, MicroLua le &quot;transforme&quot; en 1.</p><p id="r-514586" data-claire-element-id="514586">Par ailleurs, les <em>layers</em> sont repérés par leur index numérique (en partant de 1). Notez qu'il y a un nombre maximal de <em>layers</em>, cependant il est suffisamment important pour que vous n'ayez aucun souci à vous faire de ce côté là ;)</p><h5 id="r-dessine-moi-un-mouton-transparent" data-claire-element-id="514595">Dessine-moi un mouton transparent !</h5><p id="r-514588" data-claire-element-id="514588">La fonction principale est</p><pre id="r-514589" data-claire-element-id="514589"><code data-claire-semantic="lua">screen.setAlpha(coefficient[, layer])</code></pre><p id="r-514590" data-claire-element-id="514590">Dès lors que vous l'appelez, <strong>tous</strong> les dessins qui suivront seront assignés au layer dont vous aurez donné l'index et seront affectés du coefficient de transparence spécifié.</p><p id="r-514591" data-claire-element-id="514591">Si vous voulez réinitialiser le système d'affichage transparent, c'est-à-dire revenir à la première couche et dessiner totalement opaque, faites :</p><pre id="r-514592" data-claire-element-id="514592"><code data-claire-semantic="lua">screen.setAlpha(ALPHA_RESET)</code></pre><p id="r-514593" data-claire-element-id="514593">Le layer est optionnel, vous comprenez pourquoi : on revient au premier :p <br/> Je précise que µLua effectue cette instruction automatiquement dans la fonction <em>render()</em>.</p><p id="r-514594" data-claire-element-id="514594">Notez aussi que si vous n'avez aucun besoin de gérer vous-même les <em>layers</em>, vous pouvez laisser µLua s'en charger. En effet, vous l'aurez remarqué : le paramètre <em>layer</em> est optionnel. Si vous ne le mettez pas, ça passe tout simplement au suivant ;)</p><h5 id="r-d-autres-infos" data-claire-element-id="514602">D'autres infos</h5><p id="r-514596" data-claire-element-id="514596">Vous pouvez cependant suivre le layer actuellement utilisé grâce à la fonction</p><pre id="r-514597" data-claire-element-id="514597"><code data-claire-semantic="lua">screen.getLayer()</code></pre><p id="r-514598" data-claire-element-id="514598">Elle retourne l'index du prochain layer qui sera utilisé.</p><p id="r-514599" data-claire-element-id="514599">De plus, la fonction</p><pre id="r-514600" data-claire-element-id="514600"><code data-claire-semantic="lua">screen.getAlphaLevel()</code></pre><p id="r-514601" data-claire-element-id="514601">Vous donnera le coefficient de transparence du layer actuel.</p><h5 id="r-exemple-tp" data-claire-element-id="514635">Exemple - TP</h5><p id="r-514603" data-claire-element-id="514603">Pour vous expliquer plus clairement comment on utilise cette fonctionnalité, je vais vous guider dans la réalisation d'un petit script qui utilise la transparence.</p><h6 id="r-le-principe-23" data-claire-element-id="514606">Le principe</h6><p id="r-514604" data-claire-element-id="514604">C'est très simple : on dessine deux rectangles sur l'écran du bas (vous les ferez comme vous voulez, tant qu'il y en a deux et qu'il ne se chevauchent pas entièrement ça va ;) ). L'un deux sera transparent avec un coefficient contenu dans la variable <em>coefficient</em>. L'autre aura le coefficient opposé ; c'est-à-dire que si le premier est à 50, l'autre est aussi à 50, si le premier est à 1, l'autre est à 99, et vice-versa.</p><p id="r-514605" data-claire-element-id="514605">Le coefficient sera réglé à l'aide des flèches Haut et Bas, et sera de plus affiché sur l'écran du haut (de la façon que vous voudrez). Sa valeur par défaut est d'ailleurs 50.</p><h6 id="r-la-base-3" data-claire-element-id="514609">La base</h6><p id="r-514607" data-claire-element-id="514607">Je vous donne le code à partir duquel vous allez faire le script :</p><pre id="r-514608" data-claire-element-id="514608"><code data-claire-semantic="lua">coefficient = 50

while not Keys.newPress.Start do
    Controls.read()
    
    -- Ce que vous allez coder sera ici.

    render()
end

coefficient = nil</code></pre><h6 id="r-la-selection-du-coefficient-de-transparence" data-claire-element-id="514614">La sélection du coefficient de transparence</h6><p id="r-514610" data-claire-element-id="514610">On veut de façon logique augmenter le coefficient en appuyant sur la flèche Haut et le diminuer en appuyant sur la flèche Bas.<br/> N'oubliez pas qu'il doit être compris entre 1 et 99 inclus ;)</p><p id="r-514611" data-claire-element-id="514611">Vous devriez donc avoir quelque d'équivalent à :</p><div id="r-514613" data-claire-element-id="514613"><pre id="r-514612" data-claire-element-id="514612"><code data-claire-semantic="lua">coefficient = 50

while not Keys.newPress.Start do
    Controls.read()
    
    if Keys.held.Up and coefficient &lt; 99 then
        coefficient = coefficient + 1
    end
    if Keys.held.Down and coefficient &gt; 1 then
        coefficient = coefficient - 1
    end

    render()
end

coefficient = nil</code></pre></div><h6 id="r-l-affichage-du-coefficient-de-transparence" data-claire-element-id="514619">L'affichage du coefficient de transparence</h6><p id="r-514615" data-claire-element-id="514615">Vous n'avez qu'à afficher <em>coefficient</em>, aucune difficulté ;)</p><p id="r-514616" data-claire-element-id="514616"></p><div id="r-514618" data-claire-element-id="514618"><pre id="r-514617" data-claire-element-id="514617"><code data-claire-semantic="lua">coefficient = 50

while not Keys.newPress.Start do
    Controls.read()
    
    if Keys.held.Up and coefficient &lt; 99 then
        coefficient = coefficient + 1
    end
    if Keys.held.Down and coefficient &gt; 1 then
        coefficient = coefficient - 1
    end

    screen.print(SCREEN_UP, 0, 0, &quot;Coefficient de transparence : &quot;..coefficient)

    render()
end

coefficient = nil</code></pre></div><h6 id="r-les-deux-rectangles" data-claire-element-id="514629">Les deux rectangles</h6><p id="r-514620" data-claire-element-id="514620">Voici donc la partie la plus intéressante, celle qui utilise la transparence.</p><p id="r-514621" data-claire-element-id="514621">D'abord, le rectangle transparent de coefficient donné par la variable (moi je le dessine sur la première moitié haute de l'écran du bas, et bleu, mais vous faites comme vous le sentez ^^ ).<br/> Je vous rappelle donc que vous réglez d'abord la transparence, et qu'ensuite vous dessinez ce que vous voulez.</p><p id="r-514622" data-claire-element-id="514622"></p><div id="r-514624" data-claire-element-id="514624"><pre id="r-514623" data-claire-element-id="514623"><code data-claire-semantic="lua">coefficient = 50

while not Keys.newPress.Start do
    Controls.read()
    
    if Keys.held.Up and coefficient &lt; 99 then
        coefficient = coefficient + 1
    end
    if Keys.held.Down and coefficient &gt; 1 then
        coefficient = coefficient - 1
    end

    screen.print(SCREEN_UP, 0, 0, &quot;Coefficient de transparence : &quot;..screen.getAlphaLevel())

    screen.setAlpha(coefficient)
    screen.drawFillRect(SCREEN_DOWN, 0, 0, 256, 96, Color.new(0, 0, 31))

    render()
end

coefficient = nil</code></pre></div><p id="r-514625" data-claire-element-id="514625">Si vous avez trouvé ça, l'autre rectangle ne devrait pas poser de problèmes ;)</p><p id="r-514626" data-claire-element-id="514626"></p><div id="r-514628" data-claire-element-id="514628"><pre id="r-514627" data-claire-element-id="514627"><code data-claire-semantic="lua">coefficient = 50

while not Keys.newPress.Start do
    Controls.read()
    
    if Keys.held.Up and coefficient &lt; 99 then
        coefficient = coefficient + 1
    end
    if Keys.held.Down and coefficient &gt; 1 then
        coefficient = coefficient - 1
    end

    screen.print(SCREEN_UP, 0, 0, &quot;Coefficient de transparence : &quot;..screen.getAlphaLevel())

    screen.setAlpha(coefficient)
    screen.drawFillRect(SCREEN_DOWN, 0, 0, 256, 96, Color.new(0, 0, 31))

    screen.setAlpha(100 - coefficient)
    screen.drawFillRect(SCREEN_DOWN, 0, 96, 256, 192, Color.new(0, 0, 31))

    render()
end

coefficient = nil</code></pre></div><h6 id="r-bilan-5" data-claire-element-id="514634">Bilan</h6><p id="r-514630" data-claire-element-id="514630">Voici donc le script final :</p><pre id="r-514631" data-claire-element-id="514631"><code data-claire-semantic="lua">coefficient = 50    -- Coefficient de transparence, par défaut à 50

while not Keys.newPress.Start do
    Controls.read()
    
    -- Gestion de la modification du coefficient
    -- Il doit rester entre 1 et 99 !
    if Keys.held.Up and coefficient &lt; 99 then
        coefficient = coefficient + 1
    end
    if Keys.held.Down and coefficient &gt; 1 then
        coefficient = coefficient - 1
    end
    
    -- Affichage du coefficient
    screen.print(SCREEN_UP, 0, 0, &quot;Coefficient de transparence : &quot;..screen.getAlphaLevel())

    -- Dessin du premier rectangle
    screen.setAlpha(coefficient)
    screen.drawFillRect(SCREEN_DOWN, 0, 0, 256, 96, Color.new(0, 0, 31))

    -- Dessin du second rectangle, de transparence &quot;opposée&quot; au premier
    screen.setAlpha(100 - coefficient)
    screen.drawFillRect(SCREEN_DOWN, 0, 96, 256, 192, Color.new(0, 0, 31))

    render()
end

coefficient = nil</code></pre><p id="r-514632" data-claire-element-id="514632">Croyez-moi, la transparence permet de faire de très jolis effets graphiques qui amélioreront considérablement l'aspect esthétique de vos homebrews :D</p><p id="r-514633" data-claire-element-id="514633">Maintenant, vous pouvez déjà faire de nombreuses choses avec MicroLua (et commencer à développer vos propres homebrews !).<br/> Mais avant, je vous conseille de continuer votre cours vers... les TPs ! :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
<span class="arrow"></span>
<span class="next">Que choisir ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">
<span class="next">TPs à gogo</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPsgogo"></a><h2>TPs à gogo</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
<span class="arrow"></span>
<span class="next">La transparence Alpha</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
<span class="next">TP1 : L&#039;image qui bouge</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-514638" data-claire-element-id="514638">Vous pouvez déjà faire de très bonnes choses avec µLua ! Mais je vous conseille de suivre ces quelques TPs, il vous donneront un bon entraînement pour réutiliser tout ce que vous avez appris.</p>
</div><a name="TP1L039imagequibouge"></a><h2>TP1 : L&#039;image qui bouge</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">
<span class="arrow"></span>
<span class="next">TPs à gogo</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
<span class="next">TP2 : Un morpion</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-tp1-l-image-qui-bouge" data-claire-element-id="514676">TP1 : L'image qui bouge</h4><p id="r-514639" data-claire-element-id="514639">Dans ce premier TP vous allez devoir faire bouger une image grâce au stylet.</p><p id="r-514640" data-claire-element-id="514640">On va utiliser cette image (enfin, vous prenez ce que vous voulez !) :</p><figure id="r-514642" data-claire-element-id="514643"><img id="r-514641" data-claire-element-id="514641" src="medias/uploads.siteduzero.com_files_174001_175000_174449.png" alt="Image utilisateur"/></figure><p id="r-514644" data-claire-element-id="514644">(pour l'enregistrer, faites Clic droit - Enregistrer (l'image) sous...)</p><h5 id="r-on-reflechit-d-abord" data-claire-element-id="514650">On réfléchit d'abord !</h5><p id="r-514645" data-claire-element-id="514645">Avant de se lancer corps et âme dans le code, on va réfléchir un peu.</p><p id="r-514646" data-claire-element-id="514646">On va faire bouger l'image en fonction des déplacements du stylet, donc les coordonnées de l'image vont bouger. Le plus simple est donc de stocker l'abscisse et l'ordonnée de l'image dans des variables.<br/> Les valeurs de ces variables seront donc les coordonnées du stylet.</p><aside id="r-514648" data-claire-element-id="514648" data-claire-semantic="warning"><p id="r-514647" data-claire-element-id="514647">N'oubliez pas d'initialiser les variables à zéro avant la boucle !</p></aside><p id="r-514649" data-claire-element-id="514649">En fait, ça n'est pas vraiment gênant si vous ne le faites pas, mais c'est une bonne habitude à prendre (par exemple si vous essayez un jour un langage plus typé que Lua).</p><h5 id="r-maintenant-vous-pouvez-lacher-le-codeur-qui-est-en-vous" data-claire-element-id="514659">Maintenant, vous pouvez lâcher le codeur qui est en vous !</h5><p id="r-514651" data-claire-element-id="514651">3, 2, 1, Partez !</p><div id="r-514653" data-claire-element-id="514653" data-claire-semantic="question"><p id="r-514652" data-claire-element-id="514652">C'est bon :euh: ?</p></div><p id="r-514654" data-claire-element-id="514654">C'était pas trop dur, non :-° ?<br/> Allez voici ma correction :</p><p id="r-514655" data-claire-element-id="514655"></p><div id="r-514657" data-claire-element-id="514657"><pre id="r-514656" data-claire-element-id="514656"><code data-claire-semantic="lua">image = Image.load(&quot;tp.png&quot;, VRAM) -- On charge l'image
x = 0 --  On crée les variables abscisse et ordonnee
y = 0

while not Keys.held.Start do -- On crée la boucle de pause
    Controls.read() -- On met à jour les commandes

    if Stylus.held then -- La condition &quot;si le stylet est appuyé&quot;
    -- Alors les variables x et y prennent la valeur des coordonnées du stylet

        x = Stylus.X 
        y = Stylus.Y
    end

    screen.blit(SCREEN_DOWN, x, y, image) -- On affiche l'image

    render()
end

-- On efface l'image de la mémoire
Image.destroy(image)
image = nil

-- On efface nos variables abscisse et ordonnee
x = nil
y = nil</code></pre></div><p id="r-514658" data-claire-element-id="514658">Si vous n'avez pas fait la même chose (enfin, ça doit pas être bien différent :-° ) mais que ça marche, c'est bien ! :D Si vous n'avez pas réussi, relisez ce code pour bien le comprendre, et votre cours.</p><h5 id="r-des-ameliorations-1" data-claire-element-id="514675">Des améliorations</h5><p id="r-514660" data-claire-element-id="514660">Si le cœur vous en dit, vous pouvez très bien améliorer ce script :</p><ul id="r-514674" data-claire-element-id="514674"><li id="r-514664" data-claire-element-id="514664"><p id="r-514661" data-claire-element-id="514661">On peut aller plus vite, et sans passer par des variables ! (réfléchissez-y avant de regarder :-° )</p><div id="r-514663" data-claire-element-id="514663"><pre id="r-514662" data-claire-element-id="514662"><code data-claire-semantic="lua">image = Image.load(&quot;tp.png&quot;, VRAM)

while not Keys.newPress.Start do
    Controls.read()
	
    screen.blit(SCREEN_DOWN, Stylus.X, Stylus.Y, image)
	
    render()
end

Image.destroy(image)
image = nil</code></pre></div></li><li id="r-514671" data-claire-element-id="514671"><p id="r-514665" data-claire-element-id="514665">Ce script est pas mal, mais ça serait peut-être mieux si on pouvait bouger l'image par son centre ?<br/>Aide :</p><div id="r-514667" data-claire-element-id="514667"><p id="r-514666" data-claire-element-id="514666">Aidez-vous de Image.width() et Image.height() !</p></div><div id="r-514670" data-claire-element-id="514670"><pre id="r-514668" data-claire-element-id="514668"><code data-claire-semantic="lua">image = Image.load(&quot;tp.png&quot;, VRAM)

while not Keys.newPress.Start do
    Controls.read()
	
    screen.blit(SCREEN_DOWN, Stylus.X - Image.width(image) / 2, Stylus.Y - Image.height(image) / 2, image)
	
    render()
end

Image.destroy(image)
image = nil</code></pre><p id="r-514669" data-claire-element-id="514669">Ce code repose sur une astuce tout bête : on obtient le centre de l'image avec la moitié de la longueur et de la largeur ; pour bouger le centre, on additionne ces moitiés aux coordonnées correspondantes.</p></div></li><li id="r-514673" data-claire-element-id="514673"><p id="r-514672" data-claire-element-id="514672">Allez, et on peut aussi, pourquoi pas, afficher les coordonnées !<br/> Bon, là je ne vous mets pas de correction, vous êtes grands hein ? :)</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">
<span class="arrow"></span>
<span class="next">TPs à gogo</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
<span class="next">TP2 : Un morpion</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TP2Unmorpion"></a><h2>TP2 : Un morpion</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
<span class="arrow"></span>
<span class="next">TP1 : L&#039;image qui bouge</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">
<span class="next">Les Maps et ScrollMaps</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-tp2-un-morpion" data-claire-element-id="514739">TP2 : Un morpion</h4><p id="r-514677" data-claire-element-id="514677">En deuxième TP, je vous propose le classique, mais néanmoins efficace jeu du morpion.</p><aside id="r-514679" data-claire-element-id="514679" data-claire-semantic="warning"><p id="r-514678" data-claire-element-id="514678">Ce TP m'a été signalé comme assez ardu plus au niveau algorithmique que pour l'application de ce qu'on a vu. C'est pourquoi il est normal que vous puissiez ne pas le faire d'un seul coup, surtout si vous avez lu le tuto depuis le début d'une seule traite. Essayez un peu, et si ça vient pas faites autre chose avant d'y revenir (vous pouvez toujours le passer bien sûr, ça n'est qu'un TP, mais ça vous montre que vous pouvez déjà faire de bonnes choses). Et surtout, ne vous découragez pas !</p></aside><h5 id="r-etude-preliminaire" data-claire-element-id="514699">Etude préliminaire</h5><p id="r-514680" data-claire-element-id="514680">Avant de coder, on réfléchit un peu...</p><h6 id="r-deroulement-general" data-claire-element-id="514683">Déroulement général</h6><p id="r-514681" data-claire-element-id="514681">Pour ceux qui ne connaîtraient pas le principe, le but du morpion est d'aligner trois croix (ou trois ronds) dans une grille de 3*3 cases, horizontalement, verticalement, ou en diagonale. Les deux joueurs jouent chacun leur tour. Les joueurs posent le premier symbole à tour de rôle.<br/> On va convenir que le premier joueur a les croix, le second a les ronds.<br/> On va se contenter d'un mode Deux joueurs, parce que c'est déjà un bon entraînement que de faire ça, et ensuite, la conception d'une IA est beaucoup plus longue. De plus, l'algorithmique n'est pas le but de ce TP.</p><p id="r-514682" data-claire-element-id="514682">Maintenant, comment va se dérouler exactement une partie ? A chaque tour, le joueur qui commence pose son symbole dans la case qu'il veut. Puis c'est à l'autre joueur. Dès que trois symboles sont alignés, la partie s'arrête.</p><h6 id="r-point-de-vue-technique" data-claire-element-id="514698">Point de vue technique</h6><p id="r-514684" data-claire-element-id="514684">Je pense que le plus simple pour choisir l'endroit où l'on met sa croix ou son rond est encore l'utilisation de l'écran tactile ;) <br/> Le joueur va toucher une case pour désigner l'endroit où il veut poser le symbole. Il faudra donc déterminer à partir des coordonnées du stylet la case désignée SI le stylet est appuyé (j'insiste là-dessus, sans cette précaution ça peut faire des choses bizarres ^^ ).</p><aside id="r-514686" data-claire-element-id="514686" data-claire-semantic="information"><p id="r-514685" data-claire-element-id="514685">Si vous avez visité le forum µLua, vous aurez certainement entendu parler de la lib StylusBox de killer01. Elle fait exactement ce que l'on va faire ici, cependant je pense qu'il est bien plus intéressant de le faire à la main ^^ (et c'est aussi plus rapide, si vous trouvez la bonne façon de faire).</p></aside><p id="r-514687" data-claire-element-id="514687">Cependant, il faut aussi vérifier que la case n'est pas déjà prise. Ce qui nous amène à une autre question : comment stocker dans des variables les symboles ? On va utiliser ce que l'on appelle un tableau à deux dimensions.</p><div id="r-514689" data-claire-element-id="514689" data-claire-semantic="question"><p id="r-514688" data-claire-element-id="514688">Gné ? o_O Cékoissa ?</p></div><p id="r-514690" data-claire-element-id="514690">C'est en fait très simple : on a une table, dont chaque élément va, par exemple, représenter une ligne (on peut très bien faire par colonne). Dans notre cas, cette table aura donc trois éléments. Cependant, chaque ligne a elle-même trois cases. Les éléments de la première table seront donc des tables de trois cases chacune. Vous avez compris ? :)</p><p id="r-514691" data-claire-element-id="514691">On revient au stockage des symboles : les cases contiendront des Strings, &quot;X&quot; pour les croix, et &quot;O&quot; pour les ronds.<br/> Si le stylet est pressé entre telle et telle valeur en ordonnée, c'est qu'on est dans telle ligne. S'il est pressé entre telle et telle valeur en abscisse, c'est qu'on est dans telle case. Et maintenant qu'on sait quelle case a été choisie... je vous laisse faire :)</p><div id="r-514693" data-claire-element-id="514693" data-claire-semantic="question"><p id="r-514692" data-claire-element-id="514692">Bon, d'accord. C'était pas si compliqué. Mais j'ai une question : comment on sait si on a aligné trois symboles ?</p></div><p id="r-514694" data-claire-element-id="514694">Ah, ça je vous laisse réfléchir ;) <br/> Si vraiment vous ne trouvez pas, il y a un peu d'aide plus bas... Mais n'allez pas voir tout de suite !</p><div id="r-514696" data-claire-element-id="514696" data-claire-semantic="question"><p id="r-514695" data-claire-element-id="514695">Et l'affichage de la grille, et des symboles ?</p></div><p id="r-514697" data-claire-element-id="514697">Cessez de poser tant de questions ! Vous tracez quatre lignes, vous faites deux boucles l'une dans l'autre, et c'est bon !</p><h5 id="r-a-vos-editeurs-de-texte" data-claire-element-id="514716">A vos éditeurs de texte !</h5><p id="r-514700" data-claire-element-id="514700">L'heure est venue de coder !</p><p id="r-514701" data-claire-element-id="514701">Prenez votre temps, ce script est relativement simple à mettre en place. Si vous bloquez, réfléchissez bien à la façon dont se déroule la partie.</p><p id="r-514702" data-claire-element-id="514702">Vous ne trouvez pas comment vérifier si trois symboles sont alignés ? Vous avez pourtant réfléchi toute la journée, sans succès ? Vous êtes désespéré au point de vous jeter par la fenêtre ? :-° Alors avant de sauter, regardez plutôt ça :</p><div id="r-514714" data-claire-element-id="514714"><p id="r-514703" data-claire-element-id="514703">Il y a, pour chaque symbole, huit configurations possibles de victoire :</p><ul id="r-514712" data-claire-element-id="514712"><li id="r-514705" data-claire-element-id="514705"><p id="r-514704" data-claire-element-id="514704">la diagonale haut-gauche / bas-droite, qui correspond donc à la première case de la première ligne, la seconde case de la seconde ligne, et la troisième case de la troisième ligne</p></li><li id="r-514707" data-claire-element-id="514707"><p id="r-514706" data-claire-element-id="514706">la diagonale haut-droite / bas-gauche, qui correspond à la troisième case de la première ligne, etc.</p></li><li id="r-514709" data-claire-element-id="514709"><p id="r-514708" data-claire-element-id="514708">les lignes</p></li><li id="r-514711" data-claire-element-id="514711"><p id="r-514710" data-claire-element-id="514710">les colonnes (première case de la première ligne, première case de la seconde ligne, etc.)</p></li></ul><p id="r-514713" data-claire-element-id="514713">Quand le joueur qui a les croix a fini de jouer, on regarde si des croix correspondent à cette configuration ; et pareil pour les ronds.<br/> Si avec ça vous ne trouvez pas... ^^</p></div><p id="r-514715" data-claire-element-id="514715">3, 2, 1, Partez !</p><h5 id="r-correction-177" data-claire-element-id="514722">Correction</h5><p id="r-514717" data-claire-element-id="514717">*son de cloche* C'est fini !</p><p id="r-514718" data-claire-element-id="514718">Alors, vous y êtes arrivés ?<br/> Voici ma version du code ; bien sûr, si vous n'avez pas la même mais que ça marche, c'est bien !</p><pre id="r-514719" data-claire-element-id="514719"><code data-claire-semantic="lua">symboles = {{&quot;&quot;, &quot;&quot;, &quot;&quot;}, {&quot;&quot;, &quot;&quot;, &quot;&quot;}, {&quot;&quot;, &quot;&quot;, &quot;&quot;}}
joueur = &quot;X&quot;
quitter = false

-- Couleur
blanc = Color.new(31, 31, 31)
bleu = Color.new(0, 0, 31)
rouge = Color.new(31, 0, 0)


function alignes(symboles, joueur)
    -- On inverse le  symbole du joueur reçu, car on reçoit le joueur suivant, pas celui qui vient de jouer
    local joueurPrecedent = &quot;&quot;
	
    if joueur == &quot;X&quot; then
        joueurPrecedent = &quot;O&quot;
    else
        joueurPrecedent = &quot;X&quot;
    end
	
    -- Teste si on a un alignement sur une ligne
    for i, ligne in ipairs(symboles) do
        if ligne[1] == joueurPrecedent and ligne[2] == joueurPrecedent and ligne[3] == joueurPrecedent then
            return true
        end
    end
    -- Teste si on a un alignement sur une colonne
    for i = 1, 3 do
        if symboles[1][i] == joueurPrecedent and symboles[2][i] == joueurPrecedent and symboles[3][i] == joueurPrecedent then
            return true
        end
    end
    -- Teste si on a un alignement sur la diagonale haut-gauche / bas-droite
    if symboles[1][1] == joueurPrecedent and symboles[2][2] == joueurPrecedent and symboles[3][3] == joueurPrecedent then
        return true
    end
    -- Teste si on a un alignement sur la diagonale haut-droite / bas-gauche
    if symboles[1][3] == joueurPrecedent and symboles[2][2] == joueurPrecedent and symboles[3][1] == joueurPrecedent then
        return true
    end
    -- Si on est arrivé jusqu'ici, c'est qu'on n'a pas trouvé d'alignement, donc on renvoie false
    return false
end


while not quitter and not alignes(symboles, joueur) do
    --[[\\ AFFICHAGES DIVERS //]]--
	
    -- Notez que j'ai fait des cases de 20*20, c'est totalement arbitraire
    -- J'admets qu'un caractère fait 5px de large sur 8px de haut
	
    -- Affichage des lignes verticales
    screen.drawLine(SCREEN_DOWN, 20, 0, 20, 60, blanc)
    screen.drawLine(SCREEN_DOWN, 40, 0, 40, 60, blanc)
	
    -- Affichage des lignes horizontales
    screen.drawLine(SCREEN_DOWN, 0, 20, 60, 20, blanc)
    screen.drawLine(SCREEN_DOWN, 0, 40, 60, 40, blanc)
	
    -- Affichage des symboles
    for i, elem in ipairs(symboles) do						        -- Utiliser la boucle for de cette façon est un choix personnel, on aurait tout aussi bien pu faire &quot;for i = 1, 3 do&quot;
        for j = 1, 3 do									-- Pour chaque case de la ligne...
            screen.print(SCREEN_DOWN, 7+20*(j-1), 6+20*(i-1), elem[j])		-- Les calculs bizarres, c'est pour centrer à peu près les symboles dans les cases (c'est pas grave si vous ne les comprenez pas, mais c'est à mon sens la seule façon de les centrer)
        end	
    end
	
    -- Affichage du joueur qui doit jouer
    screen.print(SCREEN_DOWN, 0, 100, &quot;C'est au joueur des &quot;..joueur..&quot; de jouer.&quot;, bleu)
	
    screen.print(SCREEN_DOWN, 0, 180, &quot;Appuyer sur Start pour quitter.&quot;)
	
    render()
    --[[\\ AFFICHAGES DIVERS //]]--
	
    --[[\\ GESTION DES EVENEMENTS //]]--
    Controls.read()
	
    if Stylus.held then
        for y = 1, 3 do
            if Stylus.Y &gt;= 20*(y-1) and Stylus.Y &lt; 20*y then
                for x = 1, 3 do
                    if Stylus.X &gt;= 20*(x-1) and Stylus.X &lt; 20*x then
                        if symboles[y][x] == &quot;&quot; then
                            symboles[y][x] = joueur
                            if joueur == &quot;X&quot; then
                                joueur = &quot;O&quot;
                            else
                                joueur = &quot;X&quot;
                            end
                        end
                    end
                end
            end
        end
    end
	
    if Keys.newPress.Start then
        quitter = true
    end
    --[[\\ GESTION DES EVENEMENTS //]]--
end

-- Si on sort de la boucle, c'est qu'un joueur a gagné ou qu'on veut quitter
while not quitter and not Keys.newPress.Start do
    Controls.read()
	
    local joueurPrecedent = &quot;&quot;
	
    if joueur == &quot;X&quot; then
        joueurPrecedent = &quot;O&quot;
    else
        joueurPrecedent = &quot;X&quot;
    end
	
    -- Affichage des lignes verticales
    screen.drawLine(SCREEN_DOWN, 20, 0, 20, 60, blanc)
    screen.drawLine(SCREEN_DOWN, 40, 0, 40, 60, blanc)
	
    -- Affichage des lignes horizontales
    screen.drawLine(SCREEN_DOWN, 0, 20, 60, 20, blanc)
    screen.drawLine(SCREEN_DOWN, 0, 40, 60, 40, blanc)
	
    -- Affichage des symboles
    for i, elem in ipairs(symboles) do
        for j = 1, 3 do
            screen.print(SCREEN_DOWN, 7+20*(j-1), 6+20*(i-1), elem[j])
        end	
    end
	
    -- Affichage du gagnant
    screen.print(SCREEN_DOWN, 0, 100, &quot;LE JOUEUR DES &quot;..joueurPrecedent..&quot; A GAGNE !&quot;, rouge)
	
    render()
end


symboles = nil
joueur = nil
blanc = nil
bleu = nil
rouge = nil</code></pre><p id="r-514720" data-claire-element-id="514720">Voilà, voilà.<br/> Pour déterminer l'endroit où l'on choisit de mettre le symbole, la première chose qui vient à l'esprit est de faire plusieurs if, mais c'est long, et on répète plusieurs fois la même chose ; et ça, en programmation, saymal. Alors que si l'on réfléchit un minimum, on s'aperçoit qu'un schéma est visible. On n'a plus qu'à le mettre en place avec deux boucles !</p><p id="r-514721" data-claire-element-id="514721">Mine de rien, avec le peu qu'on a appris, on peut faire beaucoup de choses !</p><h5 id="r-ameliorations-27" data-claire-element-id="514738">Améliorations</h5><p id="r-514723" data-claire-element-id="514723">On ne fait pas de TP sans améliorations à proposer !</p><ul id="r-514734" data-claire-element-id="514734"><li id="r-514725" data-claire-element-id="514725"><p id="r-514724" data-claire-element-id="514724">Faites en sorte que l'on puisse rejouer après avoir fini la partie. N'oubliez pas qu'il faut changer de premier joueur à chaque partie !</p></li><li id="r-514727" data-claire-element-id="514727"><p id="r-514726" data-claire-element-id="514726">Mettez en place un système de score ; chaque partie gagnée rapporte un point</p></li><li id="r-514729" data-claire-element-id="514729"><p id="r-514728" data-claire-element-id="514728">Vous pouvez aussi améliorer l'esthétisme de ce morpion (parce que là, j'veux pas dire, mais c'est moche :-° )</p></li><li id="r-514731" data-claire-element-id="514731"><p id="r-514730" data-claire-element-id="514730">Si vous vous en sentez le courage, programmez une IA ! C'est un excellent exercice de réflexion</p></li><li id="r-514733" data-claire-element-id="514733"><p id="r-514732" data-claire-element-id="514732">Et tant que vous y êtes, concevez un menu pour choisir entre le mode Un joueur et Deux joueurs !</p></li></ul><p id="r-514735" data-claire-element-id="514735">Vous avez vu, c'est pas trop difficile si on connaît bien son cours, non ^^ ?</p><p id="r-514736" data-claire-element-id="514736">Allez, vous pouvez vous reposer. Vous avez bien travaillé !</p><p id="r-514737" data-claire-element-id="514737">Voilà, vous connaissez maintenant les bases de Microlua !<br/> Vous pouvez déjà faire des petits jeux ou programmes. C'est en essayant plein de choses que vous vous améliorerez !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
<span class="arrow"></span>
<span class="next">TP1 : L&#039;image qui bouge</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">
<span class="next">Les Maps et ScrollMaps</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesMapsetScrollMaps"></a><h2>Les Maps et ScrollMaps</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
<span class="arrow"></span>
<span class="next">TP2 : Un morpion</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
<span class="next">Préparation de la map</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-514743" data-claire-element-id="514743">Mettons qu'il vous est passé par la tête de faire un super RPG avec en héros principal un elfe tout habillé de vert (toute assimilation à un célèbre jeu de Nintendo est fortuite bien entendu :) ). Première question : comment allez-vous afficher le décor ?<br/> C'est là que les <em>maps</em> (ou <em>cartes</em> en bon français) interviennent : elles vont vous permettre de créer l'univers de votre jeu rien qu'avec deux fichiers, et sans vous prendre la tête !</p>
</div><a name="Prparationdelamap"></a><h2>Préparation de la map</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">
<span class="arrow"></span>
<span class="next">Les Maps et ScrollMaps</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
<span class="next">Utilisation dans vos programmes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-preparation-de-la-map-1" data-claire-element-id="514771">Préparation de la map</h4><h5 id="r-presentation-133" data-claire-element-id="514752">Présentation</h5><p id="r-514744" data-claire-element-id="514744">Tout d'abord, il faut savoir ce qu'est une map.</p><p id="r-514745" data-claire-element-id="514745">Une <em>map</em>, c'est une carte (traduction littérale du mot anglais ;) ). Et cette carte est constituée de <em>tiles</em> (ou tuiles en français), qui correspondent en fait à des cases.</p><p id="r-514746" data-claire-element-id="514746">Dans les jeux vidéo, ça ressemble à ça :</p><figure id="r-514748" data-claire-element-id="514749"><img id="r-514747" data-claire-element-id="514747" src="medias/uploads.siteduzero.com_files_318001_319000_318546.jpg" alt="Image utilisateur"/></figure><p id="r-514750" data-claire-element-id="514750">Le décor (le sol, les arbres, tout) est géré par une map (enfin, disons que les maps correspondent à ça, Oracle of Ages a pas été codé en MicroLua ^^ ). Les personnages que l'on voit par dessus, ce sont des sprites, et on s'y intéressera juste après.</p><p id="r-514751" data-claire-element-id="514751">Avec MicroLua, un map est constituée de deux fichiers : une image PNG, qui contient les images des tuiles, et un fichier <em>.map</em>, qui contient la structure de la carte. On y reviendra.<br/> Du point de vue du script ensuite : la map peut être modifiée (on peut changer une tuile depuis le programme très facilement) et bougée (on peut la faire défiler). On l'affiche et la détruit comme l'on manipulerait une image.</p><h5 id="r-les-images-des-tiles" data-claire-element-id="514760">Les images des tiles</h5><p id="r-514753" data-claire-element-id="514753">Premièrement, il nous faut un fichier qui contient les images des tiles.</p><p id="r-514754" data-claire-element-id="514754">C'est un simple fichier PNG de taille carrée, qui a en général comme longueur et largeur des multiples de 8. La raison est que les écrans de la DS ont eux-mêmes des longueurs multiples de 8 (256 / 8 = 32 et 192 / 8 = 24), ainsi en affichant la map, on est sûr qu'elle prendra bien tout l'espace.</p><p id="r-514755" data-claire-element-id="514755">Le fichier des tiles tel qu'il est dans l'exemple (dans votre dossier &quot;Examples&quot;) est celui-ci :</p><figure id="r-514757" data-claire-element-id="514758"><img id="r-514756" data-claire-element-id="514756" src="medias/uploads.siteduzero.com_files_318001_319000_318551.png" alt="Image utilisateur"/></figure><p id="r-514759" data-claire-element-id="514759">Ce fichier contient donc les tiles. Ce sont des carrés en général de 8*8px (vous savez maintenant pourquoi).<br/> Si vous ne prenez pas tout l'espace de l'image avec vos tuiles, ça n'est pas grave, vous pouvez laissez l'espace vide tel quel.</p><h5 id="r-le-fichier-map" data-claire-element-id="514770">Le fichier .map</h5><p id="r-514761" data-claire-element-id="514761">Mais qu'est-ce donc que cet obscur fichier .map ?<br/> Ça n'est rien de plus qu'un simple fichier texte qui contient comme je l'ai dit plus haut la structure de la map. Et comment il fait ?</p><p id="r-514762" data-claire-element-id="514762">Chaque ligne représente une ligne de la carte. Et chaque ligne est constituée de chiffres, séparés par un <em>pipe</em> (caractère sur la touche du chiffre 6 sur la partie alphanumérique, accessible via Alt Gr. + 6). Les chiffres correspondent aux numéros des tiles dans le fichier PNG. Notez que la numérotation commence à 0, et se fait de gauche à droite sur chaque ligne.</p><p id="r-514763" data-claire-element-id="514763">En schéma c'est mieux :</p><figure id="r-514765" data-claire-element-id="514766"><img id="r-514764" data-claire-element-id="514764" src="medias/uploads.siteduzero.com_files_197001_198000_197407.png" alt="Image utilisateur"/></figure><p id="r-514767" data-claire-element-id="514767">Ce fichier ressemble donc à quelque chose comme :</p><pre id="r-514768" data-claire-element-id="514768"><code>1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|
1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|
1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|
1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|
1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|
1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|
1|2|3|1|2|3|1|0|0|1|2|3|1|2|3|
1|1|1|1|1|1|1|0|0|1|1|1|1|1|1|
1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|
1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|
1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|
1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|
1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|
1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|
1|2|3|1|2|3|1|2|3|1|2|3|1|2|3|</code></pre><p id="r-514769" data-claire-element-id="514769">Pour la suite de ce tutoriel, et pour ceux qui voudront tester les fonctions étudiées, vous pouvez utiliser l'exemple fourni dans le dossier &quot;Examples/maps&quot;, qui contient un fichier map et son fichier PNG associé.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">
<span class="arrow"></span>
<span class="next">Les Maps et ScrollMaps</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
<span class="next">Utilisation dans vos programmes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilisationdansvosprogrammes"></a><h2>Utilisation dans vos programmes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
<span class="arrow"></span>
<span class="next">Préparation de la map</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
<span class="next">Les Scrollmaps</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utilisation-dans-vos-programmes" data-claire-element-id="514820">Utilisation dans vos programmes</h4><h5 id="r-vie-et-mort-de-la-map" data-claire-element-id="514784">Vie et mort de la map</h5><p id="r-514772" data-claire-element-id="514772">Première chose à faire pour utiliser notre map : la charger !</p><p id="r-514773" data-claire-element-id="514773">D'abord, on charge le fichier PNG comme une image :</p><pre id="r-514774" data-claire-element-id="514774"><code data-claire-semantic="lua">tiles = Image.load(&quot;tiles.png&quot;, VRAM)</code></pre><p id="r-514775" data-claire-element-id="514775">Ensuite, on charge le fichier map :</p><pre id="r-514776" data-claire-element-id="514776"><code data-claire-semantic="lua">map = Map.new(tiles, &quot;map.map&quot;, 15, 15, 32, 32)</code></pre><p id="r-514777" data-claire-element-id="514777">&quot;15, 15&quot;, ce sont la longueur et la largeur de la map, en <strong>tiles</strong>.<br/> &quot;32 , 32&quot;, ce sont les dimensions d'une tile, en <strong>pixels</strong>.</p><p id="r-514778" data-claire-element-id="514778">Comme vous le voyez, utiliser des tiles carrées n'est pas une obligation, mais c'est en général ce qui est utilisé.</p><p id="r-514779" data-claire-element-id="514779">Pour détruire la map, on fait comme cela :</p><pre id="r-514780" data-claire-element-id="514780"><code data-claire-semantic="lua">map = Map.destroy(map)
map = nil</code></pre><p id="r-514781" data-claire-element-id="514781">N'oubliez pas de détruire aussi l'image des tiles ;)</p><p id="r-514782" data-claire-element-id="514782">Notre code pour afficher la map en est donc à :</p><pre id="r-514783" data-claire-element-id="514783"><code data-claire-semantic="lua">tiles = Image.load(&quot;tiles.png&quot;, VRAM)
map = Map.new(tiles, &quot;map.map&quot;, 15, 15, 32, 32)

while not Keys.newPress.Start do
    Controls.read()

    -- Affichage de la map
    -- Et autres fonctions pour agir dessus

    render()
end

map = Map.destroy(map)
map = nil
Image.destroy(tiles)
tiles = nil</code></pre><h5 id="r-affichage-de-la-map" data-claire-element-id="514790">Affichage de la map</h5><p id="r-514785" data-claire-element-id="514785">C'est la fonction :</p><pre id="r-514786" data-claire-element-id="514786"><code data-claire-semantic="lua">Map.draw(SCREEN_DOWN, map, 10, 10, 5, 5)</code></pre><p id="r-514787" data-claire-element-id="514787">Avec dans l'ordre : l'écran, la map à afficher, les coordonnées X et Y du coin haut-gauche de la map, et le nombre de tiles à afficher, sur la longueur et sur la hauteur. Vous remarquez donc que la map occupe tout l'espace de l'écran se trouvant en bas et à droite du point donné.</p><p id="r-514788" data-claire-element-id="514788">Etat de notre script :</p><pre id="r-514789" data-claire-element-id="514789"><code data-claire-semantic="lua">tiles = Image.load(&quot;tiles.png&quot;, VRAM)
map = Map.new(tiles, &quot;map.map&quot;, 15, 15, 32, 32)

while not Keys.newPress.Start do
    Controls.read()

    Map.draw(SCREEN_DOWN, map, 10, 10, 5, 5)
    -- Et autres fonctions pour agir dessus

    render()
end

map = Map.destroy(map)
map = nil
Image.destroy(tiles)
tiles = nil</code></pre><h5 id="r-manipulation-de-la-map" data-claire-element-id="514807">Manipulation de la map</h5><p id="r-514791" data-claire-element-id="514791">Il est possible de modifier deux choses dans une carte :</p><ul id="r-514802" data-claire-element-id="514802"><li id="r-514795" data-claire-element-id="514795"><p id="r-514792" data-claire-element-id="514792">l'espace entre les tiles :</p><pre id="r-514793" data-claire-element-id="514793"><code data-claire-semantic="lua">Map.space(map, longueur, hauteur)</code></pre><p id="r-514794" data-claire-element-id="514794">Très facile donc, on donne l'espace sur la longueur (entre deux tiles voisines horizontalement) et sur la hauteur (entre deux tiles voisines verticalement), tout ça en pixels bien sûr.</p></li><li id="r-514801" data-claire-element-id="514801"><p id="r-514796" data-claire-element-id="514796">la valeur d'une tile :</p><pre id="r-514797" data-claire-element-id="514797"><code data-claire-semantic="lua">Map.setTile(map, x, y, valeur)</code></pre><p id="r-514798" data-claire-element-id="514798">On donne à la fonction la map, puis le numéro de la colonne, puis de la ligne de la tile à changer ; enfin, on passe en dernier argument le nouveau numéro de la tile.<br/> Autrement dit, si on veut changer la toute première tile pour y mettre la troisième, il faut faire :</p><pre id="r-514799" data-claire-element-id="514799"><code data-claire-semantic="lua">Map.setTile(map, 0, 0, 3)</code></pre><p id="r-514800" data-claire-element-id="514800">Cette fonction <strong>ne modifie pas le fichier map</strong>, ce changement ne durera donc que le temps du script.</p></li></ul><p id="r-514803" data-claire-element-id="514803">Notez qu'il existe la fonction Map.getTile(), qui à l'image de setTile(), permet d'obtenir la valeur d'une tuile.</p><pre id="r-514804" data-claire-element-id="514804"><code data-claire-semantic="lua">Map.getTile(map, x, y)</code></pre><p id="r-514805" data-claire-element-id="514805">Pour l'exemple, on reprend notre script, et on veut faire en sorte de changer la première tile de la map pour y mettre la troisième quand le joueur appuie sur A :</p><pre id="r-514806" data-claire-element-id="514806"><code data-claire-semantic="lua">tiles = Image.load(&quot;tiles.png&quot;, VRAM)
map = Map.new(tiles, &quot;map.map&quot;, 15, 15, 32, 32)

while not Keys.newPress.Start do
    Controls.read()

    Map.draw(SCREEN_DOWN, map, 10, 10, 5, 5)
    
    if Keys.newPress.A then
        Map.setTile(map, 0, 0, 3)
    end

    render()
end

map = Map.destroy(map)
map = nil
Image.destroy(tiles)
tiles = nil</code></pre><h5 id="r-faire-defiler-la-map" data-claire-element-id="514819">Faire défiler la map</h5><p id="r-514808" data-claire-element-id="514808">Ah, enfin quelque chose d'utile ! :pirate:</p><p id="r-514809" data-claire-element-id="514809">D'abord, petite explication sur comment les jeux avec un système de map sont faits : au centre de l'écran, le sprite du personnage, qui ne bougera jamais (sauf dans certains cas, à la limite de la carte par exemple, ou bien comme dans les vieux Zelda sur une map fixe ;) ). L'image change suivant les actions du joueur (vue de dos, pendant qu'il attaque, etc.). Seule la carte bouge. Par exemple, si on appuie sur la flèche droite, le personnage semble aller à droite ; en fait, c'est la carte qui défile vers la gauche.</p><p id="r-514810" data-claire-element-id="514810">Pour faire défiler notre map, on utilise la fonction :</p><pre id="r-514811" data-claire-element-id="514811"><code data-claire-semantic="lua">Map.scroll(carte, x, y)</code></pre><p id="r-514812" data-claire-element-id="514812">&quot;x&quot; représente le <strong>nombre de tiles</strong> à faire défiler horizontalement, et &quot;y&quot; le <strong>nombre de tiles</strong> verticalement.<br/> Bien entendu, x et y peuvent être négatif : si x est négatif, alors la carte défile vers la gauche, et si y est négatif, elle défile vers le haut.</p><p id="r-514813" data-claire-element-id="514813">Et si nous faisions le code qui va faire défiler cette carte ? Je vous laisse faire, ça n'est pas très dur, faites juste attention au sens du défilement :p <br/> Pour être sur la même longueur d'onde, je vais simuler le déplacement d'un sprite sur la carte (même si on n'affiche aucun personnage ^^ ). Ça signifie que le D-pad va diriger <strong>le sprite</strong> et non pas le sens du mouvement de la carte.</p><p id="r-514814" data-claire-element-id="514814"></p><div id="r-514816" data-claire-element-id="514816"><pre id="r-514815" data-claire-element-id="514815"><code data-claire-semantic="lua">tiles = Image.load(&quot;tiles.png&quot;, VRAM)
map = Map.new(tiles, &quot;map.map&quot;, 15, 15, 32, 32)

while not Keys.newPress.Start do
    Controls.read()

    Map.draw(SCREEN_DOWN, map, 10, 10, 5, 5)
    
    if Keys.newPress.A then
        Map.setTile(map, 0, 0, 3)
    end

    if Keys.newPress.Left then
        Map.scroll(map, 1, 0)
    end
    if Keys.newPress.Right then
        Map.scroll(map, -1, 0)
    end
    if Keys.newPress.Up then
        Map.scroll(map, 0, 1)
    end
    if Keys.newPress.Down then
        Map.scroll(map, 0, -1)
    end

    render()
end

map = Map.destroy(map)
map = nil
Image.destroy(tiles)
tiles = nil</code></pre></div><aside id="r-514818" data-claire-element-id="514818" data-claire-semantic="warning"><p id="r-514817" data-claire-element-id="514817">Toutes ces fonctions demandent plein de nombres, certains en pixels et d'autres en tiles. Faites bien attention, sinon vos instructions pourraient faire n'importe quoi ^^</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
<span class="arrow"></span>
<span class="next">Préparation de la map</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
<span class="next">Les Scrollmaps</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesScrollmaps"></a><h2>Les Scrollmaps</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
<span class="arrow"></span>
<span class="next">Utilisation dans vos programmes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">
<span class="next">Les sprites</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-scrollmaps" data-claire-element-id="514828">Les Scrollmaps</h4><div id="r-514822" data-claire-element-id="514822" data-claire-semantic="question"><p id="r-514821" data-claire-element-id="514821">Tu as parlé de Scrollmaps dans le titre. C'est quoi la différence avec les maps normales ?</p></div><p id="r-514823" data-claire-element-id="514823">C'est un peu comme le dessin classique et les canevas : les scrollmaps sont plus rapides à afficher, et on peut les faire <em>scroller</em> (défiler) pixel par pixel, alors que les maps &quot;classiques&quot; ne permettent le défilement que tile par tile. Cependant, on y perd aussi les fonctions <em>setTile()</em>, <em>getTile()</em> et <em>space()</em>. De plus, elles ne peuvent être affichées qu'en plein écran.</p><p id="r-514824" data-claire-element-id="514824">Pour les fonctions qui restent, les différences sont donc que ce n'est plus <em>Map.fonction()</em> mais <em>ScrollMap.fonction()</em> (c'est évident :p ).<br/> La fonction <em>ScrollMap.draw()</em> ne demande plus que la map à afficher (puisque l'on est forcé de l'afficher en plein écran), et <em>ScrollMap.scroll()</em> demande des valeurs <strong>en pixels et non plus en tiles</strong>.</p><p id="r-514825" data-claire-element-id="514825">A vous de voir ce qui vous intéresse le plus ; pour ma part, je pense que c'est bien de gagner la rapidité d'affichage, mais seulement si l'on est sûr que l'on n'aura pas besoin de modifier la composition de la map pendant le programme ; à mon avis, ce sont les principales caractéristiques des deux types de maps.</p><p id="r-514826" data-claire-element-id="514826">Et voilà, vous savez maintenant comment utiliser les maps dans vos homebrews !</p><p id="r-514827" data-claire-element-id="514827">Je ne peux cependant pas finir le chapitre sans vous parler du Tile Engine de thermo_nono, basé sur celui de Transdiv, tous deux membres de la communauté µLua. Reprenant donc le système des maps, il permet aussi de gérer des cases infranchissables et les directions en diagonales. Cependant, il est délaissé pour le moment, et comporte malheureusement un bug très gênant concernant les tiles infranchissables. Je vous conseille de vous rendre <a href="http://microlua.xooit.fr/t249-Tiles-engine-evolution.htm">ici</a> (topic officiel sur le forum MicroLua) si vous voulez en savoir plus.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
<span class="arrow"></span>
<span class="next">Utilisation dans vos programmes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">
<span class="next">Les sprites</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lessprites"></a><h2>Les sprites</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
<span class="arrow"></span>
<span class="next">Les Scrollmaps</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
<span class="next">Qu&#039;est-ce qu&#039;un sprite ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-514830" data-claire-element-id="514830">Grâce aux Maps, vous savez comment gérer l'univers de votre jeu. Mais encore faut-il pouvoir afficher les personnages ! C'est là que les Sprites interviennent.</p>
</div><a name="Qu039est-cequ039unsprite"></a><h2>Qu&#039;est-ce qu&#039;un sprite ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">
<span class="arrow"></span>
<span class="next">Les sprites</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
<span class="next">On commence doucement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-qu-est-ce-qu-un-sprite" data-claire-element-id="514840">Qu'est-ce qu'un sprite ?</h4><p id="r-514831" data-claire-element-id="514831">Il convient en premier lieu d'expliquer un peu ce qu'on entend par &quot;sprite&quot; avec MicroLua.</p><p id="r-514832" data-claire-element-id="514832">Voici la définition que nous livre la noble encyclopédie Wikipédia :</p><p id="r-514833" data-claire-element-id="514833"><cite>Citation : Wikipédia : Article 'Sprite (jeu vidéo)'</cite></p><blockquote id="r-514835" data-claire-element-id="514835"><p id="r-514834" data-claire-element-id="514834">Un sprite (en français lutin) est dans le jeu vidéo un élément graphique qui peut se déplacer sur l'écran. En principe, un sprite est en partie transparent, et il peut être animé (c’est-à-dire qu'il est formé de plusieurs bitmaps qui s'affichent les uns après les autres).</p></blockquote><p id="r-514836" data-claire-element-id="514836">Concrètement, un sprite se compose de plusieurs images (issues d'un fichier image découpé, un peu comme les maps) ; en changeant l'image affichée, on crée une petite animation, d'un personnage par exemple.<br/> Chaque image qui compose le sprite s'appelle une <em>frame</em> (mot anglais qui désigne ici une image ; les gamers connaissent ce terme par les FPS, ou <em>Frames per Second</em> (images par seconde) ). Avec MicroLua, il est possible d'afficher une seule frame &quot;fixe&quot;, ou bien de composer une animation de plusieurs frames choisies individuellement avant de l'afficher, de la mettre en pause, etc.</p><p id="r-514837" data-claire-element-id="514837">L'image des frames se comporte comme celle d'une Map ; par conséquent, après avoir chargé le sprite (prochain chapitre), on accède à ses frames par un numéro de frame, qui commence à 0.</p><p id="r-514838" data-claire-element-id="514838">Comme le dit si bien Wikipédia, &quot;en principe un sprite est en partie transparent&quot;. Et pour avoir une partie transparente, µLua définit une couleur qui sera rendue transparente à l'affichage. Comme pour beaucoup de programmes, c'est le rose fuchsia qui est utilisé. C'est la couleur RVB (255, 0, 255) (en hexadécimal <em>#FF00FF</em>). Elle est utilisée pour être transparente car elle est en général peut présente dans les dessins.</p><p id="r-514839" data-claire-element-id="514839">Maintenant, on va voir comment justement charger un sprite, et comment afficher une de ses frames. A l'attaque ! :pirate:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">
<span class="arrow"></span>
<span class="next">Les sprites</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
<span class="next">On commence doucement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Oncommencedoucement"></a><h2>On commence doucement</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce qu&#039;un sprite ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
<span class="next">Les animations de sprites</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-on-commence-doucement" data-claire-element-id="514857">On commence doucement</h4><h5 id="r-charger-le-sprite" data-claire-element-id="514849">Charger le sprite</h5><p id="r-514841" data-claire-element-id="514841">On commence logiquement par charger le sprite en mémoire. On utilise pour cela la fonction :</p><pre id="r-514842" data-claire-element-id="514842"><code data-claire-semantic="lua">sprite = Sprite.new(&quot;fichier_frames.png&quot;, longueur_frame, hauteur_frame, destination)</code></pre><p id="r-514843" data-claire-element-id="514843">On charge donc le fichier &quot;fichier_frames.png&quot;, qui contient des frames qui font <em>longueur_frame</em> pixels par <em>hauteur_frame</em> pixels. Enfin, on donne comme pour une image la destination du chargement (RAM ou VRAM).<br/> Ça retourne un &quot;objet sprite&quot; (une table en fait), sur laquelle on va utiliser des méthodes (des fonctions).</p><p id="r-514844" data-claire-element-id="514844">Le fichier sprite des exemples ressemble à ceci :</p><figure id="r-514846" data-claire-element-id="514847"><img id="r-514845" data-claire-element-id="514845" src="medias/uploads.siteduzero.com_files_318001_319000_318564.png" alt="Image utilisateur"/></figure><p id="r-514848" data-claire-element-id="514848">Première méthode que l'on va essayer :</p><h5 id="r-sprite-drawframe-ecran-x-y-numframe" data-claire-element-id="514856">sprite:drawFrame(ecran, x, y, numFrame)</h5><p id="r-514850" data-claire-element-id="514850">Certainement la plus simple, drawFrame() permet d'afficher une simple frame à l'écran. On l'utilise...</p><div id="r-514852" data-claire-element-id="514852" data-claire-semantic="question"><p id="r-514851" data-claire-element-id="514851">STOOOOOP ! C'est quoi c't'appel de fonction bizarre avec des deux-points ?</p></div><p id="r-514853" data-claire-element-id="514853">C'est comme ça qu'on appelle en général une méthode en Lua. Tout le jargon de méthode et objet appartient à la POO (Programmation Orientée Objet). C'est un principe de programmation ; comme le but de ce tuto n'est pas de vous l'expliquer, je vous renvoie au <a href="http://www.siteduzero.com/tutoriel-3-11159-la-magie-de-la-poo-par-l-exemple-string.html#ss_part_1">cours de M@teo21 sur le C++</a>, et plus précisément sur la partie expliquant ce qu'est la POO.<br/> Je disais donc, que c'est comme cela qu'on appelle une méthode en Lua. On en verra d'autres dans ce cours, et vous serez très certainement amenés à en utiliser dans vos programmes étant donné que beaucoup de libs sont faites en POO ;)</p><p id="r-514854" data-claire-element-id="514854">Ou j'en étais moi ?... Ah oui ! On l'utilise donc en remplaçant &quot;sprite&quot; par le nom de la variable qui nous sert à garder le retour de la fonction Sprite.new(). On donne l'écran sur lequel on affiche, les coordonnées, et le numéro de la frame que l'on veut afficher. Et cette frame s'affiche (au prochain render() bien entendu :-° ) !</p><p id="r-514855" data-claire-element-id="514855">Mais on se retrouve vite limité avec un simple affichage d'une seule frame ; c'est pour cela que MicroLua permet de constituer des animations.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce qu&#039;un sprite ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
<span class="next">Les animations de sprites</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesanimationsdesprites"></a><h2>Les animations de sprites</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
<span class="arrow"></span>
<span class="next">On commence doucement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
<span class="next">Exemple</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-animations-de-sprites-1" data-claire-element-id="514885">Les animations de sprites</h4><h5 id="r-ajouter-une-animation-au-sprite" data-claire-element-id="514862">Ajouter une animation au sprite</h5><p id="r-514858" data-claire-element-id="514858">Tout commence par là.</p><pre id="r-514859" data-claire-element-id="514859"><code data-claire-semantic="lua">sprite:addAnimation(table_frames, delai)</code></pre><p id="r-514860" data-claire-element-id="514860"><em>table_frames</em> est donc... une table, on suit un peu au fond ! Bref, c'est donc une table qui contient les numéros des frames dont se compose l'animation. Je rappelle que la numérotation des frames commence à 0.<br/><em>delai</em> est le délai (en millièmes de seconde) entre l'affichage de chaque frame.</p><p id="r-514861" data-claire-element-id="514861">Maintenant, on peut afficher l'animation.</p><h5 id="r-bouton-play" data-claire-element-id="514868">Bouton play</h5><p id="r-514863" data-claire-element-id="514863">On utilise la fonction :</p><pre id="r-514864" data-claire-element-id="514864"><code data-claire-semantic="lua">sprite:playAnimation(ecran, x, y, numAnim)</code></pre><p id="r-514865" data-claire-element-id="514865">x et y sont bien sûr les coordonnées de l'animation. <em>numAnim</em> désigne le numéro de l'animation à jouer. En effet, un sprite peut avoir plusieurs animations : imaginez un personnage, il peut marcher vers le haut, le bas, etc., mais aussi attaquer, jeter un sort... Bref, il faut donner le numéro de l'animation de ce sprite.</p><aside id="r-514867" data-claire-element-id="514867" data-claire-semantic="warning"><p id="r-514866" data-claire-element-id="514866">La numérotation commence ici à 1, contrairement à celle des frames !</p></aside><h5 id="r-soumettez-la-a-votre-volonte" data-claire-element-id="514877">Soumettez-la à votre volonté</h5><p id="r-514869" data-claire-element-id="514869">Je parle bien sûr de l'animation, pas de votre copine/amie/femme/soeur. :)</p><p id="r-514870" data-claire-element-id="514870">Vous pouvez arrêter l'animation :</p><pre id="r-514871" data-claire-element-id="514871"><code data-claire-semantic="lua">sprite:stopAnimation(numAnim)</code></pre><p id="r-514872" data-claire-element-id="514872">Et la remettre au début :</p><pre id="r-514873" data-claire-element-id="514873"><code data-claire-semantic="lua">sprite:resetAnimation(numAnim)</code></pre><p id="r-514874" data-claire-element-id="514874">Et pour la relancer :</p><pre id="r-514875" data-claire-element-id="514875"><code data-claire-semantic="lua">sprite:startAnimation(numAnim)</code></pre><p id="r-514876" data-claire-element-id="514876">Si vous pensez confondre <em>playAnimation()</em> et <em>startAnimation()</em> (car il faut bien dire que pour nous pauvres francophones, les deux veulent dire la même chose), dites vous que <em>playAnimation()</em> est le screen.blit() des Sprites, tandis que <em>startAnimation()</em> et compagnie sont comme les fonctions des Timers (que vous n'avez pas encore vues, c'est pas faux :p ).</p><h5 id="r-et-en-bonus-1" data-claire-element-id="514881">Et en bonus...</h5><p id="r-514878" data-claire-element-id="514878">MicroLua fournit la fonction</p><pre id="r-514879" data-claire-element-id="514879"><code data-claire-semantic="lua">sprite:isAnimationAtEnd(numAnim)</code></pre><p id="r-514880" data-claire-element-id="514880">qui renvoie <em>true</em> si l'animation a affiché sa dernière frame. Ça peut être utile pour coordonner des sortes de &quot;cinématiques&quot; ou certains effets en parallèle de l'image.</p><h5 id="r-c-est-pas-fini" data-claire-element-id="514884">C'est pas fini !</h5><p id="r-514882" data-claire-element-id="514882">On n'aurait pas oublié quelque chose ? Un Sprite, c'est une image non ? Donc logiquement, il faut vider la mémoire. On fait presque comme pour une image, à ceci-près que ici <em>destroy()</em> est une méthode. On a donc :</p><pre id="r-514883" data-claire-element-id="514883"><code data-claire-semantic="lua">sprite:destroy()
sprite = nil</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
<span class="arrow"></span>
<span class="next">On commence doucement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
<span class="next">Exemple</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Exemple"></a><h2>Exemple</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
<span class="arrow"></span>
<span class="next">Les animations de sprites</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">
<span class="next">Le son</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-exemple-158" data-claire-element-id="514890">Exemple</h4><p id="r-514886" data-claire-element-id="514886">Cette partie est là pour vous montrer <em>in situ</em> comment ça marche. Merci à <a href="http://www.siteduzero.com/membres-294-148624.html">gaetan.tux</a> pour cet exemple.</p><pre id="r-514887" data-claire-element-id="514887"><code data-claire-semantic="lua">-- animation d'un sprite par gaetan.tux
-- GNU/GPL
-- le sprite doit être placé dans le dossier lua (perso.png)
-- presser START pour quitter

function init()
	-- Chargement de l'image du sprite
	perso = Sprite.new('/lua/perso.png',32,48,VRAM)
	
	-- Direction du perso (utilisé pour le choix de l'animation)
	-- 1 : bas | 2 : gauche | 3 : haut | 4 : droite
	direction = 1
	-- Position du sprite sur l'écran
	x, y = 0, 0
	-- Détection de la pression d'une touche
	touche = false
	
	-- Ajout des animations, avec un intervalle de 200ms entre chaque frame
	perso:addAnimation ({0,1,2,3},200)	-- Marcher vers le bas
	perso:addAnimation ({4,5,6,7},200)	-- Marcher vers la gauche
	perso:addAnimation ({12,13,14,15},200)	-- Marcher vers le haut
	perso:addAnimation ({8,9,10,11},200)	-- Marcher vers la droite
end
----------------------------- getInfos ()
function getInfos()
	-- Retourne la direction du sprite, le déplacement qu'il doit effectuer (augmentation de ses coordonnées),
	-- et l'indication de la pression d'une touche
	touche = true  
	if Keys.held.Down then 			-- Si on appuie sur la touche bas...
		direction, y = 1, y+2		-- Alors la direction est 1, et le sprite doit descendre
	elseif Keys.held.Left then 		-- Sinon, si on appuie sur la touche gauche...
		direction, x = 2, x-2		-- Alors etc.
	elseif Keys.held.Up then 
		direction, y = 3, y-2
	elseif Keys.held.Right then 
		direction, x = 4, x+2
	else					-- Sinon...
		touche = false			-- On signale qu'aucune touche n'est pressée
	end

	return direction, x, y, touche
end
----------------------------- anim() + affichage des FPS
function anim()
	-- On affiche le sprite
	perso:playAnimation (SCREEN_UP,x,y,direction)
	if touche then					-- Si le sprite doit bouger, on lance l'animation (playAnimation le fait déjà, mais il
		perso:startAnimation (direction)	-- faut quand même faire startAnimation si l'animation a été réinitialisée, et donc arrêtée)
	else						-- Sinon, on remet l'animation à zéro pour le prochain déplacement
		perso:resetAnimation (direction)	-- (resetAnimation arrête aussi l'animation)
	end
	screen.print(SCREEN_DOWN,0,0,'FPS : '..NB_FPS)  -- On affiche le nombre d'images par seconde
end
----------------------------- programme principal
init ()                                                 -- On initialise les variables avec la fonction init()
while not Keys.held.Start do                            -- Boucle tant qu'on appuie pas sur start
	Controls.read ()                                -- On regarde si on appuie sur une touche
	direction, x, y, touche = getInfos()            -- Fonction getInfos() pour la position du personnage
	anim()                                          -- On anime l'image avec la fonction anim()
	render()                                        -- Enfin on actualise les écrans
end                                                     -- Toutes les fonctions ont été définies plus haut
----------------------------- fin, nil, destroy 
perso:destroy ()                                        -- On détruit le sprite du personnage 
x, y, direction, perso = nil, nil, nil, nil             -- Puis on fait disparaître les variables pour libérer la RAM</code></pre><p id="r-514888" data-claire-element-id="514888">Je pense qu'il n'y a rien de bien compliqué là-dedans :)</p><p id="r-514889" data-claire-element-id="514889">Vous savez désormais bien utiliser les Sprites.<br/> Passons sans plus tarder au son ! :pirate:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
<span class="arrow"></span>
<span class="next">Les animations de sprites</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">
<span class="next">Le son</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Leson"></a><h2>Le son</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
<span class="arrow"></span>
<span class="next">Exemple</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
<span class="next">La gestion du son par MicroLua</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-514892" data-claire-element-id="514892">Votre jeu est magnifique avec plein de sprites partout qui défilent sur une Map tout aussi belle. Mais il manque quelque chose... Du son !</p>
</div><a name="LagestiondusonparMicroLua"></a><h2>La gestion du son par MicroLua</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">
<span class="arrow"></span>
<span class="next">Le son</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
<span class="next">Les Mods</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-gestion-du-son-par-microlua" data-claire-element-id="514924">La gestion du son par MicroLua</h4><p id="r-514893" data-claire-element-id="514893">MicroLua permet de jouer du son, mais c'est loin d'être aussi simple, parce que MicroLua utilise la célèbre librairie MixMod.</p><h5 id="r-les-mods-et-les-sfx" data-claire-element-id="514904">Les Mods et les SFX</h5><p id="r-514894" data-claire-element-id="514894">µLua fait une distinction entre ce que l'on appelle &quot;Mods&quot; et &quot;SFX&quot;. Les premiers sont du son en général, une musique d'ambiance par exemple, qui est jouée longtemps. Il ne peut y en avoir qu'un à la fois. Les seconds en revanche, sont destinés à n'être joués que ponctuellement ; en effet, comme leur nom l'indique (ou pas), ce sont des effets spéciaux sonores (<em>Special effects</em> en anglais, essayez de le dire à voix haute pour comprendre pourquoi SFX ^^ ). De plus, contrairement aux Mods, ont peut en jouer plusieurs à la fois.</p><p id="r-514895" data-claire-element-id="514895">Partant de là, µLua détermine la nature du son en fonction du fichier utilisé :</p><ul id="r-514900" data-claire-element-id="514900"><li id="r-514897" data-claire-element-id="514897"><p id="r-514896" data-claire-element-id="514896">fichiers MOD, XM, S3M, IT pour les Mods</p></li><li id="r-514899" data-claire-element-id="514899"><p id="r-514898" data-claire-element-id="514898">fichiers WAV pour les SFX</p></li></ul><div id="r-514902" data-claire-element-id="514902" data-claire-semantic="question"><p id="r-514901" data-claire-element-id="514901">Quoi, c'est tout ?</p></div><p id="r-514903" data-claire-element-id="514903">Et bien oui, même pas de lecture des MP3 ou des OGG... Mais actuellement, ça nous suffit :) Et de toute façon, pour un jeu, ce sont ces formats (plus ou moins) qui sont utilisés, les MP3 ou OGG sont trop lourds à stocker et/ou décoder.</p><h5 id="r-preparation-des-sources" data-claire-element-id="514910">Préparation des sources</h5><p id="r-514905" data-claire-element-id="514905">Cette gestion du son a un (très ?) gros défaut : µLua ne lit pas directement les fichiers sonores.</p><div id="r-514907" data-claire-element-id="514907" data-claire-semantic="question"><p id="r-514906" data-claire-element-id="514906">Et comment il fait ?</p></div><p id="r-514908" data-claire-element-id="514908">Il fait, c'est déjà ça :)</p><p id="r-514909" data-claire-element-id="514909">En fait, il faut passer par votre ordinateur, et un utilitaire tout prêt fait par Risike (voyez l'annexe concerné pour en savoir plus). Cet utilitaire crée un fichier <em>soundbank.bin</em> à partir de vos fichiers musicaux (ainsi qu'un fichier <em>soundbank.h</em> qui ne sert à rien après la création du .bin, si ce n'est vous aider à vous repérer dans les ID de vos sons ; on y reviendra). Ce .bin est un condensé de vos sons, et c'est lui qu'utilise µLua.</p><h5 id="r-les-index-1" data-claire-element-id="514917">Les index</h5><p id="r-514911" data-claire-element-id="514911">Dans la banque son, µLua utilise des index pour se repérer. Ceux-ci commencent à <strong>0</strong>, et les index des Mods et des SFX sont distincts.<br/> Afin de ne pas vous perdre, µLua crée le fichier <em>soundbank.h</em> qui contient la liste des fichiers sons chargés ainsi que l'index correspondant.</p><p id="r-514912" data-claire-element-id="514912">Voici un exemple de fichier <em>soundbank.h</em> :</p><pre id="r-514913" data-claire-element-id="514913"><code data-claire-semantic="c">#define SFX_AMBULANCE                   0
#define SFX_BOOM                        1
#define MOD_KEYG_SUBTONAL               0
#define MOD_PURPLE_MOTION_INSPIRATION   1
#define MOD_REZ_MONDAY                  2
#define MSL_NSONGS                      3
#define MSL_NSAMPS                      67
#define MSL_BANKSIZE                    70</code></pre><p id="r-514914" data-claire-element-id="514914">Il est tiré des exemples de votre package ;)</p><p id="r-514915" data-claire-element-id="514915">Vous avez à chaque ligne un préfixe &quot;MOD&quot; (pour les Mods) ou &quot;SFX&quot; (pour les SFX) suivi du nom du fichier. Il y a aussi le préfixe &quot;MSL&quot;, pour des informations utilisées durant la conception de <em>soundbank.bin</em>.</p><p id="r-514916" data-claire-element-id="514916">Voilà, maintenant que tout est dit, on peut y aller ! :pirate:</p><h5 id="r-manipuler-la-banque-son" data-claire-element-id="514923">Manipuler la banque son</h5><p id="r-514918" data-claire-element-id="514918">C'est un peu comme pour les images : la banque doit être chargée en mémoire puis déchargée.</p><aside id="r-514920" data-claire-element-id="514920" data-claire-semantic="information"><p id="r-514919" data-claire-element-id="514919">En fait, ce n'est pas exactement ça. µLua ne charge jamais entièrement la banque son en mémoire, parce que ça la surchargerait inutilement. Je suppose que ce que l'on considère comme son chargement est un accès à un &quot;index&quot; permettant à µlua de se repérer entre les sons. Quoi qu'il en soit, les sons en eux-mêmes ne sont chargés que ponctuellement (et manuellement ^^ ).</p></aside><pre id="r-514921" data-claire-element-id="514921"><code data-claire-semantic="lua">Sound.loadBank(&quot;soundbank.bin&quot;)

-- Votre code

Sound.unloadBank()</code></pre><p id="r-514922" data-claire-element-id="514922">C'est tout. Bien entendu, là où j'ai mis &quot;soundbank.bin&quot;, vous devez mettre le chemin d'accès à votre banque son, qui ne se nomme pas nécessairement <em>soundbank.bin</em>.<br/> Notez que vous pouvez utiliser différentes banques de son plutôt qu'une seule énorme (pour séparer les sons par thème par exemple). Vous ne pouvez cependant en utiliser deux en même temps, vous devez donc d'abord décharger la première avant d'utiliser la seconde.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">
<span class="arrow"></span>
<span class="next">Le son</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
<span class="next">Les Mods</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesMods"></a><h2>Les Mods</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
<span class="arrow"></span>
<span class="next">La gestion du son par MicroLua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
<span class="next">Les SFX</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-mods" data-claire-element-id="514942">Les Mods</h4><h5 id="r-description-du-mod" data-claire-element-id="514926">Description du Mod</h5><p id="r-514925" data-claire-element-id="514925">Un Mod (pour <em>module</em>) est un fichier musical contenant des échantillons sonores, et des &quot;patrons&quot; indiquant comme ces échantillons doivent être joués. Ils sont utilisés dans les jeux vidéo pour leur simplicité d'utilisation (ils sont rapides à lire).</p><h5 id="r-charger-et-detruire-le-mod" data-claire-element-id="514930">Charger et détruire le Mod</h5><p id="r-514927" data-claire-element-id="514927">Les dév se sont pas embêtés, pour ça on a :</p><pre id="r-514928" data-claire-element-id="514928"><code data-claire-semantic="lua">Sound.loadMod(index)

-- Votre code

Sound.unloadMod(index)</code></pre><p id="r-514929" data-claire-element-id="514929">Ces deux fonctions, qui doivent bien sûr être appelées entre le chargement et le déchargement de la banque son correspondante, demandent à chaque fois l'index du Mod en question.<br/> Bien que l'on soit limités à lire un seul Mod à la fois, on peut très bien en charger plusieurs en même temps ; en effet, même la fonction de déchargement demande l'index du Mod, de plus vous allez voir tout de suite que la lecture d'un Mod requiert son index.</p><h5 id="r-play-pause-toussa" data-claire-element-id="514936">Play, pause, toussa...</h5><pre id="r-514931" data-claire-element-id="514931"><code data-claire-semantic="lua">-- Lance le Mod
Sound.startMod(index, modeLecture)

-- Met le Mod en pause (logique oui :) )
Sound.pause()

-- Reprend la lecture du Mod
Sound.resume()

-- Arrête la lecture du Mod
Sound.stop()</code></pre><p id="r-514932" data-claire-element-id="514932">Voici donc les fonctions principales pour la lecture des Mods.<br/><em>Sound.startMod()</em> demande ainsi l'index du Mod, mais aussi un mode de lecture, qui doit être <em>PLAY_ONCE</em> pour le jouer une seule fois, ou <em>PLAY_LOOP</em> pour le jouer en boucle.<br/> Vous remarquerez que les autres fonctions ne demandent pas d'index, ce qui est logique puisque comme je vous l'ai déjà précisé plus haut on ne lit qu'un Mod à la fois.</p><p id="r-514933" data-claire-element-id="514933">Et en plus de ça, une petite fonction qui vous permettra de savoir si un Mod est en cours de lecture :</p><pre id="r-514934" data-claire-element-id="514934"><code data-claire-semantic="lua">Sound.isActive()</code></pre><p id="r-514935" data-claire-element-id="514935">Elle retourne un Booléen : <em>true</em> si la lecture est en cours, et donc <em>false</em> si elle ne l'est pas.</p><h5 id="r-manipuler-le-mod" data-claire-element-id="514941">Manipuler le Mod</h5><p id="r-514937" data-claire-element-id="514937">Vous pouvez changer la position de la lecture dans le Mod, le volume, mais aussi le tempo et le ton. Je dois avouer que ce genre de réglages me dépasse un peu, donc je vais me référer à la doc :)</p><pre id="r-514938" data-claire-element-id="514938"><code data-claire-semantic="lua">-- Pour changer la position du &quot;curseur&quot; de lecture dans le Mod
Sound.setPosition(index, position)

-- Pour changer le volume
Sound.setModVolume(volume)

-- Pour changer le tempo
Sound.setModTempo(tempo)

-- Pour changer le ton du Mod
Sound.setModPitch(ton)</code></pre><p id="r-514939" data-claire-element-id="514939">C'est à la fois simple et explicite je crois.<br/> Je dois cependant préciser que le <strong>volume doit être compris entre 0 et 1024</strong>, et que le <strong>tempo doit se trouver entre 512 et 2048</strong>.</p><p id="r-514940" data-claire-element-id="514940">Nous pouvons donc passer aux SFX, vous allez voir c'est quasiment la même chose ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
<span class="arrow"></span>
<span class="next">La gestion du son par MicroLua</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
<span class="next">Les SFX</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesSFX"></a><h2>Les SFX</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
<span class="arrow"></span>
<span class="next">Les Mods</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">
<span class="next">Fonctions spéciales pour linkers spéciaux</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-sfx" data-claire-element-id="514966">Les SFX</h4><h5 id="r-qu-est-ce-qu-un-sfx" data-claire-element-id="514944">Qu'est-ce qu'un SFX ?</h5><p id="r-514943" data-claire-element-id="514943">Je vais reprendre ce que j'ai dit plus haut : un SFX est un &quot;effet spécial sonore&quot;, joué ponctuellement. Ça signifie aussi qu'ils sont courts (quelques secondes), mais répétés plusieurs fois à intervalles variés.</p><h5 id="r-charger-et-detruire-un-sfx" data-claire-element-id="514948">Charger et détruire un SFX</h5><p id="r-514945" data-claire-element-id="514945">Comme pour les Mods, nous avons :</p><pre id="r-514946" data-claire-element-id="514946"><code data-claire-semantic="lua">Sound.loadSFX(index)

-- Votre code

Sound.unloadSFX(index)</code></pre><p id="r-514947" data-claire-element-id="514947">Voilà, c'est pareil :)</p><h5 id="r-play-pause-toussa-2" data-claire-element-id="514957">Play, pause, toussa...²</h5><p id="r-514949" data-claire-element-id="514949">Bon, en fait c'était juste pour faire le parallèle avec les Mods, parce qu'on n'a que deux fonctions ^^ :</p><pre id="r-514950" data-claire-element-id="514950"><code data-claire-semantic="lua">handle = Sound.startSFX(index)

Sound.stopSFX(handle)</code></pre><div id="r-514952" data-claire-element-id="514952" data-claire-semantic="question"><p id="r-514951" data-claire-element-id="514951">C'est quoi ce &quot;handle&quot; renvoyé par la première fonction ?</p></div><p id="r-514953" data-claire-element-id="514953">Ce handle est une référence renvoyée par µLua pour nous permettre de modifier individuellement les SFX. Bien sûr, il aurait été possible d'utiliser les index, mais avec les handles, on peut lire un même SFX plusieurs fois en même temps. N'oubliez donc pas ce handle, sans quoi vous ne pourriez pas agir sur votre SFX plus tard. J'en profite pour vous faire remarquer (si ce n'est pas déjà fait) que handle est une variable... A détruire à la fin (quand vous n'en aurez plus besoin bien sûr ^^ ) !</p><p id="r-514954" data-claire-element-id="514954">Avant de passer à la suite, voici une fonction relativement utile :</p><pre id="r-514955" data-claire-element-id="514955"><code data-claire-semantic="lua">Sound.stopAllSFX()</code></pre><p id="r-514956" data-claire-element-id="514956">Comme son nom l'indique, elle arrête la lecture de tous les SFX. Il va sans dire que c'est mieux que de faire dix fois <em>Sound.stopSFX()</em>, même avec une boucle ^^</p><h5 id="r-manipuler-le-mod-sfx" data-claire-element-id="514965">Manipuler le Mod SFX</h5><p id="r-514958" data-claire-element-id="514958">Saleté de Mod, il s'incruste partout...</p><p id="r-514959" data-claire-element-id="514959">Nous avons donc la possibilité de changer le volume d'un SFX, son ton et même sa gamme de ton, mais aussi sa balance. Bien entendu, tout ceci est applicable à un SFX en particulier plutôt qu'à tous les SFX ;)</p><pre id="r-514960" data-claire-element-id="514960"><code data-claire-semantic="lua">-- Changer le volume
Sound.setSFXVolume(handle, volume)

-- Changer le ton
Sound.setSFXPitch(handle, ton)

-- Changer la gamme
Sound.setSFXScalePitch(handle, gamme)

-- Changer la balance
Sound.setSFXPanning(handle, balance)</code></pre><p id="r-514961" data-claire-element-id="514961">C'est limpide non ?<br/><em>Sound.setSFXPanning()</em> demande pour la balance une valeur entre 0 (tout à gauche) et 255 (tout à droite) ; par défaut, le SFX est donc joué à 128 (au &quot;milieu&quot;).</p><aside id="r-514963" data-claire-element-id="514963" data-claire-semantic="error"><p id="r-514962" data-claire-element-id="514962">La valeur maximale du volume d'un SFX est de <strong>255</strong> ! Rappelez-vous-en ;)</p></aside><p id="r-514964" data-claire-element-id="514964">Et bien voilà, maintenant vous pouvez donner à vos homebrews une ambiance digne de ce nom.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
<span class="arrow"></span>
<span class="next">Les Mods</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">
<span class="next">Fonctions spéciales pour linkers spéciaux</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Fonctionsspcialespourlinkersspciaux"></a><h2>Fonctions spéciales pour linkers spéciaux</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
<span class="arrow"></span>
<span class="next">Les SFX</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
<span class="next">Ça secoue !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-514968" data-claire-element-id="514968">Pour achever cette partie plutôt dédiée aux jeux, je vais vous présenter des fonctionnalités que probablement peu parmi vous auront la chance d'expérimenter : le <em>motion</em> et la vibration.</p>
</div><a name="asecoue"></a><h2>Ça secoue !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">
<span class="arrow"></span>
<span class="next">Fonctions spéciales pour linkers spéciaux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
<span class="next">Bougez avec votre DS !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-ca-secoue" data-claire-element-id="514987">Ça secoue !</h4><p id="r-514969" data-claire-element-id="514969">Première fonctionnalité que je vais aborder ici : la vibration !</p><h5 id="r-prerequis-23" data-claire-element-id="514971">Prérequis</h5><p id="r-514970" data-claire-element-id="514970">Vous vous en doutez bien, la console ne vibre pas toute seule. Notre chère petite Nintendo DS n'intègre pas de série un circuit de vibration ; ce sont les cartouches des jeux commerciaux qui le contiennent.<br/> Mais si MicroLua vous dit qu'il peut faire vibrer votre DS, c'est qu'il peut ! En effet, certains linkers possèdent cette fonction <em>rumble</em>, ce sont des linkers pour le slot 2 d'ailleurs (trop gros pour les petites cartouches de slot 1).</p><h5 id="r-oh-ma-ds-vibre-j-ai-du-recevoir-un-sms" data-claire-element-id="514982">Oh, ma DS vibre, j'ai dû recevoir un SMS !</h5><p id="r-514972" data-claire-element-id="514972">et oui, je fais aussi dans la blague pas chère</p><p id="r-514973" data-claire-element-id="514973">Bon, niveau vibration, ça casse pas non plus trois pattes à un canard. On n'a que deux fonctions :</p><pre id="r-514974" data-claire-element-id="514974"><code data-claire-semantic="lua">Rumble.isInserted()</code></pre><p id="r-514975" data-claire-element-id="514975">Celle-ci va vous dire si un pack de vibration est détecté dans le slot 2 (<em>true</em> pour un kit vibration inséré, <em>false</em> dans l'autre cas).<br/> Évidemment, cette fonction est indispensable, sinon quand vous voudrez demander à la console de vibrer et qu'il n'y aura pas de linker compatible, elle va vous crier dessus en disant qu'elle peut pas ;)</p><p id="r-514976" data-claire-element-id="514976">Et la fonction essentielle :</p><pre id="r-514977" data-claire-element-id="514977"><code data-claire-semantic="lua">Rumble.set(etat)</code></pre><p id="r-514978" data-claire-element-id="514978">Rien de plus, rien de moins. Pour allumer la vibration, donnez <em>true</em> à la fonction ; pour l'arrêter, enlevez le rumble pack...</p><div id="r-514980" data-claire-element-id="514980" data-claire-semantic="question"><p id="r-514979" data-claire-element-id="514979">Hein ?</p></div><p id="r-514981" data-claire-element-id="514981">C'est bien, vous suivez ;) Oui, j'essaie de meubler, sinon cette partie va être très vide...<br/> Pour l'arrêter, vous passez bien sûr <em>false</em> à la fonction.</p><h5 id="r-exemple-159" data-claire-element-id="514986">Exemple</h5><p id="r-514983" data-claire-element-id="514983">Un petit exemple pour voir à quoi peut ressembler un code avec le rumble.<br/> C'est très simple : si on détecte un rumble pack, si le joueur appuie sur A, on envoie la sauce ; s'il appuie sur B, on arrête.</p><pre id="r-514984" data-claire-element-id="514984"><code data-claire-semantic="lua">while not Keys.newPress.Start do
    Controls.read()

    if Rumble.isInserted() then
        screen.print(SCREEN_DOWN, 0, 0, &quot;C'est bien, tu peux tester la vibration avec MicroLua !&quot;)
        screen.print(SCREEN_UP, 0, 0, &quot;Appuie sur A pour faire vibrer ta DS !&quot;)
        screen.print(SCREEN_UP, 0, 0, &quot;Et pour arrêter, enlève le rumble pack, ou alors appuie sur B ;)&quot;)

        if Keys.newPress.A then
            Rumble.set(true)
        end
    else
        screen.print(SCREEN_DOWN, 0, 0, &quot;Bouh, tu peux pas faire vibrer ta DS :(&quot;)
    end

    if Keys.newPress.B then
        Rumble.set(false)
    end

    render()
end</code></pre><p id="r-514985" data-claire-element-id="514985">Voilà, c'est tout pour le rumble, passons maintenant au motion (carrément plus intéressant) !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">
<span class="arrow"></span>
<span class="next">Fonctions spéciales pour linkers spéciaux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
<span class="next">Bougez avec votre DS !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="BougezavecvotreDS"></a><h2>Bougez avec votre DS !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
<span class="arrow"></span>
<span class="next">Ça secoue !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">
<span class="next">Les fonctions System et les fichiers INI</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-bougez-avec-votre-ds" data-claire-element-id="515014">Bougez avec votre DS !</h4><h5 id="r-prerequis-24" data-claire-element-id="514993">Prérequis</h5><p id="r-514988" data-claire-element-id="514988">Comme pour le rumble, le motion (la détection de mouvement) nécessite un linker adapté. Cette fonctionnalité est disponible sur des linkers slot 1, mais je pense qu'il existe des slot 2 qui possèdent à la fois le rumble et le motion.<br/> Notez quand même que la &quot;détection de mouvements&quot; correspond ici à la détection de l'inclinaison de la console.</p><p id="r-514989" data-claire-element-id="514989">Je dois vous avouer une chose : contrairement au rumble, je n'ai jamais testé la détection de mouvements, étant donné que je n'ai pas de linker adéquat. Ça veut dire que tout ce que je vous sort là est une adaptation un peu plus agréable à lire de la documentation.</p><div id="r-514991" data-claire-element-id="514991" data-claire-semantic="question"><p id="r-514990" data-claire-element-id="514990">Ouh le mauvais prof !</p></div><p id="r-514992" data-claire-element-id="514992">Chut.</p><h5 id="r-pour-commencer-9" data-claire-element-id="515000">Pour commencer</h5><p id="r-514994" data-claire-element-id="514994">La première chose à faire, c'est d'initialiser la fonction de détection de mouvements. Pour ça :</p><pre id="r-514995" data-claire-element-id="514995"><code data-claire-semantic="lua">Motion.init()</code></pre><p id="r-514996" data-claire-element-id="514996">Cette fonction est 2-en-1 ! Elle détecte d'abord si vous avez un linker compatible, et renvoie <em>true</em> le cas échéant (et bien sûr <em>false</em> si elle n'a rien détecté). Ensuite, elle effectue l'initialisation.</p><p id="r-514997" data-claire-element-id="514997">Ce genre de système a besoin d'être calibré, pour cela, vous avez la fonction :</p><pre id="r-514998" data-claire-element-id="514998"><code data-claire-semantic="lua">Motion.calibrate()</code></pre><p id="r-514999" data-claire-element-id="514999">Que calibre-t-elle exactement ? Aucune idée, je vous l'ai dit, je ne peux pas vérifier, mais je suppose que quand vous appelez cette fonction, le script définit la position &quot;plane, au repos&quot; par celle de la console à cet instant.</p><h5 id="r-detection-de-l-inclinaison" data-claire-element-id="515006">Détection de l'inclinaison</h5><p id="r-515001" data-claire-element-id="515001">Vous avez pour cela trois fonction :</p><pre id="r-515002" data-claire-element-id="515002"><code data-claire-semantic="lua">Motion.readX()</code></pre><p id="r-515003" data-claire-element-id="515003">Et l'équivalent pour Y et pour Z (trois fois la même fonction, c'est deux fois de trop à écrire).<br/> Les fonctions retournent l'inclinaison sur les axes concernés (je suis pas sûr de savoir comment il s'y prend pour Z... Bref). Et comme je ne peux pas essayer, je ne sais même pas dans quelle fourchette sont situées les valeurs !</p><p id="r-515004" data-claire-element-id="515004">Par ailleurs, un peu comme pour <em>Stylus.deltaX</em>, vous avez trois fonctions pour obtenir l'accélération sur les trois axes :</p><pre id="r-515005" data-claire-element-id="515005"><code data-claire-semantic="lua">Motion.accelerationX()</code></pre><h5 id="r-detection-de" data-claire-element-id="515013">Détection de ???</h5><p id="r-515007" data-claire-element-id="515007">Là, je préfère ne rien dire que de dire n'importe quoi. La documentation précise deux fonctions de plus :</p><pre id="r-515008" data-claire-element-id="515008"><code data-claire-semantic="lua">Motion.readGyro()   -- Retourne la valeur de gyro du motion (?)
Motion.rotation()   -- Retourne la valeur de rotation du motion (?²)</code></pre><p id="r-515009" data-claire-element-id="515009">Je lance donc un appel à témoins : je remercierais toute les personnes pouvant le faire, de me renseigner sur les fonctions du motion, et notamment sur les deux dernières.</p><p id="r-515010" data-claire-element-id="515010">Quoi qu'il en soit, voilà tout ce que je peux dire sur le motion, qui s'il n'est pas clair à l'utilisation, a le mérite d'exister !</p><p id="r-515011" data-claire-element-id="515011">Ainsi s'achève cette dernière partie, pour transformer votre console en portable dernier cri ! (ben ouais, elle vibre et elle détecte les mouvements... :-° )</p><p id="r-515012" data-claire-element-id="515012">Désormais, vous avez toutes les clés en main pour faire de vrais chefs-d'œuvres de homebrews !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
<span class="arrow"></span>
<span class="next">Ça secoue !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">
<span class="next">Les fonctions System et les fichiers INI</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesfonctionsSystemetlesfichiersINI"></a><h2>Les fonctions System et les fichiers INI</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
<span class="arrow"></span>
<span class="next">Bougez avec votre DS !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
<span class="next">Les fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-515018" data-claire-element-id="515018">MicroLua propose des fonctions adaptées à la DS pour naviguer dans les dossiers et manipuler les fichiers.<br/> Notez que les fonctions d'ouverture de fichiers, de modification de leur contenu, etc. sont celles fournies par Lua, à savoir <em>io.open()</em>, etc. Vous pouvez regarder <a href="http://www.lua.org/manual/5.1/manual.html#5.7">ici (en anglais)</a> pour lire la doc officielle de ces fonctions.</p>
</div><a name="Lesfichiers"></a><h2>Les fichiers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">
<span class="arrow"></span>
<span class="next">Les fonctions System et les fichiers INI</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
<span class="next">Les dossiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-fichiers-4" data-claire-element-id="515027">Les fichiers</h4><p id="r-515019" data-claire-element-id="515019">µLua permet de faire deux choses : renommer et supprimer un fichier.</p><h5 id="r-system-rename" data-claire-element-id="515023">System.rename()</h5><p id="r-515020" data-claire-element-id="515020">Pour renommer un fichier ou un dossier vide, la fonction est System.rename(), utilisée de cette façon :</p><pre id="r-515021" data-claire-element-id="515021"><code data-claire-semantic="lua">System.rename(ancienNom, nouveauNom)</code></pre><p id="r-515022" data-claire-element-id="515022">Je pense que je n'ai rien de plus à dire là-dessus :)</p><h5 id="r-system-remove" data-claire-element-id="515026">System.remove()</h5><p id="r-515024" data-claire-element-id="515024">C'est donc la fonction de suppression de fichier ou de dossier vide. Le seul argument requis est (logiquement) le nom du fichier ou du dossier vide à supprimer.<br/> Rien de plus à dire là non plus ^^</p><p id="r-515025" data-claire-element-id="515025">Il y a en fait plus de fonctions au niveau des dossiers, ce que nous allons voir maintenant.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">
<span class="arrow"></span>
<span class="next">Les fonctions System et les fichiers INI</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
<span class="next">Les dossiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesdossiers"></a><h2>Les dossiers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
<span class="arrow"></span>
<span class="next">Les fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
<span class="next">TP : utilisation des fichiers INI</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-dossiers-1" data-claire-element-id="515044">Les dossiers</h4><h5 id="r-system-makedirectory" data-claire-element-id="515030">System.makeDirectory()</h5><p id="r-515028" data-claire-element-id="515028">Ça, c'est la fonction pour créer un dossier. Tout ce que vous avez à faire, c'est de lui donner le nom du dossier.</p><p id="r-515029" data-claire-element-id="515029">A partir de là, on va voir des fonctions pour naviguer et se repérer dans les dossiers, ce qui est bien plus intéressant ^^</p><h5 id="r-system-changedirectory" data-claire-element-id="515033">System.changeDirectory()</h5><p id="r-515031" data-claire-element-id="515031">Cette fonction sert à se déplacer dans l'arborescence. On lui donne un chemin, et on y est :)</p><p id="r-515032" data-claire-element-id="515032">Ce chemin peut très bien être relatif (c'est-à-dire par rapport à la position actuelle) ou absolu (c'est-à-dire par rapport à la racine du linker). Notez que la notation est de type Unix, par conséquent on utilise les slashes &quot;/&quot; et non pas les anti-slashes de Windows &quot;\&quot;. La racine (le &quot;premier grand dossier&quot; qui contient tous les autres) est désignée par le slash &quot;/&quot; au début du chemin. Vous pouvez aussi utiliser &quot;fat:/&quot;, ce qui revient au même. Enfin, sachez que &quot;.&quot; (un point seul) correspond au dossier courant, et que &quot;..&quot; (deux points simples) correspond au dossier qui contient le dossier courant.</p><h5 id="r-system-currentdirectory" data-claire-element-id="515037">System.currentDirectory()</h5><div id="r-515035" data-claire-element-id="515035" data-claire-semantic="question"><p id="r-515034" data-claire-element-id="515034">Fuaaaa, j'me suis perduuuuuu :'(</p></div><p id="r-515036" data-claire-element-id="515036">Rien de grave, utilisez System.currentDirectory(), cette fonction vous retournera le dossier en cours (chemin absolu).</p><h5 id="r-system-listdirectory" data-claire-element-id="515043">System.listDirectory()</h5><p id="r-515038" data-claire-element-id="515038">Cette fonction retourne, sous forme de table, la liste de tous les fichiers et dossiers du dossier passé en argument (là aussi, ça peut être un chemin relatif ou absolu).</p><p id="r-515039" data-claire-element-id="515039">A moins d'être à la racine, les deux premières entrées de la table seront toujours &quot;.&quot; (dossier courant) et &quot;..&quot; (dossier contenant le dossier courant). D'ailleurs, sachez que la fonction classe automatiquement les dossiers au début et les fichiers à la fin.<br/> La table contient en fait des tables, qui possèdent elles mêmes deux entrées : l'une correspond au nom du fichier (ou dossier), et l'autre est un Booléen qui permet de savoir si c'est un fichier ou un dossier.</p><pre id="r-515040" data-claire-element-id="515040"><code data-claire-semantic="lua">files = System.listDirectory(System.currentDirectory())    -- On obtient la liste du contenu du dossier courant

while not Keys.newPress.Start do
    for i, elem in pairs(files) do    -- C'est à mon sens la façon la plus maligne d'exploiter la liste
        if elem.isDir then    -- Si c'est un dossier...
            screen.print(SCREEN_UP, 0, i*8-8, elem.name, Color.new(31, 0, 0))    -- On affiche son nom en rouge
        else    -- Si au contraire c'est un fichier...
            screen.print(SCREEN_UP, 0, i*8-8, elem.name, Color.new(0, 0, 31))    -- On affiche son nom en bleu
        end
    end
    render()
end

files = nil</code></pre><p id="r-515041" data-claire-element-id="515041">Ce bout de code présente donc une façon très simple d'utiliser la table retournée par listDirectory().<br/> Vous voyez aussi comment on accède au nom et à la variable qui permet de savoir si c'est un dossier ou un fichier : elem.name donne le nom, et elem.isDir est un booléen qui vaut true si c'est un dossier (et donc false si c'est un fichier ;) ). Bien entendu, vous pouvez accéder à ces variables sans passer par une boucle :</p><pre id="r-515042" data-claire-element-id="515042"><code data-claire-semantic="lua">nom = files[2].name
dossier = files[2].isDir</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
<span class="arrow"></span>
<span class="next">Les fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
<span class="next">TP : utilisation des fichiers INI</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPutilisationdesfichiersINI"></a><h2>TP : utilisation des fichiers INI</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
<span class="arrow"></span>
<span class="next">Les dossiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">
<span class="next">Du temps et des polices (d&#039;écriture)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-tp-utilisation-des-fichiers-ini" data-claire-element-id="515120">TP : utilisation des fichiers INI</h4><p id="r-515045" data-claire-element-id="515045">Cette partie est un TP-tuto, qui va vous permettre d'appréhender les fonctions sur les fichiers INI, mais aussi d'utiliser les fonctions vues précédemment (enfin, surtout celles sur les dossiers ;) ).</p><h5 id="r-but-du-tp-1" data-claire-element-id="515047">But du TP</h5><p id="r-515046" data-claire-element-id="515046">On va faire quelque chose de très simple : en nous basant sur un fichier INI, on va accueillir l'utilisateur en affichant son nom dans la couleur donnée par le fichier INI. On va aussi lui permettre de modifier son nom depuis le programme.</p><h5 id="r-les-fichiers-ini" data-claire-element-id="515070">Les fichiers INI</h5><h6 id="r-c-est-quoi-1" data-claire-element-id="515056">C'est quoi ?</h6><p id="r-515048" data-claire-element-id="515048">Déjà, c'est un fichier dont l'extension est &quot;.ini&quot;.</p><div id="r-515050" data-claire-element-id="515050" data-claire-semantic="question"><p id="r-515049" data-claire-element-id="515049">C'était pas dur à deviner en même temps :-°</p></div><p id="r-515051" data-claire-element-id="515051">On sait jamais.</p><p id="r-515052" data-claire-element-id="515052">Ces fichiers servent à conserver la configuration et la personnalisation de programmes. Ce type de fichier a été introduit par Windows dès les premières versions de l'OS, bien que maintenant ils aient été pour la plupart remplacés par le Registre.</p><p id="r-515053" data-claire-element-id="515053">Ils ont tous la même structure :</p><pre id="r-515054" data-claire-element-id="515054"><code>[catégorie]
; Commentaire
variable=valeur
variable2=autreValeur ; Commentaire</code></pre><p id="r-515055" data-claire-element-id="515055">Quel que soit le type de valeur (chaîne de caractères ou nombre), il n'y a pas de guillemets ou de notation spéciale (de toute façon, vous verrez que pour les fonctions de µLua, c'est tout du String :) ).</p><h6 id="r-les-utiliser-avec-ulua" data-claire-element-id="515065">Les utiliser avec µLua</h6><div id="r-515058" data-claire-element-id="515058" data-claire-semantic="question"><p id="r-515057" data-claire-element-id="515057">Parce que c'est bien beau tout ça, mais on sait toujours pas comment nous en servir dans nos homebrews !</p></div><p id="r-515059" data-claire-element-id="515059">On y arrive ;)</p><p id="r-515060" data-claire-element-id="515060">µLua met à notre disposition deux fonctions : une pour lire le fichier, et l'autre pour enregistrer les données.</p><pre id="r-515061" data-claire-element-id="515061"><code data-claire-semantic="lua">config = INI.load(fichier)    -- Chargement du fichier
param = config[&quot;catégorie&quot;][&quot;variable&quot;]    -- Accès à la valeur de &quot;variable&quot; dans la catégorie &quot;catégorie&quot; (j'ai vraiment trop d'imagination pour les noms moi :p )
config[&quot;catégorie&quot;][&quot;variable2&quot;] = &quot;blabla&quot;    -- On change la valeur de &quot;variable2&quot; dans la catégorie &quot;catégorie&quot;
INI.save(fichier, config)    -- On sauvegarde la config</code></pre><p id="r-515062" data-claire-element-id="515062">Voilà, INI.load() sert à lire le fichier : elle renvoie une table dans le genre tableau associatif (avec des index qui ne sont pas des nombres), qui contient pour chaque catégorie une table qui correspond à cette catégorie. Les index portent logiquement les noms des catégories et des variables.<br/> INI.save() permet d'enregistrer la table dans le fichier.</p><aside id="r-515064" data-claire-element-id="515064" data-claire-semantic="warning"><p id="r-515063" data-claire-element-id="515063">La table enregistrée dans le fichier ne peut contenir que des Strings ! Si vous souhaitez enregistrer un nombre, vous devez le convertir en string à l'aide de la fonction <em>tostring()</em>. De même, si vous souhaitez utiliser une valeur numérique dans votre script tirée d'un fichier INI, il vaut mieux la convertir en nombre avec <em>tonumber()</em></p></aside><h6 id="r-et-le-notre" data-claire-element-id="515069">Et le nôtre ?</h6><p id="r-515066" data-claire-element-id="515066">Pour être sûr d'avoir la même base, voici le fichier INI que je vais utiliser :</p><pre id="r-515067" data-claire-element-id="515067"><code>[couleur]
; Par défaut, la couleur sera le blanc (31, 31, 31)

rouge=31
vert=31
bleu=31

[nom]
; Par défaut, la variable est vide

nom=</code></pre><p id="r-515068" data-claire-element-id="515068">S'il ne vous plaît pas, vous pouvez très bien changer sa structure, mais il faudra alors penser à adapter le code en conséquence ;)</p><h5 id="r-modifier-le-nom-du-bonhomme" data-claire-element-id="515097">Modifier le nom du bonhomme</h5><p id="r-515071" data-claire-element-id="515071">Avant µLua 3.0, ça aurait été très simple, puisque µLua intégrait par défaut un clavier. Or, depuis cette version, il n'y est plus. Mais... des membres dévoués de la communauté ont mis au point des claviers particulièrement bien faits.</p><ul id="r-515078" data-claire-element-id="515078"><li id="r-515073" data-claire-element-id="515073"><p id="r-515072" data-claire-element-id="515072">Clavier de Papymouge : le premier, l'ancêtre :p</p></li><li id="r-515075" data-claire-element-id="515075"><p id="r-515074" data-claire-element-id="515074">Clavier de thermo_nono : amélioration de celui de Papymouge (le clavier est désormais personnalisable)</p></li><li id="r-515077" data-claire-element-id="515077"><p id="r-515076" data-claire-element-id="515076">Clavier de Quent42340 : un autre, le dernier à avoir vu le jour ^^</p></li></ul><p id="r-515079" data-claire-element-id="515079">J'ai une préférence pour celui de thermo_nono, car j'aime bien les skins et la personnalisation ; bien entendu, cet avis n'engage que moi. Mais comme le but de ce TP n'est pas de vous apprendre à embellir vos homebrews, je vais utiliser celui de Papymouge. Vous pouvez le trouver <a href="http://papymouge.indefero.net/p/clavier-lua/source/download/master/">ici</a>.</p><h6 id="r-utilisation-du-clavier" data-claire-element-id="515096">Utilisation du clavier</h6><p id="r-515080" data-claire-element-id="515080">Je ne présenterai ici que le clavier de Papymouge, et encore juste pour que vous sachiez comment vous en servir pour que l'utilisateur puisse entrer son nom ^^ Si vous voulez en utiliser un autre, je ne peux que vous conseiller de farfouiller sur le <a href="http://microlua.xooit.fr/index.php">forum de µLua</a> (notez la fonction &quot;Rechercher&quot; en haut :) ).</p><p id="r-515081" data-claire-element-id="515081">En premier lieu, il faut charger la lib :</p><pre id="r-515082" data-claire-element-id="515082"><code data-claire-semantic="lua">dofile(&quot;clavier.lua&quot;)</code></pre><p id="r-515083" data-claire-element-id="515083">Le but n'étant pas de vous apprendre à intégrer une lib dans votre programme, je vous renvoie à <a href="http://www.siteduzero.com/tutoriel-3-177781-les-librairies.html#ss_part_1">cette annexe</a> qui parle un peu plus de dofile().</p><p id="r-515084" data-claire-element-id="515084">Il faut donc que vous fournissiez avec votre programme le fichier &quot;clavier.lua&quot;, mais aussi les fichiers &quot;libClavier.lua&quot; et &quot;standard.lua&quot; que le clavier utilise. Ils doivent être dans le même dossier, cependant ils peuvent être dans un dossier différent de celui de votre programme ; il suffit d'adapter en conséquence le chemin donné à <em>dofile()</em>.</p><p id="r-515085" data-claire-element-id="515085">Ensuite, il faut initialiser le clavier :</p><pre id="r-515086" data-claire-element-id="515086"><code data-claire-semantic="lua">clavier.activeScreen(clav,true)</code></pre><p id="r-515087" data-claire-element-id="515087">Tout ce qu'il vous faut savoir, c'est que <em>clav</em> désigne votre clavier ; gardez cette variable sous le coude, vous en aurez besoin pour plusieurs fonctions.</p><p id="r-515088" data-claire-element-id="515088">Il faut aussi l'afficher à chaque tour de boucle :</p><pre id="r-515089" data-claire-element-id="515089"><code data-claire-semantic="lua">clavier.show(clav)</code></pre><p id="r-515090" data-claire-element-id="515090">Pour récupérer l'entrée de l'utilisateur, c'est la fonction :</p><pre id="r-515091" data-claire-element-id="515091"><code data-claire-semantic="lua">touche = clavier.held(clav,Stylus.X,Stylus.Y)</code></pre><p id="r-515092" data-claire-element-id="515092">Elle renvoie la lettre pressée, ou &quot;ent&quot; si on appuie sur &quot;Entrée&quot;, ou &quot;del&quot; si on appuie sur &quot;Retour arrière&quot; (ou &quot;&quot; si on n'appuie sur rien :p ). On doit lui passer en argument les coordonnées du stylet.<br/> Notez qu'il vaut mieux vérifier d'abord que le joueur appuie bien sur l'écran ;)</p><p id="r-515093" data-claire-element-id="515093">Enfin, pour détruire le clavier à la fin du script, c'est :</p><pre id="r-515094" data-claire-element-id="515094"><code data-claire-semantic="lua">clavier.del(clav)</code></pre><p id="r-515095" data-claire-element-id="515095">On va dire que l'on enregistrera si l'utilisateur appuie sur &quot;Entrée&quot;. Le bouton Start permettra de quitter sans sauvegarder.</p><h5 id="r-codons-9" data-claire-element-id="515100">Codons !</h5><p id="r-515098" data-claire-element-id="515098">Bon, je vous ai déjà dit beaucoup de choses, et je sais que vous avez hâte de coder ^^ <br/> Je vous conseille juste de réfléchir un peu avant de foncer tête baissée, même si ce script n'est pas bien compliqué. Rappelez-vous ce que doit faire le programme, et ça ira ^^</p><p id="r-515099" data-claire-element-id="515099">3, 2, 1, Partez !</p><h5 id="r-need-help" data-claire-element-id="515108">Need help</h5><p id="r-515101" data-claire-element-id="515101">Vous galérez sur le retour arrière du clavier ? Si oui, vous avez de la chance : j'ai là une petite aide. Si non... et bien tant mieux pour vous :)</p><p id="r-515102" data-claire-element-id="515102">Indice 1 :</p><div id="r-515104" data-claire-element-id="515104"><p id="r-515103" data-claire-element-id="515103">Pour gérer le retour arrière, on doit utiliser la fonction <a href="http://www.lua.org/manual/5.1/manual.html#pdf-string.sub">string.sub()</a> (fonction de base de Lua)... Lisez la doc :p</p></div><p id="r-515105" data-claire-element-id="515105">Indice 2 :</p><div id="r-515107" data-claire-element-id="515107"><p id="r-515106" data-claire-element-id="515106">Toujours pas trouvé ? Allez, je vous aide encore un peu... Il faut faire une galipette avec une des deux bornes données à la fonction string.sub() qui doit être négative. Mais comment ça négative ?</p></div><h5 id="r-correction-178" data-claire-element-id="515116">Correction</h5><p id="r-515109" data-claire-element-id="515109">Ayé, fini !</p><p id="r-515110" data-claire-element-id="515110">Alors, facile hein ? :p</p><p id="r-515111" data-claire-element-id="515111">Voici ma correction :</p><pre id="r-515112" data-claire-element-id="515112"><code data-claire-semantic="lua">dofile(&quot;clavier.lua&quot;)
clavier.activeScreen(clav,true)

config = INI.load(&quot;tp_INI.ini&quot;)
couleur = Color.new(tonumber(config[&quot;couleur&quot;][&quot;rouge&quot;]), tonumber(config[&quot;couleur&quot;][&quot;vert&quot;]), tonumber(config[&quot;couleur&quot;][&quot;bleu&quot;]))

while not Keys.newPress.Start do
    Controls.read()
    
    screen.print(SCREEN_UP, 0, 0, &quot;Votre nom est :&quot;, couleur)
    screen.print(SCREEN_UP, 0, 8, config[&quot;nom&quot;][&quot;nom&quot;], couleur)
    screen.print(SCREEN_UP, 0, 50, &quot;Appuyez sur \&quot;Entrée\&quot; pour enregistrer&quot;, couleur)
    screen.print(SCREEN_UP, 0, 58, &quot;et sur Start pour quitter.&quot;, couleur)

    clavier.show(clav)
    
    local touche = &quot;&quot;
    if Stylus.newPress then
        touche = clavier.held(clav,Stylus.X,Stylus.Y)
    end
    if(touche ~= &quot;&quot;) then
        if touche == &quot;ent&quot; then								-- Si l'utilisateur a appuyé sur &quot;Entrée&quot;...
			INI.save(&quot;tp_INI.ini&quot;, config)				    -- ... on enregistre.
		elseif touche == &quot;del&quot; then							-- Si l'utilisateur a appuyé sur &quot;Retour arrière&quot;
			config[&quot;nom&quot;][&quot;nom&quot;] = string.sub(config[&quot;nom&quot;][&quot;nom&quot;], 1, -2)		-- On élimine la dernière lettre
		else										-- Si l'utilisateur a appuyé sur une touche &quot;normale&quot;
			config[&quot;nom&quot;][&quot;nom&quot;] = config[&quot;nom&quot;][&quot;nom&quot;]..touche
		end
    end

    render()
end

config = nil
clavier.del(clav)
couleur = nil</code></pre><aside id="r-515114" data-claire-element-id="515114" data-claire-semantic="information"><p id="r-515113" data-claire-element-id="515113">Comme vous l'avez remarqué on a utilisé tonumber() car on n'enregistre que des strings dans un INI et <em>Color.new()</em> ne prend que des nombres donc on doit convertir nos strings en nombres grâce à <em>tonumber()</em></p></aside><p id="r-515115" data-claire-element-id="515115">Je ne pense pas que ça vous aura été difficile de trouver quelque chose de fonctionnel ^^</p><h5 id="r-les-ameliorations" data-claire-element-id="515119">Les améliorations !</h5><p id="r-515117" data-claire-element-id="515117">Je vois pas grand-chose, le script n'est pas très conséquent en même temps...<br/> Vous pourriez permettre à l'utilisateur de choisir la couleur parmi quelques-unes depuis le programme (faites des boutons par exemple ^^), et modifier tout de suite la couleur sans avoir à recharger le fichier INI. N'oubliez pas que INI.save() ne peut enregistrer qu'une table contenant des chaînes de caractères !<br/> Vous pourriez aussi vérifier que les valeurs de rouge, vert et bleu du fichier INI sont bien entre 0 et 31 ; le cas échéant, affichez le texte en blanc et un message d'erreur en rouge :p</p><p id="r-515118" data-claire-element-id="515118">Avec ce que nous avons vu, vous pouvez très bien faire un petit explorateur de fichier pour la DS, avec toutes les fonctions de base (copie, suppression...) ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
<span class="arrow"></span>
<span class="next">Les dossiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">
<span class="next">Du temps et des polices (d&#039;écriture)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Dutempsetdespolicesd039criture"></a><h2>Du temps et des polices (d&#039;écriture)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
<span class="arrow"></span>
<span class="next">TP : utilisation des fichiers INI</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
<span class="next">Les fontes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-515122" data-claire-element-id="515122">Vous avez déjà pu découvrir de nombreuses fonctionnalités offertes par MicroLua, mais il reste encore deux ou trois choses intéressantes, que j'ai regroupées ici en un seul chapitre : dans l'ordre, les polices d'écriture (<em>Fonts</em>), les <em>timers</em> et la gestion du jour et de l'heure (avec <em>DateTime</em>). Le rapport n'est pas tout à faire évident, mais au moins ça remplit son chapitre :p</p>
</div><a name="Lesfontes"></a><h2>Les fontes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">
<span class="arrow"></span>
<span class="next">Du temps et des polices (d&#039;écriture)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
<span class="next">Datetime</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-fontes" data-claire-element-id="515143">Les fontes</h4><p id="r-515123" data-claire-element-id="515123">Je suis sûr que vous vous êtes dit que quand même, si on veut faire un jeu grand public, on ne peut raisonnablement pas garder cette immonde police d'écriture qui fait passer notre DS pour un vieux PC sous MS-DOS.</p><p id="r-515124" data-claire-element-id="515124">Et c'est là mes amis que j'agite devant vos yeux ébahis la gamme de fonctions <strong>Font</strong> ! :magicien:</p><h5 id="r-parce-que-quand-meme-microlua-il-est-penible" data-claire-element-id="515127">Parce que quand même, MicroLua il est pénible...</h5><p id="r-515125" data-claire-element-id="515125">Eeeeeet forcément, on ne peut pas charger directement nos jolies fontes en TrueType !<br/> Il faut d'abord les passer à la moulinette du convertisseur qui s'appelle OSLFonts ; comme pour le son, je vous redirigerai vers l'annexe prévue à cet effet.</p><p id="r-515126" data-claire-element-id="515126">Vous vous retrouvez donc avec votre police convertie au format adéquat, on peut maintenant l'utiliser.</p><h5 id="r-on-charge-on-decharge-on-charge" data-claire-element-id="515133">On charge, on décharge, on charge...</h5><p id="r-515128" data-claire-element-id="515128">Première chose à faire évidemment : charger la fonte en mémoire, comme suit :</p><pre id="r-515129" data-claire-element-id="515129"><code data-claire-semantic="lua">police = Font.load(&quot;font.oft&quot;)</code></pre><p id="r-515130" data-claire-element-id="515130">On obtient donc une variable du type <em>Font</em>. Comme d'habitude, vous devez remplacer <em>&quot;font.oft&quot;</em> par le bon chemin vers le fichier.</p><p id="r-515131" data-claire-element-id="515131">Quand vous aurez fini votre boulot, vous pouvez libérer la mémoire :</p><pre id="r-515132" data-claire-element-id="515132"><code data-claire-semantic="lua">Font.destroy(police)
police = nil</code></pre><h5 id="r-et-on-en-profite-enfin" data-claire-element-id="515142">Et on en profite enfin !</h5><div id="r-515135" data-claire-element-id="515135" data-claire-semantic="question"><p id="r-515134" data-claire-element-id="515134">Avec Font.print() c'est ça ? Hein j'ai bon, hein j'ai bon ?</p></div><p id="r-515136" data-claire-element-id="515136">Non. :diable:</p><p id="r-515137" data-claire-element-id="515137">Oui je sais, cette fonction est documentée, mais elle a quelques petits problèmes et est notée obsolète sur le Wiki. On lui préfère son équivalent dans les fonctions <em>screen</em> qui est :</p><pre id="r-515138" data-claire-element-id="515138"><code data-claire-semantic="lua">screen.printFont(ecran, x, y, texte, couleur, police)</code></pre><p id="r-515139" data-claire-element-id="515139">Je pense que son utilisation est plus qu'évidente, c'est exactement comme <em>screen.print()</em> mis à part bien sûr qu'il faut lui donner une police :p</p><p id="r-515140" data-claire-element-id="515140">Au final ça nous donne quelque chose comme :</p><pre id="r-515141" data-claire-element-id="515141"><code data-claire-semantic="lua">police = Font.load(&quot;font.oft&quot;)

while not Keys.newPress.Start do
    Controls.read()
    
    screen.print(SCREEN_UP, 0, 0, &quot;Hi world!&quot;, Color.new(0, 0, 31), police)
    
    render()
end

Font.destroy(police)
police = nil</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">
<span class="arrow"></span>
<span class="next">Du temps et des polices (d&#039;écriture)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
<span class="next">Datetime</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Datetime"></a><h2>Datetime</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
<span class="arrow"></span>
<span class="next">Les fontes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
<span class="next">Les timers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-datetime-3" data-claire-element-id="515171">Datetime</h4><p id="r-515144" data-claire-element-id="515144">Passons maintenant à la date et à l'heure. Ça ira très vite à vrai dire, il n'y a que deux fonctions :)</p><h5 id="r-l-objet-datetime" data-claire-element-id="515163">L'objet DateTime</h5><p id="r-515145" data-claire-element-id="515145">D'abord un petit topo sur l'objet du type <em>DateTime</em>.<br/> C'est donc une table, qui contient des informations sur le temps. Ses champs sont :</p><ul id="r-515158" data-claire-element-id="515158"><li id="r-515147" data-claire-element-id="515147"><p id="r-515146" data-claire-element-id="515146"><em>year</em> : années</p></li><li id="r-515149" data-claire-element-id="515149"><p id="r-515148" data-claire-element-id="515148"><em>month</em> : mois</p></li><li id="r-515151" data-claire-element-id="515151"><p id="r-515150" data-claire-element-id="515150"><em>day</em> : jours</p></li><li id="r-515153" data-claire-element-id="515153"><p id="r-515152" data-claire-element-id="515152"><em>hour</em> : heures</p></li><li id="r-515155" data-claire-element-id="515155"><p id="r-515154" data-claire-element-id="515154"><em>minute</em> : minutes</p></li><li id="r-515157" data-claire-element-id="515157"><p id="r-515156" data-claire-element-id="515156"><em>second</em> : secondes</p></li></ul><p id="r-515159" data-claire-element-id="515159">Pour celui qui comprend l'anglais, rien de bien compliqué :p</p><p id="r-515160" data-claire-element-id="515160">Quand vous avez votre objet <em>DateTime</em>, vous pouvez :</p><pre id="r-515161" data-claire-element-id="515161"><code data-claire-semantic="lua">dateTimeObj.month = 11     -- Changer ses informations
screen.print(SCREEN_UP, 0, 0, dateTimeObj.month)    -- Et les afficher de la même manière</code></pre><p id="r-515162" data-claire-element-id="515162">Je suis tout bêtement en train de vous expliquer comment utiliser une table en Lua ;)</p><h5 id="r-les-fonctions-27" data-claire-element-id="515170">Les fonctions</h5><p id="r-515164" data-claire-element-id="515164">La première crée un objet <em>DateTime</em> vide. Disons que ça nous évite de créer la table nous-mêmes :p</p><pre id="r-515165" data-claire-element-id="515165"><code data-claire-semantic="lua">dateTimeObj = DateTime.new()</code></pre><p id="r-515166" data-claire-element-id="515166">Mais vous utiliserez plus probablement celle-ci :</p><pre id="r-515167" data-claire-element-id="515167"><code data-claire-semantic="lua">dateTimeObj = DateTime.getCurrentTime()</code></pre><p id="r-515168" data-claire-element-id="515168">Elle vous donne un objet <em>DateTime</em> qui contient l'heure actuelle (et le jour évidemment).</p><p id="r-515169" data-claire-element-id="515169">Bon voilà, c'est tout :) Maintenant, passons aux <em>Timers</em> !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
<span class="arrow"></span>
<span class="next">Les fontes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
<span class="next">Les timers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lestimers"></a><h2>Les timers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
<span class="arrow"></span>
<span class="next">Datetime</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
<span class="next">TayPay</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-timers-4" data-claire-element-id="515184">Les timers</h4><p id="r-515172" data-claire-element-id="515172">Les <em>timers</em> sont en quelque sorte des chronomètres. Vous en lancez un, et il va compter le nombre de millisecondes qui s'écoulent. Le principe est aussi simple que ça, et ils trouvent leur utilité dans plein de programmes ;)</p><p id="r-515173" data-claire-element-id="515173">Dans un premier temps, il faut en créer un. Vous utiliserez pour cela la fonction</p><pre id="r-515174" data-claire-element-id="515174"><code data-claire-semantic="lua">Timer.new()</code></pre><p id="r-515175" data-claire-element-id="515175">Elle retourne un objet du type <em>Timer</em>. Cet objet vous permettra de contrôler le <em>timer</em>. Dans la suite du cours, je vais l'appeler <em>john</em>. Parce que si je l'appelle <em>timer</em>, vous allez vous embrouillez, et si je l'appelle <em>time</em>, ça écrase les fonctions correspondantes (qui sont des fonctions de base du Lua). Donc ça sera <em>john</em> :)</p><p id="r-515176" data-claire-element-id="515176">Voyons maintenant comment on récupère l'information du temps.<br/> On passe par la méthode</p><pre id="r-515177" data-claire-element-id="515177"><code data-claire-semantic="lua">john:time()</code></pre><aside id="r-515179" data-claire-element-id="515179" data-claire-semantic="error"><p id="r-515178" data-claire-element-id="515178">C'est bien une fonction, avec les parenthèses derrière. Si vous ne les mettez pas, vous obtiendrez une erreur.</p></aside><p id="r-515180" data-claire-element-id="515180">Vous obtenez ainsi le nombre de millisecondes qui se sont écoulées depuis le démarrage de <em>john</em>.</p><p id="r-515181" data-claire-element-id="515181">Evidemment, pour que <em>john</em> se rende utile, il faut le démarrer. Vous pouvez ensuite l'arrêter, et/ou le remettre à zéro. Les méthodes respectives sont</p><pre id="r-515182" data-claire-element-id="515182"><code data-claire-semantic="lua">john:start()
john:stop()
john:reset()</code></pre><p id="r-515183" data-claire-element-id="515183">Notez que la remise à zéro arrête automatiquement le <em>timer</em>.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
<span class="arrow"></span>
<span class="next">Datetime</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
<span class="next">TayPay</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TayPay"></a><h2>TayPay</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
<span class="arrow"></span>
<span class="next">Les timers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">
<span class="next">Foire aux astuces</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-taypay" data-claire-element-id="515235">TayPay</h4><p id="r-515185" data-claire-element-id="515185">Je vais vous faire coder un script qui regroupe trois choses finalement assez utiles liées au temps : une horloge, un chronomètre, et un compte à rebours !<br/> Ce TP est séparé en plusieurs parties, et chaque partie donne une explication sur le code à réaliser suivi de ma correction. Evidemment, essayez de trouver le script vous-mêmes à partir de l'explication avant de regarder ce que j'ai fait. Encore une fois, ma correction n'a qu'une valeur indicative ; je tente de faire un code clair pour que vous puissiez le comprendre aisément, par conséquent il sera rarement le &quot;meilleur&quot; d'un point de vue optimisation. Si ça marche avec votre version, c'est très bien ! ;)</p><h5 id="r-la-base-4" data-claire-element-id="515189">La base</h5><p id="r-515186" data-claire-element-id="515186">Nous aurons besoin d'au moins deux <em>timers</em> : l'un pour le chronomètre, et l'autre pour le compte à rebours. En utilisant deux <em>timers</em> différents, on peut faire tourner le chrono pendant qu'on utilise le compte à rebours ;) <br/> On va aussi tout de suite déclarer une variable <em>mode</em> qui correspondra au mode choisi : horloge, chronomètre, ou compte à rebours. On n'affichera qu'un seul mode à la fois, et on pourra changer de mode avec les boutons L et R.<br/> Il nous faut aussi un objet <em>DateTime</em> pour l'horloge, ainsi qu'une autre variable (une table) qui contiendra le réglage du compte à rebours, et enfin une dernière variable pour la position du &quot;curseur&quot; du compte à rebours (vous verrez plus loin).</p><p id="r-515187" data-claire-element-id="515187">On a donc pour base :</p><pre id="r-515188" data-claire-element-id="515188"><code data-claire-semantic="lua">horloge = DateTime.new()

mode = 1                            -- 1 : horloge | 2 : chronomètre | 3 : compte à rebours
reglageRebours = {0, 0, timestamp = 0}        -- Premier index : minutes | Second index : secondes | Troisième index : timestamp (plus facile pour les calculs ;) )
curseur = 1                         -- 1 : minutes | 2 : secondes

chrono = Timer.new()
rebours = Timer.new()

while not Keys.newPress.Start do
    Controls.read()
    
    -- Votre code ici
    
    render()
end

horloge = nil
reglageRebours = nil
mode = nil
curseur = nil
chrono:stop()
chrono = nil
rebours:stop()
rebours = nil</code></pre><h5 id="r-les-trois-modes-differents" data-claire-element-id="515197">Les trois modes différents</h5><p id="r-515190" data-claire-element-id="515190">On va d'abord mettre en place la structure pour pouvoir afficher les modes et en changer.<br/> On affiche un mode à la fois, et on change de mode avec les touches L et R dans cet ordre : horloge ; appui sur R ; chronomètre ; appui sur R ; compte à rebours ; appui sur R ; horloge. Et évidemment, on a la même chose avec L mais dans l'autre sens.</p><p id="r-515191" data-claire-element-id="515191">Changement de mode :</p><div id="r-515193" data-claire-element-id="515193"><pre id="r-515192" data-claire-element-id="515192"><code data-claire-semantic="lua">if Keys.newPress.R then
    mode = mode + 1
    if mode &gt; 3 then mode = 1 end
end
if Keys.newPress.L then
    mode = mode - 1
    if mode &lt; 1 then mode = 3 end
end

screen.print(SCREEN_UP, 0, 184, &quot;Appuyez sur L et R pour changer de mode.&quot;)</code></pre></div><p id="r-515194" data-claire-element-id="515194">Structure conditionnelle pour afficher chaque mode séparément (à partir de la variable <em>mode</em>) :</p><div id="r-515196" data-claire-element-id="515196"><pre id="r-515195" data-claire-element-id="515195"><code data-claire-semantic="lua">if mode == 1 then
    screen.print(SCREEN_UP, 0, 0, &quot;HORLOGE&quot;)
    -- Code pour l'affichage de l'horloge
elseif mode == 2 then
    screen.print(SCREEN_UP, 0, 0, &quot;CHRONOMETRE&quot;)
    -- Code pour l'affichage du chronomètre
elseif mode == 3 then
    screen.print(SCREEN_UP, 0, 0, &quot;COMPTE A REBOURS&quot;)
    -- Code pour l'affichage du compte à rebours
end</code></pre></div><h5 id="r-horloge" data-claire-element-id="515202">Horloge</h5><p id="r-515198" data-claire-element-id="515198">Très certainement le mode le plus simple.<br/> A chaque tour de boucle, vous mettez à jour les infos sur l'heure actuelle (objet <em>horloge</em>) et vous les affichez au format que vous voulez.</p><p id="r-515199" data-claire-element-id="515199">Moi j'ai fait comme suit :</p><div id="r-515201" data-claire-element-id="515201"><pre id="r-515200" data-claire-element-id="515200"><code data-claire-semantic="lua">if mode == 1 then
    screen.print(SCREEN_UP, 0, 0, &quot;HORLOGE&quot;)
    
    horloge = DateTime.getCurrentTime()
    
    screen.print(SCREEN_UP, 0, 32, &quot;Il est actuellement &quot;..horloge.hour..&quot;h&quot;..horloge.minute..&quot; et &quot;..horloge.second..&quot; secondes.&quot;)
    screen.print(SCREEN_UP, 0, 48, &quot;Nous sommes aujourd'hui le &quot;..horloge.day..&quot;/&quot;..horloge.month..&quot;/&quot;..horloge.year..&quot;.&quot;)</code></pre></div><h5 id="r-chronometre" data-claire-element-id="515208">Chronomètre</h5><p id="r-515203" data-claire-element-id="515203">On va se mettre d'accord sur les contrôles. Pour lancer le chronomètre, ce sera le bouton A. Pour le mettre en pause, ce sera le bouton B. Et pour le remettre à zéro (et donc l'arrêter), on prendra le bouton X.<br/> Vous affichez ensuite sa valeur, en la formatant un peu pour que ça ressemble à quelque chose ^^ Pour ce formatage, vous pourriez avoir besoin de la fonction Lua <em>math.floor()</em>, qui renvoie la partie entière d'un nombre (en fait, ça renvoie le nombre entier immédiatement inférieur ou égal au nombre donné en paramètre). Pour ceux qui ne le savent pas, il y a 3600 secondes dans une heure (60 minutes fois 60 secondes) et une seconde équivaut à mille millisecondes.</p><p id="r-515204" data-claire-element-id="515204"></p><div id="r-515206" data-claire-element-id="515206"><pre id="r-515205" data-claire-element-id="515205"><code data-claire-semantic="lua">elseif mode == 2 then
    screen.print(SCREEN_UP, 0, 0, &quot;CHRONOMETRE&quot;)
    
    if Keys.newPress.A then
        chrono:start()
    end
    if Keys.newPress.B then
        chrono:stop()
    end
    if Keys.newPress.X then
        chrono:reset()
    end
    
    local temps = DateTime.new()            -- Variable locale pour le formatage
    temps.hour = math.floor(chrono:time() / 3600000)
    temps.minute = math.floor(chrono:time() / 60000)
    temps.second = math.floor(chrono:time() / 1000)
    -- Et on calcule les millisecondes restantes
    local millisecondes = chrono:time() - temps.hour * 3600000 - temps.minute * 60000 - temps.second * 1000
    
    screen.print(SCREEN_UP, 0, 32, &quot;Temps :&quot;)
    screen.print(SCREEN_UP, 0, 40, temps.hour..&quot;h&quot;..temps.minute..&quot;min&quot;..temps.second..&quot;s&quot;..millisecondes..&quot;ms&quot;)
    
    screen.print(SCREEN_UP, 0, 168, &quot;A : démarrage | B : pause | X : RàZ&quot;)</code></pre></div><p id="r-515207" data-claire-element-id="515207">Un peu plus long mais après tout c'est déjà plus utile que l'horloge :p</p><h5 id="r-compte-a-rebours" data-claire-element-id="515227">Compte à rebours</h5><p id="r-515209" data-claire-element-id="515209">Le principe du compte à rebours, c'est de décompter le temps à partir d'un temps donné jusqu'à 0.<br/> Pour régler ce temps, on va utiliser les flèches. On affiche sur une ligne les minutes et les secondes de la table <em>reglageRebours</em> ainsi qu'un &quot;curseur&quot; (affichage des minutes ou des secondes d'une autre couleur par exemple). Gauche et droite serviront à naviguer entre les minutes et les secondes, et les flèches haut et bas à changer la valeur.<br/> Les autres boutons ont les mêmes actions que pour le chronomètre. Cela dit, lorsqu'on remet à zéro, on repasse en mode réglage.</p><p id="r-515210" data-claire-element-id="515210">Pour savoir si l'on est en mode réglage, plutôt que d'utiliser une nouvelle variable, on peut s'appuyer sur le <em>timer rebours</em>.<br/> Cherchez un peu, sinon voilà comment je vois les choses :</p><div id="r-515212" data-claire-element-id="515212"><p id="r-515211" data-claire-element-id="515211">Si le <em>timer</em> est à 0, alors on est en réglage. Tout simplement ! ^^</p></div><p id="r-515213" data-claire-element-id="515213">Pour calculer le temps restant, je vous recommande l'utilisation de ce que j'appelle de façon impropre un <em>timestamp</em>. C'est en fait le nombre de millisecondes correspondant au réglage. Pour le calculer, vous ferez :</p><div id="r-515216" data-claire-element-id="515216"><pre id="r-515214" data-claire-element-id="515214"><code data-claire-semantic="lua">reglageRebours.timestamp = reglageRebours[1] * 60000 + reglageRebours[2] * 1000</code></pre><p id="r-515215" data-claire-element-id="515215">Tout simplement !</p></div><p id="r-515217" data-claire-element-id="515217">Ça facilite grandement les calculs, croyez-moi ;)</p><p id="r-515218" data-claire-element-id="515218">Première aide :</p><div id="r-515220" data-claire-element-id="515220"><p id="r-515219" data-claire-element-id="515219">Commencez par le &quot;mode réglage&quot;. On a vu que si le <em>timer</em> est à 0, on est en réglage. Que doit-on y faire ? Ce ne sont que de simples conditions sur les boutons concernés ;) N'oubliez pas qu'il n'y a qu'au maximum 59 minutes et 59 secondes :p Pensez aussi à mettre à jour le <em>&quot;timestamp&quot;</em>.</p></div><p id="r-515221" data-claire-element-id="515221">Seconde aide :</p><div id="r-515223" data-claire-element-id="515223"><p id="r-515222" data-claire-element-id="515222">Vous allez devoir vous creuser très légèrement la tête pour trouver le temps restant, mais grâce au <em>&quot;timestamp&quot;</em> c'est assez facile, puisque ce dernier et le temps de &lt;italique&gt;rebours&lt;italique&gt; sont en millisecondes ;) Pensez bien aussi à remettre à zéro le compte à rebours une fois terminé.</p></div><p id="r-515224" data-claire-element-id="515224">Ma solution :</p><div id="r-515226" data-claire-element-id="515226"><pre id="r-515225" data-claire-element-id="515225"><code data-claire-semantic="lua">elseif mode == 3 then
    screen.print(SCREEN_UP, 0, 0, &quot;COMPTE A REBOURS&quot;)
    
    local couleurs = {Color.new(31, 31, 31), Color.new(31, 31, 31)}         -- Table pour les couleurs des minutes et des secondes
    
    if rebours:time() == 0 then             -- Mode réglage
        screen.print(SCREEN_UP, 0, 32, &quot;Réglage :&quot;)
        
        couleurs[curseur] = Color.new(31, 0, 0)         -- On met en rouge la partie sélectionnée
        
        if Keys.newPress.Up then        -- On augmente la partie sélectionnée
            reglageRebours[curseur] = reglageRebours[curseur] + 1
            if reglageRebours[curseur] &gt; 59 then reglageRebours[curseur] = 0 end
        end
        if Keys.newPress.Down then         -- On diminue la partie sélectionnée
            reglageRebours[curseur] = reglageRebours[curseur] - 1
            if reglageRebours[curseur] &lt; 0 then reglageRebours[curseur] = 59 end
        end

        if Keys.newPress.Left then
            curseur = 1
        end
        if Keys.newPress.Right then
            curseur = 2
        end
        
        reglageRebours.timestamp = reglageRebours[1] * 60000 + reglageRebours[2] * 1000
    end
    
    if Keys.newPress.A then
        rebours:start()
    end
    if Keys.newPress.B then
        rebours:stop()
    end
    if Keys.newPress.X then
        rebours:reset()
    end
    
    -- Si le temps écoulé est supérieur ou égal au temps de réglage, alors le compte à rebours est terminé
    if reglageRebours.timestamp &lt;= rebours:time() then
        rebours:reset()
    end
    
    local minutes = math.floor((reglageRebours.timestamp - rebours:time()) / 60000)
    local secondes = math.floor((reglageRebours.timestamp - rebours:time()) / 1000) - 60 * minutes
    
    screen.print(SCREEN_UP, 0, 40, minutes..&quot;min&quot;, couleurs[1])
    screen.print(SCREEN_UP, 35, 40, secondes..&quot;s&quot;, couleurs[2])
end</code></pre></div><h5 id="r-bilan-6" data-claire-element-id="515234">Bilan</h5><p id="r-515228" data-claire-element-id="515228">Voici donc notre script terminé :</p><pre id="r-515229" data-claire-element-id="515229"><code data-claire-semantic="lua">horloge = DateTime.new()

mode = 1                            -- 1 : horloge | 2 : chronomètre | 3 : compte à rebours
reglageRebours = {0, 0, timestamp = 0}        -- Premier index : minutes | Second index : secondes | Troisième index : timestamp (plus facile pour les calculs ;) )
curseur = 1                         -- 1 : minutes | 2 : secondes

chrono = Timer.new()
rebours = Timer.new()

while not Keys.newPress.Start do
    Controls.read()
    
    if Keys.newPress.R then
        mode = mode + 1
        if mode &gt; 3 then mode = 1 end
    end
    if Keys.newPress.L then
        mode = mode - 1
        if mode &lt; 1 then mode = 3 end
    end
    
    screen.print(SCREEN_UP, 0, 184, &quot;Appuyez sur L et R pour changer de mode.&quot;)
    
    if mode == 1 then
        screen.print(SCREEN_UP, 0, 0, &quot;HORLOGE&quot;)
        
        horloge = DateTime.getCurrentTime()
        
        screen.print(SCREEN_UP, 0, 32, &quot;Il est actuellement &quot;..horloge.hour..&quot;h&quot;..horloge.minute..&quot; et &quot;..horloge.second..&quot; secondes.&quot;)
        screen.print(SCREEN_UP, 0, 48, &quot;Nous sommes aujourd'hui le &quot;..horloge.day..&quot;/&quot;..horloge.month..&quot;/&quot;..horloge.year..&quot;.&quot;)
    elseif mode == 2 then
        screen.print(SCREEN_UP, 0, 0, &quot;CHRONOMETRE&quot;)
        
        if Keys.newPress.A then
            chrono:start()
        end
        if Keys.newPress.B then
            chrono:stop()
        end
        if Keys.newPress.X then
            chrono:reset()
        end
    
        local temps = DateTime.new()            -- Variable locale pour le formatage
        temps.hour = math.floor(chrono:time() / 3600000)
        temps.minute = math.floor(chrono:time() / 60000)
        temps.second = math.floor(chrono:time() / 1000)
        -- Et on calcule les millisecondes restantes
        local millisecondes = chrono:time() - temps.hour * 3600000 - temps.minute * 60000 - temps.second * 1000
    
        screen.print(SCREEN_UP, 0, 32, &quot;Temps :&quot;)
        screen.print(SCREEN_UP, 0, 40, temps.hour..&quot;h&quot;..temps.minute..&quot;min&quot;..temps.second..&quot;s&quot;..millisecondes..&quot;ms&quot;)
    
        screen.print(SCREEN_UP, 0, 168, &quot;A : démarrage | B : pause | X : RàZ&quot;)
    elseif mode == 3 then
        screen.print(SCREEN_UP, 0, 0, &quot;COMPTE A REBOURS&quot;)
        
        local couleurs = {Color.new(31, 31, 31), Color.new(31, 31, 31)}         -- Table pour les couleurs des minutes et des secondes
        
        if rebours:time() == 0 then             -- Mode réglage
            screen.print(SCREEN_UP, 0, 32, &quot;Réglage :&quot;)
            
            couleurs[curseur] = Color.new(31, 0, 0)         -- On met en rouge la partie sélectionnée
            
            if Keys.newPress.Up then        -- On augmente la partie sélectionnée
                reglageRebours[curseur] = reglageRebours[curseur] + 1
                if reglageRebours[curseur] &gt; 59 then reglageRebours[curseur] = 0 end
            end
            if Keys.newPress.Down then        -- On diminue la partie sélectionnée
                reglageRebours[curseur] = reglageRebours[curseur] - 1
                if reglageRebours[curseur] &lt; 0 then reglageRebours[curseur] = 59 end
            end

            if Keys.newPress.Left then
                curseur = 1
            end
            if Keys.newPress.Right then
                curseur = 2
            end
            
            reglageRebours.timestamp = reglageRebours[1] * 60000 + reglageRebours[2] * 1000     -- On recalcule le timestamp
        end
        
        if Keys.newPress.A then
            rebours:start()
        end
        if Keys.newPress.B then
            rebours:stop()
        end
        if Keys.newPress.X then
            rebours:reset()
        end
        
        -- Si le temps écoulé est supérieur ou égal au temps de réglage, alors le compte à rebours est terminé
        if reglageRebours.timestamp &lt; rebours:time() then
            rebours:reset()
        end
        
        -- Formatage
        local minutes = math.floor((reglageRebours.timestamp - rebours:time()) / 60000)
        local secondes = math.floor((reglageRebours.timestamp - rebours:time()) / 1000) - 60 * minutes
        
        screen.print(SCREEN_UP, 0, 40, minutes..&quot;min&quot;, couleurs[1])
        screen.print(SCREEN_UP, 35, 40, secondes..&quot;s&quot;, couleurs[2])
    end
    
    render()
end

horloge = nil
reglageRebours = nil
mode = nil
curseur = nil
chrono:stop()
chrono = nil
rebours:stop()
rebours = nil</code></pre><p id="r-515230" data-claire-element-id="515230">Vous avez ainsi pu avoir un bon aperçu de tout ce que l'on peut faire principalement avec des <em>timers</em> ;) Et bravo si vous avez tout trouvé tout seul !</p><p id="r-515231" data-claire-element-id="515231">Et bien voilà, que nous reste-t-il donc à voir désormais... Et bien plus grand-chose, vous en êtes presque au bout ! ;)</p><p id="r-515232" data-claire-element-id="515232">Vous connaissez désormais tout de MicroLua.</p><p id="r-515233" data-claire-element-id="515233">A vous maintenant de créer les magnifiques projets qui empliront les sujets du forum de MicroLua ! ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
<span class="arrow"></span>
<span class="next">Les timers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">
<span class="next">Foire aux astuces</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Foireauxastuces"></a><h2>Foire aux astuces</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
<span class="arrow"></span>
<span class="next">TayPay</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
<span class="next">Des liens</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-515239" data-claire-element-id="515239">Voilà un peu le chapitre fourre-tout, avec (pour l'instant ?) des liens et deux-trois programmes intéressants pour la programmation avec µLua.</p>
</div><a name="Desliens"></a><h2>Des liens</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">
<span class="arrow"></span>
<span class="next">Foire aux astuces</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
<span class="next">Des utilitaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-liens" data-claire-element-id="515260">Des liens</h4><h5 id="r-sites-en-rapport-avec-ulua" data-claire-element-id="515249">Sites en rapport avec µLua</h5><p id="r-515240" data-claire-element-id="515240">Le site officiel de µLua : ce site en anglais n'était malheureusement plus à jour. Il contenait la version 1, 1.0.1 et 2 de µLua ainsi que les documentations de µLua 1.0.1 et µLua 2.<br/> On y trouvait aussi un tutoriel pour µLua 1.0.1.</p><p id="r-515241" data-claire-element-id="515241"><a href="http://microlua.xooit.fr/">Le forum officiel de µLua</a> : ce forum très actif pourra être votre principale aide. La soixante-quinzaine de membres donc une dizaine d'actifs pourront vous aider avec un script défaillant ou autre.<br/> Il y a une section française (très active) et une anglaise (moyennement active).</p><p id="r-515242" data-claire-element-id="515242"><a href="http://code.google.com/p/microlua/">Le Google Code de µLua</a> : ce site possède un Wiki et permet de télécharger la dernière version de MicroLua. Il est principalement en anglais, bien que certaines pages du Wiki soient traduites en français.</p><p id="r-515243" data-claire-element-id="515243"><a href="http://sites.google.com/site/microlua/">MicroLua DS Underground</a> : ce site fait par un des membres du forum, thermo_nono, contient beaucoup de libs et de homebrews.</p><p id="r-515244" data-claire-element-id="515244"><a href="http://microlua.fr.nf/">MicroLua</a> : c'est le fansite de Aurel2108, fais pour être simple et rapide, il regroupe un uploader de fichiers et une section téléchargements contenant les versions de Micro/Nano Lua, les docs, les libs et les homebrews...<br/> Il n'est malheureusement plus tenu à jour par son créateur qui a quitté la communauté MicroLua.</p><p id="r-515245" data-claire-element-id="515245"><a href="http://www.microlua4ds.comxa.com/">MicroLua4DS</a> : c'est le fansite de Reylak, mettant à votre disposition comme µLua DS Underground des libs, des homebrews, etc.</p><p id="r-515246" data-claire-element-id="515246"><a href="http://nanolua.webege.com/nanolua/indexe.php?page=accueil">Nano Lua</a> : c'est le site de Quent42340. Il remplit le même rôle que les précédents fansites, avec un forum et deux ou trois sections hors sujet ;)</p><aside id="r-515248" data-claire-element-id="515248" data-claire-semantic="information"><p id="r-515247" data-claire-element-id="515247">La plupart de ces fansites sont hélas morts, vous pourrez cependant peut-être trouver quelques éléments qui vous seront utiles.</p></aside><h5 id="r-de-la-documentation" data-claire-element-id="515259">De la documentation</h5><h6 id="r-microlua-1" data-claire-element-id="515255">MicroLua</h6><p id="r-515250" data-claire-element-id="515250">La doc de µLua 4 : elle est disponible dans le dossier <em>Documentation</em> du package d'installation. C'est une version hors-ligne de la doc du Google Code ci-dessous.</p><p id="r-515251" data-claire-element-id="515251">La doc de µLua 4 en ligne sur le Google Code : (&lt;lien url=&quot;/http://code.google.com/p/microlua/wiki/ApiFourDotZeroDotOne?wl=fr&quot;&gt;en français&lt;/lien&gt; | <a href="http://code.google.com/p/microlua/wiki/ApiFourDotZeroDotOne">en anglais </a>)</p><p id="r-515252" data-claire-element-id="515252">Le tutoriel sur les canevas de MicroLua 2.0 : (<a href="http://microlua4ds.comxa.com/uploads/Canvas tutorial.doc">en anglais</a>)</p><p id="r-515253" data-claire-element-id="515253">Le tutoriel sur le son de MicroLua 3.0 : (<a href="http://microlua4ds.comxa.com/uploads/Sound tutorial.doc">en anglais</a>)</p><p id="r-515254" data-claire-element-id="515254">La section des tutoriels sur le forum MicroLua : (<a href="http://microlua.xooit.fr/f4-Tutoriaux.htm">en français</a>)<br/> Cette section contient quelques tutoriels utiles pour mieux appréhender certains aspects de MicroLua (voire de Lua).</p><h6 id="r-lua-1" data-claire-element-id="515258">Lua</h6><p id="r-515256" data-claire-element-id="515256">La doc de Lua 5.1 : (<a href="http://www.lua.org/manual/5.1/">en anglais</a>)</p><p id="r-515257" data-claire-element-id="515257">Des tutos pour utiliser Lua 5.1 : (<a href="http://lua-users.org/wiki/TutorialDirectory">en anglais</a>)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">
<span class="arrow"></span>
<span class="next">Foire aux astuces</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
<span class="next">Des utilitaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Desutilitaires"></a><h2>Des utilitaires</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
<span class="arrow"></span>
<span class="next">Des liens</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">
<span class="next">Les librairies</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-utilitaires" data-claire-element-id="515320">Des utilitaires</h4><h5 id="r-pour-le-codage" data-claire-element-id="515272">Pour le codage</h5><p id="r-515261" data-claire-element-id="515261">Outre les &quot;classiques&quot; Notepad++ et autres Vims pour quasiment tous les langages, vous pourriez préférer un IDE plus spécifique à µLua, voire même vouloir coder directement sur votre DS !</p><h6 id="r-ulua-creator" data-claire-element-id="515266">µLua Creator</h6><p id="r-515262" data-claire-element-id="515262">Cet IDE développé par Quent42340 offre quelques outils sympathiques permettant de développer plus vite, et en mettant moins les mains dans le code.<br/> Vous pouvez télécharger la version 4.0 beta 3 <a href="http://code.google.com/p/microluacreator/">ici (sur le Google Code dédié)</a>.</p><p id="r-515263" data-claire-element-id="515263">Il propose donc un générateur de code, un éditeur de texte avec coloration syntaxique, mais aussi un générateur de code pour le dessin, un éditeur d'évènements, et enfin un éditeur de maps. Il s'intègre de plus avec les testeurs MicroLua Simulator et No$GBA Tester.</p><p id="r-515264" data-claire-element-id="515264">Cependant, et sans vouloir dévaloriser le très bon travail de Quent, je pense que l'utilisation abusive de ces assistants n'est pas une bonne chose pour vous qui lisez ce tuto. Ils ne permettent pas d'apprendre à coder comme vous apprendriez en codant &quot;à la main&quot;. Bien sûr, quand vous aurez de l'expérience, rien ne vous empêchera de vous servir de µLua Creator ;)</p><p id="r-515265" data-claire-element-id="515265">Quoi qu'il en soit, ce logiciel n'est plus à jour.</p><h6 id="r-lua-editor-ds" data-claire-element-id="515271">Lua Editor DS</h6><p id="r-515267" data-claire-element-id="515267">Ça, c'est le fin du fin, c'est Plantafin ! Lua Editor DS (raccourci en LED) vous permet tout bonnement... de coder sur votre DS ! Et on dit... merci samy ! :D <br/> La version 1.3, compatible avec MicroLua 3.0, est disponible <a href="http://www.archive-host.com/compteur.php?url=http://sd-1.archive-host.com/membres/up/1139614646109368/Lua_Editor_Ds/LED_v1_3.zip">ici</a>.</p><p id="r-515268" data-claire-element-id="515268">LED est un véritable IDE pour votre console ; il propose des fonctions de base comme le copier-coller, la recherche/remplacement, l'affichage des numéros de ligne, l'indentation intelligente, mais aussi la coloration syntaxique et même l'auto-complétion ! Notez que cette dernière est basée sur le fichier Autocomp ; vous pouvez donc rajouter vos propres mots-clés.<br/> Il permet aussi bien sûr, en plus d'éditer un script, de l'exécuter, puis de revenir l'éditer. C'est donc un <em>must-to-have</em>, indispensable pour coder en nomade.</p><aside id="r-515270" data-claire-element-id="515270" data-claire-semantic="information"><p id="r-515269" data-claire-element-id="515269">Notez que vous pouvez personnaliser quelques aspects du logiciel dans le menu des options. Il est conseillé pour coder efficacement, de désactiver la coloration qui malheureusement fait ramer la console, et d'utiliser l'auto-complétion.</p></aside><h5 id="r-pour-tester-sur-l-ordinateur" data-claire-element-id="515319">Pour tester sur l'ordinateur</h5><p id="r-515273" data-claire-element-id="515273">Vous vous êtes certainement dit &quot;Aah, si seulement je n'avais pas à mettre mon scripts sur mon linker pour le tester !&quot;. Et bien votre vœu est exaucé ! :magicien:</p><h6 id="r-no-gba-tester" data-claire-element-id="515288">No$GBA Tester</h6><p id="r-515274" data-claire-element-id="515274">La première façon est d'utiliser l'émulateur Nintendo DS No$GBA (ne vous laissez pas tromper par la mention &quot;GBA&quot;, ça marche aussi pour la DS ;) ).<br/> C'est un émulateur, ça signifie qu'il peut lancer sur l'ordinateur des roms (des programmes pour console), en l'occurrence pour la DS. Couplé à un petit système permettant de compiler plus ou moins à la volée une version de µLua pour l'ordinateur, il permet de tester vos scripts sans votre console !</p><p id="r-515275" data-claire-element-id="515275"><strong>Préparation</strong></p><p id="r-515276" data-claire-element-id="515276">No$GBA est fourni dans un dossier <em>Utilities</em>, que vous pouvez trouver sur le Google Code <a href="http://code.google.com/p/microlua/downloads/detail?name=Utilities.zip&amp;can=2&amp;q=">ici</a>. En fait, l'exécutable en lui-même (l'émulateur quoi) ne se trouve pas dans l'archive, mais vous pouvez le télécharger <a href="http://nocash.emubase.de/no%24gba-w.zip">ici</a>. Extrayez-le, et mettez-le dans le dossier <em>no$gba Tester</em>.<br/> C'est prêt... ou pas.</p><aside id="r-515280" data-claire-element-id="515280" data-claire-semantic="error"><p id="r-515277" data-claire-element-id="515277">Si vous êtes sous Vista (et certainement sous Seven aussi), la commande <em>sleep 2</em> a de fortes chances de ne pas fonctionner, pour la simple et bonne raison qu'elle n'y est plus. Or, elle est indispensable dans le fichier <em>create.bat</em>. Vous devez donc la remplacer par :</p><pre id="r-515278" data-claire-element-id="515278"><code data-claire-semantic="console">choice /c 1 /d 1 /t 2 &gt; nul</code></pre><p id="r-515279" data-claire-element-id="515279">Cette instruction a pour but de faire une pause de deux secondes, le temps que certaines choses se compilent.</p></aside><p id="r-515281" data-claire-element-id="515281">Vous pouvez aussi trifouiller dans les options de <em>Options-&gt;Controls Setup</em>, afin de personnaliser les contrôles.</p><p id="r-515282" data-claire-element-id="515282"><strong>Testons !</strong></p><p id="r-515283" data-claire-element-id="515283">Placez tous vos fichiers à tester dans le dossier <em>fat</em>. Maintenant, lancez <em>create.bat</em>. Une console toute moche en noir et blanc s'affiche (on est à l'époque de la couleur enfin !), avec plein de mots bizarres (on appelle ça de l'anglais), jusqu'à une phrase en bon français vous invitant à &quot;Appuyer sur une touche pour continuer...&quot;. Obéissez. Puis lancez No$GBA. Dans la fenêtre d'explorateur qui s'est ouverte, sélectionnez la rom <em>luads_fs.nds</em>. Et vous voilà dans le shell de MicroLua ! Vous n'avez plus qu'à lancer votre script.</p><p id="r-515284" data-claire-element-id="515284"><strong>Ça marcheuh pas !</strong></p><p id="r-515285" data-claire-element-id="515285">Il se peut que vous ayez cette erreur :</p><pre id="r-515286" data-claire-element-id="515286"><code data-claire-semantic="console">Couldn't open libs.lua</code></pre><p id="r-515287" data-claire-element-id="515287">Ça veut dire que le fichier <em>libs.lua</em> est introuvable. Il doit en temps normal se trouve dans le dossier &lt;/italique&gt;fat<em> (oui, au même niveau que vos scripts).<br/><br/> Parfois, on a cette erreur alors que &lt;italique&gt;libs.lua</em> est bel et bien où il faut. Essayez alors de vider le dossier <em>fat</em>, et de ne garder que l'essentiel (les libs de µLua, votre script à tester et tout ce dont il a besoin pour tourner). C'est dû au fait que le &quot;compilateur&quot; qui crée la rom donne une taille prédéfinie, qui en général suffit... en général.</p><h6 id="r-microlua-simulator" data-claire-element-id="515292">MicroLua Simulator</h6><p id="r-515289" data-claire-element-id="515289">No$GBA, c'est bien ; mais pour le dév, MLS, c'est mieux.<br/> MLS, c'est un programme développé en Lua par Ced-le-pingouin, qui propose une alternative intéressante à No$GBA.<br/> Tout d'abord, pour le télécharger c'est <a href="http://microlua.xooit.fr/t179-Micro-Lua-Simulator.htm">ici</a>. Vous trouverez sur cette page une version pour Linux, une pour Windows, et une pour Mac. Il y a aussi les sources pour les curieux. A vous de choisir la bonne version en fonction de votre OS. La dernière version au moment de l'écriture de ces lignes est la 0.5 beta 1.</p><p id="r-515290" data-claire-element-id="515290">Après extraction en bonne et due forme, vous vous retrouvez avec une floppée de fichiers, et au milieu un petit exécutable <em>mls.exe</em>. Lancez-le, puis cliquez-sur <em>File-&gt;Open</em>... (<em>Fichier-&gt;Ouvrir</em>... en français), et sélectionnez votre script.<br/> Comme vous pouvez le voir, c'est moins fastidieux qu'avec No$GBA.</p><p id="r-515291" data-claire-element-id="515291">Je ne vais pas trop détailler son fonctionnement, le <em>Readme</em> en français et en anglais le fera mieux que moi. Vous pouvez trouver la liste des contrôles dans <em>Help-&gt;Show key bindings</em> (<em>Aide-&gt;Montrer les associations de touches</em> en français).</p><h6 id="r-alors-lequel-des-deux-choisir" data-claire-element-id="515318">Alors, lequel des deux choisir ?</h6><p id="r-515293" data-claire-element-id="515293">Chacun a ses avantages et ses inconvénients :</p><p id="r-515294" data-claire-element-id="515294">No$GBA Tester :</p><ul id="r-515303" data-claire-element-id="515303"><li id="r-515296" data-claire-element-id="515296"><p id="r-515295" data-claire-element-id="515295">de par la façon dont il teste, il est plus proche de la réalité que MLS, malgré tous les efforts de Ced</p></li><li id="r-515298" data-claire-element-id="515298"><p id="r-515297" data-claire-element-id="515297">pas très importants mais présents : lorsque que vous appuyez sur la touche Imprim. Ecran de votre clavier, No$GBA envoie dans le presse-papiers une image qui contient uniquement les deux écrans accolés, alors que MLS ne le propose pas</p></li><li id="r-515300" data-claire-element-id="515300"><p id="r-515299" data-claire-element-id="515299">procédure de test assez longue</p></li><li id="r-515302" data-claire-element-id="515302"><p id="r-515301" data-claire-element-id="515301">parfois pénible à faire fonctionner</p></li></ul><p id="r-515304" data-claire-element-id="515304">MicroLua Simulator :</p><ul id="r-515315" data-claire-element-id="515315"><li id="r-515306" data-claire-element-id="515306"><p id="r-515305" data-claire-element-id="515305">outils pour le développeur (mise en pause et redémarrage du script, console d'erreur...)</p></li><li id="r-515308" data-claire-element-id="515308"><p id="r-515307" data-claire-element-id="515307">procédure de test rapide et facile</p></li><li id="r-515310" data-claire-element-id="515310"><p id="r-515309" data-claire-element-id="515309">le son ne fonctionne pas</p></li><li id="r-515312" data-claire-element-id="515312"><p id="r-515311" data-claire-element-id="515311">n'intègre pas les limitations de RAM/VRAM de la console</p></li><li id="r-515314" data-claire-element-id="515314"><p id="r-515313" data-claire-element-id="515313">simule à la fois µLua 2.0 et 3.0, sans prévention en cas d'utilisation de fonction spécifique à une version</p></li></ul><p id="r-515316" data-claire-element-id="515316">En fin de compte, les deux se valent à peu près. C'est un peu une affaire de goût, mais de nombreuses personnes ont tendance à privilégier MLS, certainement pour la facilité de test.<br/> Pour ma part, MLS me sert à tester &quot;à la volée&quot;, tandis que je dépoussière No$GBA pour avoir un aperçu à coup sûr réaliste des dernières modifications. Cependant, ça ne me dispense pas de tester <em>in situ</em> (c'est-à-dire sur la DS ;) ).</p><p id="r-515317" data-claire-element-id="515317">Maintenant, vous savez où chercher en cas de besoin, et vous avez tout ce qu'il faut pour nous faire de jolis homebrews ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
<span class="arrow"></span>
<span class="next">Des liens</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">
<span class="next">Les librairies</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Leslibrairies"></a><h2>Les librairies</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
<span class="arrow"></span>
<span class="next">Des utilitaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
<span class="next">L&#039;instruction dofile()</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-515322" data-claire-element-id="515322">En visitant le forum ou les sites dédiés à MicroLua, vous êtes certainement tombé au moins une fois sur une librairie.<br/> Cette annexe va vous apprendre à vous en servir.</p><p id="r-515323" data-claire-element-id="515323">A titre d'exemple, nous allons nous servir de la libNumericUpDown de Reylak (qui permet d'inclure des contrôles GUI servant à entrer une valeur numérique). Elle est disponible <a href="http://microlua4ds.comxa.com/uploads/libNumericUpDown.zip">ici</a>.</p><aside id="r-515325" data-claire-element-id="515325" data-claire-semantic="error"><p id="r-515324" data-claire-element-id="515324">Remarque relativement importante : on devrait en fait parler de &quot;bibliothèque&quot;, et non pas de &quot;librairie&quot;. Cela vient du fait que ces scripts sont appelés en anglais &quot;libraries&quot;, qui est un faux ami, et signifie en réalité &quot;bibliothèque&quot;. Malheureusement, par abus de langage, c'est &quot;librairie&quot; qui s'est imposé.</p></aside>
</div><a name="L039instructiondofile"></a><h2>L&#039;instruction dofile()</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">
<span class="arrow"></span>
<span class="next">Les librairies</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
<span class="next">L&#039;instruction require()</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-l-instruction-dofile" data-claire-element-id="515336">L'instruction dofile()</h4><aside id="r-515327" data-claire-element-id="515327" data-claire-semantic="information"><p id="r-515326" data-claire-element-id="515326">Afin de tester la procédure, il est conseillé de télécharger la libNumericUpDown qui va nous servir d'exemple.</p></aside><p id="r-515328" data-claire-element-id="515328">La façon &quot;classique&quot; utilisée par la communauté MicroLua pour utiliser une librairie, et d'utiliser la fonction dofile() (qui, au passage, est une fonction de base de Lua, et non pas de µLua). La documentation de Lua nous dit que dofile() ouvre le fichier passé en argument, et l'exécute.</p><p id="r-515329" data-claire-element-id="515329">On s'en sert donc de cette manière :</p><pre id="r-515330" data-claire-element-id="515330"><code data-claire-semantic="lua">dofile(&quot;libNumericUpDown.lua&quot;)</code></pre><p id="r-515331" data-claire-element-id="515331">Cette instruction est à placer au début du programme, pour que les fonctions, variables etc. crées par la libs soient accessibles dans tout le reste du programme.</p><p id="r-515332" data-claire-element-id="515332">Ensuite, et bien c'est très simple, vous n'avez qu'à appeler les fonctions définies par la libs comme des fonctions normales :</p><pre id="r-515333" data-claire-element-id="515333"><code data-claire-semantic="lua">objet = NumericUpDown.new(arguments)    -- Instanciation d'un nouvel objet de la classe NumericUpDown (appel du constructeur de classe)
objet:draw(Color.new(31, 31, 31))       -- Appel de la méthode draw() de cet objet
screen.print(SCREEN_UP, 0, 0, NumericUpDown.objectCount)    -- Accès à la variable objectCount</code></pre><p id="r-515334" data-claire-element-id="515334">Toutes ces instructions doivent être placées après le dofile(), sans quoi ça ne marchera pas.</p><p id="r-515335" data-claire-element-id="515335">Tous les termes techniques d'instanciation, constructeur de classe, etc. sont liés à la conception Orientée Objet de cette lib (qui est entre nous soit dit certainement la meilleure façon de faire une lib :-° ). Je ne peux décemment pas vous faire un cours là-dessus, c'est pourquoi je vous renvoie au <a href="http://www.siteduzero.com/tutoriel-3-11159-la-magie-de-la-poo-par-l-exemple-string.html#ss_part_1">cours de M@teo21 sur le C++</a>, et plus précisément sur la partie expliquant ce qu'est la POO.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">
<span class="arrow"></span>
<span class="next">Les librairies</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
<span class="next">L&#039;instruction require()</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="L039instructionrequire"></a><h2>L&#039;instruction require()</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
<span class="arrow"></span>
<span class="next">L&#039;instruction dofile()</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-l-instruction-require" data-claire-element-id="515343">L'instruction require()</h4><p id="r-515337" data-claire-element-id="515337">Utiliser dofile() est en fait une mauvaise habitude. En effet, Lua dispose d'un système complet de modules, qui gère très bien les libs automatiquement.<br/> N'utilisant que dofile(), je ne maîtrise pas les modules en Lua, c'est pourquoi je ne m'avancerais pas à faire un tuto là-dessus. Je vous invite donc à regarder la <a href="http://www.lua.org/manual/5.1/manual.html#5.3">section sur les modules</a> de la doc Lua (en anglais malheureusement), qui traite de tout ce qu'il faut savoir là-dessus.</p><p id="r-515338" data-claire-element-id="515338">Sachez donc que la meilleure méthode est celle de require(), bien que tout le monde utilise dofile()...</p><p id="r-515339" data-claire-element-id="515339">Et bien voilà, vous savez maintenant comment utiliser ce magnifique clavier ou ces superbes contrôles de GUI dans vos programmes !</p><p id="r-515340" data-claire-element-id="515340">Vous avez désormais terminé votre apprentissage de MicroLua, mais il reste encore plein de choses à connaître !</p><p id="r-515341" data-claire-element-id="515341">A force de coder des scipts, vous allez vous améliorer et petit à petit vos projets deviendront vraiment conséquents ;)</p><p id="r-515342" data-claire-element-id="515342">Je vous souhaite donc bonne route et à très bientôt sur le <a href="http://microlua.xooit.fr/">forum de MicroLua</a> !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua">Programmez sur votre DS avec MicroLua</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/a-propos-de-microlua-et-installation">A propos de MicroLua et installation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/introduction-a-microlua">
Introduction à MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/installation-de-microlua">
Installation de MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/test-de-microlua">
Test de MicroLua
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-avec-lua">Les bases de la programmation avec Lua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-1">
Les bases de la programmation en Lua (1)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-bases-de-la-programmation-en-lua-2">
Les bases de la programmation en Lua (2)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/et-pour-microlua">
Et pour MicroLua ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-ba-ba-de-microlua">Le BA.-Ba de MicroLua</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/generalites-sur-les-fonctions-de-dessin">
Généralités sur les fonctions de dessin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-du-texte-a-l-ecran-1">
Afficher du texte à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/afficher-des-images-a-l-ecran">
Afficher des images à l&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utiliser-les-controles-de-la-nintendo-ds">
Utiliser les contrôles de la Nintendo DS
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/un-peu-d-art">Un peu d&#039;art...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-classique">
Le dessin classique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-dessin-avec-un-canevas">
Le dessin avec un Canevas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/que-choisir-2">
Que choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-transparence-alpha-1">
La transparence Alpha
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tps-a-gogo">TPs à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp1-l-image-qui-bouge">
TP1 : L&#039;image qui bouge
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp2-un-morpion">
TP2 : Un morpion
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Tout ce qu&#039;il faut pour un bon jeu
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-maps-et-scrollmaps">Les Maps et ScrollMaps</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/preparation-de-la-map-1">
Préparation de la map
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/utilisation-dans-vos-programmes">
Utilisation dans vos programmes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-scrollmaps">
Les Scrollmaps
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sprites-8">Les sprites</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/qu-est-ce-qu-un-sprite">
Qu&#039;est-ce qu&#039;un sprite ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/on-commence-doucement">
On commence doucement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-animations-de-sprites-1">
Les animations de sprites
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/exemple-158">
Exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/le-son-4">Le son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/la-gestion-du-son-par-microlua">
La gestion du son par MicroLua
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-mods">
Les Mods
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-sfx">
Les SFX
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/fonctions-speciales-pour-linkers-speciaux">Fonctions spéciales pour linkers spéciaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/ca-secoue">
Ça secoue !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/bougez-avec-votre-ds">
Bougez avec votre DS !
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Tout le reste
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fonctions-system-et-les-fichiers-ini">Les fonctions System et les fichiers INI</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fichiers-4">
Les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-dossiers-1">
Les dossiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/tp-utilisation-des-fichiers-ini">
TP : utilisation des fichiers INI
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/du-temps-et-des-polices-d-ecriture">Du temps et des polices (d&#039;écriture)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-fontes">
Les fontes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/datetime-3">
Datetime
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-timers-4">
Les timers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/taypay">
TayPay
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 4</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/foire-aux-astuces">Foire aux astuces</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-liens">
Des liens
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/des-utilitaires">
Des utilitaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/les-librairies-1">Les librairies</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
L&#039;instruction dofile()
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-require">
L&#039;instruction require()
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-sur-votre-ds-avec-microlua/l-instruction-dofile">
<span class="arrow"></span>
<span class="next">L&#039;instruction dofile()</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/rogrammez-sur-votre-ds-avec-microlua.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 20:56:53 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/rogrammez-sur-votre-ds-avec-microlua.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:55:15 GMT -->
</html>