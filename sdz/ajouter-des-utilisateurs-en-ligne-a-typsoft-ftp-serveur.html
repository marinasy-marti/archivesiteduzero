<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 23:19:55 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:04:29 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Ajouter des utilisateurs en ligne à TYPSoft FTP Serveur</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Ajouter des utilisateurs en ligne à TYPSoft FTP Serveur</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#AjouterdesutilisateursenligneTYPSoftFTPServeur">Ajouter des utilisateurs en ligne à TYPSoft FTP Serveur</a><br/><a href="#Comprenonslefonctionnementdufichierusers.inietlesdroitspossibles">Comprenons le fonctionnement du fichier users.ini et les droits possibles</a><br/><a href="#Passonsenmodeonline">Passons en mode online !</a><br/><a href="#Amliorationspossibles">Améliorations possibles</a><br/></div>
<a name="AjouterdesutilisateursenligneTYPSoftFTPServeur"></a><h2>Ajouter des utilisateurs en ligne à TYPSoft FTP Serveur</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/comprenons-le-fonctionnement-du-fichier-users-ini-et-les-droits-possibles">
<span class="next">Comprenons le fonctionnement du fichier users.ini et les droits possibles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-590897" data-claire-element-id="590897">Alors dans ce tutoriel, nous allons voir comment ajouter des utilisateurs à TYPSoft FTP Serveur en ligne grâce à PHP !</p><aside id="r-590899" data-claire-element-id="590899" data-claire-semantic="warning"><p id="r-590898" data-claire-element-id="590898">Le dossier sur lequel TYPSoft FTP Serveur est installé ne dois pas être déplacé par la suite !</p></aside><p id="r-590900" data-claire-element-id="590900">Mais avant, vous pouvez lire ce tutoriel : <a href="http://www.siteduzero.com/tutoriel-3-34127-creer-un-serveur-ftp-sous-windows.html">Créer un serveur FTP sous Windows</a>.</p>
</div><a name="Comprenonslefonctionnementdufichierusers.inietlesdroitspossibles"></a><h2>Comprenons le fonctionnement du fichier users.ini et les droits possibles</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/passons-en-mode-online">
<span class="next">Passons en mode online !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-590901" data-claire-element-id="590901">Nous voilà dans la première partie de notre tutoriel qui consiste à faire un petit tour dans le dossier du serveur FTP !</p><div id="r-590903" data-claire-element-id="590903" data-claire-semantic="question"><p id="r-590902" data-claire-element-id="590902">Ça sert à quoi ?</p></div><p id="r-590904" data-claire-element-id="590904">Comprendre le fonctionnement, comment un utilisateur est créé par le logiciel et ainsi pouvoir en recréer via PHP :)</p><p id="r-590905" data-claire-element-id="590905">Mais avant :</p><h2 id="r-creons-un-petit-utilisateur-de-test" data-claire-element-id="590911">Créons un petit utilisateur de test</h2><p id="r-590906" data-claire-element-id="590906">Pour commencer, ouvrez TYPSoft FTP Serveur et allez dans le menu Setup, puis cliquez sur Usagers. Là une fenêtre s'ouvre, cliquez sur Nouveau Usager. Et une fenêtre s'ouvre, indiquez le nom de l'utilisateur. Pour ma part, j'ai choisi l'utilisateur sdz. Voici un exemple :</p><figure id="r-590908" data-claire-element-id="590909"><img id="r-590907" data-claire-element-id="590907" src="medias/uploads.siteduzero.com_files_166001_167000_166389.gif" alt="Image utilisateur"/></figure><p id="r-590910" data-claire-element-id="590910">Puis une fois l'utilisateur entré, cliquez sur OK puis sélectionnez l'utilisateur ; dans le champ Mot de Passe, écrivez un mot de passe pour l'utilisateur et sélectionnez le répertoire dans lequel l'utilisateur aura accès grâce au . . .. Puis dans Droit d'accès, sélectionnez le chemin et cochez les cases auxquelles il aura accès puis cliquez sur Enregistrer : c'est fini !</p><h2 id="r-visionnons-notre-fichier-users-ini" data-claire-element-id="590946">Visionnons notre fichier users.ini !</h2><p id="r-590912" data-claire-element-id="590912">Maintenant que l'utilisateur est créé, nous allons ouvrir notre fichier users.ini présent dans le dossier du logiciel FTP.</p><pre id="r-590913" data-claire-element-id="590913"><code data-claire-semantic="console">[sdz]
Password=098F6BCD4621D373CADE4E832627B4F6
UserDisable=0
VirtualDir=1
Time-Out=0
HomePath=C:\wamp\
Dir0=C:\wamp\|DU_EMRY____|</code></pre><div id="r-590915" data-claire-element-id="590915" data-claire-semantic="question"><p id="r-590914" data-claire-element-id="590914">Hum... In french ?!</p></div><p id="r-590916" data-claire-element-id="590916">Deux minutes les ZérOs !<br/> Donc je traduit ligne par ligne :</p><p id="r-590917" data-claire-element-id="590917"><cite>Citation : users.ini</cite></p><blockquote id="r-590919" data-claire-element-id="590919"><p id="r-590918" data-claire-element-id="590918">[sdz]</p></blockquote><p id="r-590920" data-claire-element-id="590920">-&gt; Le nom de l'utilisateur entre crochet</p><p id="r-590921" data-claire-element-id="590921"><cite>Citation : users.ini</cite></p><blockquote id="r-590923" data-claire-element-id="590923"><p id="r-590922" data-claire-element-id="590922">Password=098F6BCD4621D373CADE4E832627B4F6</p></blockquote><p id="r-590924" data-claire-element-id="590924">-&gt; Mot de passe encrypté en md5() puis mis en majuscule</p><p id="r-590925" data-claire-element-id="590925"><cite>Citation : users.ini</cite></p><blockquote id="r-590927" data-claire-element-id="590927"><p id="r-590926" data-claire-element-id="590926">UserDisable=0</p></blockquote><p id="r-590928" data-claire-element-id="590928">-&gt; pour désactiver le compte de l'utilisateur s'il est égal à 1. Ici, le compte est activé.</p><p id="r-590929" data-claire-element-id="590929"><cite>Citation : users.ini</cite></p><blockquote id="r-590931" data-claire-element-id="590931"><p id="r-590930" data-claire-element-id="590930">VirtualDir=1</p></blockquote><p id="r-590932" data-claire-element-id="590932">-&gt; pour cacher 'C:/Wamp' (lien virtuel), ce qui va donner à la place le chemin '/'.</p><p id="r-590933" data-claire-element-id="590933"><cite>Citation : users.ini</cite></p><blockquote id="r-590935" data-claire-element-id="590935"><p id="r-590934" data-claire-element-id="590934">Time-Out=0</p></blockquote><p id="r-590936" data-claire-element-id="590936">-&gt; temps en minutes avant que le compte ne soit déconnecté en cas d'inactivité (0 = pas de limite).</p><p id="r-590937" data-claire-element-id="590937"><cite>Citation : users.ini</cite></p><blockquote id="r-590939" data-claire-element-id="590939"><p id="r-590938" data-claire-element-id="590938">HomePath=C:\Wamp</p></blockquote><p id="r-590940" data-claire-element-id="590940">-&gt;Chemin sur le serveur dans lequel l'utilisateur sera connecté</p><p id="r-590941" data-claire-element-id="590941"><cite>Citation : users.ini</cite></p><blockquote id="r-590943" data-claire-element-id="590943"><p id="r-590942" data-claire-element-id="590942">Dir0=C:\wamp\|DU_EMRY____|</p></blockquote><p id="r-590944" data-claire-element-id="590944">-&gt; Ici, l'utilisateur pourra télécharger, envoyer, effacer et renommer ses fichiers.<br/> Créer, supprimer et renommer ses répertoires (DU_EMRY____).</p><p id="r-590945" data-claire-element-id="590945">Maintenant que nous avons compris le fonctionnement pour insérer un utilisateur, passons aux différents types de droits....</p><h2 id="r-les-droits-des-utilisateurs" data-claire-element-id="590954">Les droits des utilisateurs</h2><p id="r-590947" data-claire-element-id="590947">Observons les droits possibles :</p><pre id="r-590948" data-claire-element-id="590948"><code>D__________ -&gt; Téléchargement
___E_______ -&gt; Effacer un fichier
_U_________ -&gt; Upload
______Y____ -&gt; Renommer les fichiers et répertoires
__A________ -&gt; Accès interdit
____M______ -&gt; Créer un répertoire
_____R_____ -&gt; Effacer un répertoire
________S__ -&gt; Sous-répertoire inclus
_________V_|Nom du lien -&gt; Lien virtuel (remplacer « Nom du lien » par le nom du lien)</code></pre><p id="r-590949" data-claire-element-id="590949">Vous l'aurez sans doutes compris, on peut combiner plusieurs droits pour n'en faire qu'un seul.<br/> Par exemple si nous voulons que l'utilisateur puisse télécharger, effacer, uploader des fichiers/dossiers avec sous répertoire inclus nous aurons alors cette ligne :</p><p id="r-590950" data-claire-element-id="590950"><cite>Citation</cite></p><blockquote id="r-590952" data-claire-element-id="590952"><p id="r-590951" data-claire-element-id="590951">DUE____S__</p></blockquote><p id="r-590953" data-claire-element-id="590953">Compris ? Parfait, on passe à la suite ;)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur">Ajouter des utilisateurs en ligne à TYPSoft FTP Serveur</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/comprenons-le-fonctionnement-du-fichier-users-ini-et-les-droits-possibles">
Comprenons le fonctionnement du fichier users.ini et les droits possibles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/passons-en-mode-online">
Passons en mode online !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/ameliorations-possibles-11">
Améliorations possibles
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/passons-en-mode-online">
<span class="next">Passons en mode online !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Passonsenmodeonline"></a><h2>Passons en mode online !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/comprenons-le-fonctionnement-du-fichier-users-ini-et-les-droits-possibles">
<span class="arrow"></span>
<span class="next">Comprenons le fonctionnement du fichier users.ini et les droits possibles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/ameliorations-possibles-11">
<span class="next">Améliorations possibles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<aside id="r-590957" data-claire-element-id="590957" data-claire-semantic="error"><p id="r-590956" data-claire-element-id="590956">Avant de poursuivre ce tutoriel, assurez-vous que le dossier de TYPSoft FTP Serveur ne sera pas déplacé à l'avenir ! Sinon, les utilisateurs ne seront plus enregistrés !</p></aside><p id="r-590958" data-claire-element-id="590958">Ah, nous voilà enfin arrivés !<br/> Pour commencer donc, créez un fichier index.html, puis un autre qui s'appelle verif_user.php.</p><p id="r-590959" data-claire-element-id="590959">Ce que l'on va mettre dans le fichier index.html :</p><ul id="r-590964" data-claire-element-id="590964"><li id="r-590961" data-claire-element-id="590961"><p id="r-590960" data-claire-element-id="590960">les champs (utilisateur, mot de passe...) ;</p></li><li id="r-590963" data-claire-element-id="590963"><p id="r-590962" data-claire-element-id="590962">et les droits.</p></li></ul><p id="r-590965" data-claire-element-id="590965">Commençons par le début.</p><h3 id="r-index-html-1" data-claire-element-id="590974">index.html</h3><p id="r-590966" data-claire-element-id="590966">Donc maintenant nous allons réaliser l'index, contenant un formulaire de renseignement pour un ajouter un nouveau utilisateur (nom de l'utilisateur, mot de passe, chemin vers son répertoire virtuel, son répertoire racine, temps en minute après déconnexion si inactivité et ses droits).</p><p id="r-590967" data-claire-element-id="590967">Compris ? C'est parti !</p><p id="r-590968" data-claire-element-id="590968">Code final :</p><p id="r-590969" data-claire-element-id="590969"></p><div id="r-590971" data-claire-element-id="590971"><pre id="r-590970" data-claire-element-id="590970"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; &gt;
	&lt;head&gt;
		&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
		&lt;title&gt;Ajouter des utilisateurs FTP en ligne ! - by kevindu59&lt;/title&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;form method=&quot;post&quot; action=&quot;verif_user.php&quot;&gt;
			&lt;table&gt;
				&lt;tr&gt;
					&lt;td&gt;Nom de l'utilisateur :&lt;/td&gt;
					&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;user&quot; /&gt;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
					&lt;td&gt;Mot de passe :&lt;/td&gt;
					&lt;td&gt;&lt;input name=&quot;mdp&quot; type=&quot;password&quot; /&gt;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
					&lt;td&gt;Vérification du mot de passe :&lt;/td&gt;
					&lt;td&gt;&lt;input name=&quot;mdp_verif&quot; type=&quot;password&quot; /&gt;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
					&lt;td&gt;Répertoire Virtuel :&lt;/td&gt;
					&lt;td&gt;&lt;input name=&quot;virtuel&quot; type=&quot;text&quot; /&gt;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
					&lt;td&gt;Répertoire racine :&lt;/td&gt;
					&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;rep_racine&quot;&gt;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
					&lt;td&gt;Déconnecter après (en min) :&lt;/td&gt;
					&lt;td&gt;&lt;input maxlength=&quot;5&quot; size=&quot;5&quot; type=&quot;text&quot; name=&quot;timestamp&quot; /&gt;&lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
					&lt;td&gt;Droits :&lt;/td&gt;
					&lt;td&gt;Droits sur fichiers :&lt;br /&gt;
						&lt;input name=&quot;dl&quot; type=&quot;checkbox&quot; /&gt;Télécharger&lt;br /&gt;
						&lt;input name=&quot;effacer&quot; type=&quot;checkbox&quot; /&gt;Effacer&lt;br /&gt;
						&lt;input name=&quot;upload&quot; type=&quot;checkbox&quot; /&gt;Upload&lt;br /&gt;
						&lt;input name=&quot;renommer&quot; type=&quot;checkbox&quot; /&gt;Renommer&lt;br /&gt;&lt;br /&gt;
						Droits sur r&amp;eacute;pertoire :&lt;br/&gt;
						&lt;input name=&quot;creer_rep&quot; type=&quot;checkbox&quot; /&gt;Créer&lt;br /&gt;
						&lt;input name=&quot;effacer_rep&quot; type=&quot;checkbox&quot; /&gt;Effacer&lt;br /&gt;
						&lt;input name=&quot;ss_rep&quot; type=&quot;checkbox&quot; /&gt;Sous-répertoire inclus&lt;/td&gt;
				&lt;/tr&gt;
				&lt;tr&gt;
					&lt;td colspan=&quot;2&quot;&gt;&lt;input value=&quot;Envoyer&quot; type=&quot;submit&quot; /&gt;&lt;/td&gt;
				&lt;/tr&gt;
			&lt;/table&gt;
		&lt;/form&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre></div><p id="r-590972" data-claire-element-id="590972">Je n'ai pas besoin de vous expliquer ce code mais si vous n'y comprenez rien, direction le cours de M@teo21 sur le <a href="http://www.siteduzero.com/tutoriel-3-13666-apprenez-a-creer-votre-site-web.html">HTML</a>.</p><p id="r-590973" data-claire-element-id="590973">Passons maintenant à la vérification !</p><h3 id="r-verif-user-php" data-claire-element-id="590979">verif_user.php</h3><p id="r-590975" data-claire-element-id="590975">Bon, jusqu'à maintenant j'ai tout fait donc...</p><aside id="r-590977" data-claire-element-id="590977" data-claire-semantic="information"><p id="r-590976" data-claire-element-id="590976">Donc quoi ?</p></aside><p id="r-590978" data-claire-element-id="590978">Donc, vous allez continuer... Seuls !</p><h3 id="r-exercice-65" data-claire-element-id="590983">Exercice</h3><p id="r-590980" data-claire-element-id="590980">Dans cet exercice, vous pouvez vous devez faire des vérifications, c'est-à-dire vérifier si le mot de passe est le même que celui de la confirmation, puis faire un <em>switch</em> avec plusieurs combinaisons de droits, et pour finir écrire dans votre users.ini l'utilisateur que vous voulez enregistrer.</p><p id="r-590981" data-claire-element-id="590981">Voilà : maintenant à vos cerveaux et à vos claviers !!!</p><p id="r-590982" data-claire-element-id="590982">3... 2... 1... 0 -&gt;</p><h3 id="r-correction-207" data-claire-element-id="590999">Correction !</h3><p id="r-590984" data-claire-element-id="590984">Nous voilà enfin arrivés à la correction, celle que vous attendez tous ! C'est parti donc, mais rassurez-vous je ne vais pas faire plein de combinaisons ! C'était une blague !<br/> Allons-y !</p><pre id="r-590985" data-claire-element-id="590985"><code data-claire-semantic="html+php">&lt;?php

/*
D__________ -&gt; Téléchargement
___E_______ -&gt; Effacer un fichier
_U_________ -&gt; &lt;italique&gt;Upload&lt;/italique&gt;
______Y____ -&gt; Renommer les fichiers et répertoires
__A________ -&gt; Accès interdit
____M______ -&gt; Créer un répertoire
_____R_____ -&gt; Effacer un répertoire
________S__ -&gt; Sous-répertoire inclus
_________V_|Nom du lien -&gt; Lien virtuel (remplacer « Nom du lien » par le nom du lien :p )
*/
//définition des variables
$utilisateur 		= $_POST['user'];
$mdp 			= $_POST['mdp'];
$mdp_verif 		= $_POST['mdp_verif'];
$chemin 		= $_POST['rep_racine'];
$virtuel 		= $_POST['virtuel'];
$deco 			= $_POST['timestamp'];

//Quelques conditions pour les droits
if (isset($_POST['dl']))		$d_dl = $_POST['dl']; 
if (isset($_POST['effacer']))		$d_effacer = $_POST['effacer'];
if (isset($_POST['upload']))		$d_upload = $_POST['upload'];
if (isset($_POST['renommer']))		$d_renommer = $_POST['renommer'];
if (isset($_POST['creer_rep']))		$d_creer_rep = $_POST['creer_rep'];
if (isset($_POST['effacer_rep']))	$d_effacer_rep = $_POST['effacer_rep'];
if (isset($_POST['ss_rep']))		$d_ss_rep = $_POST['ss_rep'];
?&gt;</code></pre><p id="r-590986" data-claire-element-id="590986">Maintenant, nous allons vérifier si le mot de passe est identique et si oui, la super requête va faire une combinaison pour créer les droits de l'utilisateur.</p><pre id="r-590987" data-claire-element-id="590987"><code data-claire-semantic="html+php">&lt;?php	
if ($mdp == $mdp_verif) // Mot de passe identique à la confirmation, on continue !
{

	$mdp = md5($mdp); //Met en MD5
	$mdp = strtoupper($mdp); //Puis en MAJUSCULE
	$d1 = $d2 = $d3 = $d4 = $d5 = $d6 = $d7 = $d8 = $d9 = $d10 = $d11 = &quot;_&quot;;

	if (isset($_POST['dl'])) //Droit de téléchargement
		if ($d_dl)
			$d1 = &quot;D&quot;;
			
	if (isset($_POST['upload'])) //Droit de téléversement
		if ($d_upload)
			$d2 = &quot;U&quot;;
			
	if (isset($_POST['effacer'])) //Droit d'effacer un fichier/dossier
		if ($d_effacer)
			$d4 = &quot;E&quot;;
			
	if (isset($_POST['creer_rep'])) //Droit pour créer un répertoire
		if ($d_creer_rep)
			$d5 = &quot;M&quot;;
		
	if (isset($_POST['effacer_rep'])) //Droit pour effacer un répertoire
		if ($d_effacer_rep)
			$d6 = &quot;R&quot;;
			
	if (isset($_POST['renommer'])) //Droit pour renommer un répertoire
		if ($d_renommer)
			$d7 = &quot;Y&quot;;
			
	if (isset($_POST['ss_rep'])) //Droit pour avoir/créer des sous-repertoire
		if ($d_ss_rep)
			$d9 = &quot;S&quot;;
?&gt;</code></pre><p id="r-590988" data-claire-element-id="590988">Et pour finir les droits, une petite variable :<br/> Cette dernière va assembler tous les droits...</p><pre id="r-590989" data-claire-element-id="590989"><code data-claire-semantic="html+php">&lt;?php
		
	$droit = $d1.$d2.$d3.$d4.$d5.$d6.$d7.$d8.$d9.$d10.$d11;
		
?&gt;</code></pre><p id="r-590990" data-claire-element-id="590990">Maintenant, on vérifie si l'utilisateur et le chemin sont renseignés :</p><pre id="r-590991" data-claire-element-id="590991"><code data-claire-semantic="html+php">&lt;?php
	if ($utilisateur == &quot;&quot;) // Utilisateur vide -&gt; on quitte la vérification.
	{
		exit(&quot;&lt;p&gt;Erreur l'utilisateur est vide !&lt;/p&gt;&quot;);
	}
	if ($chemin == &quot;&quot;) // Chemin vide -&gt; on quitte la vérification.
	{
		exit(&quot;&lt;p&gt;Erreur le chemin est vide !&lt;/p&gt;&quot;);
	}
?&gt;</code></pre><p id="r-590992" data-claire-element-id="590992">Nous avons fini pour ce qui est de la vérification, nous allons maintenant écrire ceci dans le fichier users.ini !</p><pre id="r-590993" data-claire-element-id="590993"><code data-claire-semantic="html+php">&lt;?php
	$fichier = fopen(&quot;C:\\SRVPROD1\\serv_ftp\\users.ini&quot;, &quot;a+&quot;, 0777); // Chemin vers votre dossier FTP du logiciel (n'oubliez pas de remplacer vos '\' par des '\\' ;).
	$code = &quot;
			[&quot;.$utilisateur.&quot;]
			Password=&quot;.$mdp.&quot;
			UserDisable=0
			VirtualDir=&quot;.$virtuel.&quot;
			Time-Out=&quot;.$deco.&quot;
			HomePath=&quot;.$chemin.&quot;
			Dir0=&quot;.$chemin.&quot;|&quot;.$droit.&quot;|&quot;;
			
	fputs($fichier, $code);
	fclose($fichier);
	echo &quot;&lt;p&gt;Utilisateur créé avec succès !&lt;/p&gt;&quot;;
?&gt;</code></pre><aside id="r-590995" data-claire-element-id="590995" data-claire-semantic="warning"><p id="r-590994" data-claire-element-id="590994">N'oubliez pas de changer le chemin vers le dossier FTP, car sinon l'écriture échouera, et l'utilisateur ne sera pas créé</p></aside><p id="r-590996" data-claire-element-id="590996">Et on finit verif_user.php :</p><pre id="r-590997" data-claire-element-id="590997"><code data-claire-semantic="html+php">&lt;?php
}
else echo &quot;Erreur, les deux mots de passe sont différents !&lt;br /&gt;&quot;;
?&gt;</code></pre><p id="r-590998" data-claire-element-id="590998">Et voilà, vous pouvez dès maintenant créer des utilisateurs en ligne !</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur">Ajouter des utilisateurs en ligne à TYPSoft FTP Serveur</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/comprenons-le-fonctionnement-du-fichier-users-ini-et-les-droits-possibles">
Comprenons le fonctionnement du fichier users.ini et les droits possibles
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/passons-en-mode-online">
Passons en mode online !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/ameliorations-possibles-11">
Améliorations possibles
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/comprenons-le-fonctionnement-du-fichier-users-ini-et-les-droits-possibles">
<span class="arrow"></span>
<span class="next">Comprenons le fonctionnement du fichier users.ini et les droits possibles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/ameliorations-possibles-11">
<span class="next">Améliorations possibles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Amliorationspossibles"></a><h2>Améliorations possibles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/passons-en-mode-online">
<span class="arrow"></span>
<span class="next">Passons en mode online !</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-591001" data-claire-element-id="591001">Maintenant je vais vous donner quelques amélioration possible que vous pourrez réaliser sans trop de difficulté ;)</p><ul id="r-591014" data-claire-element-id="591014"><li id="r-591003" data-claire-element-id="591003"><p id="r-591002" data-claire-element-id="591002">Vérifier que le nom de utilisateur créé est unique</p></li><li id="r-591005" data-claire-element-id="591005"><p id="r-591004" data-claire-element-id="591004">Rajouter « Aucun accès » (lecture seul) et que si ceci est coché, griser les autres options.</p></li><li id="r-591007" data-claire-element-id="591007"><p id="r-591006" data-claire-element-id="591006">Rajouter « Lien virtuel ».</p></li><li id="r-591009" data-claire-element-id="591009"><p id="r-591008" data-claire-element-id="591008">Rajouter un style CSS</p></li><li id="r-591011" data-claire-element-id="591011"><p id="r-591010" data-claire-element-id="591010">Rajouter « Autoriser 'x' usagers par IP ».</p></li><li id="r-591013" data-claire-element-id="591013"><p id="r-591012" data-claire-element-id="591012">Créer automatiquement un dossier portant le nom de l'utilisateur avec mkdir()</p></li></ul><p id="r-591015" data-claire-element-id="591015">Bref, comme vous auriez pû le constater le code que nous avons réalisé est un peu basique :p A vous de le modifier et ainsi le rendre complet maintenant ;) .</p><p id="r-591016" data-claire-element-id="591016">Voilà ! Vous pouvez maintenant créer vos utilisateurs FTP en ligne tout simplement sans se compliquer la vie.</p><p id="r-591017" data-claire-element-id="591017">Si vous avez des questions, n'hésitez pas à aller sur le forum ou à me contacter par MP...</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur">Ajouter des utilisateurs en ligne à TYPSoft FTP Serveur</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/comprenons-le-fonctionnement-du-fichier-users-ini-et-les-droits-possibles">
Comprenons le fonctionnement du fichier users.ini et les droits possibles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/passons-en-mode-online">
Passons en mode online !
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/ameliorations-possibles-11">
Améliorations possibles
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur/passons-en-mode-online">
<span class="arrow"></span>
<span class="next">Passons en mode online !</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 23:19:55 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/ajouter-des-utilisateurs-en-ligne-a-typsoft-ftp-serveur.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:04:30 GMT -->
</html>