<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/apprendre-l-asm-z80-pour-ti.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 22:43:45 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/apprendre-l-asm-z80-pour-ti.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:59:42 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Apprendre l&#039;ASM Z80 pour TI</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/apprendre-l-asm-z80-pour-ti.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Apprendre l&#039;ASM Z80 pour TI</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Apprendrel039ASMZ80pourTI">Apprendre l&#039;ASM Z80 pour TI</a><br/><a href="#Quelquestrucssavoir...">Quelques trucs à savoir...</a><br/><a href="#Pourquoil039ASM">Pourquoi l&#039;ASM ?</a><br/><a href="#Introductionlanotiondebases">Introduction à la notion de bases</a><br/><a href="#Matrielncessaire">Matériel nécessaire</a><br/><a href="#dition">Édition</a><br/><a href="#Compilation">Compilation</a><br/><a href="#Transfert">Transfert</a><br/><a href="#mulation">Émulation</a><br/><a href="#EtGNU_Linuxalors...">Et GNU/Linux alors ?!...</a><br/><a href="#Lecommencement">Le commencement</a><br/><a href="#Leheader...incontournable">Le header... incontournable !</a><br/><a href="#Lesromcalls">Les romcalls</a><br/><a href="#Votre1erprogramme">Votre 1er programme !</a><br/><a href="#Quipeutsepasserdesvariables">Qui peut se passer des variables ?</a><br/><a href="#Variablesprdfinies">Variables prédéfinies</a><br/><a href="#Variablesdfiniesparl039utilisateur">Variables définies par l&#039;utilisateur</a><br/><a href="#Oprationsdebase">Opérations de base</a><br/><a href="#Lestack">Le stack</a><br/><a href="#Nombresngatifs">Nombres négatifs</a><br/><a href="#Unpeudetexte...">Un peu de texte...</a><br/><a href="#Ressourcesncessaires">Ressources nécessaires</a><br/><a href="#Helloworldvousconnaissez">« Hello world! », vous connaissez ?!</a><br/><a href="#Trucsutiles...">Trucs utiles...</a><br/><a href="#Flags">Flags</a><br/><a href="#Sauts_Sautsconditionnels">Sauts / Sauts conditionnels</a><br/><a href="#Lesfichiersinclude">Les fichiers include</a><br/><a href="#Parlonsdebits...">Parlons de bits...</a><br/><a href="#Graphisme">Graphisme</a><br/><a href="#L039crangraphique">L&#039;écran graphique</a><br/><a href="#Lesromcallsgraphiques">Les romcalls graphiques</a><br/><a href="#Legraphbuffer">Le graph buffer</a><br/><a href="#Lessprites">Les sprites</a><br/><a href="#Pressiondestouches">Pression des touches</a><br/><a href="#Lesromcalls">Les romcalls</a><br/><a href="#Utilisationdesportsledirectinput">Utilisation des ports : le direct input</a><br/><a href="#Exerciceunesouris">Exercice : une souris</a><br/></div>
<a name="Apprendrel039ASMZ80pourTI"></a><h2>Apprendre l&#039;ASM Z80 pour TI</h2><div class="content" role="article">
<p id="r-532433" data-claire-element-id="532433">Salut à tous !<br/> Vous en avez marre du TI-Basic ? Ou vous voulez directement profiter de toutes les capacités de votre TI (83+, 83+ SE, 84+, 84+ SE) ? <br/> Eh bien vous êtes sur le bon tutoriel ! C'est parti ! :)</p><aside id="r-532435" data-claire-element-id="532435" data-claire-semantic="information"><p id="r-532434" data-claire-element-id="532434">Ce tutoriel ne traitera pas de l'Assembleur pour TI-83 ; les différences sont peu nombreuses mais leurs conséquences sont importantes. Il est donc déconseillé de suivre ce tutoriel si vous possédez cette calculatrice, mais je ne peux pas vous empêcher de le faire !</p></aside>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Quelquestrucssavoir..."></a><h2>Quelques trucs à savoir...</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
<span class="next">Pourquoi l&#039;ASM ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-532437" data-claire-element-id="532437">Saviez-vous que le microprocesseur présent dans votre chère calculatrice est le même qui équipait les ordinateurs des années 60 ?!<br/> Et que la rapidité de la calculatrice peut être augmentée (ou diminuée... :'( ) via l'ASM ?<br/> Ça devient intéressant là, non ? <br/> On attaque !</p>
</div><a name="Pourquoil039ASM"></a><h2>Pourquoi l&#039;ASM ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">
<span class="arrow"></span>
<span class="next">Quelques trucs à savoir...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
<span class="next">Introduction à la notion de bases</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pourquoi-l-asm" data-claire-element-id="532443">Pourquoi l'ASM ?</h4><p id="r-532438" data-claire-element-id="532438">Je précise que, étant parfois amené à parler du TI-Basic, je peux aussi bien l'appeler « Basic ». Que cela ne vous surprenne pas, il s'agit ici du même langage.</p><p id="r-532439" data-claire-element-id="532439">Pour le comparer au TI-Basic, il est plus rapide, permet d'utiliser pas mal de fonctions système mais nécessite un PC pour son édition (ce qui ne vous rebute pas, j'espère :p ) ; il est en outre d'une complexité assez importante (face au TI-Basic bien sûr !).<br/> En fait, lorsque la calculatrice lance un programme Basic, elle doit à chaque instruction se référer à une table qui lui explique comment la réaliser dans son propre langage. En effet, le TI-Basic est un langage interprété, ce qui implique une relative lenteur.<br/> Avec l'ASM, rien de tout cela ! La calculatrice peut directement exécuter les instructions du programme puisqu'elle n'a pas à les traduire ! Il en résulte bien évidemment une rapidité importante et <strong>constante</strong>. Les programmeurs Basic ont en effet peut-être pu constater une « baisse de régime » au cours de l'exécution du programme.<br/> De plus, bon nombre de fonctions sont accessibles à l'ASM et pas au Basic, et vice-versa.</p><div id="r-532441" data-claire-element-id="532441" data-claire-semantic="question"><p id="r-532440" data-claire-element-id="532440">Mais ? Si la calculatrice peut interpréter les fonctions Basic, on doit pouvoir les utiliser en Assembleur, non ?</p></div><p id="r-532442" data-claire-element-id="532442">En fait, je préfère pour le moment éviter de parler des liens entre Basic et Assembleur car pour débuter, il vaut mieux ne considérer qu'un seul langage sans faire de rapprochement entre les deux.<br/> Tant pis pour les programmeurs en TI-Basic ! :diable: <br/> Mais la diversité des fonctions ne vous fera pas regretter ce choix !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">
<span class="arrow"></span>
<span class="next">Quelques trucs à savoir...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
<span class="next">Introduction à la notion de bases</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Introductionlanotiondebases"></a><h2>Introduction à la notion de bases</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
<span class="arrow"></span>
<span class="next">Pourquoi l&#039;ASM ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">
<span class="next">Matériel nécessaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-introduction-a-la-notion-de-bases" data-claire-element-id="532464">Introduction à la notion de bases</h4><p id="r-532444" data-claire-element-id="532444">OK, vous devez sûrement vous taper ça à chaque tuto ; mais là je considère que la connaissance des autres bases est plus importante. Et puis vous êtes des Zéros, oui ou non ?! o_O</p><p id="r-532445" data-claire-element-id="532445">Le binaire correspond à la base 2 et l'hexadécimal à la base 16.<br/> Nous avons pour habitude l'utilisation du système décimal, de base... 10 !<br/> Le binaire n'est composé que de 0 et 1 (2 caractères &lt;=&gt; base 2) tandis que l'hexa se note de 0 à F.<br/> On a donc A correspondant à 10, B à 11, etc.<br/> Bien évidemment, on peut utiliser toutes les bases jusqu'à 36 mais leur intérêt est très limité, pour ne pas dire inexistant !<br/> Pour que TASM puisse différencier les bases, on utilise le symbole « % » pour le binaire et « $ » pour l'hexa. En effet, 101 peut aussi bien être binaire que décimal... Si vous ne mettez rien, le nombre sera considéré comme décimal.</p><pre id="r-532446" data-claire-element-id="532446"><code>%10011001 ou 10011001b</code></pre><pre id="r-532447" data-claire-element-id="532447"><code>$5C ou 5Ch</code></pre><p id="r-532448" data-claire-element-id="532448">La conversion d'une base vers une autre est assez simple :</p><figure id="r-532450" data-claire-element-id="532451"><img id="r-532449" data-claire-element-id="532449" src="medias/uploads.siteduzero.com_files_85001_86000_85295.png" alt="Image utilisateur"/></figure><figure id="r-532453" data-claire-element-id="532454"><img id="r-532452" data-claire-element-id="532452" src="medias/uploads.siteduzero.com_files_85001_86000_85296.png" alt="Image utilisateur"/></figure><p id="r-532455" data-claire-element-id="532455">Vous pouvez aussi utiliser la calculatrice de Windows en affichage scientifique :</p><figure id="r-532457" data-claire-element-id="532458"><img id="r-532456" data-claire-element-id="532456" src="medias/uploads.siteduzero.com_files_84001_85000_84841.png" alt="Image utilisateur"/></figure><figure id="r-532460" data-claire-element-id="532461"><img id="r-532459" data-claire-element-id="532459" src="medias/uploads.siteduzero.com_files_84001_85000_84842.png" alt="Image utilisateur"/></figure><p id="r-532462" data-claire-element-id="532462">L'utilité de ces bases vous sera expliquée plus tard... :p <br/> Retenez juste les notations pour le moment !</p><p id="r-532463" data-claire-element-id="532463">Vous n'avez normalement plus qu'à écrire un programme pour pouvoir l'utiliser...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
<span class="arrow"></span>
<span class="next">Pourquoi l&#039;ASM ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">
<span class="next">Matériel nécessaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Matrielncessaire"></a><h2>Matériel nécessaire</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
<span class="arrow"></span>
<span class="next">Introduction à la notion de bases</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
<span class="next">Édition</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-532466" data-claire-element-id="532466">C'est bien beau de programmer, mais généralement ça ne suffit pas ; un matériel minimum est requis.<br/> Vous connaissez peut-être la galère de rechercher ces bons fichiers sur le net ?<br/> Eh bien comme je suis très gentil je vous éviterai cette souffrance ! ^^</p>
</div><a name="dition"></a><h2>Édition</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">
<span class="arrow"></span>
<span class="next">Matériel nécessaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
<span class="next">Compilation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-edition-2" data-claire-element-id="532482">Édition</h4><p id="r-532467" data-claire-element-id="532467">De nombreuses IDE sont présentes sur le net mais personnellement, je leur préfère de loin le Bloc-notes ; lui n'a aucune prétention !<br/> En plus, vous n'avez pas à le télécharger, et ses fonctions seront bien suffisantes pour l'usage que vous en ferez.<br/> Vous devez donc créer un nouveau document texte à l'aide d'un clic droit et modifier son extension en <strong>.z80</strong>.<br/> Répondez « oui » à la question idiote que vous pose votre ordinateur et créez si nécessaire une association de programme :</p><ol id="r-532476" data-claire-element-id="532476"><li id="r-532469" data-claire-element-id="532469"><p id="r-532468" data-claire-element-id="532468">clic droit sur votre fichier z80 ;</p></li><li id="r-532471" data-claire-element-id="532471"><p id="r-532470" data-claire-element-id="532470"><strong>Ouvrir avec</strong> ;</p></li><li id="r-532473" data-claire-element-id="532473"><p id="r-532472" data-claire-element-id="532472"><strong>Choisir le programme</strong> ;</p></li><li id="r-532475" data-claire-element-id="532475"><p id="r-532474" data-claire-element-id="532474">le Bloc-notes devrait déjà être présent dans la liste suivante.</p></li></ol><p id="r-532477" data-claire-element-id="532477">Sélectionnez-le, cochez <strong>Toujours utiliser ce programme pour ouvrir ce type de fichier</strong>, et cliquez sur <strong>OK</strong>. Cela permet de lancer directement le Bloc-notes quand vous <em>double-cliquerez</em> sur un fichier z80.</p><figure id="r-532479" data-claire-element-id="532480"><img id="r-532478" data-claire-element-id="532478" src="medias/uploads.siteduzero.com_files_84001_85000_84845.png" alt="Image utilisateur"/></figure><p id="r-532481" data-claire-element-id="532481">Vous êtes maintenant prêts pour l'édition. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">
<span class="arrow"></span>
<span class="next">Matériel nécessaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
<span class="next">Compilation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Compilation"></a><h2>Compilation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
<span class="arrow"></span>
<span class="next">Édition</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
<span class="next">Transfert</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-compilation-12" data-claire-element-id="532514">Compilation</h4><p id="r-532483" data-claire-element-id="532483">Bon, là y a pas 36 solutions ! Le compilateur le plus connu (et le seul que je connaisse...) est sans conteste <strong>TASM</strong>, qui fonctionne avec une table de référence, un fichier nommé <strong>TASM80.TAB</strong>.<br/> Cette application permet de transformer votre texte en un fichier binaire... inutilisable !<br/> Heureusement il y a Findus un autre compilateur qui permet de compiler ce fichier <strong>.bin</strong> en programme directement exportable sur la calculatrice, ô joie ! :D <br/> Ce compilateur s'appelle... <strong>DEVPAC8X.COM</strong> et comme son nom l'indique, il produit un fichier en <strong>.8XP</strong> lisible par la calculatrice ou par un émulateur.</p><div id="r-532485" data-claire-element-id="532485" data-claire-semantic="question"><p id="r-532484" data-claire-element-id="532484">C'est bien beau toutes ces applications, mais comment on les utilise ?</p></div><p id="r-532486" data-claire-element-id="532486">Je supposerai que vous préférez lancer une application plutôt que de créer plusieurs fichiers pour gérer ces deux compilateurs.<br/> Et c'est pour ça qu'a été créé le fichier <strong>asm.bat</strong> qui gère le tout pour ne vous laisser que le programme en cas de réussite.</p><figure id="r-532488" data-claire-element-id="532489"><img id="r-532487" data-claire-element-id="532487" src="medias/uploads.siteduzero.com_files_84001_85000_84846.png" alt="Image utilisateur"/></figure><p id="r-532490" data-claire-element-id="532490">En cas d'échec (oui, ça arrive :p ), vous obtiendrez un fichier <strong>.XLT</strong> s'ouvrant avec Excel qui détaillera vos erreurs.</p><p id="r-532491" data-claire-element-id="532491">Et comme promis, voilà tous ces fichiers dans un <em>package</em> :</p><p id="r-532492" data-claire-element-id="532492"><a href="http://www.mediafire.com/download.php?bsbvzxeictb">Télécharger le kit de développement</a></p><aside id="r-532494" data-claire-element-id="532494" data-claire-semantic="warning"><p id="r-532493" data-claire-element-id="532493">Tous ces fichiers doivent <strong>impérativement</strong> être dans le même dossier.</p></aside><p id="r-532495" data-claire-element-id="532495">Pour utiliser <strong>asm.bat</strong> facilement, créez un fichier <strong>lancement.bat</strong> (appelez-le comme vous voulez, il faut juste que l'extension soit en <em>.bat</em>. Utilisez un fichier texte puis changez le <em>.txt</em>) et tapez le code suivant :</p><pre id="r-532496" data-claire-element-id="532496"><code data-claire-semantic="console">asm [nom du fichier z80 sans l'extension]</code></pre><p id="r-532497" data-claire-element-id="532497">Par exemple, pour compiler le fichier « MATHS.z80 », tapez</p><pre id="r-532498" data-claire-element-id="532498"><code data-claire-semantic="console">asm MATHS</code></pre><p id="r-532499" data-claire-element-id="532499">Ensuite, enregistrez votre <em>.bat</em> et <em>double-cliquez</em> dessus.</p><aside id="r-532501" data-claire-element-id="532501" data-claire-semantic="information"><p id="r-532500" data-claire-element-id="532500">Votre programme (fichier z80) doit également se trouver dans le même dossier que les applications.</p></aside><p id="r-532502" data-claire-element-id="532502">Et tant qu'on est dans les téléchargements, je vous propose les derniers (au moment où j'écris ces lignes !) OS :</p><ul id="r-532507" data-claire-element-id="532507"><li id="r-532504" data-claire-element-id="532504"><p id="r-532503" data-claire-element-id="532503"><a href="http://www.mediafire.com/download.php?19acmbynyxv">Pour TI-83+ ou TI-83+ SE</a></p></li><li id="r-532506" data-claire-element-id="532506"><p id="r-532505" data-claire-element-id="532505"><a href="http://www.mediafire.com/download.php?fqjbyunqbzq">Pour TI-84+ ou TI-84+ SE</a></p></li></ul><div id="r-532509" data-claire-element-id="532509" data-claire-semantic="question"><p id="r-532508" data-claire-element-id="532508">Et c'est quoi au juste un OS ? Parce que <em>Operating System</em>, ça me parle pas vraiment...</p></div><p id="r-532510" data-claire-element-id="532510">Personne ne saurait expliquer ça mieux que ses créateurs je suppose... ^^</p><p id="r-532511" data-claire-element-id="532511"><cite>Citation : Texas Instruments</cite></p><blockquote id="r-532513" data-claire-element-id="532513"><p id="r-532512" data-claire-element-id="532512">Le système d'exploitation (OS) de votre calculatrice fait référence au programme de configuration qui permet à votre calculatrice de fonctionner. Comme pour les ordinateurs, le système d'exploitation de votre calculatrice peut être mis à jour.</p></blockquote>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
<span class="arrow"></span>
<span class="next">Édition</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
<span class="next">Transfert</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Transfert"></a><h2>Transfert</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
<span class="arrow"></span>
<span class="next">Compilation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
<span class="next">Émulation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-transfert" data-claire-element-id="532535">Transfert</h4><p id="r-532515" data-claire-element-id="532515">OK, vous avez un programme pour calculatrice sur votre ordinateur.<br/> Il ne serait pas mieux sur une calculatrice ? :p <br/> Il vous faut donc un logiciel de transfert pour échanger des données de l'ordinateur vers votre TI, ou <em>vice-versa</em>.</p><p id="r-532516" data-claire-element-id="532516">Mon choix s'est porté sur le logiciel TI-Connect qui propose en plus quelques options sympa comme la capture d'écran, la conversion et le transfert d'images...<br/> De plus, la version Windows ne fait pas de discrimination ; toutes les calculatrices (de TI-83+ à TI-84+ SE) sont acceptées.</p><p id="r-532517" data-claire-element-id="532517"><a href="http://www.mediafire.com/download.php?dub1dca3mgj">Télécharger TI-Connect</a></p><figure id="r-532519" data-claire-element-id="532520"><img id="r-532518" data-claire-element-id="532518" src="medias/uploads.siteduzero.com_files_84001_85000_84847.png" alt="Image utilisateur"/></figure><p id="r-532521" data-claire-element-id="532521">L'installation est extrêmement simple et intuitive, je ne perdrai pas de temps à l'expliquer.</p><p id="r-532522" data-claire-element-id="532522">Ce qui nous intéresse le plus pour le moment, c'est l'application de transfert ordinateur -&gt; calculatrice.<br/> À la base, si vous <em>double-cliquez</em> sur un fichier en <em>.8XP</em>, l'ordinateur vous sortira un truc du genre « il n'y a pas de programme associé à cette action ».<br/> Il faut lui associer l'application <strong>TISendTo.exe</strong> présente par défaut dans le dossier <strong><em>Program files\TI Education\TI Connect</em></strong>.<br/> Vous démarrerez ainsi le logiciel de transfert en <em>double-cliquant</em> sur un fichier 8XP.</p><aside id="r-532524" data-claire-element-id="532524" data-claire-semantic="information"><p id="r-532523" data-claire-element-id="532523">Bien sûr, c'est ce que je préconise, mais rien ne vous empêche d'associer un autre programme.</p></aside><p id="r-532525" data-claire-element-id="532525">Voici un <em>screenshot</em> :</p><figure id="r-532527" data-claire-element-id="532528"><img id="r-532526" data-claire-element-id="532526" src="medias/uploads.siteduzero.com_files_84001_85000_84848.png" alt="Image utilisateur"/></figure><p id="r-532529" data-claire-element-id="532529">Comme vous pouvez le remarquer, plus intuitif, tu meurs ! :D <br/> De plus, si vous essayez de transférer un programme dont le nom est déjà présent, aucun bug ne sera généré !</p><figure id="r-532531" data-claire-element-id="532532"><img id="r-532530" data-claire-element-id="532530" src="medias/uploads.siteduzero.com_files_84001_85000_84849.png" alt="Image utilisateur"/></figure><p id="r-532533" data-claire-element-id="532533">J'en profite pour préciser que le nom du programme n'est pas modifiable après la compilation. Si vous changez le nom du fichier 8XP, c'est tout de même le nom de départ qui apparaîtra dans vos programmes.<br/> La preuve : j'avais compilé ce fichier en l'appelant « A.z80 » puis renommé le fichier final en « B.8XP » et regardez... le programme est transféré sous le nom A !</p><p id="r-532534" data-claire-element-id="532534">Voilà le plus important. Les autres applications sont moins utiles, je vous laisse les découvrir seuls comme des grands ! :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
<span class="arrow"></span>
<span class="next">Compilation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
<span class="next">Émulation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="mulation"></a><h2>Émulation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
<span class="arrow"></span>
<span class="next">Transfert</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
<span class="next">Et GNU/Linux alors ?!...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-emulation-1" data-claire-element-id="532560">Émulation</h4><p id="r-532536" data-claire-element-id="532536">Si vous n'êtes pas au courant, il est temps que je vous prévienne : l'ASM génère des bugs beaucoup plus « élaborés » que le TI-Basic ! :-° <br/> Ça passe par l'impossibilité de lancer des programmes, le sempiternel « <em>Mem cleared</em> », le blocage pur et simple, ou encore un écran bleu (oui ! Bleu !)...<br/> Vous n'avez pas fini de vous amuser ! :lol: <br/> Je vous rassure, il suffit généralement d'enlever les piles d'alimentation et de les remettre pour résoudre le problème.<br/> Au pire, vous devrez carrément retirer la « <em>back-up battery</em> » et laisser patienter quelques jours.<br/> Heureusement, il existe des <em>émulateurs</em> qui prennent des risques à la place de votre TI. En cas de plantage, vous avez juste à fermer le logiciel !</p><aside id="r-532538" data-claire-element-id="532538" data-claire-semantic="information"><p id="r-532537" data-claire-element-id="532537">Je précise que je ne pourrai en aucun cas être tenu responsable d'éventuels dégâts causés à votre calculatrice puisque je compile et vérifie moi-même les programmes d'exemple complets.</p></aside><figure id="r-532540" data-claire-element-id="532541"><img id="r-532539" data-claire-element-id="532539" src="medias/uploads.siteduzero.com_files_84001_85000_84856.png" alt="Image utilisateur"/></figure><p id="r-532542" data-claire-element-id="532542">Voyons... je propose TI-83+ flash debugger !<br/><strong><a href="http://www.mediafire.com/download.php?e9vyjumnttf">Télécharger</a></strong><br/> Pourquoi « flash » ?<br/> Parce qu'il prend des photos supporte les applications. Cela s'avère très utile pour tester un programme sous <strong>MirageOS</strong> par exemple.<br/> Une fois le logiciel lancé, <em><strong>File/New</strong></em>, et choisissez votre calculatrice.</p><aside id="r-532544" data-claire-element-id="532544" data-claire-semantic="information"><p id="r-532543" data-claire-element-id="532543">Il n'y a quasi aucune différence en ce qui concerne les programmes entre une TI-83+ ou une TI-84+. Si vous possédez cette dernière, vous pouvez quand même utiliser le logiciel.</p></aside><figure id="r-532546" data-claire-element-id="532547"><img id="r-532545" data-claire-element-id="532545" src="medias/uploads.siteduzero.com_files_84001_85000_84857.png" alt="Image utilisateur"/></figure><p id="r-532548" data-claire-element-id="532548">Pour lancer la calculatrice virtuelle, appuyez sur la flèche noire (4e icone en partant de la gauche), et sur le carré pour la stopper.</p><aside id="r-532550" data-claire-element-id="532550" data-claire-semantic="warning"><p id="r-532549" data-claire-element-id="532549">Ces commandes ne correspondent en aucun cas à l'allumage ou à l'extinction de la TI ; elles n'agissent que sur l'application.</p></aside><p id="r-532551" data-claire-element-id="532551">Pour charger un programme ou une application flash, choisissez <em><strong>Load</strong></em> puis <em>Application</em><strong>Application...</strong> ou <em>RAM file</em><strong>RAM file...</strong>.</p><p id="r-532552" data-claire-element-id="532552"><strong>La calculatrice doit être stoppée pour pouvoir utiliser cette fonction.</strong></p><figure id="r-532554" data-claire-element-id="532555"><img id="r-532553" data-claire-element-id="532553" src="medias/uploads.siteduzero.com_files_84001_85000_84855.png" alt="Image utilisateur"/></figure><p id="r-532556" data-claire-element-id="532556">Je déconseille <strong>fortement</strong> de charger un programme dont le nom est déjà présent dans la calculatrice virtuelle...</p><aside id="r-532558" data-claire-element-id="532558" data-claire-semantic="information"><p id="r-532557" data-claire-element-id="532557">Après plusieurs utilisations, mon logiciel refusait de se lancer. Si cela vous arrive, je n'ai comme solution que le redémarrage. &gt;_</p></aside><p id="r-532559" data-claire-element-id="532559">Les principales fonctions sont le chargement de programmes et l'émulation de la TI. Je n'expliquerai donc rien d'autre, d'autant plus que je n'ai pas encore tout compris !<br/> Mais cela devrait vous suffire. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
<span class="arrow"></span>
<span class="next">Transfert</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
<span class="next">Et GNU/Linux alors ?!...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="EtGNU_Linuxalors..."></a><h2>Et GNU/Linux alors ?!...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
<span class="arrow"></span>
<span class="next">Émulation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">
<span class="next">Le commencement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-et-gnu-linux-alors" data-claire-element-id="532586">Et GNU/Linux alors ?!...</h4><p id="r-532561" data-claire-element-id="532561">Cette sous-partie a été créée par <strong>saimoun</strong>, merci à lui !</p><ol id="r-532580" data-claire-element-id="532580"><li id="r-532573" data-claire-element-id="532573"><p id="r-532562" data-claire-element-id="532562"><strong>z80asm à la place de Tasm</strong>, il est dans les paquets de la plupart des distributions, sinon faîtes une recherche sur Google. Son gros défaut (ou celui de Tasm, tout dépend de quel point de vue on se place, niark niark :diable: ) étant qu'il a une syntaxe légèrement différente de Tasm. Voir la doc ici : <a href="http://www.nongnu.org/z80asm/usage.html">http://www.nongnu.org/z80asm/usage.html</a>.<br/> Je donne quand même les équivalences :</p><ul id="r-532571" data-claire-element-id="532571"><li id="r-532566" data-claire-element-id="532566"><p id="r-532563" data-claire-element-id="532563">#define Nom_de_la_macro (arg1, arg2, ...) code_de_la_macro_sur_une_ligne avec Tasm contre</p><pre id="r-532564" data-claire-element-id="532564"><code>Nom_de_la_macro: macro arg1, arg2, ...
        code_de_la_macro
        qui_peu_s_etendre_sur_plusieurs_lignes
        ; Genial_non ?
endm</code></pre><p id="r-532565" data-claire-element-id="532565">avec z80asm.</p></li><li id="r-532568" data-claire-element-id="532568"><p id="r-532567" data-claire-element-id="532567">_fonction = XXXXh avec Tasm contre _fonction: equ XXXXh avec z80asm.</p></li><li id="r-532570" data-claire-element-id="532570"><p id="r-532569" data-claire-element-id="532569">.dw, .db, .org, .etc... avec Tasm contre dw, db, org, etc... (enlevez tous les points &quot;.&quot;) avec z80asm.</p></li></ul><p id="r-532572" data-claire-element-id="532572">Si avec tout ça vous trouvez encore des bugs avec un programme qui marchait avec Tasm, regardez sur la doc en ligne (lien un peu plus haut), sinon tapez <em><strong>man z80asm</strong></em> en console et vous aurez une documentation plus complète.</p></li><li id="r-532575" data-claire-element-id="532575"><p id="r-532574" data-claire-element-id="532574"><strong>Tilem à la place de VirtualTI</strong>, fonctionne très bien, téléchargeable sur <a href="http://lpg.ticalc.org/prj_tilem/">http://lpg.ticalc.org/prj_tilem/</a>.</p></li><li id="r-532577" data-claire-element-id="532577"><p id="r-532576" data-claire-element-id="532576"><strong><a href="http://www.ticalc.org/archives/files/fileinfo/143/14394.html">bin2var</a> à la place de Devpac8x</strong> (je l'ai cherché celui-là...), en plus, il peut convertir en 82p, 83p, 8xp, 85s, etc. Note : le programme est distribué pour Windows, mais le code source est distribué, il faut juste le recompiler pour Nux (<em><strong>gcc -o bin2var bin2var.c</strong></em> dans le dossier où l'archive est décompressée).</p></li><li id="r-532579" data-claire-element-id="532579"><p id="r-532578" data-claire-element-id="532578"><strong>Tilp à la place de TI-Graph Link</strong> du programme de transfert, fonctionne très bien avec le câble TI GraphLink, mais aussi le GreyLink, les câbles séries et parallèles (voir le site <a href="http://www.ftp83plus.net/software.htm">ftp83plus.net</a>).</p></li></ol><p id="r-532581" data-claire-element-id="532581">Ci-dessous le makefile que j'utilise pour compiler (bande de veinards j'ai fait tout le boulot à votre place :p ). Pour le faire fonctionner : vous le mettez dans le même dossier que votre fichier source (portant l'extension *.z80), vous tapez <em><strong>make</strong></em> dans une console (dans le bon dossier, bien sûr) et il vous produira un fichier du même nom ayant l'extension *.8xp, ce dernier étant directement ouvrable par tilem.<br/> Note : vous pouvez aussi taper <em><strong>make clean</strong></em> pour effacer les fichiers intermédiaires, et <em><strong>make mrproper</strong></em> pour effacer les fichiers intermédiaires et les fichiers finaux (avec l'extension *.8xp).</p><pre id="r-532582" data-claire-element-id="532582"><code data-claire-semantic="bash">COMP = z80asm
FLAGS = --verbose
CONVERT = bin2var

SRC = $(wildcard *.z80)
BIN = $(SRC:.z80=.bin)
EXE = $(SRC:.z80=.8xp)

all: asm

asm: ${SRC}
	@${COMP} ${FLAGS} --input ${SRC} --output ${BIN}
	@${CONVERT} ${BIN} ${EXE}

.PHONY: clean mrproper

clean : 
	@rm -f *.bin
	@rm -rf *~
	@echo &quot;Nettoyé.&quot;

mrproper: clean
	@rm -f *.8xp
	@echo &quot;C'est vide !&quot;</code></pre><p id="r-532583" data-claire-element-id="532583">Voilà, je trouvais que ça manquait, partout sur le Net, on ne voit que des tutos (même ceux en anglais et réputés « très bons ») qui balancent du Tasm et Cie, pas un seul n'explique qu'on peut très bien faire ça avec GNU/Linux !</p><p id="r-532584" data-claire-element-id="532584">Vous devriez à présent être en mesure de compiler vos programmes <strong>sans bugs</strong> en fichiers directement transférables, et de les transférer.<br/> Je vous sens impatients de commencer... :)</p><p id="r-532585" data-claire-element-id="532585">OK, maintenant on peut passer à l'installation.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
<span class="arrow"></span>
<span class="next">Émulation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">
<span class="next">Le commencement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lecommencement"></a><h2>Le commencement</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
<span class="arrow"></span>
<span class="next">Et GNU/Linux alors ?!...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
<span class="next">Le header... incontournable !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-532590" data-claire-element-id="532590">Eeeeeeehhhhh oui, il faut bien commencer par le commencement... :-° <br/> Surtout, n'hésitez pas à vous attarder, la compréhension est essentielle pour la suite.</p>
</div><a name="Leheader...incontournable"></a><h2>Le header... incontournable !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">
<span class="arrow"></span>
<span class="next">Le commencement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
<span class="next">Les romcalls</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-header-incontournable" data-claire-element-id="532615">Le header... incontournable !</h4><p id="r-532591" data-claire-element-id="532591">C'est un bon début...<br/> En effet, votre programme commencera <strong>toujours</strong> par un <em>header</em>.<br/> Voyons sa structure :</p><pre id="r-532592" data-claire-element-id="532592"><code>#define end .end
#define END .end
#define equ .equ
#define EQU .equ
#include &quot;ti83plus.inc&quot;
.org 9D93h
.db $BB,$6D</code></pre><aside id="r-532594" data-claire-element-id="532594" data-claire-semantic="warning"><p id="r-532593" data-claire-element-id="532593">Ce <em>header</em> vient d'un code d'exemple mais il en existe de nombreux. Votre programme ne commencera donc pas forcément par celui-ci.</p></aside><p id="r-532595" data-claire-element-id="532595">Étudions ça progressivement ; vous connaissez peut-être le rôle des #define [texte1] [texte2] mais je considérerai que non.<br/> Ils servent à remplacer toutes les occurrences de [texte1] par [texte2] dans le programme.<br/> TASM est une application très tatillonne qui reconnaît des termes très précis. Par exemple, la fin du programme lui est spécifiée par <strong>.end </strong>et pas end ou .END (Oui, la casse aussi a une importance &gt;_ ).<br/> Selon vos envies ou vos habitudes, vous serez peut-être amenés à utiliser d'autres termes et dans ce cas, pensez aux #define !</p><aside id="r-532597" data-claire-element-id="532597" data-claire-semantic="information"><p id="r-532596" data-claire-element-id="532596">O.K., <strong>.end</strong> est une instruction de fin de programme mais assez importante pour que j'en parle maintenant, car si vous l'omettez, vous aurez droit à <strong>No END directive before EOF</strong>. :o Mignon non ?</p></aside><p id="r-532598" data-claire-element-id="532598">Voyons la suite...<br/> Un <strong>#include</strong> ; ce terme n'est peut-être pas inconnu si vous connaissez d'autres langages. Son utilité est d'insérer le contenu d'un fichier à l'endroit de son appel avant la compilation du programme.</p><pre id="r-532599" data-claire-element-id="532599"><code>#include &quot;ti83plus.inc&quot;</code></pre><p id="r-532600" data-claire-element-id="532600">Ceci inclura le texte du fichier <strong>ti83plus.inc</strong> entre <strong>#define EQU .equ</strong> et <strong>.org 9D93h</strong> dans l'exemple.<br/> Je vous le remets si vous êtes fainéants. :-°</p><pre id="r-532601" data-claire-element-id="532601"><code>#define end .end
#define END .end
#define equ .equ
#define EQU .equ
#include &quot;ti83plus.inc&quot;
.org 9D93h
.db $BB,$6D</code></pre><p id="r-532602" data-claire-element-id="532602">Les fichiers en .inc (include) sont en fait de simples fichiers texte dont l'extension a été modifiée pour distinguer son usage.<br/> Ils stockent généralement des données relatives à la calculatrice. J'y consacrerai une partie plus tard ; ne vous en souciez pas trop pour l'instant.</p><p id="r-532603" data-claire-element-id="532603">Dernière instruction (enfin !) : <strong>.org</strong><br/> C'est un peu plus complexe. Indispensable, mais vous pouvez oublier son utilité. Je vous la donne quand même ( :D ) : il spécifie où le programme doit être chargé dans la mémoire pour son exécution.</p><aside id="r-532605" data-claire-element-id="532605" data-claire-semantic="warning"><p id="r-532604" data-claire-element-id="532604">Je profite de ceci pour prévenir les utilisateurs de TI-83 qui auraient mal lu l'introduction ; l'adresse du lancement des programmes varie pour cette calculatrice. À titre indicatif, je la donne quand même : $9327</p></aside><p id="r-532606" data-claire-element-id="532606">N'oubliez <strong>SURTOUT PAS</strong> la ligne <strong>.db $BB,$6D</strong>.<br/> Si elle est omise, le programme sera compilé mais refusera de se lancer en vous reprochant un <strong>ERR : INVALID</strong> !<br/><strong>.db</strong> sert à spécifier une donnée ; j'expliquerai la signification de cette ligne plus tard. :p</p><p id="r-532607" data-claire-element-id="532607">Essayez aussi de vous imposer une mise en forme : pas de tabulation pour le <em>header</em>, les labels et ce qui commence par un point, et une tabulation pour le reste.</p><p id="r-532608" data-claire-element-id="532608">J'allais oublier les .equ...</p><p id="r-532609" data-claire-element-id="532609">Cela fonctionne sous la forme <code>[texte] .equ [nombre]</code><br/> Il remplace dans le programme tous les [texte] par les [nombre].</p><div id="r-532611" data-claire-element-id="532611" data-claire-semantic="question"><p id="r-532610" data-claire-element-id="532610">Et concrètement, ça sert à quoi ?</p></div><p id="r-532612" data-claire-element-id="532612">À faire le café o_O Naaaaaaaan !<br/> Ça sert dans la plupart des cas à <strong>définir des <em>romcalls</em></strong> et, euh, bah... C'est le sujet suivant ! :p</p><aside id="r-532614" data-claire-element-id="532614" data-claire-semantic="information"><p id="r-532613" data-claire-element-id="532613">L'ordre des instructions précédentes est totalement libre, on peut même les placer après le <strong>.org</strong> ; l'important est qu'elles définissent des valeurs avant leur utilisation.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">
<span class="arrow"></span>
<span class="next">Le commencement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
<span class="next">Les romcalls</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesromcalls"></a><h2>Les romcalls</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
<span class="arrow"></span>
<span class="next">Le header... incontournable !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
<span class="next">Votre 1er programme !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-romcalls" data-claire-element-id="532645">Les romcalls</h4><p id="r-532616" data-claire-element-id="532616">Bon, concrètement, vous savez maintenant faire des programmes vides. :euh: <br/> Retenez la forme :</p><pre id="r-532617" data-claire-element-id="532617"><code>header
 
#define ------
#include ------
.org ------
.db $BB,$6D
 
Corps du programme
 
Instructions diverses et variées...
 
.end</code></pre><p id="r-532618" data-claire-element-id="532618">Les <em>romcalls</em> sont un exemple d' « instructions diverses et variées ».</p><p id="r-532619" data-claire-element-id="532619">Ce sont des « mini-programmes » stockés dans la mémoire de la calculatrice qui permettent de réduire considérablement la complexité du programme. On peut faire la comparaison avec les fonctions en C ; une <em>romcall</em> prend des arguments en entrée, et retourne une ou plusieurs données en sortie.<br/> Elles peuvent aussi bien avoir un effet visible (comme effacer l'écran) qu'invisible (on verra ça plus tard !).</p><p id="r-532620" data-claire-element-id="532620">On les appelle (à prendre dans le sens « appel de fonction ») différemment selon les habitudes, et j'ai pour habitude d'utiliser <strong>bcall(xxxx)</strong> où « xxxx » est le nom de la <em>romcall</em>.<br/> Ça n'a pas d'importance de toute façon, utilisez un <strong>#define</strong> avec le texte que vous voulez.<br/> Le code correspondant est le suivant :</p><pre id="r-532621" data-claire-element-id="532621"><code>rst 28h
.dw xxxx</code></pre><p id="r-532622" data-claire-element-id="532622">Je ne vous demande pas de le comprendre.</p><p id="r-532623" data-claire-element-id="532623">On a donc un texte à remplacer par un autre, à moins que vous ne préfériez taper deux lignes de code au lieu d'une ! :p <br/> Ça ne vous rappelle rien ?</p><p id="r-532624" data-claire-element-id="532624">Il faut utiliser #define. :)</p><p id="r-532625" data-claire-element-id="532625">On inclura donc dans le <em>header</em> :</p><pre id="r-532626" data-claire-element-id="532626"><code>#define bcall(xxxx) rst 28h \ .dw xxxx</code></pre><aside id="r-532628" data-claire-element-id="532628" data-claire-semantic="information"><p id="r-532627" data-claire-element-id="532627">« <strong> \</strong> » permet de placer deux lignes l'une à la suite de l'autre.</p></aside><p id="r-532629" data-claire-element-id="532629">Vous avez peut-être remarqué que cette ligne n'apparaît pas dans le <em>header</em> de la partie précédente ; eh bien c'est juste qu'elle est déjà présente dans le fichier <em>include</em>. Vous commencez à comprendre leur utilité, non ? :)</p><div id="r-532631" data-claire-element-id="532631" data-claire-semantic="question"><p id="r-532630" data-claire-element-id="532630">Bon, « xxxx » désigne un nom, alors que les <em>romcalls</em> correspondent à des adresses mémoires ?</p></div><p id="r-532632" data-claire-element-id="532632">En fait, « xxxx » peut aussi bien désigner un texte qu'un nombre. À la base, ce sont bien des adresses mémoires, donc des nombres que nous utilisons. Mais avouez que <strong>bcall(_ClearDraw)</strong> est plus explicite que <strong>bcall($4540)</strong>.</p><p id="r-532633" data-claire-element-id="532633">On remplace un nombre par du texte. Le compilateur doit donc remplacer du texte par un nombre, ce qui nous amène à utiliser <strong>.equ</strong> ! :D <br/> Rappelez-vous...</p><pre id="r-532634" data-claire-element-id="532634"><code>[texte] .equ [nombre]</code></pre><p id="r-532635" data-claire-element-id="532635">Donc pour continuer sur ma lancée, on utilisera dans le <em>header</em> : <code>_ClearDraw .equ $4540</code></p><aside id="r-532637" data-claire-element-id="532637" data-claire-semantic="information"><p id="r-532636" data-claire-element-id="532636">Par convention, les noms de toutes les <em>romcalls</em> débutent par un <em>underscore</em> « _ ». Après c'est vous qui voyez !</p></aside><p id="r-532638" data-claire-element-id="532638">Eh oui, $4540 (inutile de vous rappeler que c'est de l'hexadécimal ^^ ) n'a pas été pris au hasard ; il correspond à l'adresse mémoire où se trouve la <em>romcall</em> qui gère l'effacement de l'écran ; elle ne nécessite aucun argument.</p><div id="r-532640" data-claire-element-id="532640" data-claire-semantic="question"><p id="r-532639" data-claire-element-id="532639">Et quand il y en a, on les passe comment ? Et comment on fait pour savoir à quelle adresse correspond tel effet ?</p></div><p id="r-532641" data-claire-element-id="532641">Si j'ai pris un exemple où il n'y en a pas besoin, c'est que je vais en parler plus tard ( :ange: ), patience (à moins que je décide de ne pas en parler du tout, yêk :diable: ) !<br/> En ce qui concerne les adresses, je vous les donnerai en fonction des besoins du tutoriel. Si vous êtes pressés, jetez donc un coup d'œil à des <strong>fichiers <em>include</em></strong> !</p><aside id="r-532643" data-claire-element-id="532643" data-claire-semantic="warning"><p id="r-532642" data-claire-element-id="532642">Certaines <em>romcalls</em> « détruisent » des registres. C'est-à-dire qu'elles ne conservent pas leur valeur de départ. Par exemple, _ClearDraw (qui se nomme réellement _clrlcdfull) détruit <strong>tous</strong> les registres !</p></aside><p id="r-532644" data-claire-element-id="532644">Vous en savez maintenant assez pour compiler votre 1er programme (Tatsiiiin !!) !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
<span class="arrow"></span>
<span class="next">Le header... incontournable !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
<span class="next">Votre 1er programme !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Votre1erprogramme"></a><h2>Votre 1er programme !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
<span class="arrow"></span>
<span class="next">Les romcalls</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">
<span class="next">Qui peut se passer des variables ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-votre-1er-programme-1" data-claire-element-id="532674">Votre 1er programme !</h4><p id="r-532646" data-claire-element-id="532646">Si j'ai bien suivi ( ^^ ) , vous en connaissez maintenant assez sur le <em>header</em> et le corps du programme. D'accord, pas beaucoup mais assez !<br/> Nous allons donc créer un programme qui efface l'écran et qui ne plante pas.<br/> Voyons... Nous n'avons besoin que d'une <em>romcall</em> qui a été définie précédemment.<br/> Et j'allais oublier... L'instruction ASM pour la fin d'un programme est <strong>ret</strong>, qui nécessite donc une tabulation.</p><div id="r-532648" data-claire-element-id="532648" data-claire-semantic="question"><p id="r-532647" data-claire-element-id="532647">Bah ? Je croyais que c'était « .end » pour la fin du programme ?</p></div><p id="r-532649" data-claire-element-id="532649">Attention, <strong>.end</strong> indique à TASM où il doit s'arrêter de compiler ; tandis que <strong>ret</strong> agira en tant que fermeture du programme lors de son exécution.</p><p id="r-532650" data-claire-element-id="532650">N'hésitez pas à relire les 1er chapitres jusqu'à bien les comprendre, je ne vous en voudrai pas ! :ange:</p><p id="r-532651" data-claire-element-id="532651">Selon moi, on obtient quelque chose comme ça :</p><div id="r-532654" data-claire-element-id="532654"><div id="r-532653" data-claire-element-id="532653"><pre id="r-532652" data-claire-element-id="532652"><code>#define bcall(xxxx) rst 28h \ .dw xxxx
_ClearDraw .equ $4540
.org $9D93
.db $BB,$6D
        bcall(_ClearDraw)
        ret
.end</code></pre></div></div><aside id="r-532656" data-claire-element-id="532656" data-claire-semantic="information"><p id="r-532655" data-claire-element-id="532655">TASM laisse tout de même la possibilité de laisser des commentaires. Il suffit d'utiliser un point-virgule devant son texte ; il ne sera ainsi pas considéré comme du code.</p></aside><p id="r-532657" data-claire-element-id="532657">O.K., j'autorise des différences au niveau des « <strong>appellations</strong> », c'est-à-dire « _ClearDraw » et « bcall( »(et des <strong>#define</strong> si vous utilisez une autre notation).</p><div id="r-532659" data-claire-element-id="532659" data-claire-semantic="question"><p id="r-532658" data-claire-element-id="532658">Au secours !! Ça ne marche pas !!</p></div><p id="r-532660" data-claire-element-id="532660">Si votre compilation échoue, retentez-la en utilisant le code ci-dessus tel quel, pour voir si votre erreur vient du code ou des applications. Si ça ne marche toujours pas, éclatez votre ordinateur à coup de relisez la première partie, vérifiez que vous avez toutes les applications, qu'elles correspondent à votre calculatrice...<br/> Si malgré cela la compilation échouait une fois de plus, envoyez-moi un message avec l'erreur indiquée. :-°</p><p id="r-532661" data-claire-element-id="532661">Une fois que vous avez un beau fichier transférable... transférez-le !<br/> Considérons « xxxx » comme le nom de votre programme (vous l'appelez comme vous voulez, je n'impose rien !).<br/> Pour l'exécuter :</p><figure id="r-532663" data-claire-element-id="532664"><img id="r-532662" data-claire-element-id="532662" src="medias/uploads.siteduzero.com_files_84001_85000_84982.png" alt="Image utilisateur"/></figure><p id="r-532665" data-claire-element-id="532665">La commande <strong>Asm(</strong> se trouve dans le catalogue (2ND+0).</p><figure id="r-532667" data-claire-element-id="532668"><img id="r-532666" data-claire-element-id="532666" src="medias/uploads.siteduzero.com_files_84001_85000_84983.png" alt="Image utilisateur"/></figure><p id="r-532669" data-claire-element-id="532669">Logiquement, votre écran devrait ressembler à ça (après appui sur <strong>ENTER</strong> :p ) :</p><aside id="r-532671" data-claire-element-id="532671" data-claire-semantic="information"><p id="r-532670" data-claire-element-id="532670">Ne vous inquiétez pas pour le Done, nous verrons comment le faire disparaître plus tard.</p></aside><p id="r-532672" data-claire-element-id="532672">Quelle émotion, non ?<br/> Non ?<br/> O.K. on continue. :pirate:</p><p id="r-532673" data-claire-element-id="532673">C'est bien beau d'avoir fait un programme, mais je suis sûr que vous l'avez trouvé léger et que vous en voulez plus ?<br/> Nous allons donc voir les essentiels, c'est-à-dire les variables (enfin !), les fichiers <em>include</em> et les instructions du z80.<br/> Courage ! ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
<span class="arrow"></span>
<span class="next">Les romcalls</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">
<span class="next">Qui peut se passer des variables ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quipeutsepasserdesvariables"></a><h2>Qui peut se passer des variables ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
<span class="arrow"></span>
<span class="next">Votre 1er programme !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
<span class="next">Variables prédéfinies</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-532676" data-claire-element-id="532676">Certainement pas moi. Et comme c'est moi qui fait le tuto... :lol: <br/> En effet, c'est bien beau les <em>romcalls</em>, mais vous voudrez peut-être stocker et utiliser des valeurs, ou même utiliser des <em>romcalls</em> plus complexes (y a intérêt ! :pirate: ) ?<br/> Eh bien il vous faut des variables !<br/> Ce chapitre sera l'un des plus longs mais sa compréhension est <strong>essentielle</strong> !</p>
</div><a name="Variablesprdfinies"></a><h2>Variables prédéfinies</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">
<span class="arrow"></span>
<span class="next">Qui peut se passer des variables ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
<span class="next">Variables définies par l&#039;utilisateur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-variables-predefinies" data-claire-element-id="532771">Variables prédéfinies</h4><p id="r-532677" data-claire-element-id="532677">Vous êtes au courant qu'il faut utiliser le z80 sur une TI ? Oui ? Parfait. :D <br/> Sachez que ces deux « objets » possèdent chacun leurs propres variables.</p><ul id="r-532682" data-claire-element-id="532682"><li id="r-532679" data-claire-element-id="532679"><p id="r-532678" data-claire-element-id="532678">Pour le processeur (z80), il s'agit des <strong>registres</strong>.</p></li><li id="r-532681" data-claire-element-id="532681"><p id="r-532680" data-claire-element-id="532680">Pour la TI, ce sont des « <strong>system-defined ram variables</strong> ».</p></li></ul><h5 id="r-les-registres-3" data-claire-element-id="532739">Les registres</h5><p id="r-532683" data-claire-element-id="532683">Vous vous rappelez les fameux arguments à passer ? Eh bien ils le sont grâce aux registres.<br/> Il en existe de 8 et de 16 bits.</p><aside id="r-532685" data-claire-element-id="532685" data-claire-semantic="warning"><p id="r-532684" data-claire-element-id="532684">8 bits = 1 octet = 1 byte.</p></aside><p id="r-532686" data-claire-element-id="532686">Ils sont représentés par une ou deux lettres (vous devinez pourquoi ? :euh: ).<br/> On dispose en 8 bits des registres <strong>a</strong>, <strong>b</strong>, <strong>c</strong>, <strong>d</strong>, <strong>e</strong>, <strong>f</strong>, <strong>h</strong> et <strong>l</strong> (très original... :D ).</p><p id="r-532687" data-claire-element-id="532687">Logiquement, ils peuvent donc contenir des valeurs de %00000000 à %11111111, c'est-à-dire entre 0 et 255. Votre programme ne sera pas compilé en cas de dépassement.</p><p id="r-532688" data-claire-element-id="532688">Voyons les registres 16 bits ; il existe <strong>af</strong>, <strong>bc</strong>, <strong>de</strong> et <strong>hl</strong>.<br/> Eh oui, ce sont des combinaisons de deux registres 8 bits, qui peuvent donc prendre des valeurs entre 0 et 65535.</p><aside id="r-532690" data-claire-element-id="532690" data-claire-semantic="information"><p id="r-532689" data-claire-element-id="532689">Il existe également ix et iy, mais ils sont un peu différents (ce sont des index de registre), ne vous en souciez pas pour l'instant.</p></aside><p id="r-532691" data-claire-element-id="532691">Quel rapport y a-t-il alors entre les registres 8 et 16 bits ? Eh bien l'un fait partie de l'autre, ce qui m'amène à justifier l'utilisation du binaire et de l'hexadécimal.<br/> En effet ces bases sont adaptées à l'utilisation d'octets ; regardez :</p><p id="r-532692" data-claire-element-id="532692">Si <strong>h</strong> contient %10110010 et <strong>l</strong> %00100101, alors on aura <strong>hl</strong> = %1011001000100101.</p><p id="r-532693" data-claire-element-id="532693">De même :</p><p id="r-532694" data-claire-element-id="532694">Si <strong>b</strong> contient $05 et <strong>c</strong> $8A, alors <strong>bc</strong> = $58A.</p><p id="r-532695" data-claire-element-id="532695">Compris ? On va voir ça ! :diable: .<br/> Si <strong>d</strong> contient 54 et <strong>e</strong> 200, <strong>de</strong> = ...</p><p id="r-532696" data-claire-element-id="532696"></p><div id="r-532705" data-claire-element-id="532705"><div id="r-532704" data-claire-element-id="532704"><p id="r-532697" data-claire-element-id="532697">Attention, c'est du décimal !<br/> On a :</p><ul id="r-532702" data-claire-element-id="532702"><li id="r-532699" data-claire-element-id="532699"><p id="r-532698" data-claire-element-id="532698">54 = 00110110b = 36h ;</p></li><li id="r-532701" data-claire-element-id="532701"><p id="r-532700" data-claire-element-id="532700">200 = 11001000b = C8h.</p></li></ul><p id="r-532703" data-claire-element-id="532703">D'où <strong>de</strong> = 0011011011001000b = 36C8h = <strong>14024</strong>.</p></div></div><p id="r-532706" data-claire-element-id="532706">Et ça marche aussi dans l'autre sens (encore heureux !).</p><p id="r-532707" data-claire-element-id="532707">Pour traiter des nombres de 16 bits, on utilise généralement l'hexadécimal, et le décimal pour les nombres de 8 bits, mais c'est vous qui voyez !<br/> Non, je n'oublie pas le binaire ! Sa plus grande utilité est ailleurs, patience...</p><p id="r-532708" data-claire-element-id="532708"><strong>Autre chose</strong> : les registres ne se contentent pas tous de ne servir qu'au stockage.<br/> Voyons leurs caractéristiques particulières.</p><h6 id="r-a-5" data-claire-element-id="532710">a</h6><p id="r-532709" data-claire-element-id="532709">Il est appelé <strong>accumulateur</strong>, c'est le plus important des registres 8 bits. Il permet de réaliser les opérations de base et d'accéder à la mémoire.</p><h6 id="r-f-4" data-claire-element-id="532712">f</h6><p id="r-532711" data-claire-element-id="532711">C'est le registre des <em><strong>f</strong>lags</em>, on ne peut pas y charger de valeur.<br/> J'aborderai les <em>flags</em> plus tard.</p><h6 id="r-hl" data-claire-element-id="532714">hl</h6><p id="r-532713" data-claire-element-id="532713">Équivalent du registre <strong>a</strong> en 16 bits : il permet de réaliser des opérations et est utilisé pour l'adressage. Sur deux &lt;bytes on aura donc le « <strong>h</strong><em>high</em> » et le « <strong>l</strong><em>low</em> byte » d'une adresse mémoire !</p><h6 id="r-bc" data-claire-element-id="532716">bc</h6><p id="r-532715" data-claire-element-id="532715">Il est utilisé dans des instructions comme un compteur d'octets. En anglais ça donne <strong>b</strong>yte <strong>c</strong><em>counter</em> ! :)</p><h6 id="r-de-1" data-claire-element-id="532738">de</h6><p id="r-532717" data-claire-element-id="532717">Ce registre sert à mémoriser des adresses mémoire qui serviront de <strong>de</strong>stination.</p><aside id="r-532719" data-claire-element-id="532719" data-claire-semantic="information"><p id="r-532718" data-claire-element-id="532718">Bien sûr, n'importe quel registre (mis à part <strong>f</strong> et donc <strong>af</strong>) peut être utilisé pour du simple stockage de données ; ce que j'ai présenté décrit leurs caractéristiques propres.</p></aside><p id="r-532720" data-claire-element-id="532720">Pour charger une valeur dans un registre, on utilise l'instruction <strong>ld</strong> (abréviation de <em>load</em> si vous n'avez pas deviné ;) ).</p><pre id="r-532721" data-claire-element-id="532721"><code>ld [destination],[valeur à charger]</code></pre><p id="r-532722" data-claire-element-id="532722">On peut charger n'importe quelle valeur - en tenant compte de la capacité tout de même - dans n'importe quel registre utilisable (oubliez <strong>af</strong> et <strong>f</strong> pour le moment).</p><pre id="r-532723" data-claire-element-id="532723"><code>ld hl,$547A
ld a,%11001
etc.</code></pre><p id="r-532724" data-claire-element-id="532724"><strong>On peut également charger</strong> d'un registre 8 bits vers un autre registre 8 bits sans problème.</p><p id="r-532725" data-claire-element-id="532725">Un registre 16 bits doit être chargé dans un autre registre 16 bits en deux étapes.<br/> On n'écrira pas <strong>ld hl,de</strong> mais :</p><pre id="r-532726" data-claire-element-id="532726"><code>ld h,d
ld l,e</code></pre><p id="r-532727" data-claire-element-id="532727">Possibilités restantes :</p><ul id="r-532734" data-claire-element-id="532734"><li id="r-532729" data-claire-element-id="532729"><p id="r-532728" data-claire-element-id="532728"><strong>D'un 8 bits vers un 16 bits</strong> :</p></li><p id="r-532730" data-claire-element-id="532730"><strong>possible</strong>, mais le 1er octet du registre 16 bits ne changera pas. Vous devez donc le mettre à 0.</p><li id="r-532732" data-claire-element-id="532732"><p id="r-532731" data-claire-element-id="532731"><strong>D'un 16 bits vers un 8 bits</strong> :</p></li><p id="r-532733" data-claire-element-id="532733"><strong>impossible</strong> ; même si le registre 16 bits contient une valeur inférieure à 256, vous aurez une erreur de compilation.</p></ul><p id="r-532735" data-claire-element-id="532735">Par exemple, pour stocker <strong>a</strong> dans <strong>de</strong>, on fera :</p><pre id="r-532736" data-claire-element-id="532736"><code>ld e,a
ld d,0</code></pre><p id="r-532737" data-claire-element-id="532737">Retenez juste les méthodes de chargement pour l'instant, c'est la principale utilité des registres.</p><h5 id="r-variables-pre-definies" data-claire-element-id="532770">Variables pré-définies</h5><p id="r-532740" data-claire-element-id="532740">Pour le bon fonctionnement de l'OS, la TI possède dans sa mémoire des informations comme les coordonnées du curseur, le contraste, la liste des programmes, ...<br/> Avec l'ASM, nous pouvons récupérer et / ou modifier leurs valeurs.</p><div id="r-532742" data-claire-element-id="532742" data-claire-semantic="question"><p id="r-532741" data-claire-element-id="532741">Comment on fait ?</p></div><p id="r-532743" data-claire-element-id="532743">Il faut <strong>absolument</strong> comprendre le fonctionnement de la mémoire avant de lire la méthode.</p><p id="r-532744" data-claire-element-id="532744">On peut comparer la mémoire - dans notre cas, la RAM - à une succession de cases les unes à la suite des autres, chacune de ces cases étant identifiée par une <strong>adresse</strong>.<br/><strong>Il faut donc distinguer cette adresse du contenu de la case.</strong><br/> Ces cases ont une capacité d'un octet. Si on place 16 bits à une adresse, 8 bits vont forcement « déborder », selon le schéma suivant :</p><figure id="r-532746" data-claire-element-id="532747"><img id="r-532745" data-claire-element-id="532745" src="medias/uploads.siteduzero.com_files_84001_85000_84984.png" alt="Image utilisateur"/></figure><p id="r-532748" data-claire-element-id="532748">À noter que les valeurs ont été prises <strong>au hasard</strong>.</p><aside id="r-532750" data-claire-element-id="532750" data-claire-semantic="information"><p id="r-532749" data-claire-element-id="532749">Cela ne doit pas être vu comme un inconvénient, au contraire, car il sera donc possible de modifier deux valeurs côte à côte en une seule fois !</p></aside><aside id="r-532752" data-claire-element-id="532752" data-claire-semantic="error"><p id="r-532751" data-claire-element-id="532751">Une erreur fréquente consiste à croire que c'est le premier octet (<em>high</em> byte -&gt; <strong>h</strong> dans l'exemple) qui sera à l'adresse indiquée, alors qu'il s'agit du contraire.</p></aside><p id="r-532753" data-claire-element-id="532753">Si on possède l'adresse d'une valeur, on obtient cette valeur par la notation :</p><pre id="r-532754" data-claire-element-id="532754"><code>(adresse)</code></pre><aside id="r-532756" data-claire-element-id="532756" data-claire-semantic="information"><p id="r-532755" data-claire-element-id="532755">Le nombre entre parenthèses est un <strong>pointeur</strong>.<br/> Le nombre <strong>avec</strong> les parenthèses est la valeur contenue dans la RAM à l'adresse « pointée ».</p></aside><p id="r-532757" data-claire-element-id="532757">Il suffit de mettre l'adresse entre parenthèses pour récupérer la valeur contenue à cette adresse.<br/> On utilise également <strong>ld</strong> pour charger des valeurs à des adresses précises, avec quelques restrictions :</p><ul id="r-532766" data-claire-element-id="532766"><li id="r-532759" data-claire-element-id="532759"><p id="r-532758" data-claire-element-id="532758">on <strong>ne peut pas</strong> transférer le contenu d'une adresse vers une autre directement, il faut passer par un registre ;</p></li><li id="r-532761" data-claire-element-id="532761"><p id="r-532760" data-claire-element-id="532760">en 8 bits, <strong>seul l'accumulateur</strong> (registre <strong>a</strong>) peut être utilisé pour récupérer ou pour charger le contenu d'une adresse ;</p></li><li id="r-532763" data-claire-element-id="532763"><p id="r-532762" data-claire-element-id="532762">on peut utiliser <strong>n'importe quel registre 16 bits</strong> pour récupérer ou charger le contenu d'une adresse ;</p></li><li id="r-532765" data-claire-element-id="532765"><p id="r-532764" data-claire-element-id="532764">si on récupère le contenu d'une adresse avec un registre 16 bits, alors son premier octet prend <strong>la valeur contenue dans l'adresse suivante</strong> (la valeur contenue dans l'adresse demandée se trouve dans le deuxième octet du registre).</p></li></ul><p id="r-532767" data-claire-element-id="532767">Revenez au schéma ci-dessus ; on aura :</p><pre id="r-532768" data-claire-element-id="532768"><code>ld a,($8556)
-&gt; a = 32
ld hl,($8554)
-&gt; h = 0, l = 25, donc hl = $0019</code></pre><p id="r-532769" data-claire-element-id="532769">Ce sera tout pour le moment ; retenez bien les restrictions car elles sont nombreuses en ASM ! :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">
<span class="arrow"></span>
<span class="next">Qui peut se passer des variables ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
<span class="next">Variables définies par l&#039;utilisateur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Variablesdfiniesparl039utilisateur"></a><h2>Variables définies par l&#039;utilisateur</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
<span class="arrow"></span>
<span class="next">Variables prédéfinies</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
<span class="next">Opérations de base</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-variables-definies-par-l-utilisateur" data-claire-element-id="532805">Variables définies par l'utilisateur</h4><p id="r-532772" data-claire-element-id="532772">C'est bien beau les registres, mais on les utilise tout le temps. Leur valeur est donc toujours changeante. Et vous voudrez peut-être créer vos propres variables, auxquelles vous seuls aurez accès.<br/> Vous devez donc les <strong>définir</strong>.</p><div id="r-532774" data-claire-element-id="532774" data-claire-semantic="question"><p id="r-532773" data-claire-element-id="532773">Ah, tiens ! 'Faut utiliser <strong>#define</strong> alors ?</p></div><p id="r-532775" data-claire-element-id="532775">NON !!!!<br/> Bon, OK, c'était un piège !<br/> En fait, vous allez devoir stocker vos variables dans la RAM. Et la RAM est constituée... d'adresses, qui sont des... nombres ! :lol: <br/> Après lui avoir trouvé un nom, vous pourrez donc utiliser un <strong>.equ</strong> pour faire correspondre ce nom à une adresse libre.</p><aside id="r-532777" data-claire-element-id="532777" data-claire-semantic="information"><p id="r-532776" data-claire-element-id="532776">Ce fameux <strong>.equ</strong> peut être remplacé par... le signe égal ! Par convention, on utilise <strong>.equ</strong> pour les <em>romcalls</em> et « = » pour les variables.</p></aside><p id="r-532778" data-claire-element-id="532778">De plus, les variables peuvent être définies à n'importe quel endroit du programme, tant qu'on ne les utilise pas avant. Par convention, on les place toutes dans le <em>header</em>, avant le <strong>.org</strong> ; il est plus facile de s'y retrouver quand elles sont toutes définies ensemble au début du code.</p><div id="r-532780" data-claire-element-id="532780" data-claire-semantic="question"><p id="r-532779" data-claire-element-id="532779">OK, mais comment savoir à quel endroit de la RAM les placer ?</p></div><p id="r-532781" data-claire-element-id="532781">Eh bien il existe quatre zones de la RAM dédiées au programmeur :</p><ul id="r-532790" data-claire-element-id="532790"><li id="r-532783" data-claire-element-id="532783"><p id="r-532782" data-claire-element-id="532782">saferam1 : commence à l'adresse <strong>$8265</strong> et s'étend sur <em>768</em> octets ;</p></li><li id="r-532785" data-claire-element-id="532785"><p id="r-532784" data-claire-element-id="532784">saferam2 : commence à l'adresse <strong>$858F</strong> et s'étend sur <em>531</em> octets ;</p></li><li id="r-532787" data-claire-element-id="532787"><p id="r-532786" data-claire-element-id="532786">saferam3 : commence à l'adresse <strong>$80C9</strong> et s'étend sur <em>128</em> octets ;</p></li><li id="r-532789" data-claire-element-id="532789"><p id="r-532788" data-claire-element-id="532788">saferam4 : commence à l'adresse <strong>$8039</strong> et s'étend sur <em>66</em> octets.</p></li></ul><p id="r-532791" data-claire-element-id="532791">Le terme « <em>saferam</em> » est évidemment une convention, vous pouvez l'appeler comme vous voulez.</p><aside id="r-532793" data-claire-element-id="532793" data-claire-semantic="warning"><p id="r-532792" data-claire-element-id="532792">Si vous avez plusieurs variables à définir, prenez garde à la taille de celles-ci ; il faudra passer 2 octets pour définir une variable à la suite d'une de 16 bits.</p></aside><pre id="r-532794" data-claire-element-id="532794"><code>saferam1 .equ $8265
variable_16_bits = saferam1
vaiable_suivante = saferam1+2</code></pre><p id="r-532795" data-claire-element-id="532795">Mais il est bien sûr possible de stocker ces variables n'importe où dans les <em>saferam</em>.</p><p id="r-532796" data-claire-element-id="532796">Vous pouvez sauter des octets en utilisant <strong>+[valeur constante]</strong>, c'est-à-dire que</p><pre id="r-532797" data-claire-element-id="532797"><code>variable_suivante = saferam1+a</code></pre><p id="r-532798" data-claire-element-id="532798">ne sera pas accepté, contrairement à</p><pre id="r-532799" data-claire-element-id="532799"><code>variable_suivante = saferam+2</code></pre><p id="r-532800" data-claire-element-id="532800">Bon, vous avez maintenant défini votre variable comme <strong>son adresse dans la RAM.</strong><br/> On a donc un pointeur sur <em>variable_suivante</em> qui vaut $8267.<br/> Pour récupérer la valeur contenue à l'adresse du pointeur dans un registre 8 bits, vous devez écrire :</p><pre id="r-532801" data-claire-element-id="532801"><code>ld a,(variable_suivante)</code></pre><aside id="r-532803" data-claire-element-id="532803" data-claire-semantic="error"><p id="r-532802" data-claire-element-id="532802">N'oubliez pas que <strong>a</strong> est le seul registre 8 bits capable de récupérer la valeur contenue à une adresse.</p></aside><p id="r-532804" data-claire-element-id="532804">Pour ce qui est des restrictions, vos variables se gèrent comme les « <strong><em>system-defined ram variables</em></strong> » vues plus haut. Il n'est donc pas nécessaire de les rappeler, vous avez juste à lire la partie précédente en cas d'oubli.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
<span class="arrow"></span>
<span class="next">Variables prédéfinies</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
<span class="next">Opérations de base</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Oprationsdebase"></a><h2>Opérations de base</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
<span class="arrow"></span>
<span class="next">Variables définies par l&#039;utilisateur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
<span class="next">Le stack</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-operations-de-base-4" data-claire-element-id="532839">Opérations de base</h4><p id="r-532806" data-claire-element-id="532806">Vous savez maintenant comment stocker et rappeler des nombres, qu'ils soient dans des registres ou dans la RAM.<br/> Mais des nombres sans opération, c'est comme un Mickey sans oreilles ! :D <br/> Vous en avez besoin d'un minimum ; et c'est là que l'ASM devient assez frustrant...</p><p id="r-532807" data-claire-element-id="532807">Je précise d'entrée que les instructions qui vont suivre n'agissent <strong>que sur les registres</strong>. Pour effectuer des opérations avec vos variables, vous devrez donc tout d'abord les stocker dans les registres adaptés.</p><h5 id="r-addition-3" data-claire-element-id="532820">Addition</h5><p id="r-532808" data-claire-element-id="532808">On utilise l'instruction <strong>add</strong> (incroyable... ^^ ) avec la syntaxe <code>add [registre],[registre]</code> ou <code>add [registre],[valeur constante]</code> et quelques restrictions, bien sûr ! :-°</p><aside id="r-532810" data-claire-element-id="532810" data-claire-semantic="information"><p id="r-532809" data-claire-element-id="532809">Je précise que ce que j'appelle <em>valeur constante</em> représente simplement un nombre quelconque ; ce n'est pas un registre ni une variable.</p></aside><p id="r-532811" data-claire-element-id="532811">Premièrement, pas d'addition entre registre 8 bits et registre 16 bits.<br/> Et ce n'est pas fini !</p><h6 id="r-registres-8-bits" data-claire-element-id="532813"><strong>Registres 8 bits</strong></h6><p id="r-532812" data-claire-element-id="532812">Vous pouvez vous y attendre, on ne peut additionner une valeur qu'au registre <strong>a</strong> (ce n'est pas pour rien qu'il s'appelle l'accumulateur ! :lol: ).<br/> On peut lui ajouter n'importe quel registre 8 bits ou valeur constante (pas de contenu d'adresse, je le répète) ; le résultat sera stocké dans l'accumulateur.</p><h6 id="r-registres-16-bits" data-claire-element-id="532819"><strong>Registres 16 bits</strong></h6><p id="r-532814" data-claire-element-id="532814">Je vous avais dit que <strong>hl</strong> était l'équivalent de <strong>a</strong> en 16 bits ? Malgré cela, on ne peut additionner que les registres 16 bits à <strong>hl</strong>.<br/> Le résultat sera mémorisé dans... <strong>hl</strong> !</p><p id="r-532815" data-claire-element-id="532815"><strong>Accepté :</strong></p><pre id="r-532816" data-claire-element-id="532816"><code>add a,b
add a,54
add hl,de</code></pre><p id="r-532817" data-claire-element-id="532817"><strong>Refusé :</strong></p><pre id="r-532818" data-claire-element-id="532818"><code>add hl,2145
add a,hl
add hl,a</code></pre><h5 id="r-incrementation-decrementation-1" data-claire-element-id="532824">Incrémentation, décrémentation</h5><p id="r-532821" data-claire-element-id="532821">Je ferai court !<br/> Les instructions correspondantes sont respectivement <strong>inc</strong> et <strong>dec</strong> qui fonctionnent sur <em>tous</em> les registres.</p><pre id="r-532822" data-claire-element-id="532822"><code>inc [registre]
dec [registre]</code></pre><p id="r-532823" data-claire-element-id="532823">Le résultat est stocké dans le registre qui a servi au calcul.<br/> Cette instruction est plus rapide qu'une addition ou soustraction de 1. Ne l'oubliez pas ! ^^</p><h5 id="r-soustraction-2" data-claire-element-id="532827">Soustraction</h5><p id="r-532825" data-claire-element-id="532825">Les restrictions sont exactement les mêmes que pour l'addition.<br/> On utilise <strong>sub</strong> pour soustraire une valeur constante ou un registre 8 bits à <strong>a</strong> et <strong>sbc</strong> pour soustraire un registre 16 bits à <strong>hl</strong>.<br/> Le résultat est stocké respectivement dans <strong>a</strong> ou <strong>hl</strong>.</p><pre id="r-532826" data-claire-element-id="532826"><code>sub b ; a = a - b
sub 5 ; a = a - 5
 
sbc hl,de ; hl = hl - de</code></pre><h5 id="r-multiplication-division" data-claire-element-id="532838">Multiplication, division</h5><p id="r-532828" data-claire-element-id="532828">Très énervant ! :colere2: <br/> En effet, on dispose seulement de quelques instructions des niveaux de bits, qui n'agissent que sur les registres 8 bits...<br/> On dispose de <strong>sla</strong>, qui multiplie par deux et de <strong>sra</strong> qui divise par deux (ces instructions agissent comme telles sur les nombres <strong>signés</strong> que l'on verra un peu plus tard).</p><pre id="r-532829" data-claire-element-id="532829"><code>sla [registre 8 bits]
sra [registre 8 bits]</code></pre><aside id="r-532831" data-claire-element-id="532831" data-claire-semantic="information"><p id="r-532830" data-claire-element-id="532830">Si le résultat de la division ne tombe pas juste, il est arrondi à l'entier inférieur.</p></aside><p id="r-532832" data-claire-element-id="532832">Vous l'avez compris, rien que pour diviser par 5, c'est déjà la galère, d'autant plus que les registres ne gèrent pas les nombres décimaux !<br/> À la base, sla et sra ne servent pas vraiment au calcul d'ailleurs...<br/> Pour multiplier, vous pouvez toujours vous arranger avec l'addition.</p><p id="r-532833" data-claire-element-id="532833">Multiplier <strong>a</strong> par 9 :</p><pre id="r-532834" data-claire-element-id="532834"><code>ld b,a
sla b ; b = 2a
sla b ; b = 4a
sla b ; b = 8a
add a,b ; a = a+b = 9a</code></pre><p id="r-532835" data-claire-element-id="532835">Mais ne vous inquiétez pas, il existe une autre méthode pour les calculs, beaucoup plus complète mais plus lente ; je l'aborderai évidemment ! :)</p><aside id="r-532837" data-claire-element-id="532837" data-claire-semantic="information"><p id="r-532836" data-claire-element-id="532836">Le « lent » en Assembleur est relatif ; il reste bien plus rapide que n'importe quel algorithme en Basic, mais retenez que les instructions sont beaucoup plus rapides que les <em>romcalls</em>, même si la différence n'est pas visible à votre niveau.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
<span class="arrow"></span>
<span class="next">Variables définies par l&#039;utilisateur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
<span class="next">Le stack</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lestack"></a><h2>Le stack</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
<span class="arrow"></span>
<span class="next">Opérations de base</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
<span class="next">Nombres négatifs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-stack" data-claire-element-id="532851">Le stack</h4><p id="r-532840" data-claire-element-id="532840">Yeah ! Ça fait style, non ? :soleil: <br/> On va quand même traduire !<br/> « <em>Stack</em> », c'est la pile. Attention, pas la pile de la calculatrice ( :p ) mais plutôt une pile d'objets.<br/> Ainsi, vous n'avez accès qu'au haut de la pile. Si vous voulez un objet placé plus bas, il faudra d'abord enlever ce qu'il y a dessus.<br/> Concrètement dans notre cas, il s'agit d'une pile de valeurs que vous déciderez d'« empiler ».</p><p id="r-532841" data-claire-element-id="532841"><strong>Seuls des registres 16 bits peuvent être empilés et retirés.</strong><br/> Mais comme vous savez que les registres 8 bits sont contenus dans les 16 bits, cela n'a pas dû vous effrayer ! :lol: <br/> On utilise les instructions <strong>pop</strong> pour retirer et <strong>push</strong> pour empiler.</p><pre id="r-532842" data-claire-element-id="532842"><code>pop [registre_16_bits]
push [registre_16_bits]</code></pre><p id="r-532843" data-claire-element-id="532843">Dans le cas de <strong><em>push [registre]</em></strong>, [registre] est sauvegardé sur le haut de la pile.<br/> Quand on a <strong><em>pop [registre]</em></strong>, alors la valeur du haut de la pile est stockée dans [registre].</p><p id="r-532844" data-claire-element-id="532844">Voici un petit schéma pour vous permettre d'y voir clair :</p><figure id="r-532846" data-claire-element-id="532847"><img id="r-532845" data-claire-element-id="532845" src="medias/uploads.siteduzero.com_files_85001_86000_85283.png" alt="Image utilisateur"/></figure><p id="r-532848" data-claire-element-id="532848">Le plus dur à comprendre est que le registre sous lequel est retirée une valeur est totalement indépendant de celui qui a stocké la valeur retirée.</p><p id="r-532849" data-claire-element-id="532849">Le stack n'est pas souvent utilisé mais il reste utile lorsque vous devez par exemple passer un argument tout en conservant une valeur dans le même registre.</p><p id="r-532850" data-claire-element-id="532850">Il existe des solutions plus rapides pour la sauvegarde mais elles sont beaucoup plus complexes ; je les expliquerai peut-être plus tard.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
<span class="arrow"></span>
<span class="next">Opérations de base</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
<span class="next">Nombres négatifs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Nombresngatifs"></a><h2>Nombres négatifs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
<span class="arrow"></span>
<span class="next">Le stack</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">
<span class="next">Un peu de texte...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-nombres-negatifs" data-claire-element-id="532874">Nombres négatifs</h4><p id="r-532852" data-claire-element-id="532852">J'entends déjà des hauts cris : « oui, on me dit que les registres peuvent contenir des nombres entre 0 et 255 alors je vois pas ce que les négatifs viennent faire là ! ».<br/> Eh bien vous avez en partie raison ! :p <br/> En fait, cette affirmation est juste. Le signe d'un registre vient de l'interprétation de ses bits.<br/> En d'autres termes, vous pouvez choisir de voir un registre comme positif ou négatif !</p><p id="r-532853" data-claire-element-id="532853">Vous vous souvenez de la structure des registres ?<br/> 8 bits ou 16 bits, utilisés entièrement pour le stockage de nombres positifs.<br/> Dans ce cas, on dit que le nombre est <em>unsigned</em> (non signé, quoi...).</p><p id="r-532854" data-claire-element-id="532854">Et dans le cas contraire, alors ?<br/> Eh bien soit un nombre est positif, soit il est négatif, n'est-ce pas ?!<br/> Deux états possibles... On peut donc faire tenir cet état dans un seul bit.<br/> L'heureux élu est le « <em>most significant bit</em> », le bit de poids fort, autrement dit celui qui se trouve à <strong>l'extrême gauche</strong>.<br/> On a dans ce cas un nombre « <strong>signé</strong> ».<br/> Évidemment, on a alors un bit disponible de moins.</p><p id="r-532855" data-claire-element-id="532855">Par exemple, un registre 8 bits signé pourra contenir des valeurs de -127 à 127.</p><p id="r-532856" data-claire-element-id="532856">Le bit de poids fort est à 1 dans le cas d'un nombre négatif, et à 0 dans le cas contraire.<br/> Les bits suivants composent le nombre.</p><aside id="r-532858" data-claire-element-id="532858" data-claire-semantic="warning"><p id="r-532857" data-claire-element-id="532857">Cette composition diffère entre les <em>signed</em> et les <em>unsigned</em>.</p></aside><p id="r-532859" data-claire-element-id="532859">Pour vous aider, imaginez le registre <strong>a</strong> (pour l'exemple) composé de 255 cases correspondant aux valeurs possibles disposées en cercle. On pourra alors dire que 0 et 256 correspondent au même nombre.<br/> Donc -1 correspond à 256-1, soit 255, et cætera.</p><figure id="r-532861" data-claire-element-id="532862"><img id="r-532860" data-claire-element-id="532860" src="medias/uploads.siteduzero.com_files_85001_86000_85284.png" alt="Image utilisateur"/></figure><p id="r-532863" data-claire-element-id="532863">Soit :</p><pre id="r-532864" data-claire-element-id="532864"><code>-1 = %11111111
120 = %01111000
-120 = %10001000 (ou 136...)</code></pre><p id="r-532865" data-claire-element-id="532865">Pour changer le signe d'un nombre, vous devez changer l'état de tous ses bits puis lui ajouter 1. Ici se trouve l'importance de la taille du registre.<br/> Sur 8 bits, le complément de %00101101 sera %11010010 alors que sur 16 bits, il sera %1111111111010010. Faites-y bien attention !<br/> Plus simplement, vous pouvez utiliser l'instruction <strong>neg</strong> qui change le signe de l'accumulateur.</p><p id="r-532866" data-claire-element-id="532866">Cette partie est assez déroutante mais après l'avoir lue plusieurs fois, le principe devrait rentrer ! :)</p><aside id="r-532868" data-claire-element-id="532868" data-claire-semantic="information"><p id="r-532867" data-claire-element-id="532867">Pour le processeur, le fait que le registre soit <em>signed</em> ou <em>unsigned</em> ne change absolument rien puisqu'il ne différencie pas les deux ! Seule votre décision influe sur le nombre. -12 ou 244 ? C'est à vous de choisir...</p></aside><p id="r-532869" data-claire-element-id="532869">Si vous ne comprenez pas pourquoi, ce schéma devrait vous éclairer :</p><figure id="r-532871" data-claire-element-id="532872"><img id="r-532870" data-claire-element-id="532870" src="medias/uploads.siteduzero.com_files_85001_86000_85285.png" alt="Image utilisateur"/></figure><p id="r-532873" data-claire-element-id="532873">Les variables constituent un pilier pour la plupart des langages, et l'ASM z80 n'échappe pas à la règle !<br/> N'hésitez pas à relire ce chapitre jusqu'à avoir bien tout compris car vous vous en servirez dans tous vos programmes.<br/> Je considèrerai pour la suite qu'il est acquis.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
<span class="arrow"></span>
<span class="next">Le stack</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">
<span class="next">Un peu de texte...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unpeudetexte..."></a><h2>Un peu de texte...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
<span class="arrow"></span>
<span class="next">Nombres négatifs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
<span class="next">Ressources nécessaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-532876" data-claire-element-id="532876">OK, c'est bien beau les cours théoriques, mais ça saoule, non ? :-° <br/> Je pense qu'alterner avec des programmes ne vous lassera pas trop vite.<br/> On va donc en créer un 2e, youpi ! ^^</p>
</div><a name="Ressourcesncessaires"></a><h2>Ressources nécessaires</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">
<span class="arrow"></span>
<span class="next">Un peu de texte...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
<span class="next">« Hello world! », vous connaissez ?!</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-ressources-necessaires" data-claire-element-id="532903">Ressources nécessaires</h4><p id="r-532877" data-claire-element-id="532877">Bon, en Basic, afficher du texte, c'était simple.<br/> En Assembleur... c'est moins simple ! :p <br/> Vous devez déjà savoir qu'il y a deux types d'écriture sur la calculatrice : la « grande » et la « petite » police. Eh bien il existe une <em>romcall</em> pour afficher du texte dans chacune de ces polices.<br/> Il s'agit respectivement de <strong>_puts</strong> ($450A) ou <strong>_vputs</strong> ($4561).<br/> À votre avis, de quelles données ont besoin ces <em>romcalls</em> ?</p><h6 id="r-coordonnees-1" data-claire-element-id="532889">Coordonnées</h6><p id="r-532878" data-claire-element-id="532878">Il faut que la calculatrice sache où le texte doit être placé. Pour cela, elle utilise les variables <strong>curcol</strong> et <strong>currow</strong> (grande police) ou <strong>pencol</strong> et <strong>penrow</strong> (petite police).<br/> « col » définit une colonne (-&gt; l'abscisse), et « row » une ligne (-&gt; l'ordonnée).<br/> Voici leurs adresses :</p><ul id="r-532887" data-claire-element-id="532887"><li id="r-532880" data-claire-element-id="532880"><p id="r-532879" data-claire-element-id="532879">currow : <strong>$844B</strong> ;</p></li><li id="r-532882" data-claire-element-id="532882"><p id="r-532881" data-claire-element-id="532881">curcol : <strong>$844C</strong> ;</p></li><li id="r-532884" data-claire-element-id="532884"><p id="r-532883" data-claire-element-id="532883">pencol : <strong>$86D7</strong> ;</p></li><li id="r-532886" data-claire-element-id="532886"><p id="r-532885" data-claire-element-id="532885">penrow : <strong>$86D8</strong>.</p></li></ul><p id="r-532888" data-claire-element-id="532888">Vous ne remarquez rien ? Les adresses se suivent deux à deux dans la RAM !<br/> On pourra donc définir les deux coordonnées en une seule fois : pratique, non ? ;)</p><h6 id="r-texte-3" data-claire-element-id="532902">Texte</h6><p id="r-532890" data-claire-element-id="532890">Le contraire m'aurait surpris !<br/> Bah oui, il faut évidemment un texte à afficher.<br/> Pour cela, vous devez charger dans <strong>hl</strong> le pointeur sur votre texte.</p><div id="r-532892" data-claire-element-id="532892" data-claire-semantic="question"><p id="r-532891" data-claire-element-id="532891">Comment inclut-on le texte dans le programme ?</p></div><p id="r-532893" data-claire-element-id="532893">Vous vous souvenez peut-être du <strong>.db</strong> (chapitre du <em>header</em>) ?<br/> En fait, toutes les données fixes dont vous aurez besoin au cours du programme doivent être « stockées » sous la forme <strong><em>.db [donnée]</em></strong> entre le « .end » et la fin du programme (généralement un <strong>ret</strong>), et repérées par un <em>label</em>. C'est ce label qui contiendra l'adresse de votre donnée ; c'est un pointeur ! ;) <br/> Vous pouvez choisir le label que vous voulez, du moment qu'il vous rappelle votre donnée.<br/> Comme ici, c'est une chaîne de caractères, on pourra utiliser du texte entre guillemets.</p><aside id="r-532895" data-claire-element-id="532895" data-claire-semantic="warning"><p id="r-532894" data-claire-element-id="532894">Ne <strong>SURTOUT pas oublier</strong> un « <em><strong>,0</strong></em> » après la fermeture des guillemets ; c'est ce qui permet au programme de reconnaître la fin de la chaîne.</p></aside><pre id="r-532896" data-claire-element-id="532896"><code>formule_de_politesse:
.db &quot;bonjour !&quot;,0</code></pre><p id="r-532897" data-claire-element-id="532897">Je reviens maintenant sur les coordonnées.<br/> À votre niveau, vous avez juste besoin de savoir que l'assembleur sur la TI n'utilise qu'un écran qui sert à tout l'affichage ; il n'y a pas de distinction entre l'écran graphique et l'écran principal en Basic.<br/> Il représente un tableau de 96 x 64 pixels, numérotés de haut en bas et de gauche à droite :</p><figure id="r-532899" data-claire-element-id="532900"><img id="r-532898" data-claire-element-id="532898" src="medias/uploads.siteduzero.com_files_85001_86000_85286.png" alt="Image utilisateur"/></figure><p id="r-532901" data-claire-element-id="532901">Retenez bien cette numérotation, car c'est elle qui est utilisée dans une majorité de cas.<br/> Toutefois, les variables <strong>curcol</strong> et <strong>currow</strong> qui gèrent les grands caractères voient l'écran comme un tableau de 8 x 16 cases. Chaque case peut contenir un caractère.<br/> Je crois que j'ai tout dit... On passe au programme ? ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">
<span class="arrow"></span>
<span class="next">Un peu de texte...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
<span class="next">« Hello world! », vous connaissez ?!</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Helloworldvousconnaissez"></a><h2>« Hello world! », vous connaissez ?!</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
<span class="arrow"></span>
<span class="next">Ressources nécessaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">
<span class="next">Trucs utiles...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-hello-world-vous-connaissez" data-claire-element-id="532940">« Hello world! », vous connaissez ?!</h4><p id="r-532904" data-claire-element-id="532904">Le fameux « hello, world » ! Que de nostalgie ! :lol: .<br/> Le principe du programme est simple : on efface l'écran, on affiche « HELLO, WORLD! » en grand au milieu et on stoppe le programme.</p><p id="r-532905" data-claire-element-id="532905">Je rappelle les notations des <em>romcalls</em> et leurs adresses :</p><ul id="r-532914" data-claire-element-id="532914"><li id="r-532907" data-claire-element-id="532907"><p id="r-532906" data-claire-element-id="532906">_clrlcdfull : $4540 ;</p></li><li id="r-532909" data-claire-element-id="532909"><p id="r-532908" data-claire-element-id="532908">_puts : $450A ;</p></li><li id="r-532911" data-claire-element-id="532911"><p id="r-532910" data-claire-element-id="532910">currow : $844B ;</p></li><li id="r-532913" data-claire-element-id="532913"><p id="r-532912" data-claire-element-id="532912">curcol : $844C.</p></li></ul><p id="r-532915" data-claire-element-id="532915">À présent, c'est à vous !<br/> Si vous avez bien suivi les chapitres précédents, cela ne devrait vous poser aucun problème ! ;) <br/> Bon, comme c'est le début, je vous mâche un peu le travail ; pour être centré, ce texte doit être placé aux coordonnées (ligne : 3, colonne : 1).<br/> Perso, j'obtiens ça :</p><div id="r-532918" data-claire-element-id="532918"><div id="r-532917" data-claire-element-id="532917"><pre id="r-532916" data-claire-element-id="532916"><code>#define bcall(xxxx) rst 28h \ .dw xxxx
_clrlcdfull .equ $4540
_puts .equ $450A
currow .equ $844B
.org $9D93
.db $BB,$6D
        bcall(_clrlcdfull)
        ld de,$0103
        ld (currow),de
        ld hl,texte
        bcall(_puts)    
        ret
texte:
.db &quot;HELLO, WORLD! &quot;,0
.end</code></pre></div></div><p id="r-532919" data-claire-element-id="532919">Encore une fois, les notations peuvent changer mais essayez d'utiliser les miennes ; ça vous servira plus tard... ^^ <br/> Remarquez l'espace après le point d'exclamation ; il sert simplement à éviter que le « Done » ne se superpose au texte.</p><figure id="r-532921" data-claire-element-id="532922"><img id="r-532920" data-claire-element-id="532920" src="medias/uploads.siteduzero.com_files_85001_86000_85287.png" alt="Image utilisateur"/></figure><p id="r-532923" data-claire-element-id="532923">Voilà... Ne vous inquiétez toujours pas pour le Done !</p><p id="r-532924" data-claire-element-id="532924">Maintenant que vous avez une forme de programme bien définie, essayez de changer le texte, de changer la police, la position...</p><p id="r-532925" data-claire-element-id="532925">Quelques erreurs peuvent subvenir sans que vous compreniez pourquoi ; voici les plus fréquentes.</p><h6 id="r-maximum-number-of-args-exceeded" data-claire-element-id="532929">Maximum number of args exceeded</h6><p id="r-532926" data-claire-element-id="532926">C'est vrai, quand on ne sait pas quoi faire, ça énerve beaucoup !<br/> Pour contrer ceci, séparez votre texte en plusieurs parties sous le même <em>label</em>.<br/> Concrètement, ça donne ça :</p><pre id="r-532927" data-claire-element-id="532927"><code>Ne faites pas
 
texte:
.db &quot;Ce texte est beaucoup trop long !&quot;,0
 
mais
 
texte:
.db &quot;Ce texte est beaucoup trop lon&quot;
.db &quot;g !&quot;,0</code></pre><p id="r-532928" data-claire-element-id="532928">Compris ?! :)</p><h6 id="r-unrecognized-directive" data-claire-element-id="532932">Unrecognized directive</h6><p id="r-532930" data-claire-element-id="532930">Il est très probable que vous ayez oublié le <em><strong>.db</strong></em>. :p</p><pre id="r-532931" data-claire-element-id="532931"><code>texte:
&quot;HELLO, WORLD!&quot;,0</code></pre><h6 id="r-unrecognized-argument" data-claire-element-id="532939">Unrecognized argument</h6><p id="r-532933" data-claire-element-id="532933">Vous avez tenté d'entrer une valeur dans <strong>currow</strong> sans passer par un registre.</p><pre id="r-532934" data-claire-element-id="532934"><code>ld (currow),$0103</code></pre><aside id="r-532936" data-claire-element-id="532936" data-claire-semantic="information"><p id="r-532935" data-claire-element-id="532935">Si vous oubliez le « ,0 » à la fin d'un texte, vous risquez d'avoir des surprises même si le code est correctement compilé. En effet, tant que le compilateur ne trouvera pas un zéro, il considérera que les données des adresses suivant votre texte en font également partie... :-°</p></aside><p id="r-532937" data-claire-element-id="532937">Je précise également que le Bloc-notes ne code pas tous les caractères comme TASM, ce qui peut entraîner des différences entre le texte du code et celui du programme. Par exemple, « <em><strong>é</strong></em> » ne s'affichera pas comme tel ; il faudra utiliser <em><strong>150</strong></em> à la place.<br/> J'expliquerai pourquoi plus tard...</p><p id="r-532938" data-claire-element-id="532938">OK, un chapitre court, mais qui j'espère vous donne envie d'en faire plus !<br/> L'écriture est tout de même fondamentale pour n'importe quel programme, alors entraînez-vous. ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
<span class="arrow"></span>
<span class="next">Ressources nécessaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">
<span class="next">Trucs utiles...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Trucsutiles..."></a><h2>Trucs utiles...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
<span class="arrow"></span>
<span class="next">« Hello world! », vous connaissez ?!</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
<span class="next">Flags</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-532942" data-claire-element-id="532942">OK, encore du cours théorique, mais cela simplifiera beaucoup vos prochains programmes, et vous pourrez les complexifier (paradoxal, non ?!).<br/> Bah oui, un programme linéaire qui affiche du texte n'est pas super utile ! :D <br/> Mais ne vous inquiétez pas, on apprend... :ange:</p>
</div><a name="Flags"></a><h2>Flags</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">
<span class="arrow"></span>
<span class="next">Trucs utiles...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
<span class="next">Sauts / Sauts conditionnels</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-flags-3" data-claire-element-id="532992">Flags</h4><p id="r-532943" data-claire-element-id="532943">Attention... Avec les sauts, voilà un autre pilier de la programmation ! :) <br/> Jusqu'à présent, vos programmes étaient linéaires, c'est-à-dire qu'ils se déroulaient tranquillement du début du code à sa fin.<br/> Mais si vous voulez reproduire plusieurs fois une suite d'instructions, vous n'allez pas la taper chaque fois que vous en avez besoin.<br/> Et si vous voulez exécuter telle commande seulement si votre variable vaut telle valeur, vous avez besoin des instructions de saut et des conditions. Ces conditions sont vérifiables grâce aux <em>flags</em>.</p><h5 id="r-flags-du-processeur" data-claire-element-id="532964">Flags du processeur</h5><p id="r-532944" data-claire-element-id="532944">Ça vous rappelle quelque chose ? ;) Eh oui, le registre <strong>f</strong> !<br/> Voici sa structure :</p><figure id="r-532946" data-claire-element-id="532947"><img id="r-532945" data-claire-element-id="532945" src="medias/uploads.siteduzero.com_files_85001_86000_85288.png" alt="Image utilisateur"/></figure><p id="r-532948" data-claire-element-id="532948">Les <em>flags</em> sont des <strong>bits</strong>, ils ne peuvent donc prendre que deux valeurs : 0 ou 1.<br/> Voyons la signification de ceux-ci, propres au processeur.</p><h6 id="r-s-signe" data-claire-element-id="532950">S - Signe</h6><p id="r-532949" data-claire-element-id="532949">Ce <em>flag</em> indique le signe de l'accumulateur ; il est mis à 1 lorsque l'accumulateur contient un nombre négatif, et à 0 quand ce nombre est positif.<br/> En fait, si vous avez bien suivi, il contient le bit n°7 de l'accumulateur !</p><h6 id="r-z-zero" data-claire-element-id="532952">Z - Zéro</h6><p id="r-532951" data-claire-element-id="532951">Simple ! Si a = 0, alors z = 1, et vice-versa. ^^</p><h6 id="r-532954" data-claire-element-id="532954">-</h6><p id="r-532953" data-claire-element-id="532953">Les bits 5 et 3 ne sont pas utilisés.</p><h6 id="r-h-half-carry" data-claire-element-id="532956">H - Half-Carry</h6><p id="r-532955" data-claire-element-id="532955">Il est seulement utilisé avec l'instruction DAA.<br/> Vous pouvez l'oublier...</p><h6 id="r-p-v-parite-depassement" data-claire-element-id="532958">P/V - Parité / Dépassement</h6><p id="r-532957" data-claire-element-id="532957">Un dépassement se produit lorsqu'une valeur dépasse en positif ou négatif la capacité d'un registre 8 bits signé (moins de -127 ou plus de 127).<br/> Dans ce cas, le <em>flag</em> est mis à 1.<br/> La parité représente simplement le bit de poids faible. Il sera donc à 1 si l'accumulateur contient un nombre impair et à 0 s'il contient un nombre pair.<br/> La parité ou le dépassement est concerné en fonction de l'instruction utilisée.</p><h6 id="r-n-addition-soustraction" data-claire-element-id="532960">N - Addition / Soustraction</h6><p id="r-532959" data-claire-element-id="532959">Il s'utilise exclusivement avec DAA. Vous pouvez donc l'oublier aussi !</p><h6 id="r-c-carry" data-claire-element-id="532963">C - Carry</h6><p id="r-532961" data-claire-element-id="532961">Il agit un peu comme le <em>flag</em><strong>P/V</strong>, à la différence qu'il détecte le dépassement d'un « <em>unsigned 8 bits</em> » (moins de 0 ou plus de 255).<br/> Il est mis à 1 en cas de dépassement.</p><p id="r-532962" data-claire-element-id="532962">Voilà, ça ne doit pas trop vous parler ; on verra des utilisations concrètes un peu plus tard.</p><h5 id="r-flags-de-la-calculatrice" data-claire-element-id="532991">Flags de la calculatrice</h5><p id="r-532965" data-claire-element-id="532965">Vous vous rappelez le fameux « Done » qui survient à la fin de l'exécution d'un programme ?<br/> Pour le renier ( :lol: ), il faut utiliser la commande <strong><em>res doneprgm,(iy+doneflags)</em></strong>.</p><p id="r-532966" data-claire-element-id="532966">Étudions cette commande...<br/><strong>res</strong> est le contraire de <strong>set</strong> ; ces instructions ne sont peut-être pas inconnues car elles sont très utilisées.<br/><strong>set</strong> s'utilise pour une mise à 1 et <strong>res</strong> (pour <em>reset</em> :) ) pour une mise à 0.</p><p id="r-532967" data-claire-element-id="532967">Je suis déjà passé très rapidement sur <strong>IY</strong>, juste pour dire qu'il s'agissait d'un index de registre. En fait, vous pouvez l'utiliser comme un registre 16 bits standard mais son utilité n'est pas là, puisqu'il pointe à la base sur les <em>flags</em> !</p><aside id="r-532969" data-claire-element-id="532969" data-claire-semantic="information"><p id="r-532968" data-claire-element-id="532968">Sa valeur doit normalement être $89F0, souvenez-vous en si vous la changez.</p></aside><p id="r-532970" data-claire-element-id="532970">Vous voyez le signe « + » ? Il sert pour l'<em><strong>offset</strong></em>.<br/> En effet, iy pointe sur les <em>flags</em>. Il contient donc l'adresse du 1er octet contenant des <em>flags</em>. Pour utiliser les autres, on devra donc sauter un certain nombre d'octets dans la mémoire.</p><p id="r-532971" data-claire-element-id="532971"><strong>doneflag</strong> représente donc le nombre d'octets à sauter pour arriver à la bonne série de <em>flags</em>.<br/> Ceux-ci ne représentent que des bits, perdus dans un octet. Le rôle de <strong>doneprgm</strong> est de « pointer » la position du bit dans l'octet.</p><aside id="r-532973" data-claire-element-id="532973" data-claire-semantic="warning"><p id="r-532972" data-claire-element-id="532972">Encore une fois, j'utilise des notations mais le programme ne se compilera pas si vous n'affectez pas de valeur à <strong>doneprgm</strong> et <strong>doneflags</strong>.</p></aside><p id="r-532974" data-claire-element-id="532974">Regardez d'ailleurs la « vraie » commande : <code>res 5,(iy+0)</code></p><p id="r-532975" data-claire-element-id="532975">En clair, vous devrez ajouter dans vos programmes :</p><pre id="r-532976" data-claire-element-id="532976"><code>doneflags .equ 0
doneprgm .equ 5</code></pre><p id="r-532977" data-claire-element-id="532977">Et</p><pre id="r-532978" data-claire-element-id="532978"><code>...
        res doneprgm,(iy+doneflags)
ret</code></pre><p id="r-532979" data-claire-element-id="532979">Je précise que nous voyons ces instructions à l'occasion de l'étude des <em>flags</em> mais elles peuvent s'utiliser d'une autre manière.<br/> Tout ce que nous avons, ce sont deux valeurs !<br/> OK, il y a quand même des restrictions. :colere: La première valeur doit être un entier constant et la deuxième un registre 8 bits.</p><pre id="r-532980" data-claire-element-id="532980"><code>set/res [entier constant],[registre 8 bits]</code></pre><p id="r-532981" data-claire-element-id="532981">ou</p><pre id="r-532982" data-claire-element-id="532982"><code>set/res [entier constant],([index de registre]+[entier constant])</code></pre><p id="r-532983" data-claire-element-id="532983">Exemple :</p><pre id="r-532984" data-claire-element-id="532984"><code>ld a,1 ; a = %00000001
set 4,a ; a = %00010001</code></pre><div id="r-532986" data-claire-element-id="532986" data-claire-semantic="question"><p id="r-532985" data-claire-element-id="532985">Tout ça c'est bien beau mais comment je fais pour savoir si tel <em>flag</em> est actif ou non ?</p></div><p id="r-532987" data-claire-element-id="532987">Eh bien soit vous ne cherchez pas à savoir et vous le définissez dans tous les cas ; soit vous utilisez l'instruction <strong>bit</strong>.<br/> Ses arguments sont exactement les mêmes que <em>res</em> et <em>set</em>, et elle retourne le bit dans l'accumulateur.</p><p id="r-532988" data-claire-element-id="532988"><code>bit 5,b</code> ou <code>bit 5,(iy+0)</code></p><aside id="r-532990" data-claire-element-id="532990" data-claire-semantic="information"><p id="r-532989" data-claire-element-id="532989">Notez bien que le « +0 » n'est pas indispensable, l'important est d'avoir un index de registre entre parenthèses.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">
<span class="arrow"></span>
<span class="next">Trucs utiles...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
<span class="next">Sauts / Sauts conditionnels</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Sauts_Sautsconditionnels"></a><h2>Sauts / Sauts conditionnels</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
<span class="arrow"></span>
<span class="next">Flags</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
<span class="next">Les fichiers include</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-sauts-sauts-conditionnels" data-claire-element-id="533047">Sauts / Sauts conditionnels</h4><h5 id="r-les-labels-7" data-claire-element-id="532999">Les labels</h5><p id="r-532993" data-claire-element-id="532993">Vous en avez déjà utilisé... Ça vous revient ?<br/> Pour repérer votre texte dans le chapitre précédent !<br/> Eh bien on a fait le tour ; l'utilité du label est bien sûr de <em>repérer</em>.<br/> En fait, votre programme est obligatoirement stocké dans la RAM pour être exécuté ; il peut donc être pointé. Le label est donc le pointeur d'un endroit du programme, et contient toujours une adresse sur 16 bits.<br/> Encore une fois, c'est ce que vous en faites qui détermine son utilité ; rien ne vous empêche de stocker des variables aux adresses des labels (base du SMC), de l'utiliser pour repérer une donnée ou une partie du programme.<br/> De toute façon, ça ne change rien à son fonctionnement !</p><pre id="r-532994" data-claire-element-id="532994"><code>ld a,(texte) ; a = 162
...
ret
texte:
.db 162,150,0
.end</code></pre><pre id="r-532995" data-claire-element-id="532995"><code>#include &quot;ultimate.inc&quot;
start_prgm:
ret
.end</code></pre><p id="r-532996" data-claire-element-id="532996"><em><strong>start_prgm contient l'adresse de ret et (start_prgm) correspond à la « traduction » en chiffres de ret.</strong></em><br/> Si vous ne comprenez pas ça, ce n'est pas bien grave ! ^^</p><aside id="r-532998" data-claire-element-id="532998" data-claire-semantic="information"><p id="r-532997" data-claire-element-id="532997">Un label entre deux parties du programme ne modifiera pas l'ordre d'exécution puisque celui-ci se déroule normalement du haut vers le bas.</p></aside><h5 id="r-sauts-et-sauts-conditionnels" data-claire-element-id="533026">Sauts et sauts conditionnels</h5><p id="r-533000" data-claire-element-id="533000">Maintenant qu'on a repéré des endroits du programme, il faut des instructions pour y accéder.<br/> On utilise <strong>jp</strong> ou <strong>jr</strong>.</p><pre id="r-533001" data-claire-element-id="533001"><code>jp [label]
jr [label]</code></pre><p id="r-533002" data-claire-element-id="533002">Leurs caractéristiques diffèrent sur leur taille et leur portée.<br/><strong>jp</strong> occupe un octet de plus que <strong>jr</strong>, mais permet d'accéder à n'importe quel endroit du programme, alors que jr ne peut « sauter » que de 128 octets vers le haut ou le bas (par comparaison, <strong>jp</strong> peut sauter 32 Ko, donc toute la RAM...).</p><p id="r-533003" data-claire-element-id="533003">Maintenant, voyons les conditions.<br/> Vous avez peut-être essayé de tester les états des bits composant le registre <strong>f</strong> avec l'instruction <strong>bit</strong> ; et ça n'a pas marché !<br/> Je rappelle que <strong>f</strong> est inaccessible en lecture comme en écriture (cependant, il l'est bit par bit en fonction de l'état des <em>flags</em>).<br/> En fait, des notations dérivent de ces <em>flags</em> ; voici leur liste :</p><ul id="r-533020" data-claire-element-id="533020"><li id="r-533005" data-claire-element-id="533005"><p id="r-533004" data-claire-element-id="533004"><strong>NZ</strong> - non zéro ;</p></li><li id="r-533007" data-claire-element-id="533007"><p id="r-533006" data-claire-element-id="533006"><strong>Z</strong> - zéro ;</p></li><li id="r-533009" data-claire-element-id="533009"><p id="r-533008" data-claire-element-id="533008"><strong>NC</strong> - no carry ;</p></li><li id="r-533011" data-claire-element-id="533011"><p id="r-533010" data-claire-element-id="533010"><strong>C</strong> - carry ;</p></li><li id="r-533013" data-claire-element-id="533013"><p id="r-533012" data-claire-element-id="533012"><strong>PO</strong> - parity odd (impair) ;</p></li><li id="r-533015" data-claire-element-id="533015"><p id="r-533014" data-claire-element-id="533014"><strong>PE</strong> - parity even (pair) ;</p></li><li id="r-533017" data-claire-element-id="533017"><p id="r-533016" data-claire-element-id="533016"><strong>P</strong> - positif ;</p></li><li id="r-533019" data-claire-element-id="533019"><p id="r-533018" data-claire-element-id="533018"><strong>M</strong> - minus (négatif).</p></li></ul><p id="r-533021" data-claire-element-id="533021">Ces notations se couplent aux instructions sous la forme<code>jp/jr [condition],[label]</code><br/> Cela signifie <em><strong>aller à [label] si [condition] est vraie.</strong></em><br/> Cependant, toutes les conditions ne peuvent pas s'associer à toutes les instructions...</p><figure id="r-533023" data-claire-element-id="533024"><img id="r-533022" data-claire-element-id="533022" src="medias/uploads.siteduzero.com_files_85001_86000_85289.png" alt="Image utilisateur"/></figure><p id="r-533025" data-claire-element-id="533025">On dispose également de l'instruction <strong>djnz</strong> qui s'utilise simplement avec la syntaxe <code>djnz [label]</code><br/> Ceci décrémente le registre <strong>b</strong> et va à [label] si <strong>b</strong> diffère de zéro. Dans le cas contraire, le code se poursuit comme s'il n'y avait pas cette instruction.<br/> Très utile pour les boucles puisqu'il n'y a pas d'équivalent de <em>For</em>, ni de <em>While</em>, ni de <em>Repeat</em>... en ASM. :'(</p><h5 id="r-procedures" data-claire-element-id="533039">Procédures</h5><p id="r-533027" data-claire-element-id="533027">Ce terme désigne simplement un sous-programme, également appelé « routine ».<br/> Le principe d'une routine est d'éviter la répétition d'une suite d'instructions sans perturber l'ordre d'exécution (en théorie !).</p><p id="r-533028" data-claire-element-id="533028">Elle est repérée par un <em>label</em> et se termine par un <strong>ret</strong>. Pour l'appeler, on utilise l'instruction <strong>call</strong> qui peut - au même titre que <strong>ret</strong> - être jointe à n'importe quelle condition.</p><pre id="r-533029" data-claire-element-id="533029"><code>call [condition],[label]
ret [condition]</code></pre><pre id="r-533030" data-claire-element-id="533030"><code>...
call setvputs
...
 
setvputs:
ld (pencol),de
bcall(_vputs)
ret</code></pre><p id="r-533031" data-claire-element-id="533031">Regardez cette routine ; lorsque le <strong>call</strong> est exécuté, il se passe la même chose que si les commandes de la routine - à l'exception du <strong>ret</strong> - étaient copiées à l'endroit de l'appel.<br/> Autrement dit, ce code peut être remplacé par :</p><pre id="r-533032" data-claire-element-id="533032"><code>...
ld (pencol),de
bcall(_vputs)
...</code></pre><p id="r-533033" data-claire-element-id="533033">Bien entendu, dans ce cas la routine n'a plus aucun intérêt, mais si vous devez utiliser plusieurs fois les commandes, la taille du programme se trouve réduite en utilisant un sous-programme.</p><div id="r-533035" data-claire-element-id="533035" data-claire-semantic="question"><p id="r-533034" data-claire-element-id="533034">Mais alors <strong>ret</strong> ne sert pas à quitter le programme ?</p></div><p id="r-533036" data-claire-element-id="533036">Pas dans la cas d'une routine, où il sert à retourner dans le programme principal.<br/> J'expliquerai comment et pourquoi dans un chapitre sur les optimisations, car des applications intéressantes peuvent en être tirées.</p><aside id="r-533038" data-claire-element-id="533038" data-claire-semantic="error"><p id="r-533037" data-claire-element-id="533037">Vous vous souvenez du <em>stack</em> ? Eh bien une procédure ne doit <strong>jamais</strong> retirer une valeur qui y était présente avant son appel.</p></aside><h5 id="r-comparaison-4" data-claire-element-id="533044">Comparaison</h5><p id="r-533040" data-claire-element-id="533040">Maintenant que vous connaissez les conditions, il ne reste plus que les instructions qui les déclenchent.<br/> La plus utilisée est <strong>cp</strong> : <code>cp [valeur constante]</code> ou <code>cp [registre 8 bits]</code>.<br/> Cette commande soustrait virtuellement [valeur constante] ou [registre 8 bits] à <strong>a</strong> et adapte les <em>flags</em> en fonction du résultat. L'accumulateur restera donc inchangé avant et après <strong>cp</strong>.</p><p id="r-533041" data-claire-element-id="533041"><strong>Exemple :</strong><br/> Si a&gt;8<br/> Alors aller à <em>suite</em></p><pre id="r-533042" data-claire-element-id="533042"><code>cp 8
jp p,suite</code></pre><p id="r-533043" data-claire-element-id="533043">Imaginons que <strong>a</strong> vaut 12 ; on lui soustrait 8.<br/> Son résultat sera 4 ; donc le <em>flag</em><em>positif</em> sera activé, et <strong>a</strong> restera à 12.<br/> Dans le cas général, le résultat sera positif si <strong>a</strong> est supérieur à 8. Compris ?! :)</p><h5 id="r-autres-13" data-claire-element-id="533046">Autres</h5><p id="r-533045" data-claire-element-id="533045">La comparaison n'est pas la seule à affecter les <em>flags</em> ; en fait, la majorité des instructions agissent dessus.<br/> Par exemple, une addition avec l'accumulateur mettra P/V à 1 en cas de dépassement, P à 0 si le résultat est positif... etc.<br/> Je pense mettre en annexe la liste des instructions du z80 avec leur description et leurs effets, mais ce n'est pas pour tout de suite !<br/> De toute façon, <strong>cp</strong> convient dans la majorité des cas, et vous pouvez toujours me demander si vous avez un problème. :ange:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
<span class="arrow"></span>
<span class="next">Flags</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
<span class="next">Les fichiers include</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesfichiersinclude"></a><h2>Les fichiers include</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
<span class="arrow"></span>
<span class="next">Sauts / Sauts conditionnels</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
<span class="next">Parlons de bits...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-fichiers-include" data-claire-element-id="533110">Les fichiers include</h4><p id="r-533048" data-claire-element-id="533048">Vous vous demandez peut-être pourquoi je vous impose des notations de <em>romcalls</em> et d'adresses depuis le début alors que vous pouvez utiliser n'importe quel nom, du moment que vous connaissez l'adresse ?<br/> Eh bien simplement car ces notations sont celles du fichier <em>include</em> que je possède et que je vous conseille également de posséder car je suivrai le cours avec.</p><p id="r-533049" data-claire-element-id="533049"><strong><a href="http://www.mediafire.com/download.php?blfix2x2gti">Télécharger le fichier <em>include</em></a></strong></p><p id="r-533050" data-claire-element-id="533050">C'était à la base le fichier ti83plus.inc, puis j'ai ajouté des trucs, des machins... Et finalement ça va beaucoup simplifier nos programmes !</p><p id="r-533051" data-claire-element-id="533051">Jetez un coup d'oeil, ce fichier est encore assez bien organisé !<br/> Vous pouvez voir qu'il est découpé en plusieurs parties.</p><h6 id="r-defines" data-claire-element-id="533053">Defines</h6><p id="r-533052" data-claire-element-id="533052">Le seul que vous avez utilisé à présent était <strong>bcall(xxxx)</strong> ou éventuellement pour des notations. Cette commande peut également s'associer à des conditions.<br/> Pour l'instant, oubliez <strong>bjump</strong> et <strong>errhandon</strong>.</p><h6 id="r-zones-libres" data-claire-element-id="533055">Zones libres</h6><p id="r-533054" data-claire-element-id="533054">Eh oui, les <em>saferam</em> ! Pas grand-chose à dire ; relisez la partie <em>Variables définies par l'utilisateur</em> si vous avez oublié ce que c'est...</p><h6 id="r-ion-functions-mirageos-subroutines" data-claire-element-id="533059">Ion functions / MirageOS subroutines</h6><p id="r-533056" data-claire-element-id="533056">Si vous ne connaissez pas Ion ni MirageOS, ce n'est pas grave, vous n'aurez pas à vous servir de ces routines.</p><aside id="r-533058" data-claire-element-id="533058" data-claire-semantic="warning"><p id="r-533057" data-claire-element-id="533057">Ce sont des <strong>routines</strong>, pas des <em>romcalls</em>. Elles seront appelées avec <strong>call</strong>.</p></aside><h6 id="r-system-variable-equates" data-claire-element-id="533061">System Variable Equates</h6><p id="r-533060" data-claire-element-id="533060">Bah... Les équations des variables système !<br/> J'en profite pour préciser que ce fichier <em>include</em> couvre une majorité - pour ne pas dire tout - des possibilités de programmation ; il est donc normal que vous ne compreniez pas certaines choses. :honte: <br/> Mais j'essaierai de parler de tout.</p><h6 id="r-run-indicators" data-claire-element-id="533063">Run indicators</h6><p id="r-533062" data-claire-element-id="533062">Pas grand-chose à dire... Permet de gérer l'apparence de l'indicateur ; vous savez, la petite barre en haut à droite !</p><h6 id="r-macro-to-call-base-code-from-an-app" data-claire-element-id="533068">Macro to call base code from an app</h6><p id="r-533064" data-claire-element-id="533064">Oubliez ça aussi sec !</p><div id="r-533066" data-claire-element-id="533066" data-claire-semantic="question"><p id="r-533065" data-claire-element-id="533065">Bah pourquoi ?</p></div><p id="r-533067" data-claire-element-id="533067">Nous, on fait des programmes, pas des applications !<br/> J'en parlerai peut-être si j'arrive à en compiler une, raaaaaaaaahhh. :colere: <br/> Sinon, sachez que le langage est le même mais les commandes ne se gèrent pas toutes de la même manière (essayez de quitter une application avec <strong>ret</strong>, ha ha !!).</p><h6 id="r-common-subroutine-rst-numbers" data-claire-element-id="533070">Common subroutine RST numbers</h6><p id="r-533069" data-claire-element-id="533069">Je ne pense pas encore avoir tout compris, mais certaines <em>romcalls</em> peuvent être appelées avec l'instruction <strong>rst</strong> seule, ce qui implique un gain de rapidité.</p><h6 id="r-entry-points" data-claire-element-id="533072">Entry points</h6><p id="r-533071" data-claire-element-id="533071">Aaaaaaaaaaaahhh !<br/> Bah si ! C'est tout simplement la liste des <em>romcalls</em> !<br/> Y en a un bon paquet, hein ?!<br/> Bon, certaines sont explicites, d'autres incompréhensibles...<br/> De toute façon j'expliquerai comment fonctionnent celles que j'utiliserai.<br/> Vous pouvez regarder si vous voyez des trucs intéressants : ça motive !</p><h6 id="r-system-defined-ram-variable-address-equates" data-claire-element-id="533074">System-defined RAM Variable Address Equates</h6><p id="r-533073" data-claire-element-id="533073">Un nom pareil, ça ne s'oublie pas, si ?<br/> Vous avez donc la localisation de toutes les variables utilisées par la calculatrice.<br/> Je dois avouer que je n'en ai pas utilisé beaucoup jusqu'à présent, alors l'utilité de la plupart me reste inconnue...</p><h6 id="r-language-localization-equates" data-claire-element-id="533076">Language localization equates</h6><p id="r-533075" data-claire-element-id="533075">Je pense que vous devinez à quoi ça sert mais je ne sais <strong>pas du tout</strong> comment on l'utilise... :honte:</p><h6 id="r-system-and-state-flags" data-claire-element-id="533078">System and State Flags</h6><p id="r-533077" data-claire-element-id="533077">Liste des <em>flags</em>, et effets pour des valeurs données. Pas mal de possibilités, vous pouvez les tester, normalement vous savez le faire !</p><h6 id="r-character-font-equates" data-claire-element-id="533080">Character Font equates</h6><p id="r-533079" data-claire-element-id="533079">Vous vous rappelez l'accent aigu du chapitre sur le texte ? Il n'apparaissait pas car son codage était modifié. Eh bien maintenant vous pourrez remplacer les caractères rebelles par leur « traduction » sur TI.<br/> Si on regarde à « leAcute » (« e » accent aigu si vous n'avez pas compris), on trouve $96 qui équivaut à... 150 !<br/> Preuve que je ne raconte pas de bêtises !</p><h6 id="r-keypress-equates" data-claire-element-id="533082">Keypress Equates</h6><p id="r-533081" data-claire-element-id="533081">Liste des valeurs renvoyées par la <em>romcall</em> _getkey.<br/> Je l'expliquerai dans le chapitre des entrées de l'utilisateur.</p><h6 id="r-ti-83-plus-context-equates" data-claire-element-id="533084">TI-83 Plus Context Equates</h6><p id="r-533083" data-claire-element-id="533083">Des notations supplémentaires à la partie précédente...</p><h6 id="r-scan-code-equates" data-claire-element-id="533086">Scan Code Equates</h6><p id="r-533085" data-claire-element-id="533085">Encore une liste de valeurs retour d'une <em>romcall</em> ; il s'agit cette fois de _getcsc.<br/> Même remarque que pour _getkey.</p><h6 id="r-tokens" data-claire-element-id="533088">Tokens</h6><p id="r-533087" data-claire-element-id="533087">Notion assez subtile ; j'y consacrerai une sous-partie. De toute façon nous n'en avons pas l'utilité pour l'instant.</p><h6 id="r-data-type-equates" data-claire-element-id="533090">Data Type Equates</h6><p id="r-533089" data-claire-element-id="533089">Pour différencier les listes des matrices, ou les équations des programmes... la calculatrice accorde à chaque objet un octet « type ».<br/> C'est cet octet qui détermine la nature de l'objet ; on a ici la liste des valeurs avec leur correspondance.</p><h6 id="r-parser-equates" data-claire-element-id="533092">Parser Equates</h6><p id="r-533091" data-claire-element-id="533091">Similaire à la liste précédente, mis à part qu'il s'agit ici des valeurs d'octets types des <em>fonctions</em>, genre fmin(, bal(...</p><h6 id="r-i-o-equates" data-claire-element-id="533094">I/O equates</h6><p id="r-533093" data-claire-element-id="533093">I/O est l'abréviation de <em>Input/Output</em>, soit Entrée / sortie.<br/> Ces octets servent pour la transmission et la réception de données entre calculatrices.</p><h6 id="r-interrupt-equates-memory-paging-equates-device-codes" data-claire-element-id="533096">Interrupt equates/Memory paging equates/DEVICE CODES</h6><p id="r-533095" data-claire-element-id="533095">Je ne sais pas encore à quoi ça sert... :'(</p><h6 id="r-lcd-driver-equates" data-claire-element-id="533098">LCD Driver equates</h6><p id="r-533097" data-claire-element-id="533097">Adresse des drivers permettant la communication directe avec l'écran LCD.</p><h6 id="r-system-error-codes" data-claire-element-id="533100">System Error Codes</h6><p id="r-533099" data-claire-element-id="533099">Liste des identifiants des erreurs.</p><h6 id="r-equates-to-ram-locations-for-stat-vars" data-claire-element-id="533109">EQUATES TO RAM LOCATIONS FOR STAT VARS</h6><p id="r-533101" data-claire-element-id="533101">C'est assez clair ; adresse mémoire des variables statistiques...</p><p id="r-533102" data-claire-element-id="533102">Vous aurez remarqué, les noms appartenant à une partie commencent généralement par la même lettre, ce qui permet de les identifier rapidement. Certaines notations, comme les touches, restent les mêmes.</p><p id="r-533103" data-claire-element-id="533103">Par exemple : <em>yequ</em> correspond à l'appui sur <strong>Y=</strong> et est précédée d'un <em><strong>k</strong></em> pour _getkey, d'un <em><strong>sk</strong></em> pour _getcsc... etc.</p><p id="r-533104" data-claire-element-id="533104">Remarquez également que les lignes</p><pre id="r-533105" data-claire-element-id="533105"><code>.org $9D93
.db $BB,$6D</code></pre><p id="r-533106" data-claire-element-id="533106">sont présentes. En clair, après avoir inclus ce fichier au début de votre programme, vous n'avez plus qu'à écrire vos instructions !</p><p id="r-533107" data-claire-element-id="533107">Une dernière chose ; le .nolist du début, combiné au .list de la fin, permet de ne pas afficher tout le fichier <em>include</em> dans le document XLT. C'est quand même plus confortable !</p><p id="r-533108" data-claire-element-id="533108">OK, une partie assez barbante, mais maintenant vous devez avoir tout ce qu'il vous faut en matière d'adressage. C'est toujours ça dont je n'aurai plus à m'occuper. :lol:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
<span class="arrow"></span>
<span class="next">Sauts / Sauts conditionnels</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
<span class="next">Parlons de bits...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Parlonsdebits..."></a><h2>Parlons de bits...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
<span class="arrow"></span>
<span class="next">Les fichiers include</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">
<span class="next">Graphisme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-parlons-de-bits" data-claire-element-id="533172">Parlons de bits...</h4><p id="r-533111" data-claire-element-id="533111">Le langage de base de n'importe quel processeur, c'est le binaire.<br/> Si les instructions d'opérations décimales étaient assez rares et limitées, on peut agir beaucoup plus facilement sur les bits qui composent un octet.</p><p id="r-533112" data-claire-element-id="533112">Le langage de base de n'importe quel processeur, c'est le binaire.<br/> Si les instructions d'opérations décimales étaient assez rares et limitées, on peut agir beaucoup plus facilement sur les bits qui composent un octet.</p><h5 id="r-operateurs-logiques-4" data-claire-element-id="533133">Opérateurs logiques</h5><p id="r-533113" data-claire-element-id="533113">Ils étaient déjà présents en Basic et les revoilà !<br/> Nous disposons en ASM des opérateurs <strong>and</strong>, <strong>or</strong> et <strong>xor</strong>. Le <em>not</em> n'est plus de la partie, du moins sous ce nom-là !<br/> Ils agissent <strong>tous</strong> sur l'accumulateur.</p><p id="r-533114" data-claire-element-id="533114">Autrement dit, <code>xor b</code> effectuera l'opération <strong>a xor b</strong>.<br/> b peut être remplacé par une variable.</p><p id="r-533115" data-claire-element-id="533115">Le résultat est toujours stocké dans <strong>a</strong>.</p><p id="r-533116" data-claire-element-id="533116">Comment agissent ces opérateurs ?<br/> Vous connaissez peut-être les tables de vérité ? Il s'agit d'un tableau qui représente une fonction avec en entrée tous les états possibles pour chaque variable et en sortie, les états de la variable (généralement notée S) qui en résultent.</p><aside id="r-533118" data-claire-element-id="533118" data-claire-semantic="information"><p id="r-533117" data-claire-element-id="533117">Ici, le « b » peut être soit une valeur constante, soit un registre 8 bits.</p></aside><figure id="r-533120" data-claire-element-id="533121"><img id="r-533119" data-claire-element-id="533119" src="medias/uploads.siteduzero.com_files_88001_89000_88017.png" alt="Image utilisateur"/></figure><p id="r-533122" data-claire-element-id="533122">À quoi ça sert ?<br/> Bah pas à grand-chose, en fait. :honte: <br/> Disons qu'ils sont là si vous en avez besoin...</p><p id="r-533123" data-claire-element-id="533123">Leur principale utilité est le masquage de bits de différentes façons.<br/> Ainsi, pour mettre à 0 un certain nombre de bits, nous allons utiliser l'opérateur <strong>and</strong> avec une valeur binaire qui présentera des zéros aux mêmes bits que ceux qui doivent être masqués.<br/> Comment ça, c'est pas clair ?!</p><figure id="r-533125" data-claire-element-id="533126"><img id="r-533124" data-claire-element-id="533124" src="medias/uploads.siteduzero.com_files_85001_86000_85418.png" alt="Image utilisateur"/></figure><p id="r-533127" data-claire-element-id="533127">De même, pour masquer des bits à 1, il faudra utiliser <strong>or</strong> avec des bits à 1.<br/><strong>xor</strong>, quant à lui, est utile pour changer l'état d'un bit. Regardez sa table de vérité ; la sortie est à 1 quand les entrées sont différentes.<br/> Par exemple, pour changer l'état de <strong>a</strong> en suivant le schéma logique (c'est-à-dire 0 ou 1), on utilisera <strong>xor 1</strong>.<br/> Pourquoi ?<br/> Si <strong>a</strong> est à 0, alors <em>xor 1</em> renvoie 1 -&gt; <strong>a</strong> change d'état.<br/> De même, si <strong>a</strong> est à 1, alors <em>xor 1</em> renvoie 0.<br/> Compris ? :)</p><p id="r-533128" data-claire-element-id="533128">Allez, une autre utilité. Disons plutôt une optimisation : au lieu de <strong>ld a,0</strong>, utilisez <strong>xor a</strong>. Comme <strong>a</strong> = <strong>a</strong> (dingue o_O ), la fonction renverra toujours zéro, quelle que soit la valeur de <strong>a</strong> avant l'instruction.</p><p id="r-533129" data-claire-element-id="533129">Une dernière chose, j'ai dit que <em>not</em> n'était pas disponible... Il faut utiliser <strong>cpl [registre 8 bits]</strong> qui retourne le complément de la valeur présente dans le registre dans ce même registre.</p><p id="r-533130" data-claire-element-id="533130"><strong>Ex. :</strong> cpl %11001011 = %00110100</p><aside id="r-533132" data-claire-element-id="533132" data-claire-semantic="information"><p id="r-533131" data-claire-element-id="533131">Notez bien que les instructions sous forme d'opérateurs sont parmi les plus rapides de l'ASM. N'hésitez donc pas à remplacer d'autres commandes par des opérateurs (dans la mesure du possible :-° ).</p></aside><h5 id="r-decalage-rotation" data-claire-element-id="533171">Décalage / rotation</h5><p id="r-533134" data-claire-element-id="533134">Ça ne sert pas tous les jours mais si vous en avez besoin, vous serez bien contents !<br/> Un exemple ? Pour faire une routine de multiplication. Ça suit mieux déjà, non ? :lol:</p><aside id="r-533136" data-claire-element-id="533136" data-claire-semantic="warning"><p id="r-533135" data-claire-element-id="533135">Ils ne fonctionnent que sur des variables ou des registres 8 bits.</p></aside><h6 id="r-srl" data-claire-element-id="533144">SRL</h6><p id="r-533137" data-claire-element-id="533137">Décalage logique à droite ; on déplace tous les bits d'un cran vers la droite.</p><div id="r-533139" data-claire-element-id="533139" data-claire-semantic="question"><p id="r-533138" data-claire-element-id="533138">Ouais, et les bits 7 et 0, on en fait quoi ?</p></div><p id="r-533140" data-claire-element-id="533140">Mis à part le sens du décalage, c'est sur ce point que se distinguent les différentes instructions.<br/> Ici, le bit 7 est mis à 0 et le bit 0 va dans le <em>carry</em>.<br/> Donc si on a</p><pre id="r-533141" data-claire-element-id="533141"><code>#include &quot;ultimate.inc&quot;
ld a,%10010101
srl a ; a = %01001010
jp c,aff1
ret
aff1:
ld hl,text
ld de,0
bcall(_vputs)
ret
text:
.db &quot;Le carry est à true&quot;,0
.end</code></pre><p id="r-533142" data-claire-element-id="533142">&lt;gras&gt; la calculatrice affichera « Le carry est à true » et quittera le programme.<br/> En décimal, cette commande revient à diviser par deux en arrondissant à l'entier inférieur.</p><p id="r-533143" data-claire-element-id="533143">Bon : si vous avez compris celui-là, je ne vais pas m'éterniser sur les autres !</p><h6 id="r-sll" data-claire-element-id="533149">SLL</h6><p id="r-533145" data-claire-element-id="533145">Bon, elle a quelque chose de spécial... Pas définie dans TASM80.tab.<br/> :o <br/> Nan, revenez !<br/> Pour l'utiliser, ajoutez</p><pre id="r-533146" data-claire-element-id="533146"><code>.addinstr    SLL (HL)    CB36 2 NOP 1
.addinstr    SLL (IX*)   DDCB 4 ZIX 1 3600
.addinstr    SLL (IY*)   FDCB 4 ZIX 1 3600
.addinstr    SLL A       CB37 2 NOP 1
.addinstr    SLL B       CB30 2 NOP 1
.addinstr    SLL C       CB31 2 NOP 1
.addinstr    SLL D       CB32 2 NOP 1
.addinstr    SLL E       CB33 2 NOP 1
.addinstr    SLL H       CB34 2 NOP 1
.addinstr    SLL L       CB35 2 NOP 1</code></pre><p id="r-533147" data-claire-element-id="533147">&lt;gras&gt; au début de votre code dans le programme.</p><p id="r-533148" data-claire-element-id="533148">Là, on décale vers la gauche en mettant le bit 7 dans le carry et 1 dans le bit 0.<br/> Conséquence, cela revient à multiplier par deux et à ajouter un.</p><h6 id="r-sra" data-claire-element-id="533153">SRA</h6><p id="r-533150" data-claire-element-id="533150">Décalage arithmétique à droite.<br/> Les bits se décalent d'un cran vers la droite, le bit 7 reste inchangé et le bit 0 va dans le carry.</p><pre id="r-533151" data-claire-element-id="533151"><code>ld a,%10011011
sra a ; a = %11001101 et carry à 1</code></pre><p id="r-533152" data-claire-element-id="533152">Cela correspond à une division par deux d'un registre signé en arrondissant à la valeur inférieure.</p><h6 id="r-sla" data-claire-element-id="533156">SLA</h6><p id="r-533154" data-claire-element-id="533154">Décalage arithmétique à gauche.<br/> Le bit 7 va dans le carry et le bit 0 est mis à zéro.</p><p id="r-533155" data-claire-element-id="533155">Multiplication par deux standard, attention au dépassement !</p><h6 id="r-rr" data-claire-element-id="533158">RR</h6><p id="r-533157" data-claire-element-id="533157">Rotation vers la droite.<br/> Quand vous utilisez cette instruction, les bits sont décalés vers la droite, le bit 7 prend la valeur du carry présente à l'exécution de la commande, et ensuite le bit 0 est stocké dans le carry.</p><h6 id="r-rl" data-claire-element-id="533160">RL</h6><p id="r-533159" data-claire-element-id="533159">Vous l'auriez deviné tout seuls, je parie !<br/> OK, vous êtes des zéros. :p <br/> Rotation à gauche ; décalage à gauche, le bit 0 prend la valeur du « vieux » carry, puis le bit 7 va se loger dans le carry.</p><h6 id="r-rrc" data-claire-element-id="533162">RRC</h6><p id="r-533161" data-claire-element-id="533161">Voilà une vraie rotation (vers la droite) !<br/> Les bits sont décalés d'un cran vers la droite, le bit 7 et le carry prennent la valeur du bit 0 de la valeur d'origine.</p><h6 id="r-rlc" data-claire-element-id="533165">RLC</h6><p id="r-533163" data-claire-element-id="533163">La même, mais dans l'autre sens. C'est donc le bit 0 et le carry qui prennent la valeur à l'exécution du bit 7.</p><p id="r-533164" data-claire-element-id="533164">Il existe encore d'autres instructions de ce type, mais je préfère les passer sous silence !</p><h6 id="r-et-les-16-bits" data-claire-element-id="533170">Et les 16 bits ?</h6><p id="r-533166" data-claire-element-id="533166">Y a quelques moyens, je n'explique rien ; vous réfléchirez calmement dessus !</p><pre id="r-533167" data-claire-element-id="533167"><code>srl d
rr e</code></pre><pre id="r-533168" data-claire-element-id="533168"><code>sla b
rl l</code></pre><p id="r-533169" data-claire-element-id="533169">* Juste pour montrer que les registres n'ont aucune importance.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
<span class="arrow"></span>
<span class="next">Les fichiers include</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">
<span class="next">Graphisme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Graphisme"></a><h2>Graphisme</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
<span class="arrow"></span>
<span class="next">Parlons de bits...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
<span class="next">L&#039;écran graphique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-533174" data-claire-element-id="533174">Comme vous avez longtemps attendu ce chapitre, voici un petit quelque chose pour me faire pardonner. :ange:</p><p id="r-533175" data-claire-element-id="533175"><a href="http://www.mediafire.com/?sharekey=ac3f421d78db7adad2db6fb9a8902bda">compil.bat</a></p><p id="r-533176" data-claire-element-id="533176">C'est un petit script qui remplace les deux que vous devriez avoir. Son fonctionnement est très simple : il suffit de le lancer, de renseigner le nom du fichier, et voilà !</p><p id="r-533177" data-claire-element-id="533177">J'en profite pour préciser qu'un nouveau passage concernant les linuxiens se trouve dans le chapitre <a href="http://www.siteduzero.com/tutoriel-3-15-0-materiel-necessaire.html">Matériel nécessaire</a>. Un grand merci à <strong>saimoun</strong> qui s'en est occupé. :)</p><p id="r-533178" data-claire-element-id="533178">Bon, si vous lisez ceci c'est que vous voulez du graphisme, alors je ne vous fais pas plus mariner ! ^^</p><p id="r-533179" data-claire-element-id="533179">Alors... 96 x 64 pixels... Allumés ou éteints... Ça fait...<br/> :waw: 4.26 x 10^(1820) possibilités !!</p><p id="r-533180" data-claire-element-id="533180">Même en noir et blanc, un programme doit avoir de beaux graphismes pour être attirant. Ça tombe bien, notre chère TI dispose des fonctions nécessaires pour toute réalisation !<br/> Si on ajoute la rapidité de l'assembleur, des <em>screens</em> comme celui-ci peuvent être obtenus instantanément.</p><figure id="r-533182" data-claire-element-id="533183"><img id="r-533181" data-claire-element-id="533181" src="medias/uploads.siteduzero.com_files_135001_136000_135904.png" alt="Image utilisateur"/></figure><figure id="r-533185" data-claire-element-id="533186"><img id="r-533184" data-claire-element-id="533184" src="medias/uploads.siteduzero.com_files_135001_136000_135905.png" alt="Image utilisateur"/></figure><p id="r-533187" data-claire-element-id="533187">C'est pas beau, tout ça ?!<br/> Allez, c'est parti ! :ninja:</p>
</div><a name="L039crangraphique"></a><h2>L&#039;écran graphique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">
<span class="arrow"></span>
<span class="next">Graphisme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
<span class="next">Les romcalls graphiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-l-ecran-graphique-1" data-claire-element-id="533355">L'écran graphique</h4><h5 id="r-re-presentation-1" data-claire-element-id="533221">(Re)présentation</h5><p id="r-533188" data-claire-element-id="533188">Vous vous souvenez (j'en suis sûr :) ) que j'ai dit qu'il n'y avait qu'un écran en Assembleur ?<br/> Eh ben en fait ce n'est pas vrai...</p><p id="r-533189" data-claire-element-id="533189">J'apporte donc une rectification ; il y a également deux écrans disponibles en Assembleur.<br/> On dispose de l'écran que vous utilisez depuis le départ, et de <strong>l'écran graphique standard</strong> qui gère les tracés de courbes ou statistiques.</p><div id="r-533191" data-claire-element-id="533191" data-claire-semantic="question"><p id="r-533190" data-claire-element-id="533190">Et c'est seulement maintenant que tu le dis ?!</p></div><p id="r-533192" data-claire-element-id="533192">Oui, mais j'ai mes raisons. :p</p><p id="r-533193" data-claire-element-id="533193">L'utilisation en Assembleur de cet écran est assez limitée, autant pour la technique que pour l'usage.<br/> Premièrement, le positionnement est <strong>relatif</strong>, c'est-à-dire que les coordonnées dépendent non pas de l'écran en lui-même mais du zoom actif au moment du dessin.<br/> Regardez : les <em>screens</em> ci-dessous représentent tous les trois un point aux coordonnées (5,5)...</p><figure id="r-533195" data-claire-element-id="533196"><img id="r-533194" data-claire-element-id="533194" src="medias/uploads.siteduzero.com_files_119001_120000_119608.png" alt="Image utilisateur"/></figure><p id="r-533197" data-claire-element-id="533197"><strong>Zoom standard</strong><br/> XMin = -10<br/> XMax = 10<br/> YMin = -10<br/> YMax = 10</p><p id="r-533198" data-claire-element-id="533198">Vous remarquerez que la position du point n'a rien à voir avec le pixel de mêmes coordonnées.</p><figure id="r-533200" data-claire-element-id="533201"><img id="r-533199" data-claire-element-id="533199" src="medias/uploads.siteduzero.com_files_119001_120000_119609.png" alt="Image utilisateur"/></figure><p id="r-533202" data-claire-element-id="533202">Ah ?! Là, ça change déjà ! La position du point change sur l'écran, mais pas par rapport au graphique courant. Si vous comptez avec le repère, le point se trouve bien à (5,5).</p><p id="r-533203" data-claire-element-id="533203">XMin = 0<br/> XMax = 20<br/> YMin = 0<br/> YMax = 20</p><figure id="r-533205" data-claire-element-id="533206"><img id="r-533204" data-claire-element-id="533204" src="medias/uploads.siteduzero.com_files_119001_120000_119610.png" alt="Image utilisateur"/></figure><p id="r-533207" data-claire-element-id="533207">Ici... pas de point. Pourtant il est bien là, fidèle à ses coordonnées. J'illustre ici qu'un point dessiné sur l'écran graphique ne génère pas d'erreur de positionnement même s'il sort de l'écran.</p><p id="r-533208" data-claire-element-id="533208">XMin = -4<br/> XMax = 4<br/> YMin = -4<br/> YMax = 4</p><p id="r-533209" data-claire-element-id="533209">Il faut donc être au courant du zoom avant le dessin pour être sûr du résultat. Dans le cas contraire, l'absence d'erreur de positionnement évite les plantages. :)</p><aside id="r-533211" data-claire-element-id="533211" data-claire-semantic="warning"><p id="r-533210" data-claire-element-id="533210">Le <strong>mode de l'écran</strong> (Horiz ou G-T) influe également sur les valeurs du repère.</p></aside><p id="r-533212" data-claire-element-id="533212">Deuxièmement, à part pour des programmes de maths ou de physique, l'utilisation des graphiques n'est pas courante ; et il vaut mieux utiliser le Basic pour les calculs !</p><p id="r-533213" data-claire-element-id="533213">OK, n'importe quel calcul peut être fait en Assembleur mais c'est parfois beaucoup plus long à coder du fait qu'on ne peut faire qu'un calcul par ligne entre autres. L'accès aux variables ajoute aussi pas mal de code.</p><p id="r-533214" data-claire-element-id="533214">Enfin, il me semble que ce chapitre est le bon endroit pour en parler. ;)</p><p id="r-533215" data-claire-element-id="533215">Bon, en fait je me rends compte que j'ai quasiment tout dit... :-°</p><p id="r-533216" data-claire-element-id="533216">Si, une dernière chose : cet écran est en partie géré par la calculatrice elle-même. Par exemple, quand vous voulez tracer une fonction, vous avez juste à rentrer son équation puis à demander son tracé, et la calculatrice s'occupe du reste.<br/> En Assembleur, c'est la même chose ; en fait, hormis les techniques de dessin, l'écran graphique se gère à l'identique dans les deux langages.</p><p id="r-533217" data-claire-element-id="533217">Cela implique parfois des mises à jour des graphes, des vérifications de modes, l'activation des « plots » statistiques...</p><aside id="r-533219" data-claire-element-id="533219" data-claire-semantic="warning"><p id="r-533218" data-claire-element-id="533218">Il n'y a pas d'erreur de positionnement, OK. Mais cela ne veut pas dire qu'aucune erreur ne peut être générée par l'écran graphique ; citons par exemple <strong>WINDOW RANGE</strong> et <strong>DIM MISMATCH</strong>.</p></aside><p id="r-533220" data-claire-element-id="533220">En conclusion, <strong>seule la méthode de dessin « direct » varie de l'Assembleur au Basic</strong> (même si le Basic utilise l'Assembleur :lol: ).</p><h5 id="r-flags-4" data-claire-element-id="533354">Flags</h5><p id="r-533222" data-claire-element-id="533222">Voici la liste des flags attribués à l'écran graphique.</p><h6 id="r-mode" data-claire-element-id="533297">[MODE]</h6><figure id="r-533224" data-claire-element-id="533225"><img id="r-533223" data-claire-element-id="533223" src="medias/uploads.siteduzero.com_files_119001_120000_119611.png" alt="Image utilisateur"/></figure><table id="r-533290" data-claire-element-id="533290"><tbody id="r-533289" data-claire-element-id="533289"><tr id="r-533232" data-claire-element-id="533232"><td id="r-533227" data-claire-element-id="533227"><p id="r-533226" data-claire-element-id="533226"><em><strong>Nom du <em>flag</em></strong></em></p></td><td id="r-533229" data-claire-element-id="533229"><p id="r-533228" data-claire-element-id="533228"><em><strong>Groupe correspondant</strong></em></p></td><td id="r-533231" data-claire-element-id="533231"><p id="r-533230" data-claire-element-id="533230"><em><strong>Description de la valeur booléenne</strong></em></p></td></tr><tr id="r-533239" data-claire-element-id="533239"><td id="r-533234" data-claire-element-id="533234"><p id="r-533233" data-claire-element-id="533233">grffuncm</p></td><td id="r-533236" data-claire-element-id="533236"><p id="r-533235" data-claire-element-id="533235">grfmodeflags</p></td><td id="r-533238" data-claire-element-id="533238"><p id="r-533237" data-claire-element-id="533237">1 : Graph en mode fonction</p></td></tr><tr id="r-533246" data-claire-element-id="533246"><td id="r-533241" data-claire-element-id="533241"><p id="r-533240" data-claire-element-id="533240">grfpolarm</p></td><td id="r-533243" data-claire-element-id="533243"><p id="r-533242" data-claire-element-id="533242">grfmodeflags</p></td><td id="r-533245" data-claire-element-id="533245"><p id="r-533244" data-claire-element-id="533244">1 : Graph en mode polaire</p></td></tr><tr id="r-533253" data-claire-element-id="533253"><td id="r-533248" data-claire-element-id="533248"><p id="r-533247" data-claire-element-id="533247">grfparamm</p></td><td id="r-533250" data-claire-element-id="533250"><p id="r-533249" data-claire-element-id="533249">grfmodeflags</p></td><td id="r-533252" data-claire-element-id="533252"><p id="r-533251" data-claire-element-id="533251">1 : Graph en mode paramétrique</p></td></tr><tr id="r-533260" data-claire-element-id="533260"><td id="r-533255" data-claire-element-id="533255"><p id="r-533254" data-claire-element-id="533254">grfseqm</p></td><td id="r-533257" data-claire-element-id="533257"><p id="r-533256" data-claire-element-id="533256">grfmodeflags</p></td><td id="r-533259" data-claire-element-id="533259"><p id="r-533258" data-claire-element-id="533258">1 : Graph en mode séquentiel</p></td></tr><tr id="r-533267" data-claire-element-id="533267"><td id="r-533262" data-claire-element-id="533262"><p id="r-533261" data-claire-element-id="533261">grfdot</p></td><td id="r-533264" data-claire-element-id="533264"><p id="r-533263" data-claire-element-id="533263">grfdbflags</p></td><td id="r-533266" data-claire-element-id="533266"><p id="r-533265" data-claire-element-id="533265">0 : mode connecté<br/> 1 : mode point par point</p></td></tr><tr id="r-533274" data-claire-element-id="533274"><td id="r-533269" data-claire-element-id="533269"><p id="r-533268" data-claire-element-id="533268">grfsimul</p></td><td id="r-533271" data-claire-element-id="533271"><p id="r-533270" data-claire-element-id="533270">grfdbflags</p></td><td id="r-533273" data-claire-element-id="533273"><p id="r-533272" data-claire-element-id="533272">0 : Tracé de fonctions séquentiel<br/> 1 : Tracé de fonctions simultané</p></td></tr><tr id="r-533281" data-claire-element-id="533281"><td id="r-533276" data-claire-element-id="533276"><p id="r-533275" data-claire-element-id="533275">grfsplit</p></td><td id="r-533278" data-claire-element-id="533278"><p id="r-533277" data-claire-element-id="533277">sgrflags</p></td><td id="r-533280" data-claire-element-id="533280"><p id="r-533279" data-claire-element-id="533279">1 : Mode <em>Horiz</em></p></td></tr><tr id="r-533288" data-claire-element-id="533288"><td id="r-533283" data-claire-element-id="533283"><p id="r-533282" data-claire-element-id="533282">vertsplit</p></td><td id="r-533285" data-claire-element-id="533285"><p id="r-533284" data-claire-element-id="533284">sgrflags</p></td><td id="r-533287" data-claire-element-id="533287"><p id="r-533286" data-claire-element-id="533286">1 : Mode <em>G-T</em></p></td></tr></tbody></table><p id="r-533291" data-claire-element-id="533291">Remarquez que lorsque seulement deux choix sont disponibles, on a qu'un seul <em>flag</em> puisque celui-ci peut prendre deux valeurs.</p><aside id="r-533293" data-claire-element-id="533293" data-claire-semantic="information"><p id="r-533292" data-claire-element-id="533292">Le partage d'écran ne se gère pas avec les <em>flags</em> ; ils servent ici uniquement d'information.<br/> Je n'aborderai pas la technique car elle est assez complexe ; pour l'instant, il est préférable de n'utiliser que le plein écran.<br/> Vous pouvez « forcer » ce réglage grâce à <strong>_forcefullscreen</strong>.</p></aside><p id="r-533294" data-claire-element-id="533294">Pour ce qui est des autres réglages - quand ils concernent plus d'un <em>flag</em> -, il faut tout d'abord désactiver le <em>flag</em> courant et ensuite activer le <em>flag</em> voulu, ou l'inverse. L'important est de ne pas laisser deux <em>flags</em> activés (ni aucun).</p><pre id="r-533295" data-claire-element-id="533295"><code>set grfparamm,(iy+grfmodeflags)
        res grffuncm,(iy+grfmodeflags)
        res grfpolarm,(iy+grfmodeflags)
        res grfrecurm,(iy+grfmodeflags)</code></pre><p id="r-533296" data-claire-element-id="533296">Ce code active le mode paramétrique ; comme vous pouvez le constater, le <em>flag</em> activé n'a pas besoin d'être connu.</p><h6 id="r-format-2" data-claire-element-id="533353">[FORMAT]</h6><figure id="r-533299" data-claire-element-id="533300"><img id="r-533298" data-claire-element-id="533298" src="medias/uploads.siteduzero.com_files_119001_120000_119612.png" alt="Image utilisateur"/></figure><table id="r-533344" data-claire-element-id="533344"><tbody id="r-533343" data-claire-element-id="533343"><tr id="r-533307" data-claire-element-id="533307"><td id="r-533302" data-claire-element-id="533302"><p id="r-533301" data-claire-element-id="533301"><em><strong>Nom du flag</strong></em></p></td><td id="r-533304" data-claire-element-id="533304"><p id="r-533303" data-claire-element-id="533303"><em><strong>Groupe correspondant</strong></em></p></td><td id="r-533306" data-claire-element-id="533306"><p id="r-533305" data-claire-element-id="533305"><em><strong>Description de l'état</strong></em></p></td></tr><tr id="r-533314" data-claire-element-id="533314"><td id="r-533309" data-claire-element-id="533309"><p id="r-533308" data-claire-element-id="533308">grfpolar</p></td><td id="r-533311" data-claire-element-id="533311"><p id="r-533310" data-claire-element-id="533310">grfdbflags</p></td><td id="r-533313" data-claire-element-id="533313"><p id="r-533312" data-claire-element-id="533312">0 : RectGC<br/> 1 : PolarGC</p></td></tr><tr id="r-533321" data-claire-element-id="533321"><td id="r-533316" data-claire-element-id="533316"><p id="r-533315" data-claire-element-id="533315">grfgrid</p></td><td id="r-533318" data-claire-element-id="533318"><p id="r-533317" data-claire-element-id="533317">grfdbflags</p></td><td id="r-533320" data-claire-element-id="533320"><p id="r-533319" data-claire-element-id="533319">0 : GridOff<br/> 1 : GridOn</p></td></tr><tr id="r-533328" data-claire-element-id="533328"><td id="r-533323" data-claire-element-id="533323"><p id="r-533322" data-claire-element-id="533322">grfnocoord</p></td><td id="r-533325" data-claire-element-id="533325"><p id="r-533324" data-claire-element-id="533324">grfdbflags</p></td><td id="r-533327" data-claire-element-id="533327"><p id="r-533326" data-claire-element-id="533326">0 : CoordOn<br/> 1 : CoordOff</p></td></tr><tr id="r-533335" data-claire-element-id="533335"><td id="r-533330" data-claire-element-id="533330"><p id="r-533329" data-claire-element-id="533329">grfnoaxis</p></td><td id="r-533332" data-claire-element-id="533332"><p id="r-533331" data-claire-element-id="533331">grfdbflags</p></td><td id="r-533334" data-claire-element-id="533334"><p id="r-533333" data-claire-element-id="533333">0 : AxesOn<br/> 1 : AxesOff</p></td></tr><tr id="r-533342" data-claire-element-id="533342"><td id="r-533337" data-claire-element-id="533337"><p id="r-533336" data-claire-element-id="533336">grflabel</p></td><td id="r-533339" data-claire-element-id="533339"><p id="r-533338" data-claire-element-id="533338">grfdbflags</p></td><td id="r-533341" data-claire-element-id="533341"><p id="r-533340" data-claire-element-id="533340">0 : LabelOff<br/> 1 : LabelOn</p></td></tr></tbody></table><p id="r-533345" data-claire-element-id="533345">Il est apparemment impossible d'agir sur <em>ExprOn</em>...</p><p id="r-533346" data-claire-element-id="533346">Il reste deux <em>flags</em> « non visibles » intéressants :</p><ul id="r-533351" data-claire-element-id="533351"><li id="r-533348" data-claire-element-id="533348"><p id="r-533347" data-claire-element-id="533347"><em><strong>graphdraw</strong></em> du groupe <strong>graphflags</strong> qui sert d'indicateur. S'il est à 1, c'est que l'écran graphique doit être mis à jour ;</p></li><li id="r-533350" data-claire-element-id="533350"><p id="r-533349" data-claire-element-id="533349"><em><strong>smartgraph_inv</strong></em> du groupe <strong>smartflags</strong>. À 1, la calculatrice gère seule les mises à jour au besoin.</p></li></ul><p id="r-533352" data-claire-element-id="533352">Les réglages restant ne se gérant pas simplement avec une <em>romcall</em> comme les limites d'affichage sont assez complexes et utilisent des techniques que nous n'avons pas encore vues.<br/> Mais ne vous inquiétez pas, un autre chapitre sera consacré aux applications de l'écran graphique !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">
<span class="arrow"></span>
<span class="next">Graphisme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
<span class="next">Les romcalls graphiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesromcallsgraphiques"></a><h2>Les romcalls graphiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
<span class="arrow"></span>
<span class="next">L&#039;écran graphique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
<span class="next">Le graph buffer</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-romcalls-graphiques" data-claire-element-id="533586">Les romcalls graphiques</h4><p id="r-533356" data-claire-element-id="533356">Dans ce chapitre, nous allons voir les <em>romcalls</em> nécessaires à l'élaboration des graphismes.<br/> Il existe des techniques de dessin sans <em>romcalls</em>, donc beaucoup plus rapides, mais elles sont plus complexes ; on les verra donc plus tard.</p><p id="r-533357" data-claire-element-id="533357">Les <em>romcalls</em> présentes permettent de tracer des <strong>cercles</strong>, des <strong>rectangles</strong>, des <strong>lignes</strong>, des <strong>points</strong> avec des options comme l'inversion de pixels, le remplissage...</p><p id="r-533358" data-claire-element-id="533358">Que du bonheur ! :D</p><h5 id="r-les-points-3" data-claire-element-id="533404">Les points</h5><aside id="r-533360" data-claire-element-id="533360" data-claire-semantic="warning"><p id="r-533359" data-claire-element-id="533359">Il s'agira de points sur l'écran graphique et de <strong>pixels</strong> sur l'écran standard.</p></aside><p id="r-533361" data-claire-element-id="533361">La base de tout graphisme...</p><h6 id="r-cpoint" data-claire-element-id="533377">_cpoint</h6><p id="r-533362" data-claire-element-id="533362">Cette <em>romcall</em> permet d'allumer, d'éteindre ou d'inverser un point (sur l'écran graphique donc) selon la valeur de l'accumulateur.<br/> S'il vaut :</p><ul id="r-533369" data-claire-element-id="533369"><li id="r-533364" data-claire-element-id="533364"><p id="r-533363" data-claire-element-id="533363">0 : le point s'éteint ;</p></li><li id="r-533366" data-claire-element-id="533366"><p id="r-533365" data-claire-element-id="533365">1 : le point s'allume ;</p></li><li id="r-533368" data-claire-element-id="533368"><p id="r-533367" data-claire-element-id="533367">2 : le point s'inverse.</p></li></ul><p id="r-533370" data-claire-element-id="533370">Notez que dans les deux premiers cas, l'état précédent du point n'influera pas sur le résultat.</p><p id="r-533371" data-claire-element-id="533371">Bien évidemment, la <em>romcall</em> a besoin des coordonnées du point ; celles-ci sont passées via les <strong>OP</strong> (<em>Operating Points</em>).</p><div id="r-533373" data-claire-element-id="533373" data-claire-semantic="question"><p id="r-533372" data-claire-element-id="533372">Mais c'est quoi ça, les OP ?</p></div><p id="r-533374" data-claire-element-id="533374">Je l'expliquerai dans un chapitre qui leur sera consacré. Vous ne pouvez donc pas utiliser cette <em>romcall</em> pour le moment mais si elle est là, c'est pour que vous vous en rappeliez si jamais vous en avez besoin ; quand vous connaîtrez le fonctionnement des OP. ^^ <br/> Un code d'exemple est donc pour le moment inutile.</p><p id="r-533375" data-claire-element-id="533375">On utilise OP1 comme abscisse et OP2 comme ordonnée.</p><p id="r-533376" data-claire-element-id="533376">Cette <em>romcall</em> ne met pas <strong>le graph</strong> à jour et <strong>détruit tout les registres</strong>.</p><h6 id="r-darkpnt" data-claire-element-id="533379">_darkpnt</h6><p id="r-533378" data-claire-element-id="533378">Facile ! Cette <em>romcall</em> agit exactement comme la précédente, à la seule exception qu'elle ne permet pas de choisir l'état du point spécifié.<br/> En effet, comme son nom l'indique, le point de coordonnées (OP1,OP2) sera allumé.<br/> Tous les registres sont détruits et <strong>le graph</strong> n'est pas mis à jour...</p><h6 id="r-ipoint" data-claire-element-id="533401">_ipoint</h6><p id="r-533380" data-claire-element-id="533380">Permet d'allumer, d'éteindre, d'inverser, de tester ou de copier un pixel (donc indépendant du zoom).<br/> Les coordonnées du pixel sont passées par <strong>b</strong> (ligne/ordonnée) et <strong>c</strong> (colonne/ordonnée) et l'action à effectuer est représentée par <strong>d</strong> comme ci-dessous :</p><ul id="r-533391" data-claire-element-id="533391"><li id="r-533382" data-claire-element-id="533382"><p id="r-533381" data-claire-element-id="533381">0 : éteint le pixel ;</p></li><li id="r-533384" data-claire-element-id="533384"><p id="r-533383" data-claire-element-id="533383">1 : allume le pixel ;</p></li><li id="r-533386" data-claire-element-id="533386"><p id="r-533385" data-claire-element-id="533385">2 : inverse le pixel ;</p></li><li id="r-533388" data-claire-element-id="533388"><p id="r-533387" data-claire-element-id="533387">3 : teste le pixel ; son état est renvoyé dans le <em>flag</em><strong>Z</strong> ;</p></li><li id="r-533390" data-claire-element-id="533390"><p id="r-533389" data-claire-element-id="533389">4 : copie le pixel du <em>graph buffer</em> sur l'écran.</p></li></ul><p id="r-533392" data-claire-element-id="533392">Le <em>graph buffer</em> sera vu plus tard, ne vous en préoccupez pas pour l'instant.</p><p id="r-533393" data-claire-element-id="533393">&lt;tableau&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;</p><pre id="r-533394" data-claire-element-id="533394"><code>#include &quot;ultimate.inc&quot;
start:
        bcall(_clrlcdfull)
        ld bc,$2010 ; b=32
        ld d,1
        bcall(_ipoint)
        bcall(_getkey)
quit:
        ret        
.end</code></pre><p id="r-533395" data-claire-element-id="533395">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533397" data-claire-element-id="533398"><img id="r-533396" data-claire-element-id="533396" src="medias/uploads.siteduzero.com_files_119001_120000_119614.png" alt="Image utilisateur"/></figure><p id="r-533399" data-claire-element-id="533399">&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;/tableau&gt;<br/><em>bcall(_getkey)</em> sert juste ici à figer l'affichage et permettre la capture d'écran ; cette <em>romcall</em> sera vue dans le chapitre suivant.</p><p id="r-533400" data-claire-element-id="533400">Aucun registre n'est détruit, <strong>sauf</strong> dans le cas du test où ils le sont tous.</p><h6 id="r-pointon" data-claire-element-id="533403">_pointon</h6><p id="r-533402" data-claire-element-id="533402">Elle est à <em>_ipoint</em> ce que <em>_darkpnt</em> est à <em>_cpoint</em>.<br/> Explications ?! o_O <br/> Allume le pixel de coordonnées (<strong>b</strong>,<strong>c</strong>) et... détruit le registre <strong>d</strong> !</p><h5 id="r-quelques-remarques-3" data-claire-element-id="533417">Quelques remarques</h5><p id="r-533405" data-claire-element-id="533405">Avant de continuer la liste des <em>romcalls</em>, je tiens à faire quelques précisions :</p><ul id="r-533416" data-claire-element-id="533416"><li id="r-533407" data-claire-element-id="533407"><p id="r-533406" data-claire-element-id="533406">qu'un registre soit « détruit » veut simplement dire que sa valeur après l'appel de la <em>romcall</em> n'est plus forcément la même qu'avant ; vous pouvez toujours l'utiliser !</p></li><li id="r-533409" data-claire-element-id="533409"><p id="r-533408" data-claire-element-id="533408">il existe un autre type de <em>romcalls</em> qui utilisent les FPS (<em>First Person Shoot Floating Point Stack</em>) mais comme vous ne savez pas ce que c'est et que leur utilité est assez limitée, je n'en parlerai pas ici ;</p></li><li id="r-533411" data-claire-element-id="533411"><p id="r-533410" data-claire-element-id="533410">l'écran graphique et l'écran standard sont en fait comme superposés ; vous verrez une modification sur n'importe quel écran. Toutefois, la mise à jour de l'écran graphique efface seulement les dessins de cet écran ; ceux de l'écran standard restent alors visibles ;</p></li><li id="r-533413" data-claire-element-id="533413"><p id="r-533412" data-claire-element-id="533412">en théorie, la ligne du bas (ordonnée 0) et la colonne de droite (abscisse 95) sont « intouchables », mais pas avec l'Assembleur ! Pour pouvoir dessiner dessus, utilisez <strong>set fullscrndraw,(iy+apiflg4)</strong> ;</p></li><li id="r-533415" data-claire-element-id="533415"><p id="r-533414" data-claire-element-id="533414">un pixel sera toujours plus rapide à utiliser qu'un point puisque le zoom ne sera pas pris en compte.</p></li></ul><h5 id="r-lignes-4" data-claire-element-id="533434">Lignes</h5><p id="r-533418" data-claire-element-id="533418">Une ligne, c'est tout bonnement deux points reliés ; à part un point à ajouter on n'a donc pas vraiment de différences avec les <em>romcalls</em> précédentes... :-°</p><h6 id="r-cline" data-claire-element-id="533432">_cline</h6><p id="r-533419" data-claire-element-id="533419">J'espère que vous remarquez les conventions de nom !<br/> Cette <em>romcall</em> dessine une ligne sur l'écran graphique en utilisant les coordonnées de deux points passées via les OP :</p><ul id="r-533428" data-claire-element-id="533428"><li id="r-533421" data-claire-element-id="533421"><p id="r-533420" data-claire-element-id="533420">OP1 : abscisse du deuxième point ;</p></li><li id="r-533423" data-claire-element-id="533423"><p id="r-533422" data-claire-element-id="533422">OP2 : ordonnée du deuxième point ;</p></li><li id="r-533425" data-claire-element-id="533425"><p id="r-533424" data-claire-element-id="533424">OP3 : abscisse du premier point ;</p></li><li id="r-533427" data-claire-element-id="533427"><p id="r-533426" data-claire-element-id="533426">OP4 : ordonnée du premier point.</p></li></ul><p id="r-533429" data-claire-element-id="533429">Notez qu'il existe 6 OP ! :D</p><p id="r-533430" data-claire-element-id="533430">Tous les registres sont détruits et le graph n'est pas mis à jour.</p><aside id="r-533431" data-claire-element-id="533431" data-claire-semantic="warning"></aside><h6 id="r-darkline" data-claire-element-id="533433">_darkline</h6><p id="r-533435" data-claire-element-id="533435">Trace une ligne sur l'<strong>écran standard</strong> entre deux <strong>pixels</strong> dont les coordonnées sont passées par les <strong>registres</strong>.</p><ul id="r-533444" data-claire-element-id="533444"><li id="r-533437" data-claire-element-id="533437"><p id="r-533436" data-claire-element-id="533436"><strong>b</strong> : abscisse du premier pixel ;</p></li><li id="r-533439" data-claire-element-id="533439"><p id="r-533438" data-claire-element-id="533438"><strong>c</strong> : ordonnée du premier pixel ;</p></li><li id="r-533441" data-claire-element-id="533441"><p id="r-533440" data-claire-element-id="533440"><strong>d</strong> : abscisse du deuxième pixel ;</p></li><li id="r-533443" data-claire-element-id="533443"><p id="r-533442" data-claire-element-id="533442"><strong>e</strong> : ordonnée du deuxième pixel.</p></li></ul><p id="r-533445" data-claire-element-id="533445">Tous les registres sont préservés.</p><h6 id="r-iline" data-claire-element-id="533585">_iline</h6><p id="r-533446" data-claire-element-id="533446">Agit exactement comme <em>_darkline</em> en ajoutant des options choisies avec <strong>h</strong> :</p><ul id="r-533453" data-claire-element-id="533453"><li id="r-533448" data-claire-element-id="533448"><p id="r-533447" data-claire-element-id="533447">0 : éteint les pixels composant la ligne ;</p></li><li id="r-533450" data-claire-element-id="533450"><p id="r-533449" data-claire-element-id="533449">1 : trace une ligne normalement ;</p></li><li id="r-533452" data-claire-element-id="533452"><p id="r-533451" data-claire-element-id="533451">2 : inverse l'état des pixels composants la ligne.</p></li></ul><p id="r-533454" data-claire-element-id="533454">&lt;tableau&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;</p><pre id="r-533455" data-claire-element-id="533455"><code>#include &quot;ultimate.inc&quot;
start:
        bcall(_clrlcdfull)
        ld bc,$1010
        ld de,$3030
        bcall(_darkline)
        ; 1ère capture
        ld h,2
        bcall(_iline)
        bcall(_getkey)
quit:
        ret        
.end</code></pre><p id="r-533456" data-claire-element-id="533456">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533458" data-claire-element-id="533459"><img id="r-533457" data-claire-element-id="533457" src="medias/uploads.siteduzero.com_files_119001_120000_119617.png" alt="Image utilisateur"/></figure><p id="r-533460" data-claire-element-id="533460">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533462" data-claire-element-id="533463"><img id="r-533461" data-claire-element-id="533461" src="medias/uploads.siteduzero.com_files_119001_120000_119615.png" alt="Image utilisateur"/></figure><p id="r-533464" data-claire-element-id="533464">&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;/tableau&gt;<br/> Je n'ai pas utilisé de _getkey pour la première capture car cette <em>romcall</em> détruit les registres.<br/> Ici, on voit bien qu'ils ont été préservés car l'inversion efface la ligne précédente ; les coordonnées des pixels n'ont donc pas changé.</p><h5 id="r-cercles-1" data-claire-element-id="533491">Cercles</h5><p id="r-533465" data-claire-element-id="533465">Si on exclut les <em>romcalls</em> utilisant les FPS, il ne reste pas grand-chose... &gt;_</p><h6 id="r-grphcirc" data-claire-element-id="533486">_grphcirc</h6><p id="r-533466" data-claire-element-id="533466">Trace un cercle sur l'écran standard en utilisant des variables prédéfinies :</p><ul id="r-533475" data-claire-element-id="533475"><li id="r-533468" data-claire-element-id="533468"><p id="r-533467" data-claire-element-id="533467"><strong>curgx2</strong> : abscisse du centre du cercle ;</p></li><li id="r-533470" data-claire-element-id="533470"><p id="r-533469" data-claire-element-id="533469"><strong>curgy2</strong> : ordonnée du centre du cercle ;</p></li><li id="r-533472" data-claire-element-id="533472"><p id="r-533471" data-claire-element-id="533471"><strong>curgx</strong> : abscisse d'un pixel du cercle ;</p></li><li id="r-533474" data-claire-element-id="533474"><p id="r-533473" data-claire-element-id="533473"><strong>curgy</strong> : ordonnée de ce pixel.</p></li></ul><p id="r-533476" data-claire-element-id="533476">Détruit tous les registres.</p><aside id="r-533478" data-claire-element-id="533478" data-claire-semantic="information"><p id="r-533477" data-claire-element-id="533477">Vous pouvez accélérer le dessin d'un cercle avec la commande <strong>set usefastcirc,(iy+plotflag3)</strong> qui impose à la calculatrice de dessiner plusieurs sections du cercle simultanément.</p></aside><p id="r-533479" data-claire-element-id="533479">&lt;tableau&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;</p><pre id="r-533480" data-claire-element-id="533480"><code>#include &quot;ultimate.inc&quot;
start:
        bcall(_clrlcdfull)
        ld hl,$301F
        ld (curgy2),hl
        ld hl,$4433
        ld (curgy),hl
        bcall(_grphcirc)
        bcall(_getkey)
quit:
        ret        
.end</code></pre><p id="r-533481" data-claire-element-id="533481">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533483" data-claire-element-id="533484"><img id="r-533482" data-claire-element-id="533482" src="medias/uploads.siteduzero.com_files_119001_120000_119616.png" alt="Image utilisateur"/></figure><p id="r-533485" data-claire-element-id="533485">&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;/tableau&gt;</p><h6 id="r-drawcirc2" data-claire-element-id="533490">_drawcirc2</h6><p id="r-533487" data-claire-element-id="533487">Je donnerai juste un exemple tiré de la doc. officielle puisqu'il utilise les FPS ; c'est malheureusement le seul moyen de tracer un cercle sur l'écran graphique.</p><pre id="r-533488" data-claire-element-id="533488"><code>bcall(_zoodefault)  ; standard window 
  bcall(_pdspgrph)  ; get current graph to the display 
;      
  bcall(_op1set0)   ; OP1 = 0 
  rst  rpushrealo1  
  rst  rpushrealo1  ; (0,0) pushed onto FPS 
;      
  bcall(_op1set3)  ; radius is 3 
  rst  rpushrealo1  ; 3 pushed onto FPS 
;     
  bcall(_drawcirc2)    
  ret</code></pre><p id="r-533489" data-claire-element-id="533489">Pour info, on stocke le rayon du cercle dans FPST et les coordonnées du cercle dans FPS2 (abscisse) et FPS1 (ordonnée).<br/> Si je dois parler des FPS, ce sera beaucoup plus tard, donc pour l'instant libre à vous de vous documenter ailleurs. ;)</p><h5 id="r-rectangles-2" data-claire-element-id="533525">Rectangles</h5><p id="r-533492" data-claire-element-id="533492">On dispose de nombreuses possibilités pour leur tracé... mais seulement sur l'écran standard.</p><h6 id="r-clearrect" data-claire-element-id="533524">_clearrect</h6><p id="r-533493" data-claire-element-id="533493">Efface une aire rectangulaire dont les coordonnées sont les suivantes :</p><ul id="r-533502" data-claire-element-id="533502"><li id="r-533495" data-claire-element-id="533495"><p id="r-533494" data-claire-element-id="533494"><strong>h</strong> : ligne du pixel supérieur gauche ;</p></li><li id="r-533497" data-claire-element-id="533497"><p id="r-533496" data-claire-element-id="533496"><strong>l</strong> : colonne du pixel supérieur gauche ;</p></li><li id="r-533499" data-claire-element-id="533499"><p id="r-533498" data-claire-element-id="533498"><strong>d</strong> : ligne du pixel inférieur droit ;</p></li><li id="r-533501" data-claire-element-id="533501"><p id="r-533500" data-claire-element-id="533500"><strong>e</strong> : colonne du pixel inférieur droit.</p></li></ul><p id="r-533503" data-claire-element-id="533503">On doit logiquement avoir <strong>d</strong> &gt;= <strong>h</strong> et <strong>e</strong> &gt;= <strong>l</strong> sinon... plantage ! :( <br/> Tous les registres sont détruits.</p><aside id="r-533505" data-claire-element-id="533505" data-claire-semantic="information"><p id="r-533504" data-claire-element-id="533504">Les coordonnées des points et la destruction des registres sont identiques pour toutes les <em>romcalls</em> de dessin de rectangle ; j'expliquerai donc maintenant seulement l'effet pour chaque <em>romcall</em>.</p></aside><ul id="r-533516" data-claire-element-id="533516"><li id="r-533507" data-claire-element-id="533507"><p id="r-533506" data-claire-element-id="533506"><em><strong>_drawrectborder</strong></em> - Trace la bordure du rectangle.</p></li><li id="r-533509" data-claire-element-id="533509"><p id="r-533508" data-claire-element-id="533508"><em><strong>_drawrectborderclear</strong></em> - Trace la bordure du rectangle et efface son intérieur.</p></li><li id="r-533511" data-claire-element-id="533511"><p id="r-533510" data-claire-element-id="533510"><em><strong>_eraserectborder</strong></em> - Efface la bordure du rectangle.</p></li><li id="r-533513" data-claire-element-id="533513"><p id="r-533512" data-claire-element-id="533512"><em><strong>_fillrect</strong></em> - Dessine un rectangle plein.</p></li><li id="r-533515" data-claire-element-id="533515"><p id="r-533514" data-claire-element-id="533514"><em><strong>_invertrect</strong></em> - Inverse les pixels de la zone définie par le rectangle.</p></li></ul><p id="r-533517" data-claire-element-id="533517">&lt;tableau&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;</p><pre id="r-533518" data-claire-element-id="533518"><code>ld hl,0
        ld de,$3E5E
        bcall(_fillrect)
        ld hl,$0101
        ld de,$1E1E
        bcall(_clearrect)
        ld hl,$2020
        ld de,$3A30
        bcall(_eraserectborder)
        ld hl,$0F0F
        ld de,$2F4F
        bcall(_invertrect)
        bcall(_getkey)</code></pre><p id="r-533519" data-claire-element-id="533519">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533521" data-claire-element-id="533522"><img id="r-533520" data-claire-element-id="533520" src="medias/uploads.siteduzero.com_files_119001_120000_119618.png" alt="Image utilisateur"/></figure><p id="r-533523" data-claire-element-id="533523">&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;/tableau&gt;</p><h5 id="r-tests-2" data-claire-element-id="533530">Tests</h5><h6 id="r-ibounds" data-claire-element-id="533527">_ibounds</h6><p id="r-533526" data-claire-element-id="533526">Renvoie un booléen en fonction des coordonnées d'un point passées en paramètre(s).<br/> Si ce point n'est pas affichable sur l'écran en fonction du zoom courant, renvoie <strong>1</strong> dans l'accumulateur, et <strong>0</strong> sinon.<br/> Les registres sont préservés.</p><h6 id="r-iboundsfull" data-claire-element-id="533529">_iboundsfull</h6><p id="r-533528" data-claire-element-id="533528">La même, mais inclut cette fois la ligne 63 et la colonne 95.<br/> Le « plein écran » (<em>fullscrndraw</em>) doit être activé.</p><h5 id="r-ecran-graphique" data-claire-element-id="533558">Écran graphique</h5><p id="r-533531" data-claire-element-id="533531">Voilà maintenant les <em>romcalls</em> spécifiques à l'écran graphique qui agissent sur les tracés, le zoom, le type d'équation...</p><h6 id="r-alleq" data-claire-element-id="533534">_alleq</h6><p id="r-533532" data-claire-element-id="533532">Sélectionne ou désélectionne toutes les équations selon la valeur de l'accumulateur.<br/> Si <strong>a</strong> = 3, sélection, et si <strong>a</strong> = 4, désélectionne.</p><p id="r-533533" data-claire-element-id="533533">Tous les registres sont détruits et OP1 et OP2 sont utilisés.</p><h6 id="r-pdspgrph" data-claire-element-id="533540">_pdspgrph</h6><p id="r-533535" data-claire-element-id="533535">(Prononcez pour voir ?!! :D )<br/> Cette <em>romcall</em> teste si l'écran graphique a besoin d'être mis à jour.<br/> S'il l'est déjà, elle le copie dans le <strong><em>graph buffer</em></strong>. Dans le cas contraire, elle le met à jour (c'est-à-dire efface les dessins, trace les équations et les plots statistiques sélectionnées et éventuellement les axes) et l'affiche sur l'écran.</p><aside id="r-533537" data-claire-element-id="533537" data-claire-semantic="information"><p id="r-533536" data-claire-element-id="533536">Les données de l'écran ne sont pas effacées pour autant ; elles peuvent être recouvertes mais ne peuvent pas disparaître.</p></aside><p id="r-533538" data-claire-element-id="533538">Tous les registres sont détruits.</p><p id="r-533539" data-claire-element-id="533539">Le <em>graph buffer</em> ? C'est la sous-partie suivante. ;)</p><h6 id="r-regraph" data-claire-element-id="533543">_regraph</h6><p id="r-533541" data-claire-element-id="533541">Agit comme la <em>romcall</em> précédente à l'exception que les équations sont toujours retracées même si le graph est déjà à jour.<br/> L'écran graphique est donc également stocké dans le <em>graph buffer</em>.</p><p id="r-533542" data-claire-element-id="533542">Détruit tous les registres sauf <strong>af</strong>...</p><h6 id="r-setallplots" data-claire-element-id="533547">_setallplots</h6><p id="r-533544" data-claire-element-id="533544">Sélectionne ou désélectionne tous les plots statistiques selon la valeur de <strong>b</strong>.<br/> S'il vaut 1, alors ils sont tous sélectionnés, et inversement si <strong>b</strong>=0.</p><p id="r-533545" data-claire-element-id="533545">Si un changement de sélection survient, l'écran graphique est marqué comme « bon pour une mise à jour » !</p><p id="r-533546" data-claire-element-id="533546">Détruit tous les registres (pour changer... !). :D</p><h6 id="r-setfuncm-setparm-setpolm-setseqm" data-claire-element-id="533550">_setfuncm, _setparm, _setpolm, _setseqm</h6><p id="r-533548" data-claire-element-id="533548">Ces <em>romcalls</em> automatisent respectivement le passage des équations en mode <em>fonction</em>, <em>paramétrique</em>, <em>polaire</em> et <em>séquentiel</em>.<br/> Détruit <strong>a</strong>, <strong>bc</strong>, <strong>de</strong> et <strong>hl</strong>.</p><p id="r-533549" data-claire-element-id="533549">Elles prennent moins de place dans le programme que l'utilisation des <em>flags</em> en cas de test, mais détruisent la quasi-totalité des registres ; à vous de choisir. ;)</p><h6 id="r-settblgraphdraw" data-claire-element-id="533554">_settblgraphdraw</h6><p id="r-533551" data-claire-element-id="533551">Marque l'écran graphique ainsi que la table des valeurs pour une mise à jour complète au prochain affichage.<br/> Si vous avez bien suivi, cela revient à activer un <em>flag</em> ; les registres sont donc préservés.</p><aside id="r-533553" data-claire-element-id="533553" data-claire-semantic="information"><p id="r-533552" data-claire-element-id="533552">En fait la table des valeurs possède elle aussi un « marquage » effectué par le <em>flag</em><em><strong>retable</strong></em> du groupe <strong>tblflags</strong> qui est donc utilisé ici.</p></aside><h6 id="r-zmdecml-zmfit-zmint-zmprev-zmsquare-zmstats-zmtrig-zmusr-zoodefault" data-claire-element-id="533557">_zmdecml, _zmfit, _zmint, _zmprev, _zmsquare, _zmstats, _zmtrig, _zmusr, _zoodefault</h6><p id="r-533555" data-claire-element-id="533555"><em>Romcalls</em> de zoom agissant comme dans le menu <strong>ZOOM</strong> de la calculatrice. Pas grand-chose à expliquer donc, excepté <em><strong>_zmusr</strong></em> qui rappelle le zoom enregistré par le dernier <strong>zoomSto</strong>.<br/> Ah oui, et aussi <em><strong>zmint</strong></em> qui utilise respectivement OP1 et OP5 en tant qu'abscisse et ordonnée relatives du centre du graph...</p><p id="r-533556" data-claire-element-id="533556">Tous les registres sont détruits et l'écran graphique est marqué pour une mise à jour.</p><h5 id="r-affichage-de-donnees-1" data-claire-element-id="533584">Affichage de données</h5><p id="r-533559" data-claire-element-id="533559">Oui, on va pouvoir afficher des chiffres ! :D</p><h6 id="r-disphl" data-claire-element-id="533570">_disphl</h6><p id="r-533560" data-claire-element-id="533560">Vous pouvez vous en douter, cette <em>romcall</em> affiche le contenu de <strong>hl</strong>. :lol: <br/> Elle utilise les grands caractères (et donc <em>currow</em> et <em>curcol</em>).</p><p id="r-533561" data-claire-element-id="533561">Comme <strong>hl</strong> contient à la base un nombre, c'est ce nombre qui est affiché.</p><p id="r-533562" data-claire-element-id="533562">Détruit <strong>af</strong>, <strong>de</strong> et <strong>hl</strong>.</p><p id="r-533563" data-claire-element-id="533563">&lt;tableau&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;</p><pre id="r-533564" data-claire-element-id="533564"><code>#include &quot;ultimate.inc&quot;
start:
        bcall(_clrlcdfull)
        ld hl,123
        ld de,$0101
        ld (currow),de
        bcall(_disphl)        
        
quit:
        ret        
.end</code></pre><p id="r-533565" data-claire-element-id="533565">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533567" data-claire-element-id="533568"><img id="r-533566" data-claire-element-id="533566" src="medias/uploads.siteduzero.com_files_119001_120000_119986.png" alt="Image utilisateur"/></figure><p id="r-533569" data-claire-element-id="533569">&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;/tableau&gt;</p><h6 id="r-dispop1a" data-claire-element-id="533583">_dispop1a</h6><p id="r-533571" data-claire-element-id="533571">Eh oui, encore un OP... ! :-° <br/> Cette fois, il sert à afficher en petits caractères le contenu d'OP1 en chiffres.<br/> On utilise donc <em>penrow</em> et <em>pencol</em> comme coordonnées.</p><p id="r-533572" data-claire-element-id="533572">Et <strong>a</strong> ?<br/> Il contient le nombre maximum de chiffres à afficher !</p><p id="r-533573" data-claire-element-id="533573">Je ne m'étendrai pas sur cette <em>romcall</em> car le contenu des OP n'est pas forcément un nombre...</p><p id="r-533574" data-claire-element-id="533574">&lt;tableau&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;</p><pre id="r-533575" data-claire-element-id="533575"><code>#include &quot;ultimate.inc&quot;
start:
        bcall(_clrlcdfull)
        bcall(_op1set1)
        ld a,2
        ld de,$0101
        ld (pencol),de
        bcall(_dispop1a)        
quit:
        ret        
.end</code></pre><p id="r-533576" data-claire-element-id="533576">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533578" data-claire-element-id="533579"><img id="r-533577" data-claire-element-id="533577" src="medias/uploads.siteduzero.com_files_119001_120000_119991.png" alt="Image utilisateur"/></figure><p id="r-533580" data-claire-element-id="533580">&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;/tableau&gt;</p><p id="r-533581" data-claire-element-id="533581">Ce code stocke le nombre 1 dans OP1 puis l'affiche.<br/> Vous remarquerez que si la valeur dans <strong>a</strong> est supérieure au nombre de chiffres qui composent la valeur dans OP1, celle-ci est simplement affichée entièrement.</p><p id="r-533582" data-claire-element-id="533582">Détruit tous les registres.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
<span class="arrow"></span>
<span class="next">L&#039;écran graphique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
<span class="next">Le graph buffer</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Legraphbuffer"></a><h2>Le graph buffer</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
<span class="arrow"></span>
<span class="next">Les romcalls graphiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
<span class="next">Les sprites</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-graph-buffer" data-claire-element-id="533676">Le graph buffer</h4><p id="r-533587" data-claire-element-id="533587">Voici... le troisième écran. :p</p><p id="r-533588" data-claire-element-id="533588">Non, non, du calme !<br/> Cet écran est <strong>virtuel</strong>, vous ne le verrez jamais directement.</p><p id="r-533589" data-claire-element-id="533589">Quel intérêt, me direz-vous, puisqu'on en a déjà deux ?!<br/> Cet écran sert à dessiner des graphismes qui n'apparaîtront généralement que plus tard dans le programme.</p><div id="r-533591" data-claire-element-id="533591" data-claire-semantic="question"><p id="r-533590" data-claire-element-id="533590">Moi, je ne vois toujours pas l'intérêt...</p></div><p id="r-533592" data-claire-element-id="533592"><strong>Les</strong> intérêts, auriez-vous dû dire. ^^</p><p id="r-533593" data-claire-element-id="533593">Mais une petite présentation s'impose avant.</p><h5 id="r-description-du-graph-buffer" data-claire-element-id="533603">Description du <em>graph buffer</em></h5><p id="r-533594" data-claire-element-id="533594">Concrètement, le <em>graph buffer</em> est une image de l'écran LCD placée dans la RAM.<br/> Elle débute à l'adresse « <em>plotsscreen</em> ».<br/> Comme notre TI ne gère pas la couleur, 1 bit suffit pour chaque pixel ; s'il vaut zéro le pixel est éteint et s'il vaut un, bah... je vous laisse deviner !</p><p id="r-533595" data-claire-element-id="533595">Par commodité, on le représente avec un tableau de... Allez, cherchez un peu. :p</p><div id="r-533597" data-claire-element-id="533597"><p id="r-533596" data-claire-element-id="533596">On a au total 96 x 64 pixels, ce qui représente 6144 bits, soit <strong>768 octets</strong> avec 12 lignes et 8 colonnes.</p></div><p id="r-533598" data-claire-element-id="533598">Si vous connaissez la taille d'une variable Pic, vous pouvez noter le rapport !</p><p id="r-533599" data-claire-element-id="533599">Preuve finale, le fichier <em>ultimate.inc</em> :</p><pre id="r-533600" data-claire-element-id="533600"><code>plotsscreen          equ  9340h
seed1                equ  9640h</code></pre><p id="r-533601" data-claire-element-id="533601">Vous voyez que 300h octets sont laissés à plotsscreen, et 300h ça fait... 768 !!</p><p id="r-533602" data-claire-element-id="533602">Voilà, une zone de 768 octets dans la RAM. C'est tout ce qu'est le <em>graph buffer</em>...<br/> Rassurez-vous, il possède néanmoins un statut spécial, sinon je n'en aurais pas parlé. :lol:</p><h5 id="r-avantages-6" data-claire-element-id="533617">Avantages</h5><p id="r-533604" data-claire-element-id="533604">Au niveau des graphismes, on peut y utiliser <em>n'importe quelle <em>romcall</em> de dessin</em>, qu'elle soit pour l'écran standard ou graphique. Il suffit pour cela d'activer un <em>flag</em> mais j'en parlerai plus tard.<br/> En plus de cela, le fait qu'il soit dans la RAM permet sa <em>manipulation directe</em> simplement et le tracé de motifs plus complexes. En effet vous aurez simplement à charger un nombre dans le bon emplacement pour dessiner sur le <em>graph buffer</em> sa représentation binaire.</p><p id="r-533605" data-claire-element-id="533605">Par exemple si vous faites</p><pre id="r-533606" data-claire-element-id="533606"><code>ld a,54
ld (plotsscreen),a</code></pre><p id="r-533607" data-claire-element-id="533607">le premier octet du <em>graph buffer</em> (correspondant aux 8 premiers pixels de la première ligne de l'écran) ressemblera à ceci :</p><figure id="r-533609" data-claire-element-id="533610"><img id="r-533608" data-claire-element-id="533608" src="medias/uploads.siteduzero.com_files_135001_136000_135907.png" alt="Image utilisateur"/></figure><p id="r-533611" data-claire-element-id="533611">car 54 = %0110110.</p><aside id="r-533613" data-claire-element-id="533613" data-claire-semantic="warning"><p id="r-533612" data-claire-element-id="533612">On travaille sur des <strong>octets</strong>, alors attention aux premiers bits !</p></aside><p id="r-533614" data-claire-element-id="533614">De plus, le dessin de l'écran standard peut être remplacé en un clin d'oeil par celui du <em>graph buffer</em>. Ce dernier s'efface alors.</p><p id="r-533615" data-claire-element-id="533615">À la base, cette propriété s'utilise pour passer d'un dessin à l'autre le plus rapidement possible, ce qui évite que l'utilisateur soit gêné par le rafraîchissement de tous les pixels de l'écran.<br/> Bien sûr notre résolution n'est pas énorme mais il faut en tenir compte !</p><p id="r-533616" data-claire-element-id="533616">Vous pouvez aussi utiliser le fait que les dessins faits sur le <em>graph buffer</em> sont invisibles pour y mettre des données que vous ne souhaitez pas forcément voir apparaître. Il vous suffira alors de copier le <em>graph buffer</em> à l'écran ou non en fonction de votre choix.</p><h5 id="r-romcalls" data-claire-element-id="533624">Romcalls</h5><p id="r-533618" data-claire-element-id="533618">Le strict nécessaire !</p><h6 id="r-grbufclr" data-claire-element-id="533620">_grbufclr</h6><p id="r-533619" data-claire-element-id="533619">Efface le <em>graph buffer</em> ; cela revient à mettre tous les octets de <em>plotsscreen</em> à <em>plotsscreen+767</em> à zéro.</p><h6 id="r-grbufcpy" data-claire-element-id="533623">_grbufcpy</h6><p id="r-533621" data-claire-element-id="533621">Copie le <em>graph buffer</em> à l'écran.<br/> L'écran initial n'influe pas puisque celui-ci est remplacé.<br/> Le <em>graph buffer</em><strong>ne change pas</strong> après l'appel de cette <em>romcall</em>.</p><p id="r-533622" data-claire-element-id="533622">Elles détruisent tous les registres.</p><h5 id="r-flags-5" data-claire-element-id="533635"><em>Flags</em></h5><p id="r-533625" data-claire-element-id="533625">Pour dessiner sur le <em>graph buffer</em> via des <em>romcalls</em>, c'est très simple : il suffit d'activer le <em>flag</em> :</p><ul id="r-533630" data-claire-element-id="533630"><li id="r-533627" data-claire-element-id="533627"><p id="r-533626" data-claire-element-id="533626"><strong>textwrite</strong>, de <em>sgrflags</em> pour le texte en petits caractères ;</p></li><li id="r-533629" data-claire-element-id="533629"><p id="r-533628" data-claire-element-id="533628"><strong>bufferonly</strong>, de <em>plotflag3</em> pour les fonctions graphiques.</p></li></ul><p id="r-533631" data-claire-element-id="533631">Pour le texte en grands caractères, il faudra repasser... ! :p</p><p id="r-533632" data-claire-element-id="533632">L'activation d'un de ces <em>flags</em> provoque le dessin des <em>romcalls</em> concernées uniquement sur le <em>graph buffer</em>.<br/> Ces deux <em>flags</em> peuvent être activés simultanément.</p><aside id="r-533634" data-claire-element-id="533634" data-claire-semantic="information"><p id="r-533633" data-claire-element-id="533633">Si la désactivation de ces <em>flags</em> entraîne le tracé uniquement sur le LCD, vous pouvez choisir de dessiner sur le LCD <strong>et</strong> sur le <em>graph buffer</em> en même temps en activant le <em>flag</em><strong>plotloc</strong> du groupe <em>plotflags</em>.</p></aside><h5 id="r-exemple-d-utilisation-17" data-claire-element-id="533675">Exemple d'utilisation</h5><p id="r-533636" data-claire-element-id="533636">Voici un schéma de l'utilisation générale du <em>graph buffer</em> couplé à un visuel et au code correspondant :</p><p id="r-533637" data-claire-element-id="533637">&lt;tableau&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;</p><figure id="r-533639" data-claire-element-id="533640"><img id="r-533638" data-claire-element-id="533638" src="medias/uploads.siteduzero.com_files_135001_136000_135908.png" alt="Image utilisateur"/></figure><p id="r-533641" data-claire-element-id="533641">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533643" data-claire-element-id="533644"><img id="r-533642" data-claire-element-id="533642" src="medias/uploads.siteduzero.com_files_135001_136000_135909.png" alt="Image utilisateur"/></figure><p id="r-533645" data-claire-element-id="533645">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533647" data-claire-element-id="533648"><img id="r-533646" data-claire-element-id="533646" src="medias/uploads.siteduzero.com_files_135001_136000_135910.png" alt="Image utilisateur"/></figure><p id="r-533649" data-claire-element-id="533649">&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;On remplit le LCD...&lt;/cellule&gt;<br/> &lt;cellule&gt;puis le <em>graph buffer</em>...&lt;/cellule&gt;<br/> &lt;cellule&gt;et on copie !&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;</p><figure id="r-533651" data-claire-element-id="533652"><img id="r-533650" data-claire-element-id="533650" src="medias/uploads.siteduzero.com_files_136001_137000_136045.png" alt="Image utilisateur"/></figure><p id="r-533653" data-claire-element-id="533653">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533655" data-claire-element-id="533656"><img id="r-533654" data-claire-element-id="533654" src="medias/uploads.siteduzero.com_files_136001_137000_136046.png" alt="Image utilisateur"/></figure><p id="r-533657" data-claire-element-id="533657">&lt;/cellule&gt;<br/> &lt;cellule&gt;</p><figure id="r-533659" data-claire-element-id="533660"><img id="r-533658" data-claire-element-id="533658" src="medias/uploads.siteduzero.com_files_136001_137000_136047.png" alt="Image utilisateur"/></figure><p id="r-533661" data-claire-element-id="533661">&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;/tableau&gt;<br/> Voici le code exécutable correspondant :</p><pre id="r-533662" data-claire-element-id="533662"><code>#include &quot;ultimate.inc&quot;
start:
        bcall(_clrlcdfull)
        bcall(_grbufclr)
        ld de,$1010
        ld (pencol),de
        ld hl,texte
        bcall(_vputs)
        bcall(_getkey)
        set textwrite,(iy+sgrflags)
        ld hl,texte_buffer
        ld de,0
        ld (pencol),de
        bcall(_vputs)
        bcall(_getkey)
        bcall(_grbufcpy)
        bcall(_getkey)
        res textwrite,(iy+sgrflags)
quit:
        ret        
texte:
.db &quot;BONJOUR&quot;,0
texte_buffer:
.db &quot;AU REVOIR&quot;,0
.end</code></pre><p id="r-533663" data-claire-element-id="533663">Les deux textes sont placés à des coordonnées différentes pour bien visualiser que <strong>la copie du <em>graph buffer</em> efface le LCD</strong> ; le « BONJOUR » ne se trouve au final pas « sous » le « AU REVOIR » !</p><aside id="r-533665" data-claire-element-id="533665" data-claire-semantic="warning"><p id="r-533664" data-claire-element-id="533664">Remarquez le <strong>res textwrite,(iy+sgrflags)</strong> à la fin du programme : la calculatrice garde les valeurs des <em>flags</em> que vous modifiez jusqu'à l'extinction.</p></aside><p id="r-533666" data-claire-element-id="533666">Et alors... ?</p><p id="r-533667" data-claire-element-id="533667">Si vous enlevez cette ligne, <em>textwrite</em> sera toujours activé, même si vous relancez le programme. Vous voyez le problème ? Dans ce cas, le bonjour ne s'afficherait pas sur le LCD mais directement sur le <em>graph buffer</em>, et ne serait donc visible qu'à la troisième étape.</p><p id="r-533668" data-claire-element-id="533668">La calculatrice prévoit par défaut l'affichage sur le LCD uniquement, veillez donc :</p><ul id="r-533673" data-claire-element-id="533673"><li id="r-533670" data-claire-element-id="533670"><p id="r-533669" data-claire-element-id="533669">à <strong>rétablir les valeurs par défaut</strong> aux <em>flags</em> modifiés à la fin du programme ;</p></li><li id="r-533672" data-claire-element-id="533672"><p id="r-533671" data-claire-element-id="533671">à <strong>activer / désactiver les <em>flags</em> voulus au début du programme</strong> par mesure de précaution. Je ne le fais pas ici car n'ayant lancé que ce programme, je savais qu'il rétablissait le <em>flag</em> à sa valeur par défaut. Après c'est à vous de voir. ;)</p></li></ul><p id="r-533674" data-claire-element-id="533674">Bien, maintenant que vous connaissez les grandes lignes, passons à une application très intéressante du <em>graph buffer</em>, j'ai nommé... ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
<span class="arrow"></span>
<span class="next">Les romcalls graphiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
<span class="next">Les sprites</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lessprites"></a><h2>Les sprites</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
<span class="arrow"></span>
<span class="next">Le graph buffer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">
<span class="next">Pression des touches</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-sprites-9" data-claire-element-id="533775">Les sprites</h4><p id="r-533677" data-claire-element-id="533677">Nan, rien à voir avec une quelconque boisson gazeuse. :D</p><p id="r-533678" data-claire-element-id="533678">Les <em>sprites</em> sont dans notre cas de petites images mouvantes ou non placées sur le &lt;itlaique&gt;graph buffer&lt;/italique&gt;.<br/> Par exemple, prenons le jeu Pong ; la balle et les « raquettes » sont des <em>sprites</em>, pareil pour les pièces de Tetris, les croix ou les ronds d'un morpion...</p><p id="r-533679" data-claire-element-id="533679">Exemple en image :</p><figure id="r-533681" data-claire-element-id="533682"><img id="r-533680" data-claire-element-id="533680" src="medias/uploads.siteduzero.com_files_97001_98000_97902.png" alt="Image utilisateur"/></figure><p id="r-533683" data-claire-element-id="533683">Voici un <em>sprite</em> de 1 x 8 octets sur l'écran de la calculatrice.<br/> Sur le <em>graph buffer</em>, l'état d'un pixel est représenté par l'état d'un bit.</p><p id="r-533684" data-claire-element-id="533684">On a donc ceci sur le <em>graph buffer</em> :</p><figure id="r-533686" data-claire-element-id="533687"><img id="r-533685" data-claire-element-id="533685" src="medias/uploads.siteduzero.com_files_97001_98000_97903.png" alt="Image utilisateur"/></figure><p id="r-533688" data-claire-element-id="533688">Ceci n'est pas très représentatif, mais si on enlève les zéros... on obtient ceci :</p><figure id="r-533690" data-claire-element-id="533691"><img id="r-533689" data-claire-element-id="533689" src="medias/uploads.siteduzero.com_files_97001_98000_97904.png" alt="Image utilisateur"/></figure><p id="r-533692" data-claire-element-id="533692">Comme quoi le binaire est parfois plus simple que le décimal. :-°</p><p id="r-533693" data-claire-element-id="533693">Vous me direz : <em>eh ben c'est facile, il suffit de copier les bits du sprite sur le graph buffer !</em><br/> En fait, ce n'est pas aussi simple que ça... &gt;_</p><p id="r-533694" data-claire-element-id="533694">Le raisonnement est bon, mais n'oubliez pas qu'on compte en <strong>octets</strong>.<br/> Cela implique que si on veut placer son <em>sprite</em> à un endroit qui ne correspond pas à un octet plein du <em>graph buffer</em>, on aura quelques problèmes !</p><p id="r-533695" data-claire-element-id="533695">Une 'tite image ne fera pas de mal :</p><figure id="r-533697" data-claire-element-id="533698"><img id="r-533696" data-claire-element-id="533696" src="medias/uploads.siteduzero.com_files_97001_98000_97905.png" alt="Image utilisateur"/></figure><p id="r-533699" data-claire-element-id="533699">Ici le <em>sprite</em> débute au 27e bit ; nous divisons par 8 avec <strong>srl</strong> pour connaître l'octet...<br/> Et nous obtenons 3.</p><p id="r-533700" data-claire-element-id="533700">Le <em>sprite</em> commence en effet <em>dans</em> le troisième octet (n'oubliez pas que la numérotation commence à zéro).<br/> Si on lance la routine <em>sprite</em> avec ces seules informations, notre <em>sprite</em> commencera donc à l'octet 3, c'est-à-dire au bit 24.<br/> Et nous, on voulait le bit 27. :'(</p><p id="r-533701" data-claire-element-id="533701">Il faudra donc ajouter du code pour spécifier le bon bit. En l'occurrence, il faudra se servir des rotations et décalages.<br/> C'est compliqué à comprendre les premières fois mais ne partez pas, ça vaut vraiment le coup ! ^^</p><p id="r-533702" data-claire-element-id="533702">Voici donc la routine <em>sprite</em> expliquée ; les « paramètres » sont :</p><ul id="r-533711" data-claire-element-id="533711"><li id="r-533704" data-claire-element-id="533704"><p id="r-533703" data-claire-element-id="533703"><strong>a</strong> : abscisse ;</p></li><li id="r-533706" data-claire-element-id="533706"><p id="r-533705" data-claire-element-id="533705"><strong>l</strong> : ordonnée ;</p></li><li id="r-533708" data-claire-element-id="533708"><p id="r-533707" data-claire-element-id="533707"><strong>ix</strong> : adresse du <em>sprite</em> ;</p></li><li id="r-533710" data-claire-element-id="533710"><p id="r-533709" data-claire-element-id="533709"><strong>b</strong> : nombre de lignes du <em>sprite</em>.</p></li></ul><p id="r-533712" data-claire-element-id="533712">À noter que le <em>sprite</em> dans ce cas fera obligatoirement un octet de large.<br/> Cette routine place dans le <em>graph buffer</em> un <em>sprite</em> de type « XORed », c'est-à-dire que si on a noir sur noir ou blanc sur noir, la couleur des pixels du <em>sprite</em> s'inversera.</p><pre id="r-533713" data-claire-element-id="533713"><code>sprite:
       ld e,l
       ld h,0
       ld d,h
       add hl,de
       add hl,de
       add hl,hl
       add hl,hl
       ld e,a
       and 7
       ld c,a
       srl e
       srl e
       srl e
       add hl,de
       ld de,plotsscreen
       add hl,de</code></pre><p id="r-533714" data-claire-element-id="533714">Ce code permet d'obtenir l'adresse exacte du début du <em>sprite</em>.<br/> Le principe est simple :</p><ul id="r-533727" data-claire-element-id="533727"><li id="r-533716" data-claire-element-id="533716"><p id="r-533715" data-claire-element-id="533715">on prend l'ordonnée du <em>sprite</em> ;</p></li><li id="r-533718" data-claire-element-id="533718"><p id="r-533717" data-claire-element-id="533717">on la multiplie par 12 (car une ligne du <em>graph buffer</em> fait 12 octets) pour avoir l'octet correspondant ;</p></li><li id="r-533720" data-claire-element-id="533720"><p id="r-533719" data-claire-element-id="533719">on réalise un modulo 8 sur l'abscisse pour trouver le nombre de bits à décaler. Ce nombre est stocké dans <strong>c</strong> ;</p></li><li id="r-533722" data-claire-element-id="533722"><p id="r-533721" data-claire-element-id="533721">on divise l'abscisse par 8 pour trouver la colonne de l'octet ;</p></li><li id="r-533724" data-claire-element-id="533724"><p id="r-533723" data-claire-element-id="533723">on additionne l'adresse de l'octet « ligne » avec celle de l'octet « colonne » ;</p></li><li id="r-533726" data-claire-element-id="533726"><p id="r-533725" data-claire-element-id="533725">et on additionne l'adresse précédente à celle du <em>graph buffer</em>.</p></li></ul><p id="r-533728" data-claire-element-id="533728">On a maintenant l'adresse de l'octet où placer le <em>sprite</em> dans <strong>hl</strong>, et le nombre de bits de décalage dans <strong>c</strong>.</p><pre id="r-533729" data-claire-element-id="533729"><code>putSpriteLoop1:
       ld d,(ix)
       ld e,0
       ld a,c
       or a
       jr z,putSpriteSkip1</code></pre><p id="r-533730" data-claire-element-id="533730">On stocke la première ligne du <em>sprite</em> dans <strong>d</strong> et on teste si le nombre de bits à décaler est nul ou non.</p><div id="r-533732" data-claire-element-id="533732" data-claire-semantic="question"><p id="r-533731" data-claire-element-id="533731">Eh ! Ce n'est pas <strong>cp</strong> pour comparer ?</p></div><p id="r-533733" data-claire-element-id="533733">Dans le cas général, oui.<br/> C'est d'ailleurs possible ici, mais <em>or</em> agit sur <strong>a</strong> et le <em>flag</em><strong>z</strong>.<br/> Comme <strong>a</strong><em>or</em><strong>a</strong> renvoie zéro seulement si <strong>a</strong>=0 (allez voir la table de vérité si vous ne vous souvenez plus :p ) et que les opérateurs logiques sont les instructions les plus rapides, ce choix est entièrement justifié !</p><p id="r-533734" data-claire-element-id="533734">S'il est nul (non, pas le choix, l'accumulateur :D ), c'est que l'adresse du premier bit (donc du MSB) de la ligne du <em>sprite</em> est aussi le MSB d'un octet du <em>graph buffer</em>. Il n'y a donc pas de décalage nécessaire.</p><pre id="r-533735" data-claire-element-id="533735"><code>putSpriteLoop2:
       srl d
       rr e
       dec a
       jr nz,putSpriteLoop2</code></pre><p id="r-533736" data-claire-element-id="533736">Ce code est appelé en cas de décalage.</p><p id="r-533737" data-claire-element-id="533737">L'astuce est de faire passer la ligne du <em>sprite</em> sur deux octets qui seront alignés avec ceux du <em>graph buffer</em>. Ici on utilise pour cela le <em>carry flag</em> comme intermédiaire.</p><p id="r-533738" data-claire-element-id="533738">En effet, <em>srl</em> décale vers la droite et place le bit 0 dans le <em>carry</em>. Et que fait <em>rr</em> ?!<br/> Il effectue une rotation et <strong>utilise le <em>carry</em> en tant que valeur du bit 7 !</strong><br/> En gros ça donne ça :</p><figure id="r-533740" data-claire-element-id="533741"><img id="r-533739" data-claire-element-id="533739" src="medias/uploads.siteduzero.com_files_138001_139000_138859.png" alt="Image utilisateur"/></figure><p id="r-533742" data-claire-element-id="533742">En utilisant <strong>dec</strong>, qui agit sur le <em>flag</em><strong>z</strong>, on répète l'opération <strong><em>a</em></strong> fois.<br/> On a donc au final la partie gauche du <em>sprite</em> dans <strong>d</strong>, et la droite dans <strong>e</strong> (et <strong>a</strong> à zéro, mais ça ne sert à rien de le savoir... :-° ).</p><pre id="r-533743" data-claire-element-id="533743"><code>putSpriteSkip1:
       ld a,(hl)
       xor d
       ld (hl),a
       inc hl
       ld a,(hl)
       xor e
       ld (hl),a
       ld de,11
       add hl,de
       inc ix
       djnz putSpriteLoop1
       ret</code></pre><p id="r-533744" data-claire-element-id="533744">Voici la boucle appelée directement s'il n'y a aucun décalage ; elle sert juste à placer la ligne du <em>sprite</em> dans le <em>graph buffer</em>.<br/> Vous devriez tout comprendre si vous vous rappelez que les opérateurs logiques stockent leur résultat dans <strong>a</strong>. :D</p><p id="r-533745" data-claire-element-id="533745">Donc :</p><ul id="r-533758" data-claire-element-id="533758"><li id="r-533747" data-claire-element-id="533747"><p id="r-533746" data-claire-element-id="533746">on récupère l'octet courant du <em>graph buffer</em> dans <strong>a</strong> ;</p></li><li id="r-533749" data-claire-element-id="533749"><p id="r-533748" data-claire-element-id="533748">on place la partie gauche du <em>sprite</em> à cet endroit en utilisant <em>xor</em> ;</p></li><li id="r-533751" data-claire-element-id="533751"><p id="r-533750" data-claire-element-id="533750">on répète l'opération pour la partie droite à l'octet suivant ;</p></li><li id="r-533753" data-claire-element-id="533753"><p id="r-533752" data-claire-element-id="533752">on passe à l'octet suivant du <em>graph buffer</em> (on n'ajoute pas 12 car <strong>hl</strong> a déjà été incrémenté une fois) ;</p></li><li id="r-533755" data-claire-element-id="533755"><p id="r-533754" data-claire-element-id="533754">on passe à la ligne suivante du <em>sprite</em>...</p></li><li id="r-533757" data-claire-element-id="533757"><p id="r-533756" data-claire-element-id="533756">et c'est reparti !</p></li></ul><p id="r-533759" data-claire-element-id="533759">Notez que <em>djnz</em> prend en compte le registre <strong>b</strong> qui contient le nombre de lignes du <em>sprite</em>.</p><p id="r-533760" data-claire-element-id="533760">OK, et maintenant... le code complet !!</p><pre id="r-533761" data-claire-element-id="533761"><code>sprite:
       ld e,l
       ld h,0
       ld d,h
       add hl,de
       add hl,de
       add hl,hl
       add hl,hl
       ld e,a
       and 7
       ld c,a
       srl e
       srl e
       srl e
       add hl,de
       ld de,plotSScreen
       add hl,de
putSpriteLoop1:
sl1:   ld d,(ix)
       ld e,0
       ld a,c
       or a
       jr z,putSpriteSkip1
putSpriteLoop2:
       srl d
       rr e
       dec a
       jr nz,putSpriteLoop2
putSpriteSkip1:
       ld a,(hl)
       xor d
       ld (hl),a
       inc hl
       ld a,(hl)
       xor e
       ld (hl),a
       ld de,11
       add hl,de
       inc ix
       djnz putSpriteLoop1
       ret</code></pre><p id="r-533762" data-claire-element-id="533762">Pour la petite histoire, il existe d'autres routines <em>sprite</em> mais celle-ci est la plus optimisée (pas la plus simple car elle se valent toutes à ce niveau !).<br/> D'ailleurs si vous connaissez, c'est cette routine qui est utilisée à l'appel de <em><strong>isprite</strong></em> sous <strong>Ion</strong>.</p><p id="r-533763" data-claire-element-id="533763">Pour clarifier votre code, placez ce code dans un fichier Z80 « sprite » (pour l'exemple) séparé et dans le même dossier que votre projet.<br/> Quand vous aurez besoin de cette routine, utilisez</p><pre id="r-533764" data-claire-element-id="533764"><code>call putsprite</code></pre><p id="r-533765" data-claire-element-id="533765">avec</p><pre id="r-533766" data-claire-element-id="533766"><code>putsprite :
        #include &quot;sprite.z80&quot;</code></pre><p id="r-533767" data-claire-element-id="533767">Petit récapitulatif en image :</p><figure id="r-533769" data-claire-element-id="533770"><img id="r-533768" data-claire-element-id="533768" src="medias/uploads.siteduzero.com_files_97001_98000_97906.png" alt="Image utilisateur"/></figure><p id="r-533771" data-claire-element-id="533771">Pour mouvoir un <em>sprite</em>, le schéma est généralement le même : placement, affichage, effacement, puis on recommence !<br/> Donc il reste à voir... l'effacement !!</p><p id="r-533772" data-claire-element-id="533772">Il existe deux solutions pour cela ; je n'en traiterai qu'une, la plus simple.<br/> Le problème est d'effacer le <em>sprite</em> du <em>graph buffer</em>.</p><p id="r-533773" data-claire-element-id="533773">Notre <em>sprite</em> est de type XORed, donc...? Si on place à nouveau le même &lt;itlaique&gt;sprite&lt;/italique&gt; au même endroit, les bits reprendront l'état qu'ils avaient avant l'affichage !<br/> Donc pour effacer un <em>sprite</em>, il suffit de le <strong>placer de nouveau au même endroit et de copier le <em>graph buffer</em> à l'écran.</strong></p><p id="r-533774" data-claire-element-id="533774">Bon, je crois que pour coder des programmes vraiment dynamiques, il n'y a plus qu'à gérer les actions de l'utilisateur. Parce que je crois qu'il s'impatiente, là ! :lol: <br/> Eh bien c'est parti !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
<span class="arrow"></span>
<span class="next">Le graph buffer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">
<span class="next">Pression des touches</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Pressiondestouches"></a><h2>Pression des touches</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
<span class="arrow"></span>
<span class="next">Les sprites</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
<span class="next">Les romcalls</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-533777" data-claire-element-id="533777">Allez, plus qu'un chapitre et vous posséderez toutes les bases nécessaires à la création de « vrais » programmes !</p>
</div><a name="Lesromcalls"></a><h2>Les romcalls</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">
<span class="arrow"></span>
<span class="next">Pression des touches</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
<span class="next">Utilisation des ports : le direct input</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-romcalls-1" data-claire-element-id="533834">Les romcalls</h4><p id="r-533778" data-claire-element-id="533778">C'est l'interaction la plus simple à gérer ; le but est de détecter l'appui sur une touche et tant qu'à faire de détecter quelle touche a été pressée !<br/> Nous verrons ici des solutions passant par des <em>romcalls</em>. Elles sont donc à utiliser dans des programmes ne demandant pas une rapidité très importante, mais sont très pratiques pour la saisie de texte, pour déplacer le curseur d'un menu...</p><h5 id="r-getkey-4972" data-claire-element-id="533823">_getkey ($4972)</h5><p id="r-533779" data-claire-element-id="533779">Si vous êtes des programmeurs Basic, vous ne pouvez pas être passés à côté de cette fonction qui renvoie un code correspondant à la touche pressée.<br/> Eh bien en Assembleur, c'est quasiment la même chose !<br/> Quand vous utilisez <code>bcall(_getkey)</code> le programme stoppe à cette instruction en attendant l'appui sur une touche, puis renvoie le code correspondant dans l'accumulateur.</p><p id="r-533780" data-claire-element-id="533780">Les codes se trouvent dans <strong>ultimate.inc</strong> à la section <em><strong>keyboard key names</strong></em>, mais ils sont faciles à comprendre ; il suffit d'ajouter « k » devant le nom de la touche. On a par exemple <em>k0</em>, <em>kyequ (Y=)</em>, <em>kleft</em>...<br/> Mais aussi <em>kquit</em>, <em>klinkio</em>, <em>kmatrixed</em>... Eh oui, 2ND ou ALPHA peuvent être activés !</p><p id="r-533781" data-claire-element-id="533781">Lorsque le programme attend, vous pouvez donc :</p><ul id="r-533788" data-claire-element-id="533788"><li id="r-533783" data-claire-element-id="533783"><p id="r-533782" data-claire-element-id="533782">activer 2ND ou ALPHA ;</p></li><li id="r-533785" data-claire-element-id="533785"><p id="r-533784" data-claire-element-id="533784">changer le contraste ;</p></li><li id="r-533787" data-claire-element-id="533787"><p id="r-533786" data-claire-element-id="533786">éteindre la calculatrice.</p></li></ul><p id="r-533789" data-claire-element-id="533789">Le problème si vous éteignez la calculatrice à ce moment, c'est que la RAM utilisée par le programme ne sera libérée qu'après un <em>reset</em>. Ce n'est pas forcément grave, mais ça implique une perte de mémoire. :colere2: <br/> Pour contrer ceci vous pouvez utiliser <strong>_getkeyretoff</strong> ($500B) qui n'est pas dans le fichier <em>include</em>... Si on tente d'éteindre la calculatrice pendant l'exécution de cette <em>romcall</em>, la valeur <strong>koff</strong> est stockée dans l'accumulateur, et c'est tout !<br/> L'inconvénient est que cette <em>romcall</em> agit sur l'OS, il faudra donc aller dans un menu avant de pouvoir éteindre la calculatrice !</p><p id="r-533790" data-claire-element-id="533790">D'ailleurs, lancez ce programme et essayez d'éteindre la calculatrice quand celle-ci attend la pression d'une touche :</p><pre id="r-533791" data-claire-element-id="533791"><code>#include &quot;ultimate.inc&quot;
start:
        bcall(_clrlcdfull)
        bcall($500B)
        ld l,a
        ld h,0
        ld de,0
        ld (currow),de
        bcall(_disphl)
quit:
        ret        
.end</code></pre><aside id="r-533793" data-claire-element-id="533793" data-claire-semantic="information"><p id="r-533792" data-claire-element-id="533792">Ne vous inquiétez pas si votre <strong>Done</strong> est un peu bizarre !</p></aside><p id="r-533794" data-claire-element-id="533794">Comme vous avez dû le comprendre, la calculatrice ne s'éteindra pas, et 63 sera affiché. Pourquoi 63 ?!</p><figure id="r-533796" data-claire-element-id="533797"><img id="r-533795" data-claire-element-id="533795" src="koff.html" alt="koff"/></figure><p id="r-533798" data-claire-element-id="533798">Eh oui... $3F = 63 !</p><p id="r-533799" data-claire-element-id="533799">Et voilà, vous pouvez toujours faire « 2ND+ON », il faudra systématiquement faire un tour dans un menu pour pouvoir éteindre (ou « 2ND QUIT ») !<br/> Encore un exemple sur les dangers de l'Assembleur... :-°</p><p id="r-533800" data-claire-element-id="533800">Il existe tout de même une solution pour éviter cela. Apparemment ce comportement serait dû à un <em>flag</em> sans nom et donc sans documentation. Toujours est-il que <em>_getkeyretoff</em> met à 1 le <em>flag</em><strong>7,(iy+40)</strong>. Il suffira donc de le « resetter » avant la fin du programme pour pouvoir éteindre la calculatrice normalement...</p><p id="r-533801" data-claire-element-id="533801">Tant qu'on y est, parlons des <em>flags</em> !</p><ul id="r-533812" data-claire-element-id="533812"><li id="r-533803" data-claire-element-id="533803"><p id="r-533802" data-claire-element-id="533802"><strong>indiconly, (iy+indicflags)</strong> doit <em><strong>impérativement</strong></em> être à zéro ; sinon aucune pression ne sera détectée !</p></li><li id="r-533805" data-claire-element-id="533805"><p id="r-533804" data-claire-element-id="533804"><strong>apdable, (iy+apdflags)</strong> représente l'activation de l'APD. S'il est à un et que vous attendez à un <em>getkey</em>, la calculatrice finira par s'éteindre, mais l'exécution du programme reprendra à l'allumage.</p></li><li id="r-533807" data-claire-element-id="533807"><p id="r-533806" data-claire-element-id="533806"><strong>lwrcaseactive, (iy+applwrcaseflag)</strong> permet d'activer ou non l'écriture minuscule suite à deux pressions sur « ALPHA ». S'il est à un, les minuscules sont activées.</p></li><li id="r-533809" data-claire-element-id="533809"><p id="r-533808" data-claire-element-id="533808"><strong>onrunning, (iy+onflags)</strong> détermine le comportement du programme en cas d'appui sur « ON », si celui-ci ne génère pas un ERR:BREAK. S'il est à un, le programme continuera à tourner, et vice-versa.</p></li><li id="r-533811" data-claire-element-id="533811"><p id="r-533810" data-claire-element-id="533810"><strong>oninterrupt, (iy+onflags)</strong> est à 1 uniquement si « ON » a été pressé pendant le programme.</p></li></ul><aside id="r-533814" data-claire-element-id="533814" data-claire-semantic="information"><p id="r-533813" data-claire-element-id="533813">Je n'ai pas élucidé le fait que l'appui sur « ON » génère ou non un ERR:BREAK puisque mon émulateur et ma calculatrice ne réagissaient pas de la même façon. Il vous faudra tester avant...</p></aside><aside id="r-533816" data-claire-element-id="533816" data-claire-semantic="warning"><p id="r-533815" data-claire-element-id="533815">Une fois que <strong>oninterrupt</strong> est actif, la calculatrice est bloquée, que <strong>onrunning</strong> soit actif ou non. Cela peut paraître bizarre mais dans notre cas, le programme attendrait indéfiniment au <em>getkey</em>. La solution consiste à désactiver <strong>oninterrupt</strong> lors de la détection d'une pression sur « ON » !</p></aside><p id="r-533817" data-claire-element-id="533817">Pour exemple, voici la célèbre boucle <em>getkey</em>, qui affiche le code de la touche renvoyé par <em>getkey</em> jusqu'à appui sur « 2ND QUIT ». Ce programme est protégé (sous réserve de ne pas obtenir un ERR:BREAK...) contre l'appui sur « ON » et l'extinction, sans affecter le fonctionnement par défaut de la calculatrice !</p><pre id="r-533818" data-claire-element-id="533818"><code>#include &quot;ultimate.inc&quot;
_getkeyretoff .equ $500B
start:
        set onrunning,(iy+onflags)        ; assure l'exécution du programme
        bcall(_clrlcdfull)
loop:
        bcall(_getkeyretoff)
        cp 0                                                        ; teste si ON a été pressé
        jr z,resetinterrupt                        ; si oui, on va désactiver l'interruption
        cp kquit                                                ; sinon, on teste si 2ND QUIT a été pressé...
        jr z,quit                                                ; ... et on quitte si oui
        ld l,a
        ld h,0                                                ; on stocke le code de la touche dans hl...
        ld de,0
        ld (currow),de
        bcall(_disphl)                                ; ... et on l'affiche
        jr loop                                                ; et on boucle !
quit:
        res 7,(iy+40)                                        ; on active l'extinction normale
        ret
resetinterrupt:
        res oninterrupt, (iy+onflags)        ; on désactive le blocage suite à l'appui sur ON
        jr loop
.end</code></pre><aside id="r-533820" data-claire-element-id="533820" data-claire-semantic="error"><p id="r-533819" data-claire-element-id="533819">L'utilisation de ce type de boucle nécessite obligatoirement une condition de sortie puisque ON n'interrompt pas le programme. Ou alors enlever les piles... !</p></aside><p id="r-533821" data-claire-element-id="533821">Ici, si vous appuyez sur « ON » (code de touche : 0), rien ne changera à l'écran et le programme continuera de tourner normalement.</p><p id="r-533822" data-claire-element-id="533822">Une dernière chose : ces <em>romcalls</em> détruisent <strong>bc</strong>, <strong>de</strong> et <strong>hl</strong> !</p><h5 id="r-getcsc-4018" data-claire-element-id="533833">_getcsc ($4018)</h5><p id="r-533824" data-claire-element-id="533824">Cette fois, voilà le vrai « équivalent » de la fonction Basic ; cette <em>romcall</em> renvoie un code correspondant à la touche pressée, mais sans attente. Si aucune touche n'est détectée lors de l'exécution de la <em>romcall</em> ou si « ON » est pressé, celle-ci renvoie la valeur 0.</p><p id="r-533825" data-claire-element-id="533825">De plus, <em>_getcsc</em> est plus rapide que <em>_getkey</em> et détruit seulement <strong>hl</strong>.</p><p id="r-533826" data-claire-element-id="533826">En contrepartie l'APD n'est pas pris en charge, pas plus que l'activation de 2ND ou ALPHA, même si ces derniers peuvent être détectés.</p><p id="r-533827" data-claire-element-id="533827">Les codes renvoyés se trouvent dans <em>ultimate.inc</em> à la section <strong>scan code equates</strong>. Ils se reconnaissent à leur préfixe « sk ».<br/> Remarquez qu'il y a beaucoup moins de codes que pour <em>_getkey</em> puisque l'appui sur « 2ND » ou « ALPHA » ne le modifie pas ; en revanche, il renverra <em><strong>sk2nd</strong></em> ou <em><strong>skalpha</strong></em> (cela implique qu'on ne pourra pas éteindre la calculatrice :lol: ) !</p><p id="r-533828" data-claire-element-id="533828">Voici l'équivalent du code précédent, mais avec <em>_getcsc</em> ; le programme s'arrête à l'appui sur « ENTER ».</p><pre id="r-533829" data-claire-element-id="533829"><code>#include &quot;ultimate.inc&quot;
start:
        set onrunning, (iy+onflags)
        bcall(_clrlcdfull)
loop:
        bcall(_getcsc)
        bit oninterrupt, (iy+onflags)        ; on teste si ON a été pressé
        jr nz,onpressed
        cp 0                                                        ; on vérifie si aucune touche n'a été pressée
        jr z,nokeypressed
        cp skenter                                        ; si appui sur ENTER...
        jr z,quit                                                ; ... on quitte
        ld l,a
        ld h,0
        ld de,0
        ld (currow),de
        bcall(_disphl)                                ; on affiche le code de la touche
        jr loop
quit:
        ret
onpressed:
        res oninterrupt, (iy+onflags)        ; on désactive le blocage
nokeypressed:
        halt                                                        ; on passe en mode &quot;low power&quot; (pour ne pas afficher les 0)
        jr loop
.end</code></pre><aside id="r-533831" data-claire-element-id="533831" data-claire-semantic="information"><p id="r-533830" data-claire-element-id="533830">Je suppose que vous avez remarqué le <strong>halt</strong>. Ne vous en préoccupez pas, il sert juste à visualiser le code de la touche pressée. Si vous l'enlevez, vous ne verrez que des zéros puisqu'il n'y a pas d'attente et que la boucle est très rapide !</p></aside><p id="r-533832" data-claire-element-id="533832">Voilà, vous connaissez toutes les <em>romcalls</em> de saisie !<br/><em>_getkey</em><strong>_getkey s'utilise lorsque le programme ne s'intéresse <strong>qu'</strong>aux entrées de l'utilisateur tandis que <em>_getcsc</em> permet d'exécuter du code en attendant la pression des touches.</strong></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">
<span class="arrow"></span>
<span class="next">Pression des touches</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
<span class="next">Utilisation des ports : le direct input</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilisationdesportsledirectinput"></a><h2>Utilisation des ports : le direct input</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
<span class="arrow"></span>
<span class="next">Les romcalls</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
<span class="next">Exercice : une souris</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utilisation-des-ports-le-direct-input" data-claire-element-id="533858">Utilisation des ports : le direct input</h4><p id="r-533835" data-claire-element-id="533835">C'est la méthode la plus rapide puisqu'elle n'utilise aucune <em>romcall</em> !...</p><h5 id="r-introduction-aux-ports" data-claire-element-id="533856">Introduction aux ports</h5><p id="r-533836" data-claire-element-id="533836">On peut définir un port comme un point de transit de données entre le processeur et l'un de ses « périphériques ».</p><p id="r-533837" data-claire-element-id="533837">Si vous avez du mal à comprendre, voici une belle métaphore :</p><p id="r-533838" data-claire-element-id="533838"><cite>Citation : Sean McLaughlin</cite></p><blockquote id="r-533840" data-claire-element-id="533840"><p id="r-533839" data-claire-element-id="533839">Imaginez que vous voulez aller de Yokohama à San Francisco en voiture ; c'est impossible car ces villes sont séparées par des kilomètres d'océan. Vous allez donc aller au <em>port</em> de Yokohama en voiture, et embarquer avec elle sur un bateau jusqu'au <em>port</em> de San Francisco. Une fois là-bas, vous pourrez de nouveau vous déplacer en voiture.</p></blockquote><p id="r-533841" data-claire-element-id="533841">Vous et la voiture représentez les données envoyées, Yokohama le processeur et San Francisco le périphérique. Ils n'ont pas de réelle connexion et utilisent donc des ports pour interagir.</p><p id="r-533842" data-claire-element-id="533842">Il y a plusieurs périphériques sur notre TI comme l'écran, la connexion USB... et surtout (du moins ici !) le clavier !<br/> Tous ces périphériques possèdent donc leur propre port grâce auquel on pourra envoyer et recevoir des voitures informations. o_O</p><p id="r-533843" data-claire-element-id="533843">Il est nécessaire de connaître les instructions suivantes :</p><ul id="r-533849" data-claire-element-id="533849"><p id="r-533844" data-claire-element-id="533844"><em>Écriture</em></p><li id="r-533846" data-claire-element-id="533846"><p id="r-533845" data-claire-element-id="533845"><strong>out ([entier]), a</strong> envoie au port [entier] l'octet de l'accumulateur,</p></li><li id="r-533848" data-claire-element-id="533848"><p id="r-533847" data-claire-element-id="533847"><strong>out (c), [registre 8 bits]</strong> envoie au port <strong>c</strong> l'octet de [registre 8 bits] ;</p></li></ul><ul id="r-533855" data-claire-element-id="533855"><p id="r-533850" data-claire-element-id="533850"><em>Lecture</em></p><li id="r-533852" data-claire-element-id="533852"><p id="r-533851" data-claire-element-id="533851"><strong>in a, ([entier])</strong> stocke l'octet envoyé par le port [entier] dans l'accumulateur,</p></li><li id="r-533854" data-claire-element-id="533854"><p id="r-533853" data-claire-element-id="533853"><strong>in [registre 8 bits], (c)</strong> stocke l'octet envoyé par le port <strong>c</strong> dans [registre 8 bits].</p></li></ul><h5 id="r-le-port-ndeg1" data-claire-element-id="533857">Le port n°1 !</h5>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
<span class="arrow"></span>
<span class="next">Les romcalls</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
<span class="next">Exercice : une souris</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Exerciceunesouris"></a><h2>Exercice : une souris</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
<span class="arrow"></span>
<span class="next">Utilisation des ports : le direct input</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-exercice-une-souris" data-claire-element-id="533861">Exercice : une souris</h4><p id="r-533859" data-claire-element-id="533859">Ce chapitre lié à celui des graphismes offre pas mal de possibilités, dont... (je suis sûr que vous y avez pensé :lol: ) des jeux !!<br/> C'est donc la création d'un jeu qui clôturera la deuxième partie de ce tuto !</p><p id="r-533860" data-claire-element-id="533860">Le cours n'est pas fini ; d'ailleurs je me demande s'il sera fini un jour tant il y a de possibilités ! ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti">Apprendre l&#039;ASM Z80 pour TI</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction / installation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/quelques-trucs-a-savoir">Quelques trucs à savoir...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pourquoi-l-asm">
Pourquoi l&#039;ASM ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/introduction-a-la-notion-de-bases">
Introduction à la notion de bases
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/materiel-necessaire-2">Matériel nécessaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/edition-2">
Édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/compilation-12">
Compilation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/transfert">
Transfert
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/emulation-1">
Émulation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/et-gnu-linux-alors">
Et GNU/Linux alors ?!...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Codage - les bases
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-commencement-1">Le commencement</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-header-incontournable">
Le header... incontournable !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/votre-1er-programme-1">
Votre 1er programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/qui-peut-se-passer-des-variables">Qui peut se passer des variables ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-predefinies">
Variables prédéfinies
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/variables-definies-par-l-utilisateur">
Variables définies par l&#039;utilisateur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/operations-de-base-4">
Opérations de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-stack">
Le stack
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/nombres-negatifs">
Nombres négatifs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/un-peu-de-texte">Un peu de texte...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/ressources-necessaires">
Ressources nécessaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/hello-world-vous-connaissez">
« Hello world! », vous connaissez ?!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/trucs-utiles">Trucs utiles...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/flags-3">
Flags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/sauts-sauts-conditionnels">
Sauts / Sauts conditionnels
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-fichiers-include">
Les fichiers include
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/parlons-de-bits">
Parlons de bits...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/graphisme">Graphisme</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/l-ecran-graphique-1">
L&#039;écran graphique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-graphiques">
Les romcalls graphiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/le-graph-buffer">
Le graph buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-sprites-9">
Les sprites
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/pression-des-touches">Pression des touches</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/les-romcalls-1">
Les romcalls
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
Utilisation des ports : le direct input
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/exercice-une-souris">
Exercice : une souris
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprendre-l-asm-z80-pour-ti/utilisation-des-ports-le-direct-input">
<span class="arrow"></span>
<span class="next">Utilisation des ports : le direct input</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/apprendre-l-asm-z80-pour-ti.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 22:44:18 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/apprendre-l-asm-z80-pour-ti.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:59:53 GMT -->
</html>