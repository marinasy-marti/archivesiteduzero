<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/la-programmation-mac.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 22:43:42 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/la-programmation-mac.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:59:39 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : La programmation Mac</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/la-programmation-mac.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : La programmation Mac</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#LaprogrammationMac">La programmation Mac</a><br/><a href="#Pourcommencer...">Pour commencer...</a><br/><a href="#LabaseC">La base C</a><br/><a href="#Lamtaphoredesmessages">La métaphore des messages</a><br/><a href="#VotrepremierprogrammeObjective-C">Votre premier programme Objective-C</a><br/><a href="#L039outilXcode">L&#039;outil : Xcode</a><br/><a href="#Votrepremierprogramme">Votre premier programme !</a><br/><a href="#Lesmessages">Les messages</a><br/><a href="#Lasyntaxe">La syntaxe</a><br/><a href="#LaClasseNSString">La Classe NSString</a><br/><a href="#Lesutilisationscommunes">Les utilisations communes</a><br/></div>
<a name="LaprogrammationMac"></a><h2>La programmation Mac</h2><div class="content" role="article">
<aside id="r-504452" data-claire-element-id="504452" data-claire-semantic="information"><p id="r-504451" data-claire-element-id="504451">Ce cours est rédigé par <a href="http://www.siteduzero.com/membres-294-43551.html">PsychoH13</a>, <a href="http://www.siteduzero.com/membres-294-37658.html">Fubu33</a> et <a href="http://www.siteduzero.com/membres-294-1696.html">Bigloo</a>. ;)</p></aside><p id="r-504453" data-claire-element-id="504453">Bonjour à tous, j'ai enfin décidé de me (re)mettre à la rédaction d'un tutoriel pour le SdZ sur la programmation Macintosh !</p><div id="r-504455" data-claire-element-id="504455" data-claire-semantic="question"><p id="r-504454" data-claire-element-id="504454">Mais qu'est-ce que t'entends par programmation Mac ?</p></div><p id="r-504456" data-claire-element-id="504456">Bah, en fait, j'entends par là la programmation sur la plate-forme Mac OS X dans son ensemble, à commencer par le langage : Objective-C, on peut bien sûr programmer dans beaucoup d'autres langages mais celui-ci est mon préféré :D . C'est surtout c'est celui qu'Apple pousse le plus... C'est-à-dire que c'est celui qui a le plus de chances de résister au temps chez Apple, et donc d'être le mieux fourni en API compatibles...</p><p id="r-504457" data-claire-element-id="504457">En parlant d'API, je vais, pour commencer, parler de l'API Cocoa et ce, pour les mêmes raisons que pour le langage : c'est celle qu'Apple aide le plus. Mais je vais aussi vous apprendre à utiliser les outils fournis gratuitement par Apple pour développer sur Mac. Ces outils se nomment Xcode et Interface Builder dans un premier temps, ce sont ces outils utilisés pour développer nos chères applications .app;) . Donc, de beaux outils de pro à la portée de tout un chacun !</p><p id="r-504458" data-claire-element-id="504458">Dans un premier temps, ce sera ça... Mais si vous êtes sages, je vous montrerai quelques petits cadeaux d'Apple du style de CoreGraphics et autres joyeusetés :D .</p><p id="r-504459" data-claire-element-id="504459">Mais quelle impolitesse de ma part... J'ai oublié de me présenter : je m'appelle Psycho (Rémy en fait, mais tout le monde m'appelle Psy, alors...), je suis Macmanique depuis l'âge de 10 ans (j'en ai 21), étudiant en informatique sur PC ; la programmation sur Mac est pour moi un passe-temps et surtout m'évite de péter les plombs à force d'écrire du C# débile ^^ {troll}. Et comme j'aime bien partager ce que j'apprécie avec les autres, j'ai décidé de faire ce petit tutoriel sur un environnement de développement qui n'est limité que par votre imagination... Et vos compétences :D .</p><aside id="r-504461" data-claire-element-id="504461" data-claire-semantic="warning"><p id="r-504460" data-claire-element-id="504460">Je vais essayer de vous faire le cours le plus complet et le plus simple possible, mais vous avez tout de même besoin de prérequis. Il faut, en effet, pour programmer en Objective-C, connaître le C à fond, je ne saurais que trop vous conseiller le tutoriel de M@teo sur ce même site. Je ne reviendrai que peu sur ces concepts... Vous avez donc besoin, pour suivre ce cours, de lire le cours de M@teo sur le C (première et deuxième partie au moins, donc :D ) et de &quot;developer tools&quot; d'Apple, comme indiqué dans le tutoriel de M@teo.</p></aside><p id="r-504462" data-claire-element-id="504462">Je crois que c'est tout pour l'instant... J'espère que vous allez être tout aussi passionnés que moi en utilisant cet environnement de développement complet !<br/> Attachez vos ceintures, bon courage... C'est parti !!!</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Pourcommencer..."></a><h2>Pour commencer...</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-base-c">
<span class="next">La base C</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-504467" data-claire-element-id="504467">Dans cette partie, je vais commencer par exposer la base C de l'Objective-C, brièvement, M@teo le fait très bien lui-même. En ajoutant à cette base ce qui est spécifique à l'Objective-C.</p><p id="r-504468" data-claire-element-id="504468">Je vais aussi vous exposer les plus gros concepts de la programmation objet selon Objective-C... Plusieurs de ces concepts ont été récupérés par d'autres langages mais peut-être pas poussés aussi loin, bien que finalement, pour le programmeur ça ne change pas grand-chose :D . Il vaut cependant mieux savoir comment ça fonctionne sous le capot pour éviter de faire des conneries :D .</p>
</div><a name="LabaseC"></a><h2>La base C</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/pour-commencer-8">
<span class="arrow"></span>
<span class="next">Pour commencer...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-metaphore-des-messages">
<span class="next">La métaphore des messages</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-base-c" data-claire-element-id="504479">La base C</h4><div id="r-504470" data-claire-element-id="504470" data-claire-semantic="question"><p id="r-504469" data-claire-element-id="504469">Le C est-il vraiment compatible avec Objective-C ? Tout ce que j'ai fait avec le tutoriel de M@teo, je peux le faire en Objective-C sans rien changer ?</p></div><p id="r-504471" data-claire-element-id="504471">Oui ! Et mille fois oui ! Contrairement au C++ qui est un langage complètement différent inspiré du C. L'Objective-C est fait de C et de classes. Mais il faut tout de même apporter des modifications mineures pour faire passer vos codes C pour du code Objective-C.</p><p id="r-504472" data-claire-element-id="504472">Déjà, comme en C, on a deux types de fichiers : les fichiers sources .c et les fichiers d'en-tête (header) .h. En Objective-C, le fichier source devient un fichier .m au lieu de .c et le .h reste ce qu'il est.</p><p id="r-504473" data-claire-element-id="504473">Ensuite, parmi les directives de précompilations comme #include, #define, #ifndef, etc., l'Objective-C ajoute la directive <strong>#import</strong>. Cette directive est très pratique. En effet, elle remplace #include et permet, dans le fichier importé, de ne pas mettre les directives empêchant l'inclusion multiple à savoir :</p><pre id="r-504474" data-claire-element-id="504474"><code data-claire-semantic="c">#ifndef FICHIER_H_
#define FICHIER_H_

//déclarations

#endif</code></pre><p id="r-504475" data-claire-element-id="504475">Vous n'en avez plus besoin !!! Le compilateur gère lui-même l'inclusion avec la directive <strong>#import</strong> et empêche d'inclure à nouveau un fichier déjà importé sans ces directives.</p><p id="r-504476" data-claire-element-id="504476">L'Objective-C ajoute lui aussi son type booléen, il est un peu différent, il s'agit en fait du type BOOL, et ses valeurs possibles sont YES (oui / vrai) et NO (non / faux), qui sont comme en C lorsqu'on définit un type booléen : NO = zéro, et YES = tout sauf zéro. Sinon, pour le reste, tout est à peu prés pareil... En tout cas, dans la programmation procédurale.</p><p id="r-504477" data-claire-element-id="504477">Les fonctions, les structures et les variables doivent toujours être déclarées avant d'être utilisées. Faites attention aux abus du C++. Vous ne pouvez notamment pas surcharger les opérateurs, ni les fonctions normales.<br/> La nomenclature est toujours la même : quand il y a plusieurs mots dans une variable, on les identifie en mettant une majuscule à chacun d'eux, exemple : maVariable ; les noms des nouveaux types portent des majuscules au début. Les variables constantes sont en majuscules... vous pouvez bien sûr ne pas faire tout ça, mais c'est conseillé...<br/> Autre chose qui sera un peu plus importante au niveau de la programmation objet, c'est d'éviter les underscores &quot;_&quot; dans les noms des fonctions : il est préférable en effet de garder les majuscules pour les nouveaux mots, plutôt que de mettre l'underscore à cause des conversions faites en interne par le compilateur... Mais je vous expliquerai ça plus tard :D .</p><p id="r-504478" data-claire-element-id="504478">Voilà donc pour la programmation procédurale. La programmation procédurale est, au niveau du système, inchangée : une fonction est exécutée exactement de la même façon lors de son appel, c'est-à-dire qu'un espace lui est fourni dans la mémoire, et les valeurs des arguments y sont copiées, etc. Vous aurez donc besoin des pointeurs, et ça à la pelle : vous ne pourrez vraiment pas faire sans, il n'y a pas de références comme en C++. Vous devrez même gérer la mémoire vous-mêmes, il n'y a pas de <em>garbage collector</em> comme en Java, mais ne vous inquiétez pas, ce n'est pas particulièrement compliqué.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac">La programmation Mac</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Le langage de programmation : Objective-C
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/pour-commencer-8">Pour commencer...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-base-c">
La base C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-metaphore-des-messages">
La métaphore des messages
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">Votre premier programme Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/l-outil-xcode">
L&#039;outil : Xcode
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-5">
Votre premier programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">Les messages</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-syntaxe-16">
La syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
La Classe NSString
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-utilisations-communes">
Les utilisations communes
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/pour-commencer-8">
<span class="arrow"></span>
<span class="next">Pour commencer...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-metaphore-des-messages">
<span class="next">La métaphore des messages</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lamtaphoredesmessages"></a><h2>La métaphore des messages</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-base-c">
<span class="arrow"></span>
<span class="next">La base C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">
<span class="next">Votre premier programme Objective-C</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-metaphore-des-messages" data-claire-element-id="504494">La métaphore des messages</h4><p id="r-504480" data-claire-element-id="504480">Alors voilà : le concept Objet, aujourd'hui très répandu, est comme en C++ ou Java et les autres, il a pour principe de réunir dans une unique structure homogène les données et les fonctions qui y sont attachées... Ça ne change pas ici :D . En l'occurrence, c'est plutôt la façon d'écrire une classe qui change. Mais avant de vous dire comment écrire une classe, je vais vous expliquer le concept central de la programmation en Objective-C.</p><h5 id="r-le-dynamisme" data-claire-element-id="504486">Le dynamisme</h5><p id="r-504481" data-claire-element-id="504481">L'Objective-C est un langage entièrement dynamique. Il est basé sur un <em>runtime</em> (système d'exécution) qui permet de gérer les appels des messages, la création des objets, la communication entre eux... C'est ce qui a inspiré la machine virtuelle du Java, qui permet, pour le java, une portabilité totale : il faut juste avoir la machine virtuelle en question installée sur sa bécane :D . En Objective-C, c'est à peu près pareil, mais si vous avez GCC installé sur votre machine (ce qui est le cas quand vous installez Xcode sur Mac), vous avez cette machine virtuelle.</p><p id="r-504482" data-claire-element-id="504482">Cependant, le runtime de l'Objective-C permet un dynamisme beaucoup plus fort qu'en Java, en laissant le soin au runtime d'exécuter telle ou telle méthode selon le contexte. En effet, en Objective-C, seul le runtime se soucie des types et des redirections, au pire le compilateur vous donne un warning ; en effet, le type d'un objet n'est connu qu'à l'exécution.</p><div id="r-504484" data-claire-element-id="504484" data-claire-semantic="question"><p id="r-504483" data-claire-element-id="504483">On ne connaît pas le type au moment de la compilation ? Comment on fait quand on exécute la méthode d'un objet ? Comment on sait quelle méthode on peut exécuter ?</p></div><p id="r-504485" data-claire-element-id="504485">Déjà, je suppose que vous savez ce que vous faites : donc, vous connaissez les méthodes que vous pouvez exécuter sur un objet à tel moment. À part ça, le type n'est pas directement connu à la compilation, il est possible d'indiquer quel est le type d'un objet, mais vous n'y êtes pas forcés et pour le compilateur, ça ne changera pas grand-chose. Comme je l'ai dit, le compilateur vous dira au pire que l'objet ne pourra peut-être pas exécuter la méthode... Pas grand-chose, quoi :D , une simple supposition. Sinon, c'est le runtime qui s'occupe de &quot;reconnaître&quot; un objet et de lui faire exécuter une méthode. C'est possible parce que chaque objet est capable de s'identifier, de dire au runtime à n'importe quel moment à quelle classe il appartient, quelle est sa classe mère et quelles méthodes il est capable d'exécuter.</p><h5 id="r-les-messages-3" data-claire-element-id="504493">Les messages</h5><p id="r-504487" data-claire-element-id="504487">Ce système est notamment permis par la métaphore du message. Ici, contrairement à ce que je dis depuis tout à l'heure, on n'appelle pas des méthodes, mais on envoie un &quot;message&quot; à un objet. Pour le programmeur, ça ne change strictement rien (sauf quand on l'écrit mais ça, c'est une autre histoire ;) ), si l'objet peut exécuter la méthode, elle est exécutée... En revanche, ce qui change des autres langages, c'est que si l'objet n'en est pas capable, soit l'objet redirige le message, soit le runtime laisse tomber l'exécution de la méthode :D . Ça permet d'éviter de s'inquiéter pour des méthodes non gérées ; dans la majorité des cas, le programme continuera son exécution sans problème. Ici, le concept d'objet et de message est poussé au point que même les classes sont des objets : on les appelle &quot;objets classe&quot; et ils sont simplement identifiés par le nom de la classe lui-même. L'objet classe peut lui aussi recevoir des messages et exécuter des méthodes, mais il a surtout la capacité de créer de nouveaux objets de sa classe selon le modèle que vous lui avez fourni. Il alloue de la mémoire pour stocker l'objet et renvoie l' &quot;instance&quot; de la classe pour que vous puissiez l'utiliser. Cet objet peut à présent recevoir des messages comme les autres.</p><div id="r-504489" data-claire-element-id="504489" data-claire-semantic="question"><p id="r-504488" data-claire-element-id="504488">Et concrètement, comment ça se passe ?</p></div><p id="r-504490" data-claire-element-id="504490">Il s'agit d'un système de redirection : quand on envoie un message à un objet, le runtime cherche dans les registres de l'objet pour voir s'il peut exécuter la méthode et ensuite lui fait exécuter la méthode. En java, les messages ont été repris, mais là il faut connaître le type de l'objet à la compilation pour être capable de lui envoyer un message. Sachant qu'en ObjC vous n'avez pas besoin de connaître le type de l'objet pour lui envoyer un message, vous pouvez donc à ce moment définir des classes et des méthodes prenant un objet quelconque en argument et permettre à d'autres programmeurs d'utiliser votre classe avec leurs propres objets ! C'est pratique : par exemple, pour les classes conteneurs comme les listes, les tableaux ou les dictionnaires.</p><p id="r-504491" data-claire-element-id="504491">Si la personne qui utilise votre classe veut utiliser certaines de ses capacités, il lui suffit de définir les méthodes utilisées par votre classe dans sa propre classe : de votre côté, vous envoyez des messages à des objets sans types particuliers, l'objet répondra ou non et vous modifierez le comportement selon le résultat. Je sais que ça a l'air banal comme ça... mais en fait, c'est très puissant et ça vous enlève quelques poids, vous n'avez pas besoin de classes génériques comme en C++ par exemple, vous n'avez pas non plus besoin de faire des casts sur les objets avant de leur envoyer un message comme en Java : on laisse au runtime le soin de connaître le type des objets et d'exécuter les méthodes.</p><p id="r-504492" data-claire-element-id="504492">Voilà tout pour les cours magistraux sur le minimum à savoir sur l'Objective-C avant de commencer :D . <br/> On va passer à des trucs plus concrets et les cours magistraux seront dispensés tout au long du tutoriel. <br/> Si vous avez un peu de mal avec ce que je viens de dire, ne vous en faites pas trop, c'est juste de la théorie, dans la pratique tout est transparent pour le programmeur.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac">La programmation Mac</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Le langage de programmation : Objective-C
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/pour-commencer-8">Pour commencer...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-base-c">
La base C
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-metaphore-des-messages">
La métaphore des messages
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">Votre premier programme Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/l-outil-xcode">
L&#039;outil : Xcode
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-5">
Votre premier programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">Les messages</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-syntaxe-16">
La syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
La Classe NSString
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-utilisations-communes">
Les utilisations communes
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-base-c">
<span class="arrow"></span>
<span class="next">La base C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">
<span class="next">Votre premier programme Objective-C</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="VotrepremierprogrammeObjective-C"></a><h2>Votre premier programme Objective-C</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-metaphore-des-messages">
<span class="arrow"></span>
<span class="next">La métaphore des messages</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/l-outil-xcode">
<span class="next">L&#039;outil : Xcode</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-504496" data-claire-element-id="504496">Nous allons commencer par utiliser, plus que concevoir, un nouveau programme avec un nouveau projet Xcode que je vais vous présenter brièvement. Et vous allez pouvoir constater la façon très différente de faire des appels de méthodes en Objective-C.</p>
</div><a name="L039outilXcode"></a><h2>L&#039;outil : Xcode</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">
<span class="arrow"></span>
<span class="next">Votre premier programme Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-5">
<span class="next">Votre premier programme !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-l-outil-xcode" data-claire-element-id="504536">L'outil : Xcode</h4><p id="r-504497" data-claire-element-id="504497">Avant de commencer à programmer, on va prendre nos outils en main... À savoir Xcode pour l'instant :D ; l'interface graphique, c'est pour plus tard ;) .</p><h5 id="r-le-choix-du-projet" data-claire-element-id="504507">Le choix du projet</h5><p id="r-504498" data-claire-element-id="504498">Donc, si vous avez lu le cours de M@teo incluant la partie sur l'IDE, vous connaissez déjà ce logiciel... Donc pas besoin de revenir là-dessus :D . On va créer un nouveau projet Objective-C :</p><ul id="r-504505" data-claire-element-id="504505"><li id="r-504500" data-claire-element-id="504500"><p id="r-504499" data-claire-element-id="504499">faites File --&gt; New Project... ou Cmd + Maj + N :D ;</p></li><li id="r-504502" data-claire-element-id="504502"><p id="r-504501" data-claire-element-id="504501">sélectionnez dans la partie Command Line Utility le type Foundation Tool puis cliquez sur Next ;</p></li><li id="r-504504" data-claire-element-id="504504"><p id="r-504503" data-claire-element-id="504503">donnez un nom à votre projet ; pour moi, ce sera <em><strong>TutorielOC</strong></em> ; choisissez-lui un emplacement sur le disque et cliquez sur Finish !</p></li></ul><p id="r-504506" data-claire-element-id="504506">Et c'est bon, votre fenêtre de projet apparaît...</p><h5 id="r-un-petit-ajustement" data-claire-element-id="504521">Un petit ajustement</h5><p id="r-504508" data-claire-element-id="504508">Bon : comme je n'ai pas envie de trop m'emmerder avec les déclarations de variables, je vais vous présenter une petite option bien pratique. Votre première modification d'IDE. :D <br/> Donc, dans votre fenêtre de projet :</p><ul id="r-504519" data-claire-element-id="504519"><li id="r-504510" data-claire-element-id="504510"><p id="r-504509" data-claire-element-id="504509">cliquez sur le nom de votre projet dans la liste à gauche, c'est le premier élément ;</p></li><li id="r-504512" data-claire-element-id="504512"><p id="r-504511" data-claire-element-id="504511">faites File --&gt; Get Info... ou plus simplement Cmd + I ;</p></li><li id="r-504514" data-claire-element-id="504514"><p id="r-504513" data-claire-element-id="504513">cliquez sur la liste déroulante Collection et choisissez Language (vous pouvez sauter cette étape, mais ça permet d'éclaircir la liste qui est juste en dessous :D ) ;</p></li><li id="r-504516" data-claire-element-id="504516"><p id="r-504515" data-claire-element-id="504515">À côté de C Language Dialect, cliquez sur Compiler Default et choisissez C99 [-std=c99]&quot; ;</p></li><li id="r-504518" data-claire-element-id="504518"><p id="r-504517" data-claire-element-id="504517">fermez cette petite fenêtre...</p></li></ul><p id="r-504520" data-claire-element-id="504520">Ce que vous venez de faire, c'est configurer votre compilateur GCC, il est possible de tout modifier grâce à Xcode, de configurer tout ce que vous voulez... Vous pouvez regarder les options disponibles. Pour l'instant, celle que je vous ai montrée nous suffit, elle met en fait le compilateur à la norme C99, ce qui nous permet notamment de déclarer les variables à la volée, c'est-à-dire au moment où on en a besoin, et non pas au début du programme, comme ce n'est pas censé être le cas en C traditionnel. Cela nous permet aussi les boucles for de ce genre : for(int i=0;..., ce qui est plus pratique :D .</p><h5 id="r-les-premiers-fichiers-de-votre-projet" data-claire-element-id="504535">Les premiers fichiers de votre projet</h5><p id="r-504522" data-claire-element-id="504522">Pour l'instant, vous n'avez écrit aucune ligne de code, votre projet contient déjà 5 fichiers et &quot;TutorielOC&quot; dans la liste de gauche est sélectionné. Ce que vous avez pour l'instant, c'est :</p><ul id="r-504533" data-claire-element-id="504533"><li id="r-504524" data-claire-element-id="504524"><p id="r-504523" data-claire-element-id="504523">Foundation.framework : on a sélectionné un projet de type <em>Foundation Tool</em> ; donc, ce framework contient les outils par défaut nécessaires à notre projet ;</p></li><li id="r-504526" data-claire-element-id="504526"><p id="r-504525" data-claire-element-id="504525">TutorielOC : son nom est écrit en rouge, ça signifie juste que le fichier est référencé mais qu'il n'existe pas ; en fait, il s'agit de votre exécutable et il sera créé dés la première compilation ;</p></li><li id="r-504528" data-claire-element-id="504528"><p id="r-504527" data-claire-element-id="504527">TutorielOC.1 : un fichier MAN pour écrire la documentation sur votre outil... On ne l'utilisera pas ;</p></li><li id="r-504530" data-claire-element-id="504530"><p id="r-504529" data-claire-element-id="504529">Tutoriel.m : un fichier source Objective-C comme je vous l'avais dit ; quand vous ferez un projet graphique avec Cocoa, ce fichier s'appelera main.m, il contient donc la définition de la fonction main() permettant de commencer le programme. C'est ici que tout va commencer pour notre tutoriel !</p></li><li id="r-504532" data-claire-element-id="504532"><p id="r-504531" data-claire-element-id="504531">TutorielOC_Prefix.pch : un fichier d'en-tête pour inclure tous les fichiers nécessaires à notre exécutable, on n'y touchera pas non plus.</p></li></ul><p id="r-504534" data-claire-element-id="504534">Voilà tout pour le projet lui-même, nous allons maintenant faire votre premier programme.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac">La programmation Mac</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Le langage de programmation : Objective-C
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/pour-commencer-8">Pour commencer...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-base-c">
La base C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-metaphore-des-messages">
La métaphore des messages
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">Votre premier programme Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/l-outil-xcode">
L&#039;outil : Xcode
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-5">
Votre premier programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">Les messages</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-syntaxe-16">
La syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
La Classe NSString
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-utilisations-communes">
Les utilisations communes
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">
<span class="arrow"></span>
<span class="next">Votre premier programme Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-5">
<span class="next">Votre premier programme !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Votrepremierprogramme"></a><h2>Votre premier programme !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/l-outil-xcode">
<span class="arrow"></span>
<span class="next">L&#039;outil : Xcode</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">
<span class="next">Les messages</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-votre-premier-programme-5" data-claire-element-id="504564">Votre premier programme !</h4><p id="r-504537" data-claire-element-id="504537">C'est parti... Compilons le programme pour rigoler :D . Cliquez sur le bouton Build and Go ou faites Cmd + R. Le programme se compile et l'exécution s'affiche finalement dans la console Xcode !<br/> Vous devriez obtenir quelque chose de ce genre :</p><p id="r-504538" data-claire-element-id="504538"><cite>Citation : Console Xcode</cite></p><blockquote id="r-504541" data-claire-element-id="504541"><p id="r-504539" data-claire-element-id="504539">[Session started at 2007-03-31 12:52:23 -0400.]<br/> 2007-03-31 12:52:24.929 TutorielOC[730] Hello, World!</p><p id="r-504540" data-claire-element-id="504540">TutorielOC has exited with status 0.</p></blockquote><p id="r-504542" data-claire-element-id="504542">Eh oui, le fameux &quot;Hello, World !&quot;, toujours lui !!! :D . Jamais on s'en débarrassera ! En fait, c'est juste Xcode qui vous crée un projet viable au début... Il fallait faire un choix sur le premier programme à faire fonctionner... Ils ont choisi le plus connu :D .</p><h5 id="r-tutorieloc-m" data-claire-element-id="504563">TutorielOC.m</h5><p id="r-504543" data-claire-element-id="504543">Mais revenons au projet : cliquez sur le petit bouton avec une icône bleue dessus juste à côté du marteau en haut à gauche de votre fenêtre de projet. Sélectionnez le fichier TutorielOC.m, voilà ce que vous devriez avoir :</p><pre id="r-504544" data-claire-element-id="504544"><code>#import &lt;Foundation/Foundation.h&gt;

int main (int argc, const char * argv[]) {
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    // insert code here...
    NSLog(@&quot;Hello, World!&quot;);
    [pool release];
    return 0;
}</code></pre><p id="r-504545" data-claire-element-id="504545">Aïe ! C'est plus vraiment comme en C ! Vous commencez à découvrir l'Objective-C petit à petit...</p><p id="r-504546" data-claire-element-id="504546">Commençons par ce qu'on connaît plus ou moins. Déjà, je vous ai parlé de la directive de précompilation #import, bah la voici à nouveau ;) , important dans notre fichier main &lt;Foundation/Foundation.h&gt; qui est la framework par défaut.<br/> Ensuite, la déclaration de la fonction main() ; pas vraiment différent, là non plus. Il faut que cette fonction retourne un int sinon GCC fait la gueule :D , et cette fonction prend deux paramètres qui sont les valeurs inscrites dans la console lorsqu'on appelle le programme... On n'en a pas besoin, là.</p><p id="r-504547" data-claire-element-id="504547">Rentrons dans les accolades. On voit le return 0; à la fin, signe que le programme s'est bien exécuté... Et juste au-dessus, un Hello World dans une fonction NSLog().</p><aside id="r-504549" data-claire-element-id="504549" data-claire-semantic="information"><p id="r-504548" data-claire-element-id="504548">Quand un nom de fonction, de structure, de méthode ou de classe commence par <strong>NS</strong>, cela signifie qu'elle a été conçue par Apple, ou plus précisément par NeXT, l'entreprise que Steve Jobs a créée après son départ d'Apple dans les années 80. C'est l'entreprise qui a le plus contribué au développement de l'Objective-C en créant des frameworks complètes pour son système nommé NeXTSTEP, d'où le <strong>NS</strong>. Après le rachat de NeXT par Apple et le retour de Steve Jobs dans son entreprise, tout le travail réalisé par NeXT a été récupéré pour concevoir Mac OS X, et NeXTSTEP / OpenStep a été renommé Cocoa. Mais le préfix NS est resté depuis !</p></aside><p id="r-504550" data-claire-element-id="504550">Donc, cette fonction NSLog est l'équivalent de printf(), à la différence que cette méthode prend une chaîne de caractères Objective-C, et non pas C. C'est l'un des premiers aspects de la différenciation Objective-C / C. En effet, Objective-C a l'avantage de bien différencier la partie objet de la partie procédurale dans les programmes, vous le verrez tout au long de ce tutoriel.</p><h6 id="r-les-strings-objective-c" data-claire-element-id="504557">Les strings Objective-C</h6><p id="r-504551" data-claire-element-id="504551">Les strings Objective-C ne sont que le premier aspect. Donc à chaque fois que je dirais qu'il faut une string, vous devrez entourer vos caractères de ces symboles <em>@&quot;ma chaine&quot;</em>, et à chaque fois que je parlerai de string C, vous utiliserez cette notation : <em>&quot;ma chaine&quot;</em>, sans les parenthèses bien sûr.<br/> La string Objective-C n'est pas différente de la string C, vous pouvez faire tout ce que vous pouviez faire avec les chaînes C ; par exemple, si je veux afficher un entier dans ma string, il suffira d'écrire :</p><pre id="r-504552" data-claire-element-id="504552"><code>NSLog(@&quot;Un entier : %d\n&quot;,maVariable);</code></pre><p id="r-504553" data-claire-element-id="504553">Un petit symbole de format est ajouté en plus des : %d, %ld, %f, %Lf, %s, %c..., c'est le formateur <strong>%@</strong>, c'est l'équivalent de %s mais pour les chaînes de caractères Objective-C.<br/> De la même façon que vous pouvez écrire ça :</p><pre id="r-504554" data-claire-element-id="504554"><code>NSLog(@&quot;Ma chaine C : %s&quot;,&quot;un exemple de chaine C&quot;);</code></pre><p id="r-504555" data-claire-element-id="504555">vous pouvez écrire :</p><pre id="r-504556" data-claire-element-id="504556"><code>NSLog(@&quot;Ma chaine Objective-C : %@&quot;,@&quot;un exemple de chaine Objective-C&quot;);</code></pre><h6 id="r-l-appel-de-fonction-vs-l-envoi-de-message" data-claire-element-id="504562">L'appel de fonction VS - L'envoi de message</h6><p id="r-504558" data-claire-element-id="504558">Voilà pour ce qu'on connaît déjà... Maintenant, regardons ce qu'on ne connaît pas encore : la première instruction de main() et l'avant-dernière !<br/> Pour la première, il s'agit de la déclaration d'une NSAutoreleasePool qui sera utilisée pour la gestion de la mémoire (on ne va pas trop s'étendre là-dessus pour l'instant :D ) suivie de messages... Il s'agit d'appel de fonction mais pour des méthodes et des objets... Vous pouvez voir que ce n'est pas du tout écrit de la même façon... C'est même très bizarre au premier abord, n'est-ce pas ? :D <br/> Bah, moi, c'est ce que j'aime en Objective-C : la partie procédurale en C est différenciée de la partie objet. Donc, difficile de se mélanger les pinceaux entre fonctions C et méthode d'un objet !</p><aside id="r-504560" data-claire-element-id="504560" data-claire-semantic="warning"><p id="r-504559" data-claire-element-id="504559">À chaque fois que je parlerai de fonction, il s'agira des fonctions C traditionnelles : f().<br/> Quand je parlerai de méthode, il s'agira des trucs tout bizarres qu'on va voir juste après :D .</p></aside><p id="r-504561" data-claire-element-id="504561">Voilà tout pour votre premier programme... J'y vais doucement parce qu'après, ça va devenir de plus en plus imposant ; alors, il vaut mieux bien séparer les parties :D . Vous pouvez pour l'instant faire tout ce que vous faisiez en C dans le tutoriel de M@teo, mais ça n'a pas grand-intérêt, au mieux vous rafraîchir la mémoire.<br/> Dans le chapitre suivant, nous allons entamer les choses plus sérieuses.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac">La programmation Mac</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Le langage de programmation : Objective-C
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/pour-commencer-8">Pour commencer...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-base-c">
La base C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-metaphore-des-messages">
La métaphore des messages
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">Votre premier programme Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/l-outil-xcode">
L&#039;outil : Xcode
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-5">
Votre premier programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">Les messages</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-syntaxe-16">
La syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
La Classe NSString
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-utilisations-communes">
Les utilisations communes
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/l-outil-xcode">
<span class="arrow"></span>
<span class="next">L&#039;outil : Xcode</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">
<span class="next">Les messages</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesmessages"></a><h2>Les messages</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-5">
<span class="arrow"></span>
<span class="next">Votre premier programme !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-syntaxe-16">
<span class="next">La syntaxe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-504566" data-claire-element-id="504566">Voilà : maintenant, on peut passer à la programmation objet... Vous allez enfin comprendre ce que signifie cette fameuse première instruction sur le NSAutoreleasePool. Vous allez découvrir les messages et comment on les écrit, ainsi que la déclaration des objets et leur utilisation. Vous allez aussi découvrir un exemple d'objet avec la classe NSString pour illustrer l'envoi de message.</p>
</div><a name="Lasyntaxe"></a><h2>La syntaxe</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">
<span class="arrow"></span>
<span class="next">Les messages</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
<span class="next">La Classe NSString</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-syntaxe-16" data-claire-element-id="504580">La syntaxe</h4><p id="r-504567" data-claire-element-id="504567">Voilà comment on écrit un message :</p><pre id="r-504568" data-claire-element-id="504568"><code>[receveur message];</code></pre><p id="r-504569" data-claire-element-id="504569">il ne faut pas oublier le point-virgule &quot;;&quot; à la fin de chaque instruction comme en C, les messages ne dérogent pas à la règle.<br/> Expliquons ce petit texte. Le receveur du message, c'est tout simplement un objet, on met tout simplement le nom de la variable.</p><aside id="r-504571" data-claire-element-id="504571" data-claire-semantic="warning"><p id="r-504570" data-claire-element-id="504570">En Objective-C, tous les objets doivent être déclarés comme des pointeurs sur objet ! Il ne faut jamais oublié la petite étoile devant le nom de votre variable. En revanche, lors de l'appel du message on ne met pas cette petite étoile.</p></aside><p id="r-504572" data-claire-element-id="504572">Et le &quot;message&quot; est tout simplement le nom de la méthode et ses arguments.</p><p id="r-504573" data-claire-element-id="504573">Dans le code créé par Xcode, nous avons déjà 3 exemples d'envoi de message. Pour commencer, vous voyez qu'on déclare une NSAutoreleasePool nommée *pool, vous remarquez la présence de la petite étoile que je vous interdis d'oublier pour les objets ! :D <br/> Regardons les crochets les plus à l'intérieur : <strong>[</strong>NSAutoreleasePool alloc<strong>]</strong><br/> Ici, le receveur du message est NSAutoreleasePool... Je vous avais parlé des objet-classes, eh bien en voici un, c'est l'objet-classe de la classe NSAutoreleasepool, on lui envoie le message alloc qui lui demande de créer une instance, c'est-à-dire un objet, de NSAutoreleasePool en lui attribuant de l'espace mémoire.</p><aside id="r-504575" data-claire-element-id="504575" data-claire-semantic="information"><p id="r-504574" data-claire-element-id="504574">Les méthodes, comme les fonctions, peuvent renvoyer quelque chose. En l'occurrence la méthode alloc renvoie un id. id est un pointeur sur objet tout ce qu'il y a de plus banal. Contrairement aux autres types, celui-là ne nécessite pas d'étoile, vous pouvez écrire : id monObjet;, cela créera un pointeur sur un objet quelconque sans spécification, vous pourrez y mettre n'importe quel type d'objet après.</p></aside><p id="r-504576" data-claire-element-id="504576">Ici donc notre méthode alloc renvoie un id, en l'occurrence il s'agit d'une NSAutoreleasePool ; le problème, c'est que cet objet est inutilisable après l'appel d'une méthode alloc, il nécessite une initialisation. Comme alloc renvoie un objet, et qu'on peut mettre n'importe quel objet comme receveur d'un message, il est possible de faire l'allocation et l'initialisation en un seul bloc.<br/> C'est ce que fait la première instruction : on envoie le message init à l'objet retourné par la méthode alloc. init est la méthode d'initialisation par défaut de tous les objets, elle ne prend aucun argument, tout comme alloc et renvoie id, tout comme alloc. À la fin de l'instruction, on a créé un objet NSAutoreleasePool alloué et initialisé, et on a mis l'adresse de cet objet dans notre variable *pool. pool devient donc un objet NSAutoreleasePool.</p><p id="r-504577" data-claire-element-id="504577">Si on voulait faire cette instruction en plusieurs instructions différentes, cela ressemblerait à ça :</p><pre id="r-504578" data-claire-element-id="504578"><code>NSAutoreleasePool *pool;
pool = [NSAutoreleasePool alloc];
[pool init];</code></pre><p id="r-504579" data-claire-element-id="504579">Mais pour des raisons de simplification et de réduction du code, on réduit ces 3 instructions en une seule. C'est comme ça que vous créerez un objet généralement, mais il y a d'autres façons.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac">La programmation Mac</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Le langage de programmation : Objective-C
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/pour-commencer-8">Pour commencer...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-base-c">
La base C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-metaphore-des-messages">
La métaphore des messages
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">Votre premier programme Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/l-outil-xcode">
L&#039;outil : Xcode
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-5">
Votre premier programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">Les messages</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-syntaxe-16">
La syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
La Classe NSString
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-utilisations-communes">
Les utilisations communes
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">
<span class="arrow"></span>
<span class="next">Les messages</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
<span class="next">La Classe NSString</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LaClasseNSString"></a><h2>La Classe NSString</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-syntaxe-16">
<span class="arrow"></span>
<span class="next">La syntaxe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-utilisations-communes">
<span class="next">Les utilisations communes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-classe-nsstring" data-claire-element-id="504604">La Classe NSString</h4><p id="r-504581" data-claire-element-id="504581">De même qu'en C++ avec la classe string, Objective-C possède lui aussi sa propre classe pour gérer les chaînes de caractères. Il s'agit de <strong>NSString</strong>. Je vous en ai déjà plus ou moins parlé : en fait, quand vous écrivez quelque chose comme <em>@&quot;ma chaine&quot;</em>, vous déclarez un objet de type NSString. Une chaîne de caractères NSString statique pour être précis. Les NSString sont les seuls objets de tout Objective-C dont vous n'aurez pas à gérer la mémoire, alors profitez-en :D .</p><p id="r-504582" data-claire-element-id="504582">Je vous parle de cette classe pour vous présenter les méthodes incluant des arguments. Et aussi pour vous montrer d'autres façons de créer des objets :magicien: .<br/> Donc, créons une petite NSString à partir d'un format, c'est-à-dire une chaîne de caractères à laquelle on ajoute des variables, des %d et autres... :</p><pre id="r-504583" data-claire-element-id="504583"><code>int unNombre = 5; // Nombre qu'on affichera dans la chaîne
NSString *stringe; // On déclare notre NSString
stringe = [NSString stringWithFormat:@&quot;\nMon nombre : %d\n&quot;,unNombre];
NSLog(stringe); // On affiche la NSString</code></pre><aside id="r-504585" data-claire-element-id="504585" data-claire-semantic="warning"><p id="r-504584" data-claire-element-id="504584">Vous devez insérer ce code entre la déclaration de la NSAutoreleasePool et l'instruction [pool release];.</p></aside><p id="r-504586" data-claire-element-id="504586">Regardons le message qu'on envoie à NSString : vous remarquez l'apparition des deux points &quot;:&quot; dans le nom de la méthode. Ces deux points font bel et bien partie du nom de la méthode. Le nom, c'est bien stringWithFormat: et non pas stringWithFormat, la virgule se trouvant à la suite de notre chaîne n'en fait en revanche pas partie. Il s'agit simplement là d'un format qui se construit de la même façon qu'en C : la première partie représente la chaîne à écrire, et les virgules séparent les variables à introduire dans la chaîne.</p><aside id="r-504593" data-claire-element-id="504593" data-claire-semantic="information"><p id="r-504587" data-claire-element-id="504587">Donc, voilà : pour la création d'objet, vous avez donc deux techniques :</p><ul id="r-504592" data-claire-element-id="504592"><li id="r-504589" data-claire-element-id="504589"><p id="r-504588" data-claire-element-id="504588">la technique en deux instructions : elle nécessite l'utilisation de la méthode suivie d'une méthode d'initialisation, les méthodes d'initialisation commencent généralement par init... ;</p></li><li id="r-504591" data-claire-element-id="504591"><p id="r-504590" data-claire-element-id="504590">la technique en un seul message : ce sont des méthodes de classe, donc des messages à envoyer aux objet classes ; le nom de ces méthodes commencent généralement par le type construit par la méthode, en l'occurrence il s'agit d'une string.</p></li></ul></aside><p id="r-504594" data-claire-element-id="504594">À présent, parons des arguments. Les arguments à passer dans un message sont toujours précédés de deux points &quot;:&quot;. Si vous avez une méthode qui prend 4 arguments, le nom de cette méthode ressemblera à ça : maMethode::::. Ce n'est pas très explicite, n'est-ce pas ? Voilà une grosse différence avec le C et les autres langages de ce genre... Comme les deux points font partie du nom de la méthode, il est possible d'expliciter chaque argument en écrivant ce qu'il signifie juste avant les deux points, par exemple : afficherLaDate:dansLaFenetre:aLaCouleur:etLaTaille: lorsque vous appellerez une méthode comme celle-ci, vous réécrirez tout en mettant juste après les deux points vos arguments :</p><pre id="r-504595" data-claire-element-id="504595"><code>[ecran afficherLaDate:maDate dansLaFenetre:maFenetre aLaCouleur: rouge etLaTaille: taille];</code></pre><p id="r-504596" data-claire-element-id="504596">Xcode permet notamment d'écrire les noms des méthodes sur plusieurs lignes en superposant les deux points &quot;:&quot; pour améliorer la lisibilité.</p><aside id="r-504598" data-claire-element-id="504598" data-claire-semantic="warning"><p id="r-504597" data-claire-element-id="504597">Il ne faut pas oublier de mettre un espace entre l'argument et la suite du nom de la méthode, sinon ça ne voudra plus rien dire :D . Vous pouvez aussi mettre un espace après les deux points, mais ce n'est pas obligatoire.</p></aside><div id="r-504600" data-claire-element-id="504600" data-claire-semantic="question"><p id="r-504599" data-claire-element-id="504599">Est-ce qu'il est possible de mettre un message en argument ?</p></div><p id="r-504601" data-claire-element-id="504601">Bien sûr, à condition que ce message retourne quelque chose, car comme en C, un message peut retourner void, mais il peut aussi retourner les types primitifs comme int ou float ; là, il faut faire attention à passer les bon types de variables.</p><aside id="r-504603" data-claire-element-id="504603" data-claire-semantic="error"><p id="r-504602" data-claire-element-id="504602">En Objective-C, comme en C, il est possible d'avoir des méthodes avec un nombre d'arguments variable. La méthode stringWithFormat: en est une. Seuls les arguments se trouvant en fin de message sont en nombres variables. Vous ne verrez pas de méthode de ce genre uneString:maChaine, maVar couleur:uneCouleur.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac">La programmation Mac</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Le langage de programmation : Objective-C
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/pour-commencer-8">Pour commencer...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-base-c">
La base C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-metaphore-des-messages">
La métaphore des messages
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">Votre premier programme Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/l-outil-xcode">
L&#039;outil : Xcode
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-5">
Votre premier programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">Les messages</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-syntaxe-16">
La syntaxe
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
La Classe NSString
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-utilisations-communes">
Les utilisations communes
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-syntaxe-16">
<span class="arrow"></span>
<span class="next">La syntaxe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-utilisations-communes">
<span class="next">Les utilisations communes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesutilisationscommunes"></a><h2>Les utilisations communes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
<span class="arrow"></span>
<span class="next">La Classe NSString</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-utilisations-communes" data-claire-element-id="504644">Les utilisations communes</h4><p id="r-504605" data-claire-element-id="504605">Allez, revoyons comment on utilise généralement les messages.</p><h5 id="r-les-messages-ne-retournant-rien" data-claire-element-id="504608">Les messages ne retournant rien</h5><p id="r-504606" data-claire-element-id="504606">C'est ceux qu'on voit généralement, on les met seuls sur une instruction. J'entends par là que les crochets de messages comme eux doivent être les plus à l'extérieur. On utilise ce genre de messages pour demander à un objet de s'afficher sur un écran par exemple, ou alors de modifier une de ses variables d'instance. Les modificateurs sont généralement des méthodes qui ne retournent rien, c'est-à-dire void, exemples :</p><pre id="r-504607" data-claire-element-id="504607"><code data-claire-semantic="c">[text setColor:uneCouleur];
[fichier open];</code></pre><h5 id="r-les-messages-retournant-id" data-claire-element-id="504617">Les messages retournant &quot;id&quot;</h5><p id="r-504609" data-claire-element-id="504609">Ces messages sont assez pratiques, ils retournent généralement le receveur du message. C'est un peu bizarre, mais ça permet de faire en une seule instruction des envois de messages en cascades sur le même objet. L'objet visé étant l'objet se trouvant au niveau le plus bas dans les accolades, exemple :</p><pre id="r-504610" data-claire-element-id="504610"><code>[[[[receveur message1] message2] message3] message4];</code></pre><aside id="r-504612" data-claire-element-id="504612" data-claire-semantic="warning"><p id="r-504611" data-claire-element-id="504611">Attention ! Cela peut nuire à la clarté du code. :D</p></aside><p id="r-504613" data-claire-element-id="504613">Ce genre d'instruction est pratique dans le cas des constructions d'objets.</p><h6 id="r-les-constructeurs-5" data-claire-element-id="504616">Les &quot;constructeurs&quot;</h6><p id="r-504614" data-claire-element-id="504614">J'ai mis &quot;constructeurs&quot; entre guillemets parce qu'ils ne sont pas comme en C++. En Objective-C, on utilise une méthode pour créer un espace mémoire et une méthode pour initialiser cet espace, l'allocation s'appelle sur l'objet classe. Alors qu'en C++, un constructeur s'appelle sur l'objet construit et ne retourne rien. Chez nous, il retourne quelque chose : l'objet construit. Cet objet est de type id, c'est-à-dire que vous pouvez le stocker aussi bien dans une variable de type id que dans une variable du type créé. Exemple :</p><pre id="r-504615" data-claire-element-id="504615"><code>NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];</code></pre><h5 id="r-les-messages-retournant-un-autre-objet-qu-eux-memes" data-claire-element-id="504621">Les messages retournant un autre objet qu'eux-mêmes</h5><p id="r-504618" data-claire-element-id="504618">Ces messages-là retournent généralement un type précis, il s'agit généralement d'accesseurs. Ils permettent de récupérer la valeur d'une variable d'instance (on va voir ce que c'est lors de la définition des classes) qu'ils implémentent. On peut là aussi mettre ces messages en receveurs d'autres messages, mais le message ne sera pas reçu par le receveur du premier message. Exemple :</p><pre id="r-504619" data-claire-element-id="504619"><code>[uneFenetre contentView];</code></pre><p id="r-504620" data-claire-element-id="504620">Cette méthode, on la verra en interface graphique ; grosso-modo, elle permet de récupérer le contenu de la fenêtre uneFenetre.</p><h5 id="r-les-messages-retournant-autre-chose-que-des-objets" data-claire-element-id="504629">Les messages retournant autre chose que des objets</h5><p id="r-504622" data-claire-element-id="504622">Il s'agit là aussi généralement d'accesseurs, ou de résultats de calculs, ils retournent des variables primitives comme en C, par exemple des structures, des int, des float, etc. Tout ce qu'une fonction C normale est capable de retourner.</p><div id="r-504624" data-claire-element-id="504624" data-claire-semantic="question"><p id="r-504623" data-claire-element-id="504623">Si c'est pareil, à quoi sert la couche C de l'Objective-C ?</p></div><p id="r-504625" data-claire-element-id="504625">C'est sûr qu'on pourrait se créer une classe qu'on n'instancierait jamais et qui contiendrait des méthodes faisant des calculs simples, genre l'addition de deux structures. Mais on ne fait pas ça. Quand on envoie un message, le runtime doit découvrir le type du receveur, vérifier s'il peut exécuter la méthode et ensuite la lui faire exécuter. Ce sont des opérations très lourdes pour une addition de structures. Donc, on préférera utiliser les méthodes lorsque l'objet et ses variables d'instance sont directement impliquées, et on utilisera les fonctions pour les codes n'impliquant pas les objets. Cela fait partie du dynamisme du C de pouvoir aussi utiliser des fonctions ne passant pas par le runtime et permettant ainsi d'accroître la vitesse d'exécution.</p><p id="r-504626" data-claire-element-id="504626">Donc les messages retournant des variables autres que des objets sont généralement des accesseurs, ou alors des calculs impliquant les variables d'instance de l'objet receveur. Exemple :</p><pre id="r-504627" data-claire-element-id="504627"><code>NSPoint resultat = [transformation transformPoint:unPoint];</code></pre><p id="r-504628" data-claire-element-id="504628">Cette méthode, envoyée à un objet de la classe NSAffineTransform, retourne les coordonnées du point unPoint après application de la transformation transformation... On verra encore ça en interface graphique :D .</p><h5 id="r-un-message-comme-argument" data-claire-element-id="504633">Un message comme argument</h5><p id="r-504630" data-claire-element-id="504630">Comme je l'ai dit plusieurs fois, il est possible de mettre un message comme receveur d'un autre message. À condition que le message receveur retourne un objet ! Mais il est aussi possible de mettre un message en argument, à condition que celui-ci retourne aussi une valeur, mais là, ça peut être aussi bien un type primitif qu'un objet, il faut tout de même s'assurer que le type retourné corresponde au type de l'argument. Exemple :</p><pre id="r-504631" data-claire-element-id="504631"><code>[uneImage drawInRect:[unBouton bounds]];</code></pre><p id="r-504632" data-claire-element-id="504632">Encore de la programmation graphique. Ici, le message bounds envoyé à un bouton retourne un NSRect qui est une structure représentant la position et la taille du bouton. Ça tombe bien parce que la méthode drawInRect: prend en paramètre un NSRect.</p><h5 id="r-lorsque-le-type-retourne-est-un-type-de-base" data-claire-element-id="504643">Lorsque le type retourné est un type de base</h5><p id="r-504634" data-claire-element-id="504634">Dans l'exemple ci-dessus, le type retourné par la méthode bounds est un NSRect qui est une simple structure contenant deux structures définies comme telles :</p><pre id="r-504635" data-claire-element-id="504635"><code>typedef struct _NSPoint {
        float x;
        float y;
} NSPoint;

typedef struct _NSSize {
        float width;
        float height
} NSSize;

typdedef struct _NSRect {
        NSPoint origin;
        NSSize size;
} NSRect;</code></pre><p id="r-504636" data-claire-element-id="504636">Il est possible d'accéder aux valeurs contenues dans la structure directement à partir du message sans passer par une variable intermédiaire de cette façon :</p><pre id="r-504637" data-claire-element-id="504637"><code data-claire-semantic="c">[unBouton bounds].size.height;</code></pre><p id="r-504638" data-claire-element-id="504638">Il est aussi possible d'utiliser les opérateurs &quot;+&quot;, &quot;-&quot;, etc. pour les types non-construits comme les int, float, double...</p><p id="r-504639" data-claire-element-id="504639">Donc vous voyez que les messages sont finalement très flexibles et permettent pas mal de tours de passe-passe réduisant la charge de travail.</p><p id="r-504640" data-claire-element-id="504640">Ce qui conclut le chapitre sur les messages. Vous touchez ici du doigt la programmation dynamique à la Objective-C... Nous allons à présent passer aux choses sérieuses en programmant nous-mêmes nos propres classes en les faisant interagir avec les classes fournies par Apple.</p><p id="r-504641" data-claire-element-id="504641">Cette partie n'est pour le moment pas terminée.</p><p id="r-504642" data-claire-element-id="504642">Ce cours n'est pour le moment pas terminé et ne le sera probablement jamais... La programmation Mac est tellement vaste :D , je crois qu'elle aura ma peau !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac">La programmation Mac</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Le langage de programmation : Objective-C
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/pour-commencer-8">Pour commencer...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-base-c">
La base C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-metaphore-des-messages">
La métaphore des messages
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-objective-c-1">Votre premier programme Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/l-outil-xcode">
L&#039;outil : Xcode
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/votre-premier-programme-5">
Votre premier programme !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-messages-4">Les messages</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-syntaxe-16">
La syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
La Classe NSString
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/les-utilisations-communes">
Les utilisations communes
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-programmation-mac/la-classe-nsstring">
<span class="arrow"></span>
<span class="next">La Classe NSString</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/la-programmation-mac.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 22:43:42 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/la-programmation-mac.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:59:39 GMT -->
</html>