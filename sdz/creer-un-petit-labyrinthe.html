<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/creer-un-petit-labyrinthe.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:45:27 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/creer-un-petit-labyrinthe.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:36:49 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Créer un petit labyrinthe</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/creer-un-petit-labyrinthe.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Créer un petit labyrinthe</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Crerunpetitlabyrinthe">Créer un petit labyrinthe</a><br/><a href="#Prparation">Préparation</a><br/><a href="#Miseenplace">Mise en place</a><br/><a href="#Lecode">Le code</a><br/></div>
<a name="Crerunpetitlabyrinthe"></a><h2>Créer un petit labyrinthe</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/preparation-28">
<span class="next">Préparation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-584754" data-claire-element-id="584754">Nous allons essayer ici de créer un petit jeu à l'aide du logiciel Flash. Rien de mieux pour apprendre qu'un jeu n'est ce pas :) ? Il s'agira d'un labyrinthe, où l'on devra progresser sans toucher les murs.</p>
</div><a name="Prparation"></a><h2>Préparation</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/mise-en-place-28">
<span class="next">Mise en place</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-pour-commencer-14" data-claire-element-id="584767">Pour commencer</h2><p id="r-584755" data-claire-element-id="584755">Nous allons commencer par faire un tour d'horizon de ce dont on aura besoin.</p><h3 id="r-en-logiciel" data-claire-element-id="584759">En logiciel</h3><ul id="r-584758" data-claire-element-id="584758"><li id="r-584757" data-claire-element-id="584757"><p id="r-584756" data-claire-element-id="584756">Du logiciel Flash (je travaille moi sur la version 8, mais tout est compatible MX 2004)</p></li></ul><h3 id="r-en-connaissances" data-claire-element-id="584766">En connaissances</h3><ul id="r-584764" data-claire-element-id="584764"><li id="r-584761" data-claire-element-id="584761"><p id="r-584760" data-claire-element-id="584760"><a href="http://www.siteduzero.com/tuto-3-1214-1-ou-je-le-mets-ce-fichu-code.html#ss_part_1">De savoir ce qu'est un clip</a></p></li><li id="r-584763" data-claire-element-id="584763"><p id="r-584762" data-claire-element-id="584762">Utiliser des fonctions comme hitTest et mouseUp (nous apprendrons ça très bientôt)</p></li></ul><p id="r-584765" data-claire-element-id="584765">Pour résumer, vous devez simplement avoir Flash d'installé, et de savoir ce qu'est un clip dans ce logiciel.</p><h2 id="r-c-est-parti-11" data-claire-element-id="584774">C'est parti !</h2><p id="r-584768" data-claire-element-id="584768">On est prêt, allez, on lance Flash, et on crée un nouveau document. Allez dans &quot;modification/document&quot; pour régler la taille que votre labyrinthe aura (CTRL + J), nous prendrons 500*500 (vous pouvez évidemment faire un document plus grand, moins carré, mais pensez aux petites résolutions 600*800, et où balader son bonhomme dans un labyrinthe, avec des ascenseurs, n'est pas forcément super pratique).</p><p id="r-584769" data-claire-element-id="584769">Laissez les autres options par défaut (voir image).</p><figure id="r-584771" data-claire-element-id="584772"><img id="r-584770" data-claire-element-id="584770" src="medias/uploads.siteduzero.com_files_71001_72000_71429.jpg" alt="Propriétés du document"/></figure><p id="r-584773" data-claire-element-id="584773"><em>Les propriétés du document</em></p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe">Créer un petit labyrinthe</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/preparation-28">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/mise-en-place-28">
Mise en place
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/le-code-21">
Le code
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/mise-en-place-28">
<span class="next">Mise en place</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Miseenplace"></a><h2>Mise en place</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/preparation-28">
<span class="arrow"></span>
<span class="next">Préparation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/le-code-21">
<span class="next">Le code</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-construction-de-la-bibliotheque" data-claire-element-id="584825">Construction de la bibliothèque</h2><p id="r-584776" data-claire-element-id="584776">Commençons par un listing de ce dont nous allons avoir besoin pour faire ce labyrinthe, sans oublier que nous ne partirons pas dans des designs super beaux, ce sera à vous de fignoler ça après si vous le désirez !</p><p id="r-584777" data-claire-element-id="584777">Alors il nous faut :</p><ul id="r-584786" data-claire-element-id="584786"><li id="r-584779" data-claire-element-id="584779"><p id="r-584778" data-claire-element-id="584778">Une zone de départ</p></li><li id="r-584781" data-claire-element-id="584781"><p id="r-584780" data-claire-element-id="584780">Une zone d'arrivée</p></li><li id="r-584783" data-claire-element-id="584783"><p id="r-584782" data-claire-element-id="584782">Le petit bonhomme</p></li><li id="r-584785" data-claire-element-id="584785"><p id="r-584784" data-claire-element-id="584784">Les parois</p></li></ul><h3 id="r-la-zone-de-depart" data-claire-element-id="584799">La zone de départ</h3><p id="r-584787" data-claire-element-id="584787">Elle sera un simple dessin, un D par exemple (oui, on va faire un design plutôt sobre ^^ ).</p><p id="r-584788" data-claire-element-id="584788">Mon &quot;D&quot; sera bleu, de taille 60 en Arial. N'oubliez pas de le faire en texte statique !</p><aside id="r-584790" data-claire-element-id="584790" data-claire-semantic="information"><p id="r-584789" data-claire-element-id="584789">Il y a 3 modes de textes dans Flash, <em>statique, dynamique</em> et <em>saisie</em>. Chacun ont leurs utilités mais ce n'est pas le sujet du tuto. En gros le statique (que nous utilisons) sert pour décorer, le dynamique peut être modifié avec un script, et le texte de saisie est un champ où l'on peut saisir des données.</p></aside><figure id="r-584792" data-claire-element-id="584793"><img id="r-584791" data-claire-element-id="584791" src="medias/uploads.siteduzero.com_files_71001_72000_71431.jpg" alt="Texte statique"/></figure><p id="r-584794" data-claire-element-id="584794"><em>Faîtes attention à toujours mettre vos textes qui serviront au décors en mode statique.</em></p><p id="r-584795" data-claire-element-id="584795">Allez, hop un clic droit sur votre D, puis &quot;convertir en symbole&quot;. Nous ferons ici un graphique qui se nommera &quot;depart&quot;, on va pas non plus se fouler dans les noms :-° .</p><div id="r-584797" data-claire-element-id="584797" data-claire-semantic="question"><p id="r-584796" data-claire-element-id="584796">Pourquoi un graphique, et pas un clip ?</p></div><p id="r-584798" data-claire-element-id="584798">Il est préférable de faire un clip quand besoin est. Ici, c'est purement et simplement du décor, pas la peine de risquer de s'embrouiller donc ;) .</p><h3 id="r-la-zone-d-arrivee" data-claire-element-id="584812">La zone d'arrivée</h3><p id="r-584800" data-claire-element-id="584800">On va utiliser un clip cette fois-ci.</p><div id="r-584802" data-claire-element-id="584802" data-claire-semantic="question"><p id="r-584801" data-claire-element-id="584801">Ah, et pourquoi donc ?</p></div><p id="r-584803" data-claire-element-id="584803">Le but du labyrinthe étant d'arriver au bout (ben oui), nous ferons comprendre à Flash que le joueur a fini, grâce à une fonction qui détectera la collision entre le bonhomme et la zone d'arrivée.</p><p id="r-584804" data-claire-element-id="584804">Pour faire original, nous feront un F bleu, sur un fond jaune, ça fait un peu logo de super héros, c'est bien.</p><figure id="r-584806" data-claire-element-id="584807"><img id="r-584805" data-claire-element-id="584805" src="medias/uploads.siteduzero.com_files_71001_72000_71433.png" alt="Le clip arrivee"/></figure><p id="r-584808" data-claire-element-id="584808"><em>Le clip &quot;arrivee&quot;</em></p><p id="r-584809" data-claire-element-id="584809">Une fois encore, on sélectionne tout ça, un clic droit, et hop on convertit en symbole (clip donc cette fois-ci), qui lui s'appellera &quot;arrivee&quot;.</p><aside id="r-584811" data-claire-element-id="584811" data-claire-semantic="information"><p id="r-584810" data-claire-element-id="584810">Evitez les accents, comme dans tous codes. Dans Flash ça ne pause pas trop de soucis, mais c'est une bonne habitude à prendre que de ne pas en mettre dans les noms et les variables.</p></aside><h3 id="r-le-bonhomme" data-claire-element-id="584818">Le bonhomme</h3><p id="r-584813" data-claire-element-id="584813">Il s'agit ici du personnage que le joueur déplacera, pensez à ne pas le faire trop gros, qu'il puisse passer entre les murs sans les toucher. Nous le ferons encore une fois en symbole de type clip.</p><p id="r-584814" data-claire-element-id="584814">Donc ce clip, pensez à faire une p'tite animation, n'oubliez pas que c'est un bonhomme qui marche ; ce n'est bien sur pas obligatoire.</p><figure id="r-584816" data-claire-element-id="584817"><img id="r-584815" data-claire-element-id="584815" src="medias/uploads.siteduzero.com_files_71001_72000_71434.gif" alt="Le ptit bonhomme"/></figure><h3 id="r-les-parois" data-claire-element-id="584824">Les parois</h3><p id="r-584819" data-claire-element-id="584819">Pour finir, on va faire des murs. Pour cela, nous allons faire un petit carré vert (sans contours, je vous expliquerai pourquoi plus tard). On le convertit en clip et on l'appelle &quot;mur&quot;.</p><figure id="r-584821" data-claire-element-id="584822"><img id="r-584820" data-claire-element-id="584820" src="medias/uploads.siteduzero.com_files_71001_72000_71435.png" alt="La bibliothèque"/></figure><p id="r-584823" data-claire-element-id="584823">Voilà donc pour la bibliothèque, on est paré !</p><h2 id="r-on-installe-le-tout" data-claire-element-id="584877">On installe le tout</h2><p id="r-584826" data-claire-element-id="584826">On a fait une joli bibliothèque, maintenant, passons à la mise en place des objets de cette dernière.</p><p id="r-584827" data-claire-element-id="584827">On va commencer par placer la zone de départ, l'arrivée, et le bonhomme. Ce dernier sera placé n'importe où (on le placera à l'aide d'un procédé que vous verrez dans la partie code).</p><p id="r-584828" data-claire-element-id="584829"><a href="medias/uploads.siteduzero.com_files_71001_72000_71436.png"><img id="r-584829" data-claire-element-id="584828" src="medias/uploads.siteduzero.com_thb_71001_72000_71436.png" alt="Image utilisateur"/></a></p><p id="r-584830" data-claire-element-id="584830"><em>Vous devriez avoir quelque chose comme ça, peut-être en plus beau.</em></p><p id="r-584831" data-claire-element-id="584831">Je sais que la partie &quot;code&quot; est plus loin, mais nous allons commencer un peu ici, faîtes ce que je vous dis, même si vous ne comprenez pas tout, les explications viendront plus tard.</p><p id="r-584832" data-claire-element-id="584832">Cliquez donc sur votre bonhomme, et dans les propriétés, nommez le &quot;bonhomme&quot;. Si vous êtes déjà perdu, basez vous sur l'image ci-dessous.</p><figure id="r-584834" data-claire-element-id="584835"><img id="r-584833" data-claire-element-id="584833" src="medias/uploads.siteduzero.com_files_71001_72000_71438.png" alt="Image utilisateur"/></figure><p id="r-584836" data-claire-element-id="584836">Insérez un nouveau calque nommé &quot;parois&quot;. Insérez votre clip &quot;mur&quot; sur celui-ci, et à l'aide de l'outil de modification</p><figure id="r-584838" data-claire-element-id="584839"><img id="r-584837" data-claire-element-id="584837" src="medias/uploads.siteduzero.com_files_71001_72000_71439.png" alt="Image utilisateur"/></figure><p id="r-584840" data-claire-element-id="584840">, étirez-le de sorte qu'il fasse une limite sur la droite de votre scène.</p><aside id="r-584842" data-claire-element-id="584842" data-claire-semantic="information"><p id="r-584841" data-claire-element-id="584841">Je vous rappelle que ce qui est en dehors de la zone de travail ne sera pas visible à l'écran pour le joueur, n'hésitez donc pas à dépasser, plutôt que d'essayer d être pile-poil sur le bord ;)</p></aside><p id="r-584843" data-claire-element-id="584843">N'hésitez pas à réellement bien dépasser, en maternelle c'était sans doutes votre rêve, réalisez-le ! Faites de même pour la hauteur.</p><div id="r-584845" data-claire-element-id="584845" data-claire-semantic="question"><p id="r-584844" data-claire-element-id="584844">Mais pourquoi en faite ?</p></div><p id="r-584846" data-claire-element-id="584846">Pour éviter de laisser une ligne blanche, ça fait pas beau :)</p><p id="r-584847" data-claire-element-id="584847">Pour une question d'esthétique, vous pouvez décider de mettre le calque &quot;parois&quot; au dessous ou au dessus de l'autre, ça ne changera rien au reste, juste s'il touche par exemple votre clip &quot;arrivee&quot; (c'est mon cas), vous pouvez préférer voir le logo en dessous des murs, ou au dessus.</p><h3 id="r-un-peu-de-code-2" data-claire-element-id="584856">Un peu de code</h3><p id="r-584848" data-claire-element-id="584848">Pour gagner un bon bout de temps, nous allons mettre un tout petit peu de code.</p><p id="r-584849" data-claire-element-id="584849">Encore une fois, faites ça aveuglément, on reviendra sur une explication en temps voulu.</p><p id="r-584850" data-claire-element-id="584850">Commencez par afficher la fenêtre d'action si ce n'est pas déjà fait (&quot;Fenêtre/action&quot; ou CTRL + F9). Cliquez sur votre mur vert qui dépasse (j'insiste), et copiez ce code ActionScript dans la fenêtre d'action.</p><pre id="r-584851" data-claire-element-id="584851"><code>onClipEvent (enterFrame) {
        if (_root.bonhomme.hitTest(this)) {
                _root.touchelemur()
        }
}</code></pre><div id="r-584853" data-claire-element-id="584853" data-claire-semantic="question"><p id="r-584852" data-claire-element-id="584852">T'aurais pas une petite traduction ?</p></div><p id="r-584854" data-claire-element-id="584854">Mais si, alors :</p><p id="r-584855" data-claire-element-id="584855">Si le bonhomme touche ce mur, alors on lance la fonction &quot;touchelemur&quot;. Nous n'avons pas encore définit cette fonction, c'est vrai, mais ça viendra. Le but de cette fonction sera de dire : &quot;t'as perdu, allez on recommence&quot;.</p><h3 id="r-copier-coller-1" data-claire-element-id="584871">Copier coller !</h3><p id="r-584857" data-claire-element-id="584857">Pour finir avec la mise en place du labyrinthe, nous allons-copier coller le clip mur, le déformer, et faire notre labyrinthe.</p><aside id="r-584859" data-claire-element-id="584859" data-claire-semantic="warning"><p id="r-584858" data-claire-element-id="584858">Copiez-collez bien votre clip mur déjà existant ; non pas que je doute de vos talents de copieur-colleur, mais le but là étant de garder le script que l'on a mis sur le clip tout à l'heure.</p></aside><p id="r-584860" data-claire-element-id="584860">Pour faire simple :</p><ul id="r-584867" data-claire-element-id="584867"><li id="r-584862" data-claire-element-id="584862"><p id="r-584861" data-claire-element-id="584861">Vous avez mis un des murs du labyrinthe</p></li><li id="r-584864" data-claire-element-id="584864"><p id="r-584863" data-claire-element-id="584863">Vous avez mis un script sur le mur qui fait comprendre à l'utilisateur qu'il perd s'il le touche</p></li><li id="r-584866" data-claire-element-id="584866"><p id="r-584865" data-claire-element-id="584865">Vous dupliquez ce mur, donc le script avec</p></li></ul><aside id="r-584869" data-claire-element-id="584869" data-claire-semantic="warning"><p id="r-584868" data-claire-element-id="584868">Votre clip &quot;bonhomme&quot;, même s'il est rond, ovale, en forme d'étoile ou autre, a des limites carrées (cliquez sur lui avec l'outil de sélection pour les voir), n'oubliez donc pas de faire des chemins où le bonhomme passera.</p></aside><p id="r-584870" data-claire-element-id="584870">Avec votre clip carré vert, vous pouvez obtenir toutes sortes de parallélogrammes, donc faire pas mal de choses déjà. Et puisqu'il n'y a pas de bordures, vous pouvez chevaucher les clips entres eux sans soucis, ça ne se verra pas ;)</p><h3 id="r-tout-est-en-place" data-claire-element-id="584876">Tout est en place !</h3><p id="r-584872" data-claire-element-id="584872">Vous avez fait une route parmi les murs ? Vous avez un début, une fin ? Un bonhomme ? Bon, tout est en place donc, passons au code !</p><p id="r-584873" data-claire-element-id="584874"><a href="medias/uploads.siteduzero.com_files_71001_72000_71450.png"><img id="r-584874" data-claire-element-id="584873" src="medias/uploads.siteduzero.com_thb_71001_72000_71450.png" alt="Un exemple de chemin possible"/></a></p><p id="r-584875" data-claire-element-id="584875"><em>Voici par exemple mon labyrinthe</em></p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe">Créer un petit labyrinthe</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/preparation-28">
Préparation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/mise-en-place-28">
Mise en place
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/le-code-21">
Le code
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/preparation-28">
<span class="arrow"></span>
<span class="next">Préparation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/le-code-21">
<span class="next">Le code</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lecode"></a><h2>Le code</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/mise-en-place-28">
<span class="arrow"></span>
<span class="next">Mise en place</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-rappel-8" data-claire-element-id="584887">Rappel</h2><p id="r-584879" data-claire-element-id="584879">Commençons par nous mettre d'accord sur les bases que nous avons :</p><ul id="r-584886" data-claire-element-id="584886"><li id="r-584881" data-claire-element-id="584881"><p id="r-584880" data-claire-element-id="584880">Une bibliothèque avec 4 objets (depart, fin, mur et bonhomme)</p></li><li id="r-584883" data-claire-element-id="584883"><p id="r-584882" data-claire-element-id="584882">Un document de 500*500 pixels avec une route délimitée par le clip mur dupliqué</p></li><li id="r-584885" data-claire-element-id="584885"><p id="r-584884" data-claire-element-id="584884">Un script sur chaque mur qui fera &quot;perdre&quot; le joueur</p></li></ul><h2 id="r-projet" data-claire-element-id="584907">Projet</h2><p id="r-584888" data-claire-element-id="584888">Que veut on faire dans ce jeu ?</p><h3 id="r-on-veut" data-claire-element-id="584898">On veut...</h3><ul id="r-584897" data-claire-element-id="584897"><li id="r-584890" data-claire-element-id="584890"><p id="r-584889" data-claire-element-id="584889">Faire commencer le bonhomme sur le D de depart</p></li><li id="r-584892" data-claire-element-id="584892"><p id="r-584891" data-claire-element-id="584891">Le déplacer à l'aide de la souris</p></li><li id="r-584894" data-claire-element-id="584894"><p id="r-584893" data-claire-element-id="584893">L'amener au F de l'arrivée sans toucher les murs</p></li><li id="r-584896" data-claire-element-id="584896"><p id="r-584895" data-claire-element-id="584895">Si l'on touche un mur, faire apparaître un message, et repositionner le bonhomme sur le D</p></li></ul><h3 id="r-on-va" data-claire-element-id="584906">On va...</h3><ul id="r-584905" data-claire-element-id="584905"><li id="r-584900" data-claire-element-id="584900"><p id="r-584899" data-claire-element-id="584899">Déplacer le bonhomme à l'aide des fonctions on(press) et startDrag();</p></li><li id="r-584902" data-claire-element-id="584902"><p id="r-584901" data-claire-element-id="584901">Atteindre une image dès que le bonhomme est à la fin</p></li><li id="r-584904" data-claire-element-id="584904"><p id="r-584903" data-claire-element-id="584903">A l'aide de la fonction hitTest vérifier si le bonhomme n'est pas en collision avec un mur auquel cas on fera apparaître un clip masqué avec un message et on replacera le bonhomme sur le D du départ</p></li></ul><h2 id="r-on-attaque" data-claire-element-id="584956">On attaque</h2><p id="r-584908" data-claire-element-id="584908">Vous voilà prêt à taper du code ? Tant mieux.</p><p id="r-584909" data-claire-element-id="584909">On va commencer par ce qui est évidemment le principal, le déplacement du bonhomme.</p><div id="r-584911" data-claire-element-id="584911" data-claire-semantic="question"><p id="r-584910" data-claire-element-id="584910">T'as dit plus haut qu'on utiliserait un on(press) et un startDrag(); mais on(press), c'est pour les boutons non ?</p></div><p id="r-584912" data-claire-element-id="584912">Effectivement, et c'est pour ça que cette partie est la plus compliquée et tordue.</p><p id="r-584913" data-claire-element-id="584913">On peut déplacer un clip grâce à :</p><pre id="r-584914" data-claire-element-id="584914"><code>onClipEvent(mouseDown){
   startDrag(_root.item);
}</code></pre><p id="r-584915" data-claire-element-id="584915">Le problème avec ça, c'est que ça bougera l'objet, peut importe l'endroit où l'on clic (mouseDown = souris abaissée). Il faut donc trouver une solution alternative.</p><div id="r-584917" data-claire-element-id="584917" data-claire-semantic="question"><p id="r-584916" data-claire-element-id="584916">Bah, tu convertis ton clip bonhomme en bouton, et tu remplaces le onClipEvent(mouseDown) par un on(press), non ?</p></div><p id="r-584918" data-claire-element-id="584918">Non plus, puisque là les collisions entre les murs et le bonhomme ne marcheront plus (hitTest ne fonctionne qu'avec les clips). Il faut trouver autre chose...</p><div id="r-584920" data-claire-element-id="584920" data-claire-semantic="question"><p id="r-584919" data-claire-element-id="584919">aha... ?</p></div><p id="r-584921" data-claire-element-id="584921">Pas d'idée ? C'est pourtant tout bête :p . On fait un bouton, que l'on déplacera avec on(press), et le clip sera &quot;aimanté&quot; à ce bouton. Le seul truc, c'est que le bouton ne devra pas être visible (sinon c'est pas beau).</p><p id="r-584922" data-claire-element-id="584922">Si vous comprenez, mais pas complètement, faites de ce qui suit, et recommencez la lecture du paragraphe ci-dessus, ça paraîtra plus simple.</p><h3 id="r-un-bouton-invisible" data-claire-element-id="584930">Un bouton invisible</h3><div id="r-584924" data-claire-element-id="584924" data-claire-semantic="question"><p id="r-584923" data-claire-element-id="584923">Pour ne pas simplement faire l'animation sur le bouton, et supprimer le clip ?</p></div><p id="r-584925" data-claire-element-id="584925">Le test de collision ne peut se faire que sur le clip.</p><aside id="r-584927" data-claire-element-id="584927" data-claire-semantic="information"><p id="r-584926" data-claire-element-id="584926">Un bouton invisible est en faite un bouton qui a seulement une zone cliquable. Ils sont de couleur turquoise dans la scène.</p></aside><p id="r-584928" data-claire-element-id="584928">Créez votre bouton invisible, aux mêmes dimensions que votre bonhomme (logique), aidez-vous des informations disponibles dans les propriétés si besoin est.</p><p id="r-584929" data-claire-element-id="584929">Placez-le ensuite à l'endroit où vous voulez voir le bonhomme commencer et comme au tout début, donnez-lui un nom d'occurrence, ici ce sera &quot;boutondeplacement&quot;.</p><h3 id="r-on-passe-enfin-au-script" data-claire-element-id="584948">On passe (enfin) au script</h3><p id="r-584931" data-claire-element-id="584931">C'est parti !</p><p id="r-584932" data-claire-element-id="584932">Comme prévu, on commence par le déplacement du bonhomme (donc du bouton &quot;boutondeplacement&quot; qui fera déplacer le clip bonhomme).</p><p id="r-584933" data-claire-element-id="584933">On clic sur le bouton invisible, pour lui mettre le code suivant :</p><pre id="r-584934" data-claire-element-id="584934"><code>on(press) {
        startDrag(_root.boutondeplacement);
}
on(release) {
        stopDrag();
}</code></pre><p id="r-584935" data-claire-element-id="584935">Puis sur le bonhomme :</p><pre id="r-584936" data-claire-element-id="584936"><code>onClipEvent(enterFrame) {
        this._y = _root.boutondeplacement._y;
        this._x = _root.boutondeplacement._x;
}</code></pre><p id="r-584937" data-claire-element-id="584937">Si vous avez suivi, vous devriez vous dire :</p><div id="r-584939" data-claire-element-id="584939" data-claire-semantic="question"><p id="r-584938" data-claire-element-id="584938">En faite, on peut mettre le bonhomme n'importe où, il ira là où le bouton est ?</p></div><p id="r-584940" data-claire-element-id="584940">Eh bien oui. Le clip bonhomme se met à l'emplacement du bouton ; ce dernier est invisible, on a donc l'impression de déplacer le clip (mais qu'est-ce que c'est malin ! :soleil: )</p><p id="r-584941" data-claire-element-id="584941">Traduction du code que nous venons de mettre :</p><ul id="r-584946" data-claire-element-id="584946"><li id="r-584943" data-claire-element-id="584943"><p id="r-584942" data-claire-element-id="584942">Sur le bouton : quand on appuie sur le bouton, on déplace le bouton en même temps que la souris. Quand on lâche le bouton, on arrête de le déplacer.</p></li><li id="r-584945" data-claire-element-id="584945"><p id="r-584944" data-claire-element-id="584944">Sur le clip : tout le temps, mettre le clip au même endroit que le bouton.</p></li></ul><p id="r-584947" data-claire-element-id="584947">Voilà, le bonhomme peut se déplacer !</p><h3 id="r-quand-on-s-prend-l-mur" data-claire-element-id="584955">Quand on s'prend l'mur !</h3><p id="r-584949" data-claire-element-id="584949">Il va falloir définir la fonction de tout à l'heure maintenant. Oui vous savez celle qui s'appelle &quot;touchelemur()&quot; et qui indique ce qu'il se passe quand un mur et le bonhomme entrent en collision.</p><p id="r-584950" data-claire-element-id="584950">Pour cela, cliquez sur une image clé (n'importe laquelle, tant qu'elle est en 1), et dans la fenêtre action, écrivez :</p><pre id="r-584951" data-claire-element-id="584951"><code>//création de la fonction nommée touchelemur
function touchelemur() {
        _root.boutondeplacement._y = 380;  // on envoie le bouton en 380 sur l'axe y
        _root.boutondeplacement._x = 50;   // pareil pour x
        stopDrag();   // on fait stoper le drag pour qu'il n'y a pas de soucis
}</code></pre><p id="r-584952" data-claire-element-id="584952">Si vous suivez bien, on déplace là le bouton, qui fera déplacer automatiquement le clip bonhomme &gt;_ ...</p><aside id="r-584954" data-claire-element-id="584954" data-claire-semantic="warning"><p id="r-584953" data-claire-element-id="584953">Adaptez les valeurs x et y si vous n'avez pas les mêmes que moi. Je vous rappelle que ces valeurs correspondent au point en haut à gauche du clip.</p></aside><h2 id="r-on-fait-le-point" data-claire-element-id="584977">On fait le point</h2><p id="r-584957" data-claire-element-id="584957">Prenons quelques secondes pour constater ce qui marche pour le moment :</p><ul id="r-584962" data-claire-element-id="584962"><li id="r-584959" data-claire-element-id="584959"><p id="r-584958" data-claire-element-id="584958">Le bonhomme se déplace</p></li><li id="r-584961" data-claire-element-id="584961"><p id="r-584960" data-claire-element-id="584960">Si on touche un mur, on est renvoyé au début</p></li></ul><p id="r-584963" data-claire-element-id="584963">Il reste donc à faire la partie finale :</p><h3 id="r-collision-avec-le-clip-arrivee" data-claire-element-id="584976">Collision avec le clip &quot;arrivee&quot;</h3><p id="r-584964" data-claire-element-id="584964">Alors, on va faire ça avec un hitTest() !</p><p id="r-584965" data-claire-element-id="584965">Pour la fin, on va faire un truc tout bête, on va afficher une image qui viendra par dessus les autres, avec un message expliquant que le joueur a gagné.</p><p id="r-584966" data-claire-element-id="584966">On commence par créer un nouveau calque, que l'on placera au dessus des autres. Puis nous placerons un nouveau clip sur celui-ci. Le clip devra être rempli, et faire 500*500 pixels.</p><aside id="r-584968" data-claire-element-id="584968" data-claire-semantic="information"><p id="r-584967" data-claire-element-id="584967">Remplissez bien le calque, avec un fond blanc par exemple, sinon les autres calques seront visibles à travers celui ci ;)</p></aside><p id="r-584969" data-claire-element-id="584969">Voilà, vous avez votre calque, donnez-lui un nom d'occurrence, moi j'ai choisi &quot;message&quot;.</p><p id="r-584970" data-claire-element-id="584970">Cliquez sur le clip &quot;arrivee&quot;, et dans action :</p><pre id="r-584971" data-claire-element-id="584971"><code>onClipEvent (enterFrame) {
        if (_root.bonhomme.hitTest(_root.arrivee)) {
        
                _root.message._x = 0;
                _root.message._y = 0;
                        
                stopDrag();
        }
}</code></pre><p id="r-584972" data-claire-element-id="584972">Ce qui déplacera le clip message par dessus le reste :) .</p><p id="r-584973" data-claire-element-id="584973">Voilà ! Votre jeu est fonctionnel !<br/> Vous pouvez ajouter d'autres niveaux, il vous suffit de mettre chaque niveau dans un clip, et de les déplacer chacun leur tour dans la zone de travail.<br/> Vous pouvez aussi bien sur mettre un peu de design là dedans, on a fait un truc plutot pas beau nous :-° . (ou moi en tous cas)</p><p id="r-584974" data-claire-element-id="584974">Vous pouvez aussi faire des murs qui bougent, un chronomètre, votre bonhomme qui saute de joie quand il finit... Mais ça vous demandera quelques connaissances supplémentaires, et on ne verra pas ça tout de suite, mais je vous rassure, c'est vraiment pas plus compliqué que ce tuto là ;) .</p><p id="r-584975" data-claire-element-id="584975">Le forum et moi même sommes disponibles en cas de soucis.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe">Créer un petit labyrinthe</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/preparation-28">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/mise-en-place-28">
Mise en place
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/le-code-21">
Le code
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-petit-labyrinthe/mise-en-place-28">
<span class="arrow"></span>
<span class="next">Mise en place</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/creer-un-petit-labyrinthe.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:45:44 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/creer-un-petit-labyrinthe.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:36:51 GMT -->
</html>