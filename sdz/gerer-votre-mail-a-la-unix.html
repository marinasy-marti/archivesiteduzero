<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/gerer-votre-mail-a-la-unix.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 22:50:05 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/gerer-votre-mail-a-la-unix.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:02:04 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Gérer votre mail « à la UNIX »</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/gerer-votre-mail-a-la-unix.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Gérer votre mail « à la UNIX »</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#GrervotremaillaUNIX">Gérer votre mail « à la UNIX »</a><br/><a href="#Lefonctionnementdelamessagerielectronique">Le fonctionnement de la messagerie électronique</a><br/><a href="#Lesorganesprincipaux">Les organes principaux</a><br/><a href="#Autresnotionsutiles">Autres notions utiles</a><br/><a href="#Dialoguonsaveclesserveurs">Dialoguons avec les serveurs</a><br/><a href="#ParlonsSMTP">Parlons SMTP</a><br/><a href="#Etpourlarception">Et pour la réception ?</a><br/><a href="#QuelquesmotssurTLS_SSL">Quelques mots sur TLS/SSL</a><br/><a href="#Rapatriementbasiqueettri">Rapatriement basique et tri</a><br/><a href="#Venezpetitsmessages">Venez, petits messages !</a><br/><a href="#Unpeudetrineseraitpasduluxe">Un peu de tri ne serait pas du luxe</a><br/><a href="#Appelauxsous-traitants">Appel aux sous-traitants</a><br/><a href="#PlusfortavecIMAP">Plus fort avec IMAP !</a><br/><a href="#ExposervosmessagesenIMAP">Exposer vos messages en IMAP</a><br/><a href="#Lessauvegardesc039estbonmangez-en">Les sauvegardes, c&#039;est bon, mangez-en</a><br/><a href="#Configurationdemutt">Configuration de mutt</a><br/><a href="#Configurationdebase">Configuration de base</a><br/><a href="#Personnalisation">Personnalisation</a><br/><a href="#DoyouspeakSMTP">Do you speak SMTP ?</a><br/><a href="#MthodeDebianendeuxminuteschronoavecdebconf">Méthode Debian : en deux minutes chrono avec debconf</a><br/><a href="#MthodemsmtpleMSAquinoussimplifielavie">Méthode msmtp : le MSA qui nous simplifie la vie</a><br/></div>
<a name="GrervotremaillaUNIX"></a><h2>Gérer votre mail « à la UNIX »</h2><div class="content" role="article">
<p id="r-368420" data-claire-element-id="368420">Sur les clients de messagerie modernes (<em>Thunderbird</em>, <em>Evolution</em>, <em>Claws Mail</em>), toute la configuration est centralisée dans un seul et même logiciel. Le fonctionnement primaire de la messagerie électronique est pourtant différent.</p><p id="r-368421" data-claire-element-id="368421">Nous verrons dans ce tutoriel comment revenir au mode traditionnel qui suit la philosophie d'Unix : « Un programme pour chaque tâche, et qui la fait bien. »</p><p id="r-368422" data-claire-element-id="368422">N'espérez pas apprendre à configurer un serveur de messagerie dans ce tutoriel (bien que certains éléments présentés ici puissent vous servir pour tester votre serveur sans sortir l'artillerie lourde). Vous verrez simplement comment gérer votre messagerie sur votre (vos) poste(s) de bureau, d'une manière plus efficace et plus pratique que celle que vous utilisez habituellement.</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Lefonctionnementdelamessagerielectronique"></a><h2>Le fonctionnement de la messagerie électronique</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
<span class="next">Les organes principaux</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-368424" data-claire-element-id="368424">Pour commencer, voyons de quoi nous avons besoin pour envoyer et recevoir des messages par voie électronique.</p>
</div><a name="Lesorganesprincipaux"></a><h2>Les organes principaux</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">
<span class="arrow"></span>
<span class="next">Le fonctionnement de la messagerie électronique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
<span class="next">Autres notions utiles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-organes-principaux" data-claire-element-id="368446">Les organes principaux</h4><p id="r-368425" data-claire-element-id="368425">Comprenez tout d'abord qu'historiquement, chaque machine Unix servait à plusieurs utilisateurs. Ils s'y connectaient à l'aide de simples terminaux. Si l'on compare la messagerie électronique à la messagerie papier traditionnelle, il nous faut voir à une échelle différente : une machine correspond à un village avec son propre relais postal.</p><h5 id="r-le-mta-mail-transfer-agent-le-bureau-de-poste" data-claire-element-id="368430">Le MTA (<em>Mail Transfer Agent</em>) : le bureau de poste</h5><p id="r-368426" data-claire-element-id="368426">Le premier rôle du MTA est de transmettre les messages (les lettres) à une autre machine du réseau (un autre bureau de poste). Son second rôle est d'accepter les messages à destination de ses utilisateurs (les lettres à destination de son village ou arrondissement).</p><p id="r-368427" data-claire-element-id="368427">Sur une machine de bureau (un petit village), le MTA se limitera au premier rôle, et ne contactera que le MTA de son sous-réseau (le centre de tri dont il dépend) − typiquement, le serveur de mail du FAI − qui se chargera d'envoyer le courrier aux MTA des destinataires. Il ne s'occupera du second rôle que pour le courrier local, d'un utilisateur à un autre de la même machine (d'un habitant à un autre du même village). Le courrier de provenance extérieure sera, encore une fois, à la charge du serveur dont il dépend.</p><p id="r-368428" data-claire-element-id="368428">La plupart des distributions installent par défaut un MTA qui est configuré uniquement en local, et qui permet simplement d'envoyer des messages entre plusieurs utilisateurs. Il sert à recevoir les messages d'erreur système et de certaines applications (<strong>cron</strong>, par exemple).</p><p id="r-368429" data-claire-element-id="368429">Exemples de MTA : <strong>Sendmail</strong>, <strong>Postfix</strong>, <strong>Exim</strong>.</p><h5 id="r-le-mda-mail-delivery-agent-le-facteur" data-claire-element-id="368434">Le MDA (<em>Mail Delivery Agent</em>) : le facteur</h5><p id="r-368431" data-claire-element-id="368431">Le MDA est chargé de placer les messages acceptés par le MTA dans les boîtes aux lettres des destinataires.</p><p id="r-368432" data-claire-element-id="368432">Là où l'analogie de la poste trouve ses limites, c'est que le MDA est capable de faire ce qu'aucun facteur ne fera jamais pour vous : trier votre courrier ! Théoriquement, le MTA est capable de placer lui-même le message dans la bonne boîte aux lettres, mais généralement, il fait appel à un MDA qui trie les messages avant de les poser dans la boîte aux lettres du destinataire. Le MDA peut trier les messages en fonction de règles prédéfinies selon plusieurs critères (provenance, destinataire, objet, pièce jointe) pour les placer dans des boîtes aux lettres différentes ou dans des fichiers spécifiques d'une même boîte aux lettres.<br/> Il peut aussi faire appel à des programmes extérieurs qui se chargeront d'une tâche plus spécifique de tri, comme un anti-spam ou un antivirus.</p><p id="r-368433" data-claire-element-id="368433">Exemples de MDA : <strong>Procmail</strong>, <strong>Cyrus</strong>, <strong>maildrop</strong>.</p><h5 id="r-le-mra-mail-retrievial-agent" data-claire-element-id="368438">Le MRA (<em>Mail Retrievial Agent</em>)</h5><p id="r-368435" data-claire-element-id="368435">Dans le cas d'une machine de bureau, votre boîte aux lettres est stockée sur le serveur qui en dépend. Pour que vous puissiez lire vos messages, il vous faut aller les chercher sur le serveur. C'est le rôle du MRA.</p><p id="r-368436" data-claire-element-id="368436">Le MRA peut soit copier la boîte aux lettres telle qu'elle est sur le serveur, soit faire appel à un MDA situé sur la machine de bureau qui fera du tri localement.</p><p id="r-368437" data-claire-element-id="368437">Exemples de MRA : <strong>fetchmail</strong>, <strong>fdm</strong>, <strong>getmail</strong>.</p><h5 id="r-le-mua-mail-user-agent-bureau-papier-stylo" data-claire-element-id="368445">Le MUA (<em>Mail User Agent</em>) : bureau, papier, stylo</h5><p id="r-368439" data-claire-element-id="368439">C'est le client de messagerie, le programme avec lequel vous lisez et écrivez vos messages. Il formate les messages en partance afin de les donner au MTA, et les messages de la boîte aux lettres afin de les afficher à l'écran.</p><p id="r-368440" data-claire-element-id="368440">Exemples de MUA : <strong>mutt</strong>, <strong>Pine</strong>, <strong>Gnus</strong> (<strong>Emacs</strong>).</p><p id="r-368441" data-claire-element-id="368441">Les MUA que vous connaissez (<em>Thunderbird</em>, <em>Evolution</em>, <em>Claws Mail</em>) intègrent tout dans un seul logiciel. Ici, nous chercherons à revenir aux sources :</p><figure id="r-368443" data-claire-element-id="368444"><img id="r-368442" data-claire-element-id="368442" src="medias/uploads.siteduzero.com_files_195001_196000_195608.png" alt="Image utilisateur"/></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">
<span class="arrow"></span>
<span class="next">Le fonctionnement de la messagerie électronique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
<span class="next">Autres notions utiles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Autresnotionsutiles"></a><h2>Autres notions utiles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
<span class="arrow"></span>
<span class="next">Les organes principaux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">
<span class="next">Dialoguons avec les serveurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-autres-notions-utiles" data-claire-element-id="368466">Autres notions utiles</h4><h5 id="r-les-protocoles-2" data-claire-element-id="368451">Les protocoles</h5><p id="r-368447" data-claire-element-id="368447">Pour que tout ce petit monde puisse communiquer, il faut qu'il parle le même langage. On appelle ces langages « protocoles » : c'est une norme définie qui permet à deux serveurs ou à un serveur et un client de communiquer entre eux.</p><p id="r-368448" data-claire-element-id="368448">Les MTA communiquent avec le protocole SMTP (<em>Simple Mail Transfer Protocol</em>). Ce protocole permet d'envoyer un message d'un MTA à un autre. Dans le cas typique, le message sera envoyé de votre MTA local à celui de votre FAI, qui le transmettra à celui du FAI du destinataire, qui le déposera dans la boîte aux lettres.</p><p id="r-368449" data-claire-element-id="368449">Pour qu'un MRA puisse récupérer le message dans une boîte aux lettres distante, cette boîte doit être exposée. Il existe deux protocoles pour exposer et récupérer les messages : le protocole POP3 (<em>Post Office Protocol</em> version 3) ou l'IMAP (<em>Instant Message Access Protocol</em>). Le programme chargé d'exposer les boîtes aux lettres sera simplement appelé « serveur POP » ou « serveur IMAP ».<br/> Le protocole POP3 est le protocole historique. Il permet à un MRA de récupérer les messages sur le serveur, puis de les supprimer du serveur.<br/> L'IMAP est apparu par la suite, ajoutant de nouvelles fonctionnalités. Il permet notamment de créer des dossiers sur le serveur, d'y déplacer des messages, d'en ajouter ou d'en modifier directement sur le serveur. Ainsi, on peut se reconnecter avec un autre client et retrouver ses messages tels qu'on les avait laissés.</p><p id="r-368450" data-claire-element-id="368450">Nous reverrons un peu plus en détail le fonctionnement de ces protocoles dans le prochain chapitre.</p><h5 id="r-mbox-maildir" data-claire-element-id="368455">Mbox / Maildir</h5><p id="r-368452" data-claire-element-id="368452">Mbox est le format de boîte aux lettres Unix standard. Il stocke tous les messages d'une boîte aux lettres dans un seul fichier. Habituellement, la boîte de réception se trouve dans /var/mail/nom_de_l'utilisateur.</p><p id="r-368453" data-claire-element-id="368453">Maildir utilise un dossier pour stocker les messages d'une boîte aux lettres, habituellement dans ~/Maildir. Le dossier contient trois sous-dossiers : new, cur et tmp (les nouveaux messages arrivent dans /tmp avant d'être traités puis déplacés dans new ; une fois marqués comme lus, ils sont déplacés dans cur).<br/> Plusieurs clients peuvent écrire simultanément dans une boîte Maildir, alors que Mbox utilise un système de verrou. C'est pourquoi Maildir est préféré sur les serveurs IMAP.</p><p id="r-368454" data-claire-element-id="368454">Sur votre machine, si vous ne souhaitez pas exposer votre courrier via IMAP, vous pourrez choisir celui que vous voulez.</p><h5 id="r-msa-mail-submission-agent" data-claire-element-id="368459">MSA : <em>Mail Submission Agent</em></h5><p id="r-368456" data-claire-element-id="368456">Le MSA est le programme interne du MTA qui fait le lien entre le MUA et le MTA lui-même. Il lit le mail sur l'entrée standard et l'envoie en local au MTA. Le MUA invoque donc le MSA en lui donnant simplement le message à transmettre.</p><p id="r-368457" data-claire-element-id="368457">Le MSA historique est le programme /usr/sbin/sendmail, fourni par le MTA <strong>Sendmail</strong>. Les autres MTA installent généralement leur programme <strong>Sendmail</strong> en lieu et place du précédent, qui prend en compte les mêmes paramètres. Les MUA classiques connaissent les paramètres à envoyer à <strong>Sendmail</strong>.</p><p id="r-368458" data-claire-element-id="368458">On peut aussi installer d'autres MSA qui sont capables de contacter un MTA extérieur, et permettent donc d'envoyer un message à l'extérieur en ligne de commande sans utiliser le MTA de sa machine.<br/> Exemples : <strong>sSMTP</strong>, <strong>msmtp</strong>.</p><h5 id="r-les-alias" data-claire-element-id="368465">Les alias</h5><p id="r-368460" data-claire-element-id="368460">Le courrier d'un utilisateur peut être redirigé vers un autre utilisateur. Vous pouvez voir ces modifications dans le fichier /etc/aliases.</p><p id="r-368461" data-claire-element-id="368461">Généralement, par défaut, les utilisateurs système sont ainsi redirigés vers root, ce qui permet de retrouver les messages système dans la boîte aux lettres de root. Sur certaines distributions, root est redirigé vers le premier utilisateur créé.</p><p id="r-368462" data-claire-element-id="368462">Ceci peut être utile par exemple lorsque plusieurs personnes administrent la machine, chacun s'occupant d'une tâche spécifique. Vous pouvez ainsi rediriger vos messages comme bon vous semble (n'allez tout de même pas rediriger vers un utilisateur système au final). Pour prendre en compte les modifications, lancez :</p><pre id="r-368463" data-claire-element-id="368463"><code data-claire-semantic="console"># newaliases</code></pre><p id="r-368464" data-claire-element-id="368464">Vous voyez maintenant comment ce système est agencé. La seule chose qui vous manque, c'est de voir comment tous ces élements communiquent.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
<span class="arrow"></span>
<span class="next">Les organes principaux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">
<span class="next">Dialoguons avec les serveurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Dialoguonsaveclesserveurs"></a><h2>Dialoguons avec les serveurs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
<span class="arrow"></span>
<span class="next">Autres notions utiles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
<span class="next">Parlons SMTP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-368468" data-claire-element-id="368468">Ici, nous allons voir comment les différentes transactions s'opèrent, et comment fonctionnent les différents protocoles dans les grandes lignes.</p><p id="r-368469" data-claire-element-id="368469">Nous utiliserons <strong>telnet</strong>, le terminal à tout faire, pour contacter les serveurs et ainsi voir les différentes commandes envoyées aux serveurs pour l'envoi et la réception des messages.</p>
</div><a name="ParlonsSMTP"></a><h2>Parlons SMTP</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">
<span class="arrow"></span>
<span class="next">Dialoguons avec les serveurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
<span class="next">Et pour la réception ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-parlons-smtp" data-claire-element-id="368512">Parlons SMTP</h4><h5 id="r-smtp-classique" data-claire-element-id="368482">SMTP classique</h5><p id="r-368470" data-claire-element-id="368470">Les serveurs SMTP écoutent habituellement sur le port 25. Ceci peut changer en fonction des serveurs.<br/> Je prends ici comme exemple le serveur SMTP de Free, avec en rouge les commandes entrées par l'utilisateur.</p><p id="r-368471" data-claire-element-id="368471"><cite>Citation : telnet</cite></p><blockquote id="r-368474" data-claire-element-id="368474"><p id="r-368472" data-claire-element-id="368472">$ telnet smtp.free.fr 25<br/> Trying 212.27.48.4...<br/> Connected to smtp.free.fr.<br/> Escape character is '^]'.<br/> 220 smtp4-g21.free.fr ESMTP Postfix<br/>HELO client.local<br/> 250 smtp4-g21.free.fr<br/>MAIL FROM: expé<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="6f0b061b0a1a1d2f091d0a0a41091d">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script><br/> 250 2.1.0 Ok<br/>RCPT TO: <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="b0d4d5c3c4d9ded1c4d1d9c2d5f0d4dfddd1d9ded59ec4dcd4">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script><br/> 250 2.1.5 Ok<br/>DATA<br/> 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;<br/>From: expé<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="88ece1fcedfdfac8eefaededa6eefa">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script><br/> To: <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="52363721263b3c3326333b203712363d3f333b3c377c263e36">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script><br/> Subject: Test</p><p id="r-368473" data-claire-element-id="368473">Je peux envoyer un message avec telnet.<br/> .<br/> 250 2.0.0 Ok: queued as 2EBE14C81B8<br/>QUIT<br/> 221 2.0.0 Bye<br/> Connection closed by foreign host.</p></blockquote><p id="r-368475" data-claire-element-id="368475">Quelques explications : les serveurs sont polis et se présentent (« 220 smtp4-g21.free.fr ESMTP Postfix »). Ils attendent généralement qu'on leur rende la pareille (même si dans le cas de Free, j'aurais pu m'en passer). On emploie alors HELO suivi normalement du nom de domaine de la machine cliente. On peut théoriquement mettre ce que l'on veut à la place du nom de domaine, mais certains serveurs obligent à mettre un nom de domaine (du moins deux chaînes de caractères séparées par un point).<br/> Je donne l'adresse de l'expéditeur et celle du destinataire à l'aide des commandes MAIL FROM et RCPT TO, puis le corps du message avec DATA (avec un point seul à la fin pour signaler la fin du message).<br/> Je me déconnecte ensuite simplement avec QUIT.</p><p id="r-368476" data-claire-element-id="368476">À partir de là, le serveur de Free contactera celui du destinataire et aura le même dialogue avec lui pour lui retransmettre le message.</p><p id="r-368477" data-claire-element-id="368477">Et là, vous remarquerez deux choses : la première est que les champs indiquant l'expéditeur, le destinataire et le sujet, qui seront affichés dans des champs spécifiques par son MUA, font partie du corps du message. Je reviendrai sur ce point. La deuxième chose est que je n'ai pas eu à m'identifier sur le serveur. En effet, la configuration de base d'un serveur SMTP autorise toute machine de son réseau (ici le réseau Free) à envoyer un message dont la source est sur son domaine, et accepte tous les messages à destination de son domaine.</p><aside id="r-368479" data-claire-element-id="368479" data-claire-semantic="information"><p id="r-368478" data-claire-element-id="368478">Si vous arrivez, en vous connectant d'une IP extérieure, à envoyer un message d'un domaine qui n'est pas le sien à un autre domaine qui n'est pas non plus le sien, contactez l'administrateur du serveur.</p></aside><p id="r-368480" data-claire-element-id="368480">Ça fait tout de même pas mal de choses à réunir pour refuser un mail. Ce qu'il faut comprendre, c'est qu'historiquement le protocole SMTP n'a pas été pensé pour la sécurité, mais pour la fiabilité : le message doit arriver à destination, point.</p><p id="r-368481" data-claire-element-id="368481">On a tout de même ajouté par la suite des extensions à SMTP permettant d'affiner tout ceci. Ce qui est utile pour permettre les mails nomades, comme Gmail ou Yahoo!, où chacun peut utiliser son adresse de n'importe où (chez Free, il faut utiliser le webmail).<br/> On parle alors d'ESMTP (<em>Extented SMTP</em>).</p><h5 id="r-esmtp" data-claire-element-id="368511">ESMTP</h5><h6 id="r-ehlo-l-extented-helo" data-claire-element-id="368489">EHLO, l'« <em>Extented HELO</em> »</h6><p id="r-368483" data-claire-element-id="368483">Au lieu d'utiliser HELO, on va maintenant utiliser EHLO. Le serveur va alors renvoyer les extensions qu'il prend en charge. Exemple avec Free :</p><p id="r-368484" data-claire-element-id="368484"><cite>Citation : telnet</cite></p><blockquote id="r-368486" data-claire-element-id="368486"><p id="r-368485" data-claire-element-id="368485">EHLO client.local<br/> 250-smtp5-g21.free.fr<br/> 250-PIPELINING<br/> 250-SIZE 35000000<br/> 250-VRFY<br/> 250-ETRN<br/> 250-ENHANCEDSTATUSCODES<br/> 250-8BITMIME<br/> 250 DSN</p></blockquote><p id="r-368487" data-claire-element-id="368487">Nous sommes donc en ESMTP (aujourd'hui, tous les serveurs le sont) et nous pouvons utiliser les extensions indiquées.</p><p id="r-368488" data-claire-element-id="368488">Je ne citerai que deux extensions ici (qui ne sont pas prises en charge par Free, c'était seulement pour l'exemple), car ce sont celles qui nous sont généralement imposées quand elles se trouvent sur le serveur.</p><h6 id="r-auth" data-claire-element-id="368502">AUTH</h6><p id="r-368490" data-claire-element-id="368490">Certains serveurs obligent leurs utilisateurs à s'authentifier.<br/> On peut trouver plusieurs types d'authentification, les plus connues sont LOGIN et PLAIN. Les deux sont codées en base64. On peut encoder en base64 avec <strong>OpenSSL</strong> (d'autres programmes permettent d'encoder en base64, par exemple <strong>Emacs</strong> avec la commande base64-encode-region).</p><p id="r-368491" data-claire-element-id="368491">Exemple d'un AUTH LOGIN avec le <em>login</em> « kna » et le <em>password</em> « Kn4 » :</p><pre id="r-368492" data-claire-element-id="368492"><code data-claire-semantic="console">$ echo -n kna | openssl base64
a25h
$ echo -n Kn4 | openssl base64
S240</code></pre><p id="r-368493" data-claire-element-id="368493"><cite>Citation : telnet</cite></p><blockquote id="r-368495" data-claire-element-id="368495"><p id="r-368494" data-claire-element-id="368494">AUTH LOGIN<br/> 334 VXNlcm5hbWU6<br/>a25h<br/> 334 UGFzc3dvcmQ6<br/>S240<br/> 235 2.7.0 Authentication successful</p></blockquote><p id="r-368496" data-claire-element-id="368496">« VXNlcm5hbWU6 » veut dire « Username » et « UGFzc3dvcmQ6 » veut dire « Password » en base64.</p><p id="r-368497" data-claire-element-id="368497">Exemple d'un AUTH PLAIN avec les mêmes <em>login</em> et <em>password</em> :</p><pre id="r-368498" data-claire-element-id="368498"><code data-claire-semantic="console">$ echo -ne 'kna\0kna\0Kn4' | openssl base64
a25hAGtuYQBLbjQ=</code></pre><p id="r-368499" data-claire-element-id="368499"><cite>Citation : telnet</cite></p><blockquote id="r-368501" data-claire-element-id="368501"><p id="r-368500" data-claire-element-id="368500">AUTH PLAIN a25hAGtuYQBLbjQ=<br/> 235 2.7.0 Authentication successful</p></blockquote><h6 id="r-starttls" data-claire-element-id="368510">STARTTLS</h6><p id="r-368503" data-claire-element-id="368503">Les serveurs utilisant AUTH imposent en général STARTTLS pour empêcher de transmettre les mots de passe en clair.</p><p id="r-368504" data-claire-element-id="368504"><cite>Citation : telnet</cite></p><blockquote id="r-368506" data-claire-element-id="368506"><p id="r-368505" data-claire-element-id="368505">AUTH LOGIN<br/> 504 5.5.4 Encryption required for requested authentication mechanism<br/>STARTTLS<br/> 220 2.0.0 Ready to start TLS</p></blockquote><p id="r-368507" data-claire-element-id="368507">À partir de là, la suite est chiffrée. Et comme vous n'avez pas choisi SSL en première langue au collège, vous ne pouvez pas aller plus loin avec telnet.</p><aside id="r-368509" data-claire-element-id="368509" data-claire-semantic="warning"><p id="r-368508" data-claire-element-id="368508">Ne pas confondre.<br/> STARTTLS chiffre la connexion en cours de dialogue.<br/> Ce n'est pas la même chose que du SMTP-over-SSL qui fait passer toute la communication SMTP dans un flux SSL. On parle alors de SMTPS et le port utilisé par défaut pour cela est le port 465.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">
<span class="arrow"></span>
<span class="next">Dialoguons avec les serveurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
<span class="next">Et pour la réception ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Etpourlarception"></a><h2>Et pour la réception ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
<span class="arrow"></span>
<span class="next">Parlons SMTP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
<span class="next">Quelques mots sur TLS/SSL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-et-pour-la-reception" data-claire-element-id="368532">Et pour la réception ?</h4><h5 id="r-pop3" data-claire-element-id="368528">POP3</h5><p id="r-368513" data-claire-element-id="368513">Les serveurs POP3 écoutent par défaut sur le port 110.</p><p id="r-368514" data-claire-element-id="368514"><cite>Citation : telnet</cite></p><blockquote id="r-368518" data-claire-element-id="368518"><p id="r-368515" data-claire-element-id="368515">$ telnet pop.free.fr 110<br/> Trying 212.27.48.3...<br/> Connected to pop.free.fr.<br/> Escape character is '^]'.<br/> +OK POP3 ready &lt;1675082144.1240247083@pop6-g25&gt;<br/>USER moncompte<br/> +OK<br/>PASS monpass<br/> +OK <br/>LIST<br/> +OK <br/> 1 816<br/> .<br/>RETR 1<br/> +OK 756 octets<br/> Return-Path: &lt;expé<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="80e4e9f4e5f5f2c0e4efede1e9eee5aef4ece4">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;<br/> Delivered-To: <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="eb8684858884869b9f8eab8d998e8ec58d99">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script><br/> Received: (qmail 19584 invoked from network); 20 Apr 2009 17:04:17 -0000<br/> Received: from XXX.XXX.XXX.XXX (HELO machine.domaine.tld) (XXX.XXX.XXX.XXX)<br/> by mrelay2-g25.free.fr with SMTP; 20 Apr 2009 17:04:17 -0000<br/> Received: from client.local (machine.domaine.tld [XXX.XXX.XXX.XXX])<br/> by machine.domaine.tld (Postfix) with ESMTP id 68C8F2972<br/> for &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="5e3331303d31332e2a3b1e382c3b3b70382c">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;; Mon, 20 Apr 2009 19:02:41 +0200 (CEST)<br/> From: <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="a9ccd1d9cccdc0ddccdcdbe9cdc6c4c8c0c7cc87ddc5cd">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script><br/> To: <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="3f5250515c50524f4b5a7f594d5a5a11594d">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script><br/> Subject: Un mail juste pour le tuto<br/> Message-Id: &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="d8eae8e8e1e8eceae8e9efe8eaedecf6eee09be09eeae1efea98b5b9bbb0b1b6bdf6bcb7b5b9b1b6bdf6acb4bc">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;<br/> Date: Mon, 20 Apr 2009 19:02:41 +0200 (CEST)</p><p id="r-368516" data-claire-element-id="368516">J'avais envoyé ce mail avant ! Forcément.</p><p id="r-368517" data-claire-element-id="368517">.<br/>DELE 1<br/> +OK <br/>QUIT<br/> +OK <br/> Connection closed by foreign host.</p></blockquote><p id="r-368519" data-claire-element-id="368519">Là encore, rien de bien compliqué : j'utilise donc USER et PASS pour m'authentifier, LIST pour afficher la liste des messages. Ici, j'ai un seul message.<br/> Je récupère chaque message avec RETR suivi du numéro du message. Une fois le message récupéré, je le supprime du serveur avec DELE, là encore suivi du numéro du message.<br/> Enfin, je clos la connexion avec QUIT.</p><p id="r-368520" data-claire-element-id="368520">J'aurais aussi pu utiliser TOP qui affiche seulement l'en-tête du message avec les premières lignes du corps du message (ici, vu la longueur du message, ça n'aurait pas changé grand-chose).</p><p id="r-368521" data-claire-element-id="368521">Certains serveurs supportent APOP, qui permet de chiffrer son mot de passe. On utilise alors APOP suivi du <em>login</em> et du <em>digest</em>, le <em>digest</em> étant la somme md5 du <em>tag</em> renvoyé par le serveur lors de la connexion et du mot de passe.<br/> Par exemple, toujours avec le <em>login</em> « kna » et le <em>password</em> « Kn4 ».</p><p id="r-368522" data-claire-element-id="368522"><cite>Citation : telnet</cite></p><blockquote id="r-368524" data-claire-element-id="368524"><p id="r-368523" data-claire-element-id="368523">$ telnet localhost 110<br/> Trying ::1...<br/> Trying 127.0.0.1...<br/> Connected to localhost.<br/> Escape character is '^]'.<br/> +OK Dovecot ready. &lt;2feb.2.49ecc456.HiJ1D7sFI46If8vArork8A==@debian&gt;<br/>APOP kna 4aaf1b8e5b2e5cd68e73aaf339235a00<br/> +OK Logged in.</p></blockquote><p id="r-368525" data-claire-element-id="368525">En obtenant le <em>digest</em> là encore avec <strong>OpenSSL</strong> :</p><pre id="r-368526" data-claire-element-id="368526"><code data-claire-semantic="console">$ echo -n '&lt;2feb.2.49ecc456.HiJ1D7sFI46If8vArork8A==@debian&gt;Kn4' | openssl md5
4aaf1b8e5b2e5cd68e73aaf339235a00</code></pre><p id="r-368527" data-claire-element-id="368527">Ici aussi, certains serveurs POP3 peuvent également utiliser STARTTLS pour chiffrer le dialogue. Et de même qu'avec SMTP, on peut aussi trouver des serveurs qui font le dialogue POP3 dans un flux SSL ; on parle alors de POP3S et on utilise par défaut le port 995.</p><h5 id="r-imap" data-claire-element-id="368531">IMAP</h5><p id="r-368529" data-claire-element-id="368529">Je ne parlerai pas de l'IMAP avec <strong>telnet</strong> ici. Bien qu'on puisse « causer IMAP » avec un serveur, le protocole étant beaucoup plus complexe que POP3, il mériterait un chapitre entier. Or, le but est seulement de vous présenter le fonctionnement de la messagerie électronique, pas de vous apprendre à coder un MRA.<br/> Si vous souhaitez tout de même avoir un aperçu, vous pouvez jeter un œil à <a href="http://irp.nain-t.net/doku.php/190imap:030_commandes">http://irp.nain-t.net/doku.php/190imap:030_commandes</a>.</p><p id="r-368530" data-claire-element-id="368530">Retenez simplement qu'IMAP utilise par défaut le port 143, et encore une fois on peut chiffrer le dialogue IMAP soit avec STARTTLS, soit en IMAPS (port 993).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
<span class="arrow"></span>
<span class="next">Parlons SMTP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
<span class="next">Quelques mots sur TLS/SSL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="QuelquesmotssurTLS_SSL"></a><h2>Quelques mots sur TLS/SSL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
<span class="arrow"></span>
<span class="next">Et pour la réception ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">
<span class="next">Rapatriement basique et tri</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-mots-sur-tls-ssl" data-claire-element-id="368578">Quelques mots sur TLS/SSL</h4><h5 id="r-tls-ou-ssl" data-claire-element-id="368535">TLS ou SSL ?</h5><p id="r-368533" data-claire-element-id="368533">TLS (<em>Transport Layer Security</em>) est en fait le nouveau nom de SSL (<em>Secure Socket Layer</em>). SSL s'arrêtant à la version 3, la version 1 de TLS correspond à la version 3.1 de SSL. Par abus de langage, il est courant de parler de SSL pour désigner à la fois TLS et SSL.<br/> Pour que l'on se comprenne, j'emploierai toujours « TLS/SSL » pour parler du protocole sans distinction de version ou d'utilisation, « STARTTLS » pour désigner un dialogue chiffré en cours de connexion (STARTTLS), et « SSL » pour parler d'un dialogue en clair dans un flux chiffré (SMTPS, POP3S, IMAPS). Lorsque je voudrai préciser la version, je l'indiquerai tout simplement (« SSLv2 », « SSLv3 », « TLSv1 »).</p><p id="r-368534" data-claire-element-id="368534">Sachez tout de même que TLS/SSL n'est pas propre à la messagerie électronique. Certains serveurs FTP utilisent aussi STARTTLS, et on peut faire passer n'importe quel protocole dans un flux SSL, c'est utilisé couramment avec du HTTP pour le commerce en ligne par exemple.</p><h5 id="r-et-si-on-reparlait-smtp-ou-pop3" data-claire-element-id="368542">Et si on reparlait SMTP ou POP3 ?</h5><p id="r-368536" data-claire-element-id="368536">Comme je vous disais précédemment, on ne peut pas utiliser <strong>telnet</strong> avec un serveur qui utilise STARTTLS. Mais on peut tout de même dialoguer avec ces serveurs en utilisant <strong>OpenSSL</strong> :</p><pre id="r-368537" data-claire-element-id="368537"><code data-claire-semantic="console">$ openssl s_client -starttls &lt;protocole&gt; -crlf -connect [serveur:port]</code></pre><p id="r-368538" data-claire-element-id="368538">Remplacez [protocole] par le protocole du serveur que vous contactez (smtp, pop3, ou imap) et [serveur:port] par le nom ou l'IP du serveur, suivi du numéro de port (séparés par « : »).<br/> L'option -crlf est seulement là par sécurité, elle convertit un saut de ligne en <a href="http://fr.wikipedia.org/wiki/CRLF">CRLF</a>. Ceci est requis sur certains serveurs.</p><p id="r-368539" data-claire-element-id="368539">À partir de là, vous pouvez dialoguer avec le serveur comme si vous utilisiez <strong>telnet</strong>.<br/> Dans le cas d'un serveur SMTP, <strong>OpenSSL</strong> enverra EHLO avant de lancer STARTTLS. Vous pouvez cependant renvoyer vous-mêmes un autre EHLO pour voir les options disponibles sur le serveur.</p><p id="r-368540" data-claire-element-id="368540">Pour SSL, tout est encapsulé dans le flux, c'est donc plus simple (on peut aussi utiliser <strong>stunnel</strong>) :</p><pre id="r-368541" data-claire-element-id="368541"><code data-claire-semantic="console">$ openssl s_client -crlf -connect [serveur:port]</code></pre><h5 id="r-certificats" data-claire-element-id="368568">Certificats</h5><p id="r-368543" data-claire-element-id="368543">Lors d'une négociation en « TLS/SSL », le serveur vous envoie un certificat qui vous permet de vous assurer de son authenticité (autrement dit, que vous ne vous adressiez pas à un serveur tiers qui se ferait passer pour celui auquel vous voulez accéder). Pour assurer la validité du certificat, il est signé par une autorité de certification (CA) qui se charge de valider et révoquer les différents certificats.<br/> Vous avez déjà les certificats de plusieurs CA sur votre système, installés par <strong>OpenSSL</strong> ou par votre navigateur. Typiquement, on les trouve dans /etc/ssl/certs, mais ceci peut varier en fonction des distributions (généralement, ils sont installés <em>via</em> le paquet ca-certificates). Ainsi, vos clients peuvent vérifier l'authenticité des serveurs signés par ces CA. De cette façon, lorsque vous vous connectez à des serveurs connus <em>via</em> TLS/SSL, votre client reconnaît et accepte le certificat (ceci est fait en général de façon transparente).</p><p id="r-368544" data-claire-element-id="368544">Cependant, il se peut que vous n'ayez pas le certificat de la CA, soit parce que votre distribution n'en installe pas, soit parce que le serveur n'est pas signé par une CA connue (serveur d'une université, d'une petite entreprise ou serveur personnel, ayant fait appel à une CA moins connue ou ayant créé leur petite CA personnelle réservée à leur serveur pour économiser les coûts et les démarches).<br/> Vous avez probablement dû être confrontés à cette situation avec votre navigateur. En général, le navigateur vous propose soit d'accepter le certificat temporairement, soit de l'accepter définitivement, soit de le refuser.</p><div id="r-368546" data-claire-element-id="368546" data-claire-semantic="question"><p id="r-368545" data-claire-element-id="368545">Comment je fais pour savoir quel certificat je dois utiliser ?</p></div><p id="r-368547" data-claire-element-id="368547">Eh bien... c'est la grande question. Car c'est un peu au cas par cas : certains serveurs ont un certificat signé par une autorité qui a elle-même un certificat signé par une autre autorité ! Je ne pourrai raisonnablement pas parler de tous les cas ici. Mais ne vous inquiétez pas, je ne vais pas vous laisser tomber comme ça non plus.</p><h6 id="r-si-vous-avez-des-certificats-pre-installes" data-claire-element-id="368551">Si vous avez des certificats pré-installés</h6><p id="r-368548" data-claire-element-id="368548">Les clients que nous verrons demanderont soit un dossier contenant les certificats, soit un fichier. Dans le cas du dossier, c'est simple, il suffit d'indiquer /etc/ssl/certs. Dans le cas d'un fichier, votre distribution a probablement rassemblé tous les certificats dans un seul fichier (typiquement, /etc/ssl/certs/ca-certificates.crt). Sinon, vous pouvez aisément le faire :</p><pre id="r-368549" data-claire-element-id="368549"><code data-claire-semantic="console">for i in /etc/ssl/certs/*.pem ; do cat $i &gt;&gt; /etc/ssl/certs/ca-certificates.crt ; done
c_rehash /etc/ssl/certs</code></pre><p id="r-368550" data-claire-element-id="368550">Vous pouvez tout de même vous inspirer de la suite pour trouver le bon fichier.</p><h6 id="r-si-vous-n-avez-pas-de-certificat-ou-pas-le-bon" data-claire-element-id="368567">Si vous n'avez pas de certificat, ou pas le bon</h6><p id="r-368552" data-claire-element-id="368552">Dans l'utilisation de s_client (<strong>OpenSSL</strong>) ici, je prendrai toujours le cas de SSL. Pour adapter à STARTTLS, ajoutez simplement --starttls [protocole] devant --connect [serveur:port].</p><p id="r-368553" data-claire-element-id="368553">Lorsque vous vous connectez <em>via</em><strong>OpenSSL</strong>, le serveur affiche son certificat. Cependant, il a peut-être d'autres certificats à nous montrer ; pour nous en assurer, nous allons utiliser l'option -showcerts :</p><pre id="r-368554" data-claire-element-id="368554"><code data-claire-semantic="console">openssl s_client -crlf -connect [serveur:port] -showcerts</code></pre><p id="r-368555" data-claire-element-id="368555">Ici, le serveur nous affiche un ou plusieurs certificats. La partie qui nous intéresse commence par « <em>Certificate chain</em> ». Prenons comme exemple le serveur IMAP de Gmail :</p><pre id="r-368556" data-claire-element-id="368556"><code data-claire-semantic="console">$ openssl s_client -connect imap.gmail.com:993 -showcerts
[...]
---
Certificate chain
 0 s:/C=US/ST=California/L=Mountain View/O=Google Inc/CN=imap.gmail.com
   i:/C=US/O=Google Inc/CN=Google Internet Authority
-----BEGIN CERTIFICATE-----
MIIDLzCCApigAwIBAgIKKNVg8QAAAAAHfzANBgkqhkiG9w0BAQUFADBGMQswCQYD
VQQGEwJVUzETMBEGA1UEChMKR29vZ2xlIEluYzEiMCAGA1UEAxMZR29vZ2xlIElu
dGVybmV0IEF1dGhvcml0eTAeFw0wOTAzMTIyMDIzNDFaFw0xMDAzMTIyMDMzNDFa
MGgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1N
b3VudGFpbiBWaWV3MRMwEQYDVQQKEwpHb29nbGUgSW5jMRcwFQYDVQQDEw5pbWFw
LmdtYWlsLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAo1cDhDhgSN3M
9Do6D459nSNxZW1fTPJV5rmJctt12zZwDTBbHqWlZsK1ZvcV1ngj1nYgZ7RXZmgC
sxEUSK/sw+/5Otl6BpK3OLFZI5U/FmMUTssG588Hsl21SBxeK7RoAgxxM2vB2Jgi
3KH+E13mlgUXlCyrehnbbTlwEosURyUCAwEAAaOCAQAwgf0wHQYDVR0OBBYEFNiX
w7Ps6PWzF80VrxYbz63ucVArMB8GA1UdIwQYMBaAFL/AMOv1QxE+Z7qekfv8atrj
axIkMEYGA1UdHwQ/MD0wO6A5oDeGNWh0dHA6Ly9jcmwuZXh0Lmdvb2dsZS5jb20v
R29vZ2xlSW50ZXJuZXRBdXRob3JpdHkuY3JsMFAGCCsGAQUFBwEBBEQwQjBABggr
BgEFBQcwAoY0aHR0cDovL2NhLmV4dC5nb29nbGUuY29tL0dvb2dsZUludGVybmV0
QXV0aG9yaXR5LmNydDAhBgkrBgEEAYI3FAIEFB4SAFcAZQBiAFMAZQByAHYAZQBy
MA0GCSqGSIb3DQEBBQUAA4GBALo7fCzccb+0OeU+iGPJ/CEynTIegiqt/OkZPP4P
aVy7a0MjwK7mDDYpMMu10r4oYSM8iI1BN2iIXRFDkuogp48yeh8P3In1A332XdW3
UoaoIhI8DunLXgfBEr2/TPUHtXDfJumu+wCojdjT2ywwud1hY8LSRR2zv27FWEAD
OaRh
-----END CERTIFICATE-----
 1 s:/C=US/O=Google Inc/CN=Google Internet Authority
   i:/C=US/O=Equifax/OU=Equifax Secure Certificate Authority
-----BEGIN CERTIFICATE-----
MIICsDCCAhmgAwIBAgIDBpiwMA0GCSqGSIb3DQEBBQUAME4xCzAJBgNVBAYTAlVT
MRAwDgYDVQQKEwdFcXVpZmF4MS0wKwYDVQQLEyRFcXVpZmF4IFNlY3VyZSBDZXJ0
aWZpY2F0ZSBBdXRob3JpdHkwHhcNMDYxMjA1MjIzODAwWhcNMTAwNjIwMjEzODAw
WjBGMQswCQYDVQQGEwJVUzETMBEGA1UEChMKR29vZ2xlIEluYzEiMCAGA1UEAxMZ
R29vZ2xlIEludGVybmV0IEF1dGhvcml0eTCBnzANBgkqhkiG9w0BAQEFAAOBjQAw
gYkCgYEAye23pIucV+eEPkB9hPSP0XFjU5nneXQUr0SZMyCSjXvlKAy6rWxJfoNf
NFlOCnowzdDXxFdF7dWq1nMmzq0yE7jXDx07393cCDaob1FEm8rWIFJztyaHNWrb
qeXUWaUr/GcZOfqTGBhs3t0lig4zFEfC7wFQeeT9adGnwKziV28CAwEAAaOBozCB
oDAOBgNVHQ8BAf8EBAMCAQYwHQYDVR0OBBYEFL/AMOv1QxE+Z7qekfv8atrjaxIk
MB8GA1UdIwQYMBaAFEjmaPkr0rKV10fYIyAQTzOYkJ/UMBIGA1UdEwEB/wQIMAYB
Af8CAQAwOgYDVR0fBDMwMTAvoC2gK4YpaHR0cDovL2NybC5nZW90cnVzdC5jb20v
Y3Jscy9zZWN1cmVjYS5jcmwwDQYJKoZIhvcNAQEFBQADgYEAUcUIjO89Fo091eyd
ZmfeAkqotSvtVEIPm4f+B22gv5sIF8S8xkL7z24DU7EmPa/RmFvnAZYTRpHHBnYN
u+Z07d919W8amW1mmPJZuAvWYlZnaEcJO1WF+dfu6Fen7msMDUIiQrgavibGhANg
lutmksHhhauHBR11iMrbQLldyLU=
-----END CERTIFICATE-----
---
[...]</code></pre><p id="r-368557" data-claire-element-id="368557">Nous voyons ici deux certificats, numérotés 0 et 1. Leurs en-têtes comprennent deux lignes. La première contient le numéro et commence par « s: » (<em>subject</em>) : elle donne des informations sur le propriétaire du certificat. La seconde ligne commence par « i: » (<em>issuer</em>) : elle donne des informations sur l'autorité qui signe le certificat.<br/> Nous voyons donc que le premier certificat est celui du serveur imap.gmail.com et qu'il est signé par <em>Google Internet Authority</em>. Le deuxième certificat est celui de <em>Google Internet Authority</em> (qui signe donc le premier) qui est signé par <em>Equifax Secure Certificate Authority</em>. Il nous faudra donc récupérer le certificat de <em>Equifax Secure Certificate Authority</em>.</p><p id="r-368558" data-claire-element-id="368558">Une petite recherche nous permet de trouver le certificat sur <a href="http://www.geotrust.com/resources/root-certificates/">http://www.geotrust.com/resources/root-certificates/</a>. Il suffit donc de télécharger le fichier au format base64 et de l'enregistrer au format .pem dans un dossier, par exemple /etc/ssl/certs/mycerts.</p><p id="r-368559" data-claire-element-id="368559">Parfois, vous pouvez trouver un lien de téléchargement du certificat de la CA dans le certificat du serveur. En copiant le certificat (de la ligne « -----BEGIN CERTIFICATE----- » à la ligne « -----END CERTIFICATE----- ») dans un fichier au format .pem, vous pouvez extraire des informations du certificat en utilisant :</p><pre id="r-368560" data-claire-element-id="368560"><code data-claire-semantic="console">$ openssl x509 -in [certificat] -noout -text</code></pre><p id="r-368561" data-claire-element-id="368561">Vous trouverez alors peut-être un lien pour télécharger le certificat de la CA (généralement un fichier .crt ou .pem) !</p><aside id="r-368563" data-claire-element-id="368563" data-claire-semantic="warning"><p id="r-368562" data-claire-element-id="368562">Vous verrez probablement un lien pour télécharger un fichier .crl. Ce n'est pas ce fichier-là (il est utilisé pour les listes de révocation) !</p></aside><p id="r-368564" data-claire-element-id="368564">Faites ainsi pour tous les serveurs que vous devez contacter. Une fois tous vos certificats récupérés, donnez-les à root et limitez les autres utilisateurs à la lecture uniquement. Pour les clients auxquels il faut indiquer le chemin du dossier, il vous faut faire des liens symboliques pointant vers le certificat et ayant comme nom son <em>hash</em>. Ceci est faisable avec la commande c_rehash [nom_du_dossier] :</p><pre id="r-368565" data-claire-element-id="368565"><code data-claire-semantic="console"># chown -R root:root /etc/ssl/certs/mycerts
# chmod 700 /etc/ssl/certs/mycerts
# chmod 600 /etc/ssl/certs/mycerts/*
# c_rehash /etc/ssl/certs/mycerts</code></pre><p id="r-368566" data-claire-element-id="368566">Il y a certains cas plus exotiques que je n'évoquerai pas dans ce tutoriel (certificat auto-signé, serveur qui nécessite une authentification du client, certificat fourni au format .exe). N'hésitez pas à regarder les pages de manuel des différents programmes qui seront abordés dans ce tutoriel, ainsi que la documentation d'<strong>OpenSSL</strong>.</p><h5 id="r-on-est-en-securite-finalement" data-claire-element-id="368577">On est en sécurité, finalement ?</h5><p id="r-368569" data-claire-element-id="368569">Eh bien non ! Bien que le protocole TLS/SSL puisse être considéré comme fiable, il y a quelques imperfections dans notre démarche.</p><p id="r-368570" data-claire-element-id="368570">Tout d'abord, la façon dont nous avons obtenu les certificats est loin d'être sûre. D'une part, nous nous somme basés sur le certificat du serveur pour déterminer quelle CA lui fait autorité sans vérification : nous aurions très bien pu tomber sur un faux serveur se faisant passer pour le nôtre (ici Gmail). D'autre part, nous avons téléchargé le certificat de la CA par le web, sans nous assurer de l'authenticité du site.</p><p id="r-368571" data-claire-element-id="368571">Ensuite, comme nous l'avons vu, lorsque vous envoyez un message, il passe par plusieurs serveurs. Le schéma montré dans le chapitre précédent est simplifié : il est courant qu'un message passe par plusieurs relais avant d'arriver à destination. Si nous pouvons garantir la sécurité de notre machine au serveur que l'on contacte, on ne peut pas garantir qu'elle ne soit pas rompue à un moment dans la chaîne. Les serveurs n'utilisent pas ou peu SSL entre eux, pour la simple et bonne raison que peu de serveurs le supportent. STARTTLS est plus répandu sur les serveurs SMTP, cependant rien ne garantit que le serveur auquel vous avez envoyé le message en utilisant STARTTLS l'utilisera à son tour pour le transmettre, tout simplement parce que le serveur suivant auquel il s'adresse ne supporte pas STARTTLS ou refuse son certificat.</p><p id="r-368572" data-claire-element-id="368572">De plus, nous avons vu tout à l'heure qu'il était très facile de changer l'adresse du destinataire dans le champ « From: », voire d'envoyer un message à partir d'une adresse qui n'est pas la nôtre.</p><p id="r-368573" data-claire-element-id="368573">Enfin, de nombreuses CA utilisent encore le hachage md5 pour signer les certificats, dont la sécurité n'est plus garantie : <a href="http://fr.wikipedia.org/wiki/Md5%23Cryptanalyse">http://fr.wikipedia.org/wiki/Md5#Cryptanalyse</a>.</p><p id="r-368574" data-claire-element-id="368574">Si vous voulez préserver la confidentialité de vos messages, il faudra chiffrer directement dans le corps du message. Pour cela, le meilleur moyen est d'utiliser <a href="http://fr.wikipedia.org/wiki/GNU_Privacy_Guard">GnuPG</a> ou <a href="http://fr.wikipedia.org/wiki/S%2FMIME">S/MIME</a>, qui vous permettront d'assurer à la fois la confidentialité mais aussi l'authenticité de vos correspondances.</p><p id="r-368575" data-claire-element-id="368575">Vous voyez maintenant toutes les étapes entre l'envoi et la réception d'un message. Vous êtes à présent en mesure de mieux aborder la suite.</p><p id="r-368576" data-claire-element-id="368576">Vous comprenez maintenant mieux quels sont les différents éléments qui participent à la messagerie électronique, et comment ils communiquent entre eux. Nous pouvons donc passer à ce qui nous intéresse : la pratique !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
<span class="arrow"></span>
<span class="next">Et pour la réception ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">
<span class="next">Rapatriement basique et tri</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Rapatriementbasiqueettri"></a><h2>Rapatriement basique et tri</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
<span class="arrow"></span>
<span class="next">Quelques mots sur TLS/SSL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
<span class="next">Venez, petits messages !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-368582" data-claire-element-id="368582">Ici, nous allons voir comment recevoir les messages de comptes multiples, mais aussi comment faire du tri parmi ces messages.</p>
</div><a name="Venezpetitsmessages"></a><h2>Venez, petits messages !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">
<span class="arrow"></span>
<span class="next">Rapatriement basique et tri</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
<span class="next">Un peu de tri ne serait pas du luxe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-venez-petits-messages" data-claire-element-id="368618">Venez, petits messages !</h4><p id="r-368583" data-claire-element-id="368583">Pour rapatrier nos messages, nous allons utiliser <strong>fetchmail</strong>.<br/> Pour l'installation, il suffit d'installer le paquet fetchmail.</p><h5 id="r-configuration-de-base" data-claire-element-id="368596">Configuration de base</h5><p id="r-368584" data-claire-element-id="368584">La configuration de <strong>fetchmail</strong> se trouve dans le fichier ~/.fetchmailrc. Il vous suffit de l'éditer de la sorte :</p><pre id="r-368585" data-claire-element-id="368585"><code data-claire-semantic="bash">poll [adresse_du_serveur]
   port [port]
   protocol [protocole]
   username [login]
   password [password]</code></pre><p id="r-368586" data-claire-element-id="368586">En remplaçant :</p><ul id="r-368595" data-claire-element-id="368595"><li id="r-368588" data-claire-element-id="368588"><p id="r-368587" data-claire-element-id="368587">[adresse_du_serveur] par l'adresse de votre serveur (pop.domaine.tld) ;</p></li><li id="r-368590" data-claire-element-id="368590"><p id="r-368589" data-claire-element-id="368589">[port] par le numéro du port (non nécessaire si c'est le port par défaut) ;</p></li><li id="r-368592" data-claire-element-id="368592"><p id="r-368591" data-claire-element-id="368591">[protocole] par le protocole de votre serveur (POP3, APOP ou IMAP) ;</p></li><li id="r-368594" data-claire-element-id="368594"><p id="r-368593" data-claire-element-id="368593">[login] et [password] par le nom et le mot de passe de votre compte.</p></li></ul><h5 id="r-tls-ssl" data-claire-element-id="368608">TLS/SSL</h5><p id="r-368597" data-claire-element-id="368597"><strong>Fetchmail</strong> se connectera en STARTTLS s'il le peut.</p><p id="r-368598" data-claire-element-id="368598">Si vous utilisez SSL, ajoutez :</p><pre id="r-368599" data-claire-element-id="368599"><code data-claire-semantic="bash">ssl</code></pre><p id="r-368600" data-claire-element-id="368600">Si la connexion ne se fait pas, rajoutez :</p><pre id="r-368601" data-claire-element-id="368601"><code data-claire-semantic="bash">sslproto [version]</code></pre><p id="r-368602" data-claire-element-id="368602">En remplaçant [version] par la version du protocole utilisée par votre serveur : SSL2, SSL3, SSL23 ou TLS1.</p><p id="r-368603" data-claire-element-id="368603">Par défaut, <strong>fetchmail</strong> vérifie l'authenticité du certificat avec les certificats du répertoire par défaut (/etc/ssl/certs). Mais si l'authenticité du certificat n'est pas vérifiée, il rapatriera tout de même les messages et affichera simplement un message d'erreur.</p><p id="r-368604" data-claire-element-id="368604">Si vous souhaitez qu'il ne rapatrie pas les messages en cas d'échec de la vérification, il faut rajouter :</p><pre id="r-368605" data-claire-element-id="368605"><code data-claire-semantic="bash">sslcertck</code></pre><p id="r-368606" data-claire-element-id="368606">Pour spécifier un autre dossier contenant les certificats des CA, rajoutez :</p><pre id="r-368607" data-claire-element-id="368607"><code data-claire-semantic="bash">sslcertpath /chemin/vers/le/dossier</code></pre><h5 id="r-mda-1" data-claire-element-id="368617">MDA</h5><p id="r-368609" data-claire-element-id="368609">Si on ne précise pas de MDA, <strong>fetchmail</strong> enverra le message au MTA local en SMTP, qui placera tous les messages sans distinction dans la même boîte aux lettres (par défaut /var/mail/utilisateur au format mbox).</p><p id="r-368610" data-claire-element-id="368610">Si vous voulez faire un peu de tri, ou utiliser une autre boîte aux lettres, il vous faudra utiliser un MDA. Nous allons prendre ici <strong>procmail</strong>. Pour utiliser <strong>procmail</strong> comme MDA, installez le paquet procmail et ajoutez cette ligne au fichier de configuration évoqué dans le paragraphe précédent :</p><pre id="r-368611" data-claire-element-id="368611"><code data-claire-semantic="bash">mda /usr/bin/procmail</code></pre><aside id="r-368613" data-claire-element-id="368613" data-claire-semantic="information"><p id="r-368612" data-claire-element-id="368612">Vous pouvez aussi configurer votre MTA pour qu'il fasse appel à <strong>procmail</strong> lorsqu'il reçoit un message. L'avantage étant que vos messages système seront aussi triés par <strong>procmail</strong>. Sous Debian, <strong>Exim</strong> est déjà configuré ainsi par défaut.</p></aside><p id="r-368614" data-claire-element-id="368614">Rajoutez ensuite tous vos comptes de la même façon.<br/> Limitez la lecture du fichier contenant des informations sensibles (mots de passe) au seul utilisateur. Assurez-vous aussi que votre éditeur de texte n'en a pas fait de sauvegarde (.fetchmailrc~), et supprimez-la le cas échéant.</p><pre id="r-368615" data-claire-element-id="368615"><code data-claire-semantic="console">$ chmod 400 ~/.fetchmailrc
$ rm ~/.fetchmailrc~</code></pre><p id="r-368616" data-claire-element-id="368616">Nous allons maintenant voir comment configurer <strong>procmail</strong> pour trier nos messages.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">
<span class="arrow"></span>
<span class="next">Rapatriement basique et tri</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
<span class="next">Un peu de tri ne serait pas du luxe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unpeudetrineseraitpasduluxe"></a><h2>Un peu de tri ne serait pas du luxe</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
<span class="arrow"></span>
<span class="next">Venez, petits messages !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
<span class="next">Appel aux sous-traitants</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-un-peu-de-tri-ne-serait-pas-du-luxe" data-claire-element-id="368693">Un peu de tri ne serait pas du luxe</h4><p id="r-368619" data-claire-element-id="368619"><strong>Procmail</strong> est un MDA puissant qui vous permet de faire un tri efficace de votre courrier. Sa configuration se fait dans le fichier ~/.procmailrc.<br/> S'il n'est pas déjà installé, installez le paquet procmail.</p><h5 id="r-configuration-17" data-claire-element-id="368632">Configuration</h5><p id="r-368620" data-claire-element-id="368620">Avant de nous intéresser aux règles de tri, il nous faut définir quelques variables dans ~/.procmailrc.</p><p id="r-368621" data-claire-element-id="368621">En premier lieu, nous avons deux variables à définir comme telles :</p><pre id="r-368622" data-claire-element-id="368622"><code data-claire-semantic="bash"># Mettez « yes » si vous voulez avoir plus d'infos.
VERBOSE=no
# Indiquez /bin/sh comme shell.
SHELL=/bin/sh</code></pre><p id="r-368623" data-claire-element-id="368623">Ensuite, il nous faut indiquer le chemin de certains fichiers et dossiers.</p><p id="r-368624" data-claire-element-id="368624">MAILDIR indique le dossier où se trouveront les boîtes aux lettres. Par exemple :</p><pre id="r-368625" data-claire-element-id="368625"><code data-claire-semantic="bash">MAILDIR=/home/moi/Mail</code></pre><p id="r-368626" data-claire-element-id="368626">DEFAULT indique le chemin de la boîte aux lettres où un message sera placé si aucune règle de tri ne lui est appliquée.<br/> ORGMAIL indique la boîte aux lettres où seront placés les messages si <strong>procmail</strong> rencontre un problème pour les déposer.<br/> Vous pouvez indiquer un dossier en le précisant à l'aide d'un <em>slash</em> (/) à la fin du chemin. Dans ce cas, <strong>procmail</strong> utilisera le format Maildir. Dans le cas contraire, il utilisera le format mbox.<br/> Par exemple, au format mbox :</p><pre id="r-368627" data-claire-element-id="368627"><code data-claire-semantic="bash">DEFAULT=$MAILDIR/default
ORGMAIL=$MAILDIR/emergency</code></pre><p id="r-368628" data-claire-element-id="368628">Au format Maildir, ça donnerait simplement :</p><pre id="r-368629" data-claire-element-id="368629"><code data-claire-semantic="bash">DEFAULT=$MAILDIR/default/
ORGMAIL=$MAILDIR/emergency/</code></pre><p id="r-368630" data-claire-element-id="368630">Il ne vous reste plus qu'à définir un fichier pour les <em>logs</em>. On utilise la variable LOGFILE :</p><pre id="r-368631" data-claire-element-id="368631"><code data-claire-semantic="bash">LOGFILE=$MAILDIR/procmail.log</code></pre><h5 id="r-les-regles-3" data-claire-element-id="368692">Les règles</h5><h6 id="r-stucture" data-claire-element-id="368652">Stucture</h6><p id="r-368633" data-claire-element-id="368633">Les règles de procmail sont faites en trois parties : le drapeau (<em>flag</em>), la condition et l'action.</p><p id="r-368634" data-claire-element-id="368634">Le drapeau débute toujours par « :0 », après quoi on met des indications sur les motifs que l'on recherche :</p><ul id="r-368641" data-claire-element-id="368641"><li id="r-368636" data-claire-element-id="368636"><p id="r-368635" data-claire-element-id="368635">H : pour rechercher dans l'en-tête du message (<em>header</em>) ;</p></li><li id="r-368638" data-claire-element-id="368638"><p id="r-368637" data-claire-element-id="368637">B : pour rechercher dans le corps du message (<em>body</em>) ;</p></li><li id="r-368640" data-claire-element-id="368640"><p id="r-368639" data-claire-element-id="368639">c : pour garder une copie du message (<em>copy</em>), qui sera soumise aux règles suivantes.</p></li></ul><p id="r-368642" data-claire-element-id="368642">Si vous êtes en mbox, il faudra ajouter un « : » pour indiquer à <strong>procmail</strong> d'utiliser un fichier verrou. Ainsi, le fichier de votre boîte aux lettres ne sera pas corrompu à cause de deux écritures simultanées (vous pouvez, si vous le souhaitez, indiquer derrière le nom du fichier verrou).</p><p id="r-368643" data-claire-element-id="368643">La condition débute toujours par une étoile (*) et une espace. Elle doit être sous la forme d'une <a href="http://fr.wikipedia.org/wiki/Regex">expression rationnelle</a> qui montre le motif à rechercher.</p><p id="r-368644" data-claire-element-id="368644">L'action peut être :</p><ul id="r-368651" data-claire-element-id="368651"><li id="r-368646" data-claire-element-id="368646"><p id="r-368645" data-claire-element-id="368645">le chemin d'une boîte aux lettres : le message sera déplacé dans cette boîte. Il faut indiquer le chemin relatif par rapport à $MAILDIR. Là encore, indiquez un fichier pour une boîte mbox, ou un dossier pour une boîte Maildir ;</p></li><li id="r-368648" data-claire-element-id="368648"><p id="r-368647" data-claire-element-id="368647">un point d'exclamation (!) suivi d'une adresse : le message sera envoyé à l'adresse indiquée ;</p></li><li id="r-368650" data-claire-element-id="368650"><p id="r-368649" data-claire-element-id="368649">/dev/null : pour supprimer le message. Néanmoins, vous préférerez sans doute utiliser une boîte aux lettres « corbeille » pour éviter d'avoir un message important supprimé automatiquement.</p></li></ul><h6 id="r-exemples-18" data-claire-element-id="368691">Exemples</h6><p id="r-368653" data-claire-element-id="368653">Les exemples suivants sont au format mbox :</p><pre id="r-368654" data-claire-element-id="368654"><code data-claire-semantic="bash">:0H:
* ^From: boss@domaine\.com
professionnel</code></pre><p id="r-368655" data-claire-element-id="368655">Les messages de <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="abc9c4d8d8ebcfc4c6cac2c5ce85c8c4c6">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script> seront déposés dans la boîte aux lettres « professionnel ».</p><div id="r-368657" data-claire-element-id="368657" data-claire-semantic="question"><p id="r-368656" data-claire-element-id="368656">Mais si le message est envoyé par Michel Dupont &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="50323f232310343f3d31393e357e333f3d">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;, il ne sera pas traité ?</p></div><p id="r-368658" data-claire-element-id="368658">Bien vu, il aurait donc fallu mettre comme condition <code data-claire-semantic="bash">* ^From:.*boss@domaine\.com </code>.</p><aside id="r-368660" data-claire-element-id="368660" data-claire-semantic="information"><p id="r-368659" data-claire-element-id="368659">Par défaut, <strong>procmail</strong> cherche dans les en-têtes du message.</p></aside><p id="r-368661" data-claire-element-id="368661">Dans ce cas, on peut simplement mettre comme drapeau <code data-claire-semantic="bash">:0: </code>.</p><p id="r-368662" data-claire-element-id="368662">Ce qui nous donne donc :</p><pre id="r-368663" data-claire-element-id="368663"><code data-claire-semantic="bash">:0:
* ^From:.*boss@domaine\.com
professionnel</code></pre><p id="r-368664" data-claire-element-id="368664">On peut définir plusieurs conditions :</p><pre id="r-368665" data-claire-element-id="368665"><code data-claire-semantic="bash">:0c
* From:.*boss@domaine\.com
* Subject:.*urgent
! <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="f784988284da919e918592b793989a969e9992d994989a">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></code></pre><p id="r-368666" data-claire-element-id="368666">Les messages du boss contenant « urgent » dans le sujet seront envoyés automatiquement à <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="05766a707628636c63776045616a68646c6b602b666a682b">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script> On en garde tout de même une copie (drapeau « c ») qui ira dans la boîte par défaut si aucune règle ne suit.</p><aside id="r-368668" data-claire-element-id="368668" data-claire-semantic="information"><p id="r-368667" data-claire-element-id="368667">Le message n'étant déposé dans aucune boîte aux lettres, on n'a pas besoin de verrou ici.</p></aside><p id="r-368669" data-claire-element-id="368669">Ici, le message devait remplir les deux conditions pour être traité. Mais on peut imposer une seule condition avec un tube (|) :</p><pre id="r-368670" data-claire-element-id="368670"><code data-claire-semantic="bash">:0c
* From:.*boss@domaine\.com | Subject:.*urgent
! <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="8cffe3f9ffa1eae5eafee9cce8e3e1ede5e2e9a2efe3e1">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></code></pre><p id="r-368671" data-claire-element-id="368671">Le pauvre sous-fifre recevra tous les messages du boss et tous les messages urgents !</p><p id="r-368672" data-claire-element-id="368672">On peut aussi indiquer plusieurs actions pour une même règle (ce qui évite de répéter la règle plusieurs fois). Par exemple :</p><pre id="r-368673" data-claire-element-id="368673"><code data-claire-semantic="bash">:0:
* To:.*mon-adresse-pro@domaine\.com
{
   :0c
   ! <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="a2c0cdd1d1e2c6cdcfc3cbccc78cc1cdcf">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>

   :0:
   professionnel
}</code></pre><p id="r-368674" data-claire-element-id="368674">Pour tous les courriers adressés à mon adresse professionnelle, une copie sera faite pour le boss avant de les envoyer dans la boîte aux lettres prévue.</p><div id="r-368676" data-claire-element-id="368676" data-claire-semantic="question"><p id="r-368675" data-claire-element-id="368675">Mais si le message m'est envoyé en copie conforme (Cc) ou en copie conforme invisible (Bcc) ?</p></div><p id="r-368677" data-claire-element-id="368677">Effectivement, trier en fonction du destinataire est plus compliqué. Pour cela, <strong>procmail</strong> nous offre deux raccourcis pour rechercher dans tous les champs de destination en même temps :</p><ul id="r-368682" data-claire-element-id="368682"><li id="r-368679" data-claire-element-id="368679"><p id="r-368678" data-claire-element-id="368678">^TO_ pour rechercher une adresse ;</p></li><li id="r-368681" data-claire-element-id="368681"><p id="r-368680" data-claire-element-id="368680">^TO pour rechercher un mot.</p></li></ul><p id="r-368683" data-claire-element-id="368683">Il serait donc plus correct d'utiliser :</p><pre id="r-368684" data-claire-element-id="368684"><code data-claire-semantic="bash">:0:
* ^TO_mon-adresse-pro@domaine\.com
{
   :0c
   ! <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="3f5d504c4c7f5b50525e56515a115c5052">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>

   :0:
   professionnel
}</code></pre><p id="r-368685" data-claire-element-id="368685">On peut aussi utiliser le drapeau « A », qui permet d'évaluer une règle uniquement si la règle précédente est vérifiée. On peut donc aussi écrire la règle précédente de cette façon :</p><pre id="r-368686" data-claire-element-id="368686"><code data-claire-semantic="bash">:0c:
* ^TO_mon-adresse-pro@domaine\.com
! <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="c1a3aeb2b281a5aeaca0a8afa4efa2aeac">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>

:0A:
professionnel</code></pre><div id="r-368688" data-claire-element-id="368688" data-claire-semantic="question"><p id="r-368687" data-claire-element-id="368687">Et en Maildir ?</p></div><p id="r-368689" data-claire-element-id="368689">Si vous utilisez Maildir pour vos boîtes aux lettres, vous n'avez pas besoin de verrou. Et ici encore, il suffit de mettre un <em>slash</em> pour dire à <strong>procmail</strong> que c'est un dossier. Si je reprends l'exemple avec les règles imbriquées, ça donnerait :</p><pre id="r-368690" data-claire-element-id="368690"><code data-claire-semantic="bash">:0
* ^TO_mon-adresse-pro@domaine\.com
{
   :0c
   ! <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="d8bab7abab98bcb7b5b9b1b6bdf6bbb7b5">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>

   :0
   professionnel/
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
<span class="arrow"></span>
<span class="next">Venez, petits messages !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
<span class="next">Appel aux sous-traitants</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Appelauxsous-traitants"></a><h2>Appel aux sous-traitants</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
<span class="arrow"></span>
<span class="next">Un peu de tri ne serait pas du luxe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">
<span class="next">Plus fort avec IMAP !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-appel-aux-sous-traitants" data-claire-element-id="368754">Appel aux sous-traitants</h4><p id="r-368694" data-claire-element-id="368694">Il y a une action de <strong>procmail</strong> dont je ne vous ai pas parlé : on peut envoyer le message à un programme externe, qui lui appliquera un traitement avant de le redonner à <strong>procmail</strong>.</p><p id="r-368695" data-claire-element-id="368695">Pour cela, il faut définir un PATH dans .procmailrc :</p><pre id="r-368696" data-claire-element-id="368696"><code data-claire-semantic="bash">PATH=/usr/local/bin:/usr/bin:/bin</code></pre><p id="r-368697" data-claire-element-id="368697">À adapter : limitez-vous simplement aux chemins des programmes que vous utilisez.</p><p id="r-368698" data-claire-element-id="368698">On utilisera « f » (<em>filter</em>) et « w » (<em>wait</em>) pour le drapeau, et le tube (|) pour l'action :</p><pre id="r-368699" data-claire-element-id="368699"><code data-claire-semantic="bash">:0fw
| programme</code></pre><p id="r-368700" data-claire-element-id="368700">On peut aussi se passer de définir le PATH en précisant le chemin complet :</p><pre id="r-368701" data-claire-element-id="368701"><code data-claire-semantic="bash">:0fw
| /chemin/vers/programme</code></pre><p id="r-368702" data-claire-element-id="368702">C'est l'exemple que je prendrai ici (simplement par souci de concision).</p><p id="r-368703" data-claire-element-id="368703">Voyons quelques exemples.</p><h5 id="r-spamassassin" data-claire-element-id="368727">SpamAssassin</h5><h6 id="r-utilisation-basique-1" data-claire-element-id="368711">Utilisation basique</h6><p id="r-368704" data-claire-element-id="368704"><strong>SpamAssassin</strong> est un programme permettant de filtrer les spams. Il fait une série de tests sur le message, puis lui donne un score. Si le message obtient un mauvais score, il est considéré comme du spam.<br/> Il ajoute des en-têtes « X-Spam-Status » et « X-Spam-Level » aux messages qu'il considère comme du spam.</p><p id="r-368705" data-claire-element-id="368705">Installez <strong>SpamAssassin</strong>, puis éditez /etc/mail/spamassassin/local.cf :</p><pre id="r-368706" data-claire-element-id="368706"><code data-claire-semantic="bash"># Définit le score au-dessus duquel un message est considéré comme du spam. Plus le score sera faible, plus SpamAssassin sera intraitable :
required_score 5.0

# Définit les langues dans lesquelles on reçoit des messages (les messages dans une autre langue auront un score plus élevé) :
ok_locales fr en

# Adresses à ne pas considérer comme du spam (whitelist) et adresses à considérer comme du spam :
whitelist_from <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="7615191b0602133612191b171f18134758021a12">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script> *@domaine2.tld
blacklist_from <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="d3b0bcbea3a7b693b7bcbeb2babdb6e1fda7bfb7">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script> *@domaine2.tld</code></pre><p id="r-368707" data-claire-element-id="368707">Il vous reste à ajouter dans votre .procmailrc (avant les autres règles, pour traiter tous les messages) :</p><pre id="r-368708" data-claire-element-id="368708"><code data-claire-semantic="bash">:0fw
| /usr/bin/spamassassin

:0:
* ^X-Spam-Status: Yes
Spams</code></pre><p id="r-368709" data-claire-element-id="368709">On peut aussi définir plusieurs règles en fonction du niveau de spam, par exemple :</p><pre id="r-368710" data-claire-element-id="368710"><code data-claire-semantic="bash">:0fw
| /usr/bin/spamassassin

:0:
* ^X-Spam-Level: \*\*\*
Spams

:0:
* ^X-Spam-Level: \*\*\*\*\*\*
Trash

:0
* ^X-Spam-Level: \*\*\*\*\*\*\*\*\*\*
/dev/null</code></pre><h6 id="r-pyzor" data-claire-element-id="368715">Pyzor</h6><p id="r-368712" data-claire-element-id="368712">Vous n'avez probablement pas envie de vous taper une longue liste blacklist_from à la main. <strong>Pyzor</strong> est un programme qui compare les messages avec une base de données de spams. Pour l'utiliser avec <strong>SpamAssassin</strong>, rien de plus simple, il vous suffit d'installer le paquet pyzor, puis de lancer :</p><pre id="r-368713" data-claire-element-id="368713"><code data-claire-semantic="console">$ pyzor discover</code></pre><p id="r-368714" data-claire-element-id="368714">Cette commande créera un fichier ~/.pyzor/servers indiquant le serveur contenant la base de données des spams. Et il n'y a rien à faire de plus : <strong>SpamAssassin</strong> détectera <strong>Pyzor</strong> et l'utilisera lorsqu'on lui donnera un message à vérifier !</p><h6 id="r-spamd" data-claire-element-id="368724">Spamd</h6><p id="r-368716" data-claire-element-id="368716">Vous pouvez économiser des ressources pour votre système en utilisant le <em>daemon</em> de <strong>SpamAssassin</strong> : <strong>spamd</strong>.<br/> Selon votre distribution, un service a peut-être déjà été créé à l'installation de <strong>SpamAssassin</strong>. C'est le cas sous Debian, où il vous suffit d'éditer /etc/default/spamassassin et de remplacer</p><pre id="r-368717" data-claire-element-id="368717"><code data-claire-semantic="bash">ENABLED=0</code></pre><p id="r-368718" data-claire-element-id="368718">par</p><pre id="r-368719" data-claire-element-id="368719"><code data-claire-semantic="bash">ENABLED=1</code></pre><p id="r-368720" data-claire-element-id="368720">puis de relancer le service :</p><pre id="r-368721" data-claire-element-id="368721"><code data-claire-semantic="console">/etc/init.d/spamassassin</code></pre><p id="r-368722" data-claire-element-id="368722">Pour les autres distributions, si le service n'existe pas, il vous faudra créer un service qui lance le programme <strong>spamd</strong>.</p><p id="r-368723" data-claire-element-id="368723">Une fois <strong>spamd</strong> lancé, vous pouvez utiliser /usr/bin/spamc au lieu de /usr/bin/spamassassin.</p><h6 id="r-fin-1" data-claire-element-id="368726">Fin ?</h6><p id="r-368725" data-claire-element-id="368725">Vous pouvez ajouter d'autres règles, utiliser d'autres bases de données de spam (<strong>DCC</strong>, <strong>Razor</strong>...), bref, vous construire une solution anti-spam aux petits oignons.<br/> Pour aller plus loin, consultez les nombreuses pages de manuel (<code data-claire-semantic="console">man -k spamassassin</code>) et le wiki <strong>SpamAssassin</strong> : (en) <a href="http://wiki.apache.org/spamassassin/FrontPage">http://wiki.apache.org/spamassassin/FrontPage</a>.</p><h5 id="r-petites-modifications" data-claire-element-id="368748">Petites modifications</h5><h6 id="r-formail" data-claire-element-id="368744">Formail</h6><p id="r-368728" data-claire-element-id="368728"><strong>Formail</strong> (fourni avec <strong>procmail</strong>) est capable d'extraire, supprimer ou modifier les en-têtes d'un message.</p><p id="r-368729" data-claire-element-id="368729">Quelques exemples :</p><ul id="r-368732" data-claire-element-id="368732"><li id="r-368731" data-claire-element-id="368731"><p id="r-368730" data-claire-element-id="368730">supprimer les accusés de réception :</p></li></ul><pre id="r-368733" data-claire-element-id="368733"><code data-claire-semantic="bash">:0fw
| /usr/bin/formail -I &quot;Return-Receipt-To&quot; -I &quot;Disposition-Notification-To&quot;</code></pre><li id="r-368737" data-claire-element-id="368737"><p id="r-368734" data-claire-element-id="368734">rajouter l'en-tête « From » (qui indique un nouveau message dans une boîte mbox) s'il n'est pas présent :</p><pre id="r-368735" data-claire-element-id="368735"><code data-claire-semantic="bash">:0fw
| formail -I &quot;From &quot; -a &quot;From &quot;</code></pre><p id="r-368736" data-claire-element-id="368736">Vous pouvez aussi lancer <strong>procmail</strong> avec l'argument -f-.</p></li><li id="r-368739" data-claire-element-id="368739"><p id="r-368738" data-claire-element-id="368738">afficher un avertissement s'il y a un risque de virus :</p></li><pre id="r-368740" data-claire-element-id="368740"><code data-claire-semantic="bash">:0
*^Content-type: (multipart/mixed)
{
   :0 B
   *^Content-Disposition: (attachment|inline)
   *filename=&quot;.*\.(ocx|vbs|wsf|shs|exe|com|bat|chm|pif|vbe|hta|scr)&quot;
   {
      SUBJECT=$(formail -zx &quot;Subject&quot;)
      :0fw
      | formail -I &quot;Subject&quot; -a &quot;Subject: [DANGER]$SUBJECT&quot;
   }
}</code></pre><aside id="r-368743" data-claire-element-id="368743" data-claire-semantic="information"><p id="r-368741" data-claire-element-id="368741"><strong>Formail</strong> peut aussi vous permettre de trier une boîte aux lettres existante :</p><pre id="r-368742" data-claire-element-id="368742"><code data-claire-semantic="console">formail -s procmail &lt; boite_mbox_ou_message_Maildir</code></pre></aside><h6 id="r-sed" data-claire-element-id="368747">Sed</h6><p id="r-368745" data-claire-element-id="368745">Dans certains cas, il vaut mieux préférer le bon vieux <strong>sed</strong>. L'exemple précédent peut être remplacé par :</p><pre id="r-368746" data-claire-element-id="368746"><code data-claire-semantic="bash">:0
*^Content-type: (multipart/mixed)
{
   :0 B
   *^Content-Disposition: (attachment|inline)
   *filename=&quot;.*\.(ocx|vbs|wsf|shs|exe|com|bat|chm|pif|vbe|hta|scr)&quot;
   {
      :0fw
      | sed 's/^Subject:\(.*\)/Subject: [DANGER]\1/'
   }
}</code></pre><h5 id="r-autres-10" data-claire-element-id="368753">Autres</h5><p id="r-368749" data-claire-element-id="368749">On peut ainsi traiter ses messages avec d'autres programmes, par exemple un antivirus ou un programme de sauvegarde.<br/> Il faut simplement que le programme « sous-traitant » puisse lire le message sur l'entrée standard et réécrire le message, modifié ou non, sur la sortie standard, ou bien modifier le drapeau.</p><p id="r-368750" data-claire-element-id="368750">Une fois toute votre configuration terminée, il vous suffira de lancer <strong>fetchmail</strong> pour rapatrier vos messages et les trier. On peut le lancer en <em>daemon</em> :</p><pre id="r-368751" data-claire-element-id="368751"><code data-claire-semantic="console">fetchmail -d 900</code></pre><p id="r-368752" data-claire-element-id="368752">Ainsi, <strong>fetchmail</strong> rapatriera les messages toutes les 15 minutes (900 secondes).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
<span class="arrow"></span>
<span class="next">Un peu de tri ne serait pas du luxe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">
<span class="next">Plus fort avec IMAP !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="PlusfortavecIMAP"></a><h2>Plus fort avec IMAP !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
<span class="arrow"></span>
<span class="next">Appel aux sous-traitants</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
<span class="next">Exposer vos messages en IMAP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-368756" data-claire-element-id="368756">Le protocole IMAP permet de faire beaucoup plus de choses que POP3, nous allons ici en voir quelques exemples.</p>
</div><a name="ExposervosmessagesenIMAP"></a><h2>Exposer vos messages en IMAP</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">
<span class="arrow"></span>
<span class="next">Plus fort avec IMAP !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
<span class="next">Les sauvegardes, c&#039;est bon, mangez-en</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-exposer-vos-messages-en-imap" data-claire-element-id="368813">Exposer vos messages en IMAP</h4><p id="r-368757" data-claire-element-id="368757">Si vous souhaitez pouvoir lire vos messages à partir de plusieurs machines, ou bien même à partir de plusieurs clients de la même machine, par exemple un client console et un client GUI (certains clients n'aiment pas partager leur dossier de messages, ou ne permettent tout simplement pas de lire des messages récupérés par un autre programme comme <strong>fetchmail</strong>), l'installation d'un petit serveur IMAP peut se révéler utile. Nous allons voir comment faire ici.</p><p id="r-368758" data-claire-element-id="368758">Pour l'installation, rien de plus simple : la plupart des distributions fournissent un paquet dovecot. Il vous suffit de l'installer.</p><h5 id="r-maildir" data-claire-element-id="368770">Maildir++</h5><p id="r-368759" data-claire-element-id="368759">Pour pouvoir utiliser un serveur IMAP, il vous faut changer quelques paramètres dans procmail. <strong>Dovecot</strong> utilise le format Maildir++, il ne gère le format Maildir qu'à partir de la version 1.1. Donc si vous avez une version inférieure, il faudra utiliser le format Maildir++. Pour cela, renommez les dossiers tels que :</p><ul id="r-368766" data-claire-element-id="368766"><li id="r-368761" data-claire-element-id="368761"><p id="r-368760" data-claire-element-id="368760">~/Mail/dossier devient ~/Mail/.dossier ;</p></li><li id="r-368763" data-claire-element-id="368763"><p id="r-368762" data-claire-element-id="368762">~/Mail/dossier/sous_dossier devient ~/Mail/.dossier.sous_dossier ;</p></li><li id="r-368765" data-claire-element-id="368765"><p id="r-368764" data-claire-element-id="368764">la boîte de réception (INBOX) se trouvera à la racine (~/Mail).</p></li></ul><p id="r-368767" data-claire-element-id="368767">Si vous avez une version de <strong>Dovecot</strong> 1.1 ou supérieure, vous pouvez utiliser le format Maildir classique.</p><aside id="r-368769" data-claire-element-id="368769" data-claire-semantic="information"><p id="r-368768" data-claire-element-id="368768"><strong>Dovecot</strong> gère aussi le format mbox, mais Maildir est plus adapté à l'IMAP.</p></aside><h5 id="r-configuration-de-dovecot" data-claire-element-id="368812">Configuration de Dovecot</h5><h6 id="r-base" data-claire-element-id="368778">Base</h6><p id="r-368771" data-claire-element-id="368771">La configuration de <strong>Dovecot</strong> se fait dans /etc/dovecot.conf.</p><p id="r-368772" data-claire-element-id="368772"><strong>Dovecot</strong> gère tous les protocoles de réception. Ici, nous allons utiliser l'IMAP dans un tunnel SSL (imaps). Pour cela, il faut indiquer :</p><pre id="r-368773" data-claire-element-id="368773"><code data-claire-semantic="bash">procotols = imap imaps</code></pre><p id="r-368774" data-claire-element-id="368774">Ensuite, vous devez indiquer l'interface où <strong>Dovecot</strong> écoutera. Par exemple, pour un réseau local (toute adresse du type 192.168.0.x) :</p><pre id="r-368775" data-claire-element-id="368775"><code data-claire-semantic="bash">listen = 192.168.0.0/24</code></pre><p id="r-368776" data-claire-element-id="368776">Pour écouter sur n'importe quelle interface, il faut mettre :</p><pre id="r-368777" data-claire-element-id="368777"><code data-claire-semantic="bash">listen = *</code></pre><h6 id="r-ssl" data-claire-element-id="368800">SSL</h6><p id="r-368779" data-claire-element-id="368779">Pour pouvoir communiquer en SSL, il vous faut un certificat. Sur certaines distributions (Debian, par exemple), il est automatiquement créé dans /etc/ssl/certs/dovecot.pem (la clé est intégrée dans le fichier) lors de l'installation de <strong>Dovecot</strong>. Dans ce cas, il n'y a rien à faire de plus, il sera automatiquement utilisé.</p><p id="r-368780" data-claire-element-id="368780">Si votre distribution ne crée pas de certificats, ou si votre certificat a expiré, il vous faudra le générer vous-mêmes. La commande suivante crée un certificat auto-signé, non chiffré, valable un an :</p><pre id="r-368781" data-claire-element-id="368781"><code data-claire-semantic="console">openssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout dovecot.key -out dovecot.pem</code></pre><p id="r-368782" data-claire-element-id="368782"><strong>OpenSSL</strong> vous pose alors une série de questions pour renseigner l'identité du certificat :</p><ul id="r-368797" data-claire-element-id="368797"><li id="r-368784" data-claire-element-id="368784"><p id="r-368783" data-claire-element-id="368783"><em>Country Name</em> : mettez « FR » ;</p></li><li id="r-368786" data-claire-element-id="368786"><p id="r-368785" data-claire-element-id="368785"><em>State or Province Name</em> : mettez « France » ;</p></li><li id="r-368788" data-claire-element-id="368788"><p id="r-368787" data-claire-element-id="368787"><em>Locality Name</em> : mettez le nom de votre ville ;</p></li><li id="r-368790" data-claire-element-id="368790"><p id="r-368789" data-claire-element-id="368789"><em>Organisation Name</em> : mettez ce que vous voulez, par exemple « monserveur », ou quelque chose d'un meilleur goût ;</p></li><li id="r-368792" data-claire-element-id="368792"><p id="r-368791" data-claire-element-id="368791"><em>Organisation Unit Name</em> : mettez ce que vous voulez, ou laissez vide ;</p></li><li id="r-368794" data-claire-element-id="368794"><p id="r-368793" data-claire-element-id="368793"><em>Common Name</em> : c'est le plus important, il faut indiquer l'URL qui sera utilisée par les clients pour contacter le serveur (<em>hostname</em> ou nom de domaine) ;</p></li><li id="r-368796" data-claire-element-id="368796"><p id="r-368795" data-claire-element-id="368795"><em>Email Address</em> : il y a besoin de vous faire un dessin ?</p></li></ul><p id="r-368798" data-claire-element-id="368798">Deux fichiers seront alors générés : dovecot.pem (le certificat) et dovecot.key (la clé). Donnez-les à root, placez-les où vous voulez, puis indiquez leur chemin dans dovecot.conf :</p><pre id="r-368799" data-claire-element-id="368799"><code data-claire-semantic="bash">ssl_cert_file = /etc/ssl/certs/dovecot.pem
ssl_key_file = /etc/ssl/private/dovecot.key</code></pre><h6 id="r-boites-aux-lettres" data-claire-element-id="368805">Boîtes aux lettres</h6><p id="r-368801" data-claire-element-id="368801">Il nous faut aussi indiquer l'emplacement des boîtes aux lettres à exposer. maildir indique le dossier contenant les boîtes :</p><pre id="r-368802" data-claire-element-id="368802"><code data-claire-semantic="bash">mail_location = maildir:~/Maildir</code></pre><p id="r-368803" data-claire-element-id="368803">Si vous utilisez le format Maildir et non Maildir++ (version 1.1 et supérieure), il faut ajouter LAYOUT=fs pour l'indiquer, et rajouter INBOX pour désigner la boîte de réception :</p><pre id="r-368804" data-claire-element-id="368804"><code data-claire-semantic="bash">mail_location = maildir:~/Maildir:INBOX=~/Maildir/inbox:LAYOUT=fs</code></pre><h6 id="r-authentification" data-claire-element-id="368811">Authentification</h6><p id="r-368806" data-claire-element-id="368806">SSL chiffrant toute la communication, on peut se contenter d'un mécanisme d'authentification en clair. Et ça tombe bien, car ça nous permet d'utiliser les noms et mots de passe des utilisateurs du système :</p><pre id="r-368807" data-claire-element-id="368807"><code data-claire-semantic="bash">auth default {
    mechanisms = plain

    passdb shadow {
}
    userdb passwd {
}
}</code></pre><p id="r-368808" data-claire-element-id="368808">Si votre distibution utilise <a href="http://fr.wikipedia.org/wiki/Pluggable_Authentication_Modules">PAM</a>, vous pouvez l'utiliser pour l'authentification en remplaçant shadow par pam.</p><p id="r-368809" data-claire-element-id="368809">Et voilà, <strong>Dovecot</strong> est prêt à être utilisé ! Pour le lancer, il vous suffit de relancer le service si votre distribution en a créé un (par exemple, sous Debian : <code data-claire-semantic="console">/etc/init.d/dovecot restart</code>). Sinon, il vous faudra le créer vous-mêmes, ou simplement lancer <code data-claire-semantic="console">dovecot</code> (en root).<br/> Il ne vous reste plus qu'à configurer vos clients pour utiliser votre serveur. Vous pouvez alors consulter vos mails indifféremment à partir de votre machine de bureau, de votre portable, ou même de votre smartphone.</p><p id="r-368810" data-claire-element-id="368810">Pour plus de détails, vous pouvez consulter le wiki de <strong>Dovecot</strong> : (en) <a href="http://wiki.dovecot.org/FrontPage?action=show&amp;redirect=PageD%27Accueil">http://wiki.dovecot.org/FrontPage?acti [...] PageD'Accueil</a>.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">
<span class="arrow"></span>
<span class="next">Plus fort avec IMAP !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
<span class="next">Les sauvegardes, c&#039;est bon, mangez-en</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lessauvegardesc039estbonmangez-en"></a><h2>Les sauvegardes, c&#039;est bon, mangez-en</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
<span class="arrow"></span>
<span class="next">Exposer vos messages en IMAP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">
<span class="next">Configuration de mutt</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-sauvegardes-c-est-bon-mangez-en" data-claire-element-id="368848">Les sauvegardes, c'est bon, mangez-en</h4><p id="r-368814" data-claire-element-id="368814">S'il est très pratique de pouvoir centraliser vos messages sur un serveur pour les consulter de n'importe où, il y a un inconvénient à tout garder sur la même machine : si vous faites une mauvaise manipulation ou si le serveur tombe en panne, tous vos précieux messages seront perdus.<br/> Vous pouvez aussi simplement vouloir consulter vos messages lorsque vous n'êtes pas connecté.</p><p id="r-368815" data-claire-element-id="368815"><strong>Fetchmail</strong> vous permet de relever facilement vos messages tout en les laissant sur le serveur (option -k). Mais il ne récupérera que la boîte de réception et non les autres dossiers (autres boîtes aux lettres, brouillons, messages envoyés).<br/> La solution est donc d'utiliser un programme conçu spécialement pour ça. J'ai nommé : <strong>mbsync</strong> !<br/> Commençons tout d'abord par l'installer. Sur la plupart des distributions, le paquet s'appelle isync. Installez-le...</p><h5 id="r-configuration-et-utilisation" data-claire-element-id="368839">Configuration et utilisation</h5><p id="r-368816" data-claire-element-id="368816">La configuration se fait dans le fichier ~/.mbsyncrc. Il faut lui indiquer deux boîtes aux lettres à synchroniser.<br/> La première est simplement un dossier sur la machine locale, au format Maildir, qui sera notre dossier de sauvegarde. Ici, nous allons simplement l'appeler « local » et la placer dans ~/backup_mail :</p><pre id="r-368817" data-claire-element-id="368817"><code data-claire-semantic="bash">MaildirStore local
Path ~/backup_mail/</code></pre><p id="r-368818" data-claire-element-id="368818">La seconde est donc celle que nous voulons sauvegarder, sur le serveur IMAP. Nous allons l'appeler « serveur ».</p><pre id="r-368819" data-claire-element-id="368819"><code data-claire-semantic="bash">IMAPStore serveur
Host [adresse_du_serveur]
User [nom_du_compte]
Pass [mot_de_passe]</code></pre><p id="r-368820" data-claire-element-id="368820">En remplaçant [adresse_du_serveur], [nom_du_compte] et [mot_de_passe] par ce qui correspond chez vous.</p><p id="r-368821" data-claire-element-id="368821"><strong>mbsync</strong> tente automatiquement STARTTLS ; pour utiliser SSL, il vous faut ajouter :</p><pre id="r-368822" data-claire-element-id="368822"><code data-claire-semantic="bash">UseIMAPS yes</code></pre><p id="r-368823" data-claire-element-id="368823">Dans les deux cas, il faut lui indiquer quel certificat utiliser :</p><pre id="r-368824" data-claire-element-id="368824"><code data-claire-semantic="bash">CertificateFile /chemin/vers/le/certificat</code></pre><p id="r-368825" data-claire-element-id="368825">Si vous ne vous connectez pas à un port standard (143 ou 993), il faut l'indiquer :</p><pre id="r-368826" data-claire-element-id="368826"><code data-claire-semantic="bash">Port [numéro_du_port]</code></pre><aside id="r-368828" data-claire-element-id="368828" data-claire-semantic="warning"><p id="r-368827" data-claire-element-id="368827">Chaque bloc « <em>Store</em> » doit être séparé par une ligne vide, et ne doit pas en contenir.<br/> Il en va de même pour les blocs qui vont suivre (« <em>Channel</em> » et « <em>Group</em> »).</p></aside><p id="r-368829" data-claire-element-id="368829">Notre deuxième adresse étant configurée, il ne nous reste plus qu'à définir des chaînes (<em>Channel</em>) pour chaque boîte aux lettres à sauvegarder. Il faut définir pour chaque chaîne une boîte maître (<em>Master</em>) et une esclave (<em>Slave</em>). On définit alors le sens de synchronisation (<em>Sync</em>) : du maître vers l'esclave (<em>Pull</em>) ou de l'esclave vers le maître (<em>Push</em>). Concrètement, ça donne :</p><pre id="r-368830" data-claire-element-id="368830"><code data-claire-semantic="bash">Channel perso
Master serveur:personnel
Slave local:personnel
Sync Pull</code></pre><p id="r-368831" data-claire-element-id="368831">Ainsi, la chaîne « perso » sauvegardera la boîte aux lettre « personnel » du serveur dans ~/backup_mail/perso. Pour lancer la sauvegarde, il vous suffit de lancer :</p><pre id="r-368832" data-claire-element-id="368832"><code data-claire-semantic="console">mbsync -Cs perso</code></pre><aside id="r-368834" data-claire-element-id="368834" data-claire-semantic="information"><p id="r-368833" data-claire-element-id="368833">L'option -Cs (<em>Create Slave</em>) sert à créer le dossier, elle n'est donc plus nécessaire après.</p></aside><p id="r-368835" data-claire-element-id="368835">Vous pouvez procéder ainsi pour toutes vos boîtes. Si vous voulez sauvegarder plusieurs boîtes en même temps, vous pouvez créer un groupe :</p><pre id="r-368836" data-claire-element-id="368836"><code data-claire-semantic="bash">Group all
Channel perso
Channel pro
Channel famille</code></pre><p id="r-368837" data-claire-element-id="368837">Vous pourrez alors tout sauvegarder d'un coup en lançant :</p><pre id="r-368838" data-claire-element-id="368838"><code data-claire-semantic="console">mbsync -Cs all</code></pre><h5 id="r-sauvegardes-automatiques" data-claire-element-id="368847">Sauvegardes automatiques</h5><p id="r-368840" data-claire-element-id="368840">Si vous souhaitez lancer automatiquement vos sauvegardes, vous ne pouvez pas vous contenter d'une simple commande <code data-claire-semantic="console">mbsync</code> lancée automatiquement. En effet, si vous supprimez des messages par mégarde et qu'une synchronisation a lieu juste après, vous perdrez alors tout le bénéfice de la sauvegarde...<br/> La solution est donc de faire un simple script qui archive chaque sauvegarde dans un fichier différent :</p><pre id="r-368841" data-claire-element-id="368841"><code data-claire-semantic="bash">#!/bin/sh
# /usr/local/bin/mailbackup : sauvegarde et archive les messages

# Le script devant être lancé par cron, il est préférable d'indiquer le PATH
PATH=/usr/bin:/bin

# Sauvegarde des messages
mbsync all

# Archivage
tar -cf ~/mail_$(date +%Y-%m-%d).tar ~/backup_mail</code></pre><p id="r-368842" data-claire-element-id="368842">Il ne reste plus qu'à définir une règle dans votre <a href="http://fr.wikipedia.org/wiki/Crontab">crontab</a> :</p><pre id="r-368843" data-claire-element-id="368843"><code data-claire-semantic="bash">* 17 * * * /usr/local/bin/mailbackup &gt; /dev/null</code></pre><p id="r-368844" data-claire-element-id="368844">Les messages seront sauvegardés tous les jours à 17h.</p><p id="r-368845" data-claire-element-id="368845">Vous avez maintenant un aperçu de ce que l'on peut faire avec IMAP.</p><p id="r-368846" data-claire-element-id="368846">Tous vos messages sont bien arrivés là où il faut. Il ne vous reste plus qu'à les lire confortablement et à y répondre. Je vous propose un bon MUA pour cela : <strong>mutt</strong>.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
<span class="arrow"></span>
<span class="next">Exposer vos messages en IMAP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">
<span class="next">Configuration de mutt</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Configurationdemutt"></a><h2>Configuration de mutt</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
<span class="arrow"></span>
<span class="next">Les sauvegardes, c&#039;est bon, mangez-en</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
<span class="next">Configuration de base</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-368852" data-claire-element-id="368852">Dans cette partie, nous allons voir comment tirer un bon parti du logiciel <strong>mutt</strong>.</p>
</div><a name="Configurationdebase"></a><h2>Configuration de base</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">
<span class="arrow"></span>
<span class="next">Configuration de mutt</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
<span class="next">Personnalisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-configuration-de-base-1" data-claire-element-id="368897">Configuration de base</h4><p id="r-368853" data-claire-element-id="368853">Pour commencer, installez le paquet mutt.</p><p id="r-368854" data-claire-element-id="368854">La configuration de <strong>mutt</strong> se fait dans le fichier ~/.muttrc (ah bon, vous vous en doutiez ?).</p><h5 id="r-editeur-de-texte-et-visionneur" data-claire-element-id="368862">Éditeur de texte et visionneur</h5><p id="r-368855" data-claire-element-id="368855">Pour définir l'éditeur de texte que l'on souhaite utiliser pour écrire les messages, il faut utiliser la variable editor. Par exemple :</p><pre id="r-368856" data-claire-element-id="368856"><code data-claire-semantic="bash">set editor=/usr/bin/vim</code></pre><p id="r-368857" data-claire-element-id="368857"><strong>Mutt</strong> lancera l'éditeur en question pour rédiger un message. Il suffit d'enregistrer en quittant l'éditeur pour retourner dans <strong>mutt</strong> et envoyer le message.</p><p id="r-368858" data-claire-element-id="368858">Si editor n'est pas renseigné dans .muttrc, vim utilisera la variable EDITOR du <em>shell</em>.</p><p id="r-368859" data-claire-element-id="368859">On définit de la même façon le visionneur pour lire les messages, avec pager :</p><pre id="r-368860" data-claire-element-id="368860"><code data-claire-semantic="bash">set pager=/usr/bin/less</code></pre><p id="r-368861" data-claire-element-id="368861">On peut également utiliser la variable PAGER du <em>shell</em> à la place.</p><h5 id="r-adresse-d-envoi" data-claire-element-id="368867">Adresse d'envoi</h5><p id="r-368863" data-claire-element-id="368863">Par défaut, <strong>mutt</strong> enverra un message avec « From: utilisateur@localhost ». Il vous faut donc définir votre adresse pour l'envoi. On utilisera use_envelope_from :</p><pre id="r-368864" data-claire-element-id="368864"><code data-claire-semantic="bash">set use_envelope_from</code></pre><p id="r-368865" data-claire-element-id="368865"><strong>Mutt</strong> indiquera alors l'adresse que vous mettrez dans le champ « From » (que vous pouvez éditer en utilisant les touches « Échap. » puis « f »).<br/> Si vous n'utilisez qu'une seule adresse pour l'envoi, vous pouvez directement l'indiquer dans votre .muttrc :</p><pre id="r-368866" data-claire-element-id="368866"><code data-claire-semantic="bash">set envelope_from_adress= &quot;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="6b0504062b0f04060a02050e451f070f">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&quot;</code></pre><h5 id="r-boite-de-reception" data-claire-element-id="368886">Boîte de réception</h5><p id="r-368868" data-claire-element-id="368868"><strong>Mutt</strong> reconnaît automatiquement le format de la boîte aux lettres, on indiquera donc le chemin vers un fichier mbox ou vers un dossier Maildir de la même façon.</p><p id="r-368869" data-claire-element-id="368869">La boîte aux lettres à ouvrir au démarrage de <strong>mutt</strong> est définie par spoolfile. Par exemple (par défaut : /var/mail/utilisateur) :</p><pre id="r-368870" data-claire-element-id="368870"><code data-claire-semantic="bash">set spoolfile=~/Mail/inbox</code></pre><p id="r-368871" data-claire-element-id="368871">Pour les autres boîtes aux lettres, il faut renseigner leur dossier avec folder :</p><pre id="r-368872" data-claire-element-id="368872"><code data-claire-semantic="bash">set folder=~/Mail</code></pre><p id="r-368873" data-claire-element-id="368873">Vous pouvez changer de boîte dans <strong>mutt</strong> avec la touche « c », suivie de :</p><ul id="r-368880" data-claire-element-id="368880"><li id="r-368875" data-claire-element-id="368875"><p id="r-368874" data-claire-element-id="368874">« ? » pour voir la liste des boîtes contenues dans folder ;</p></li><li id="r-368877" data-claire-element-id="368877"><p id="r-368876" data-claire-element-id="368876">« = » puis le nom d'une boîte aux lettres pour y aller directement ;</p></li><li id="r-368879" data-claire-element-id="368879"><p id="r-368878" data-claire-element-id="368878">« ! » pour revenir à la boîte aux lettres par défaut (spoolfile).</p></li></ul><p id="r-368881" data-claire-element-id="368881">Vous pouvez définir certaines boîtes aux lettres avec mailboxes : seules ces boîtes seront affichées lorsque vous appuierez sur « Tab » à partir de la liste, ou au démarrage si vous lancez <strong>mutt</strong> avec l'option -y :</p><pre id="r-368882" data-claire-element-id="368882"><code>set mailboxes =personnel =professionnel =famille</code></pre><aside id="r-368885" data-claire-element-id="368885" data-claire-semantic="information"><p id="r-368883" data-claire-element-id="368883">Si vos messages système ne sont pas triés par <strong>procmail</strong>, vous pouvez toujours les consulter avec la commande <code data-claire-semantic="console">mail</code> ou avec <strong>mutt</strong> en lançant :</p><pre id="r-368884" data-claire-element-id="368884"><code data-claire-semantic="console">mutt -f /var/mail/[utilisateur]</code></pre></aside><h5 id="r-autres-dossiers" data-claire-element-id="368891">Autres dossiers</h5><p id="r-368887" data-claire-element-id="368887">Par défaut, les messages non envoyés (brouillons) sont stockés dans ~/postponed. Vous pouvez indiquer un autre chemin :</p><pre id="r-368888" data-claire-element-id="368888"><code data-claire-semantic="bash">set postponed=~/Mail/brouillons</code></pre><p id="r-368889" data-claire-element-id="368889">Par défaut, les messages envoyés sont stockés dans ~/sent. Vous pouvez indiquer un chemin pour les sauvegarder :</p><pre id="r-368890" data-claire-element-id="368890"><code data-claire-semantic="bash">set record=~/Mail/envoyés</code></pre><h5 id="r-imap-1" data-claire-element-id="368896">IMAP</h5><p id="r-368892" data-claire-element-id="368892">Si vous préférez utiliser un serveur IMAP plutôt que d'utiliser <strong>fetchmail</strong> et <strong>procmail</strong>, <strong>mutt</strong> supporte l'IMAP. Il vous suffit d'indiquer l'adresse du dossier au lieu d'un chemin, en la faisant précéder par imap:// (ou imaps:// si vous utilisez SSL) :</p><pre id="r-368893" data-claire-element-id="368893"><code data-claire-semantic="bash"># Boîte de réception (elle s'appelle généralement INBOX sur un serveur IMAP)
set spoolfile=imap://serveur:port/INBOX

# Dossier contenant les autres boîtes aux lettres
set folder=imap://serveur:port

# Messages non envoyés
set postponed=imap://serveur:port/Brouillons

# Messages envoyés
set record=imap://serveur:port/Messages Envoyés</code></pre><p id="r-368894" data-claire-element-id="368894">Il vous faudra, en plus, indiquer votre compte et mot de passe sur le serveur :</p><pre id="r-368895" data-claire-element-id="368895"><code data-claire-semantic="bash"># Type d'authentification
set imap_authentification=&quot;login&quot;

# login et mot de passe
set imap_user=&quot;login&quot;
set imap_pass=&quot;passwd&quot;</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">
<span class="arrow"></span>
<span class="next">Configuration de mutt</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
<span class="next">Personnalisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Personnalisation"></a><h2>Personnalisation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
<span class="arrow"></span>
<span class="next">Configuration de base</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">
<span class="next">Do you speak SMTP ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-personnalisation-1" data-claire-element-id="368941">Personnalisation</h4><p id="r-368898" data-claire-element-id="368898">On peut ajouter une foule d'éléments à .muttrc pour rendre <strong>mutt</strong> plus attractif. Je vais vous en présenter quelques-uns ici.</p><h5 id="r-les-alias-1" data-claire-element-id="368903">Les alias</h5><p id="r-368899" data-claire-element-id="368899">Les alias sont simplement des raccourcis que vous pouvez indiquer dans les champs « d'adresses » (From, To, Cc...). Il vous suffit d'indiquer alias suivi de la commande, puis de l'adresse. Vous pouvez ainsi éviter de taper votre adresse complète dans le champ « From » :</p><pre id="r-368900" data-claire-element-id="368900"><code data-claire-semantic="bash">alias domaine1 <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="b5d8dadbead6dad8c5c1d084f5d1dad8d4dcdbd0849bc1d9d1">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
alias domaine2 <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="caa7a5a495a9a5a7babeaff88aaea5a7aba3a4aff8e4bea6ae">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></code></pre><p id="r-368901" data-claire-element-id="368901">Vous pouvez aussi vous faire un carnet d'adresses simpliste :</p><pre id="r-368902" data-claire-element-id="368902"><code data-claire-semantic="bash">alias paul <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="ea9a8b9f86b58e9f9a85849ededfdcaa8e85878b83848fdbc49e868e">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
alias jp <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="e48e81858abb948d81969681d5d6d1a4808b89858d8a81d6ca908880">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
alias famille <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="9aeafbeafbdafef5f7fbf3f4ffa9b4eef6fe">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script> <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="1d707c707c735d7972707c7473782933697179">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script> <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="4a2c382b242d23240a2e25272b23242f7f643e262e">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></code></pre><h5 id="r-la-signature-1" data-claire-element-id="368906">La signature</h5><p id="r-368904" data-claire-element-id="368904">Vous pouvez créer un fichier texte dont le contenu sera ajouté à la fin des messages que vous envoyez (défaut : ~/.signature) :</p><pre id="r-368905" data-claire-element-id="368905"><code data-claire-semantic="bash">set signature=~/signature_mail</code></pre><h5 id="r-les-couleurs-9" data-claire-element-id="368919">Les couleurs</h5><p id="r-368907" data-claire-element-id="368907">Vous n'aimez pas les couleurs par défaut de <strong>mutt</strong> ? Il est possible de les changer.<br/> Les plus importantes sont :</p><ul id="r-368916" data-claire-element-id="368916"><li id="r-368909" data-claire-element-id="368909"><p id="r-368908" data-claire-element-id="368908">normal : couleur des menus et des messages ;</p></li><li id="r-368911" data-claire-element-id="368911"><p id="r-368910" data-claire-element-id="368910">indicator : couleur de la barre de sélection ;</p></li><li id="r-368913" data-claire-element-id="368913"><p id="r-368912" data-claire-element-id="368912">status : couleur de la barre de statut ;</p></li><li id="r-368915" data-claire-element-id="368915"><p id="r-368914" data-claire-element-id="368914">hdrdefault : couleur de l'en-tête des messages.</p></li></ul><p id="r-368917" data-claire-element-id="368917">Il suffit d'indiquer « <em>color</em> » suivi de la couleur du texte et de la couleur du fond. Par exemple, pour avoir du noir sur fond blanc :</p><pre id="r-368918" data-claire-element-id="368918"><code data-claire-semantic="bash">color normal black white
color indicator white black
color status white black
color hdrdefault black white</code></pre><h5 id="r-les-pieces-jointes-1" data-claire-element-id="368940">Les pièces jointes</h5><p id="r-368920" data-claire-element-id="368920">Les programmes pour lire les pièces jointes sont définis dans /etc/mailcap.<br/> On peut en définir d'autres par utilisateur dans ~/.mailcap, qui sera prioritaire.</p><p id="r-368921" data-claire-element-id="368921">On définit une entrée pour chaque <a href="http://fr.wikipedia.org/wiki/MIME">type MIME</a>. Une entrée doit comporter au moins deux champs : le type MIME et la commande associée à exécuter. On utilise « %s » pour indiquer le nom du fichier dans la commande.<br/> Par exemple, pour les fichiers PDF :</p><pre id="r-368922" data-claire-element-id="368922"><code data-claire-semantic="bash">application/x-pdf;xpdf %s</code></pre><p id="r-368923" data-claire-element-id="368923">On peut aussi définir d'autres champs.</p><p id="r-368924" data-claire-element-id="368924">On peut renvoyer le résultat de la commande au visionneur par défaut en définissant un champ « copioustooutpout ». Il faut que la commande renvoie du texte. Il existe bon nombre d'applications pouvant extraire des données de formats différents au format texte (jetez un œil au script /usr/bin/lesspipe). Je reprends l'exemple du PDF :</p><pre id="r-368925" data-claire-element-id="368925"><code data-claire-semantic="bash">application/x-pdf;pdftotext %s;copioustooutput</code></pre><p id="r-368926" data-claire-element-id="368926">On peut aussi ajouter des tests :</p><ul id="r-368931" data-claire-element-id="368931"><li id="r-368928" data-claire-element-id="368928"><p id="r-368927" data-claire-element-id="368927">en mettant « test= » suivi d'une commande, le test échouera si le résultat de la commande renvoie 0 ;</p></li><li id="r-368930" data-claire-element-id="368930"><p id="r-368929" data-claire-element-id="368929">en mettant « needsterminal », le test échouera si vous utilisez un MUA graphique (donc pas avec <strong>mutt</strong>).</p></li></ul><p id="r-368932" data-claire-element-id="368932">Vous pouvez ainsi définir deux entrées différentes pour un même type MIME. Si la première entrée comprend un test et qu'il n'est pas vérifié, la deuxième entrée sera utilisée :</p><pre id="r-368933" data-claire-element-id="368933"><code data-claire-semantic="bash">application/x-pdf;xpdf %s;test=test -n $DISPLAY
application;x-pdf;pdftotext %s;copioustooutput</code></pre><p id="r-368934" data-claire-element-id="368934">Ici, si on se trouve dans une interface graphique, xpdf sera utilisé. Si on se trouve dans une console, le visionneur récupérera la sortie de pdftotext.</p><p id="r-368935" data-claire-element-id="368935">Ça y est, vous pouvez enfin lire vos messages avec <strong>mutt</strong>.</p><p id="r-368936" data-claire-element-id="368936">Pour plus de renseignements, vous pouvez consulter le wiki de <strong>mutt</strong> : (en) <a href="http://wiki.mutt.org/">http://wiki.mutt.org/</a>.<br/> Il existe aussi une traduction de la documentation de <strong>mutt</strong> en français : <a href="http://cedricduval.free.fr/mutt/fr/">http://cedricduval.free.fr/mutt/fr/</a>.</p><div id="r-368938" data-claire-element-id="368938" data-claire-semantic="question"><p id="r-368937" data-claire-element-id="368937">Euh, il ne manque rien, là ?</p></div><p id="r-368939" data-claire-element-id="368939">Eh si. Bien entendu, si vous voulez pouvoir rapatrier et lire vos messages, vous souhaitez aussi pouvoir en envoyer. Nous allons donc voir comment faire.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
<span class="arrow"></span>
<span class="next">Configuration de base</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">
<span class="next">Do you speak SMTP ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="DoyouspeakSMTP"></a><h2>Do you speak SMTP ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
<span class="arrow"></span>
<span class="next">Personnalisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
<span class="next">Méthode Debian : en deux minutes chrono avec debconf</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-368943" data-claire-element-id="368943"><strong>Mutt</strong> à un « défaut » : il est incapable d'envoyer des messages directement. Nous allons donc attribuer cette tâche à un autre programme.</p><aside id="r-368945" data-claire-element-id="368945" data-claire-semantic="information"><p id="r-368944" data-claire-element-id="368944">Ce n'est plus vrai avec les dernières versions de <strong>mutt</strong>. Mais la méthode proposée ici fonctionne toujours et a l'avantage de s'adapter facilement à d'autres MUA. Et puis comme on dit : « c'était mieux avant » ! ^^</p></aside><p id="r-368946" data-claire-element-id="368946">Deux méthodes vous seront présentées ici, choisissez simplement celle qui vous convient le mieux...</p>
</div><a name="MthodeDebianendeuxminuteschronoavecdebconf"></a><h2>Méthode Debian : en deux minutes chrono avec debconf</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">
<span class="arrow"></span>
<span class="next">Do you speak SMTP ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
<span class="next">Méthode msmtp : le MSA qui nous simplifie la vie</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-methode-debian-en-deux-minutes-chrono-avec-debconf" data-claire-element-id="368991">Méthode Debian : en deux minutes chrono avec debconf</h4><p id="r-368947" data-claire-element-id="368947">Cette méthode a l'avantage d'être rapidement mise en place. Simplement, elle ne conviendra pas à tout le monde.</p><p id="r-368948" data-claire-element-id="368948">Cette méthode peut vous convenir uniquement si :</p><ul id="r-368955" data-claire-element-id="368955"><li id="r-368950" data-claire-element-id="368950"><p id="r-368949" data-claire-element-id="368949">vous êtes sous Debian ou autre distribution utilisant APT (*ubuntu, knoppix, sidux...) ;</p></li><li id="r-368952" data-claire-element-id="368952"><p id="r-368951" data-claire-element-id="368951">vous utilisez un seul serveur SMTP pour l'envoi ;</p></li><li id="r-368954" data-claire-element-id="368954"><p id="r-368953" data-claire-element-id="368953">vous n'avez pas besoin d'utiliser SSL sur ce serveur.</p></li></ul><p id="r-368956" data-claire-element-id="368956">Dans tous les autres cas, reportez-vous à la partie suivante.</p><p id="r-368957" data-claire-element-id="368957"><strong>Exim</strong> est le MTA par défaut sous Debian et consorts. À l'installation, il est configuré de base pour transmettre le courrier en local uniquement. <strong>Debconf</strong> nous permet de le transformer rapidement en relais. Nous allons donc simplement l'utiliser ici.</p><p id="r-368958" data-claire-element-id="368958">Il suffit de lancer <strong>debconf</strong> pour <strong>Exim</strong> (en root) :</p><pre id="r-368959" data-claire-element-id="368959"><code data-claire-semantic="console"># dpkg-reconfigure exim4-config</code></pre><p id="r-368960" data-claire-element-id="368960">Le script lance une interface en ncurses nous posant quelques questions. Répondez-y ainsi :</p><ul id="r-368983" data-claire-element-id="368983"><li id="r-368962" data-claire-element-id="368962"><p id="r-368961" data-claire-element-id="368961">Type de configuration : choisissez « Envoi via relais (« smarthost ») − réception SMTP ou fetchmail » ;</p></li><li id="r-368964" data-claire-element-id="368964"><p id="r-368963" data-claire-element-id="368963">Nom de courriel du système : indiquez le domaine du courrier de votre adresse (à droite de « @ ») ;</p></li><li id="r-368966" data-claire-element-id="368966"><p id="r-368965" data-claire-element-id="368965">Liste d'adresses IP où Exim sera en attente : laissez 127.0.0.1 ;</p></li><li id="r-368968" data-claire-element-id="368968"><p id="r-368967" data-claire-element-id="368967">Autres destinations dont le courriel doit être accepté : laissez vide ;</p></li><li id="r-368970" data-claire-element-id="368970"><p id="r-368969" data-claire-element-id="368969">Machines à relayer : laissez vide ;</p></li><li id="r-368972" data-claire-element-id="368972"><p id="r-368971" data-claire-element-id="368971">Nom réseau ou adresse IP du système « smarthost » : indiquez l'adresse de votre serveur SMTP. Si le port est différent de 25, ajoutez « :: » suivi du numéro du port (smtp.domaine.tld::port) ;</p></li><li id="r-368974" data-claire-element-id="368974"><p id="r-368973" data-claire-element-id="368973">Faut-il cacher le nom local de courriel dans les courriels sortants : répondez « Oui ». Les messages sembleront ainsi provenir de votre fournisseur ;</p></li><li id="r-368976" data-claire-element-id="368976"><p id="r-368975" data-claire-element-id="368975">Nom de domaine visible pour les utilisateurs locaux : laissez le domaine de courrier ;</p></li><li id="r-368978" data-claire-element-id="368978"><p id="r-368977" data-claire-element-id="368977">Faut-il minimiser les requêtes DNS (connexion à la demande) : répondez « Non », sauf si vous avez une connexion non permanente (par modem) ;</p></li><li id="r-368980" data-claire-element-id="368980"><p id="r-368979" data-claire-element-id="368979">Méthode de distribution du courrier local : choisissez entre mbox et Maildir. Si vous changez d'avis, vous pourrez toujours relancer <strong>debconf</strong> ;</p></li><li id="r-368982" data-claire-element-id="368982"><p id="r-368981" data-claire-element-id="368981">Faut-il séparer la configuration dans plusieurs fichiers : choisissez « Oui » si vous avez besoin de vous authentifier sur le serveur.</p></li></ul><p id="r-368984" data-claire-element-id="368984">Si votre serveur ne demande pas d'authentification, il n'y a rien à ajouter. <strong>Exim</strong> utilisera STARTTLS si votre serveur le supporte. Si votre serveur demande une authentification, éditez /etc/exim4/passwd.client et ajoutez :</p><pre id="r-368985" data-claire-element-id="368985"><code data-claire-semantic="bash">*:[login]:[password]</code></pre><p id="r-368986" data-claire-element-id="368986">En remplaçant [login] par votre nom d'utilisateur et [password] par votre mot de passe.<br/> Ensuite, lancez :</p><pre id="r-368987" data-claire-element-id="368987"><code data-claire-semantic="console"># update-exim4.conf
# invoke-rc.d exim4 restart</code></pre><p id="r-368988" data-claire-element-id="368988">Ça y est ! Votre machine est prête pour l'envoi. Vous pouvez aller directement à la conclusion.</p><aside id="r-368990" data-claire-element-id="368990" data-claire-semantic="information"><p id="r-368989" data-claire-element-id="368989">Je me suis limité quasiment aux possibilités offertes par <strong>debconf</strong>. On pourrait faire beaucoup plus avec <strong>Exim</strong> en mettant le nez dans sa configuration. On pourrait aussi installer un autre MTA, comme <strong>Postfix</strong>, et le configurer là encore soit avec <strong>debconf</strong>, soit à la main...<br/> Mais la prochaine partie vous montrera que ce n'est pas nécessaire.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">
<span class="arrow"></span>
<span class="next">Do you speak SMTP ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
<span class="next">Méthode msmtp : le MSA qui nous simplifie la vie</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="MthodemsmtpleMSAquinoussimplifielavie"></a><h2>Méthode msmtp : le MSA qui nous simplifie la vie</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
<span class="arrow"></span>
<span class="next">Méthode Debian : en deux minutes chrono avec debconf</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-methode-msmtp-le-msa-qui-nous-simplifie-la-vie" data-claire-element-id="369072">Méthode msmtp : le MSA qui nous simplifie la vie</h4><p id="r-368992" data-claire-element-id="368992">Configurer un relais vers plusieurs serveurs SMTP peut s'avérer délicat avec les MTA classiques. En effet, il est rarement aisé de les configurer en utilisant plusieurs relais. Et vous n'avez pas forcément toutes les conditions nécessaires pour utiliser un MTA sans relais tout en s'assurant que tous vos messages arriveront à destination (IP blacklistée, serveur du destinataire vérifiant le champ MX et/ou le reverse-DNS, port 25 bloqué...).</p><p id="r-368993" data-claire-element-id="368993">Au lieu d'utiliser un MTA, nous allons utiliser un simple MSA : <strong>msmtp</strong>. Contrairement à un « vrai » MTA, <strong>msmtp</strong> ne peut pas relayer du courrier en provenance d'autres machines du réseau, et il ne peut pas non plus recevoir du courrier à destination de la machine. Il peut simplement envoyer le courrier à un relais ; et il se trouve que c'est juste ce dont on a besoin.</p><h5 id="r-configuration-de-msmtp" data-claire-element-id="369027">Configuration de msmtp</h5><p id="r-368994" data-claire-element-id="368994">Cherchez le paquet msmtp pour votre distribution et installez-le. Pour le configurer, il vous faut éditer le fichier ~/.msmtprc.<br/> Ajoutez tout d'abord une ligne « account » avec un nom pour votre compte. Pour un compte classique (type FAI), vous devriez avoir une configuration de ce type :</p><pre id="r-368995" data-claire-element-id="368995"><code data-claire-semantic="bash">account [nom]
    host [adresse_du_serveur]
    port [port]
    auth off
    from [adresse_email]</code></pre><p id="r-368996" data-claire-element-id="368996">Où :</p><ul id="r-369005" data-claire-element-id="369005"><li id="r-368998" data-claire-element-id="368998"><p id="r-368997" data-claire-element-id="368997">[nom] est le nom que vous donnez au compte (celui que vous voulez) ;</p></li><li id="r-369000" data-claire-element-id="369000"><p id="r-368999" data-claire-element-id="368999">[adresse_du_serveur] est l'adresse de votre serveur SMTP (smtp.domaine.tld) ;</p></li><li id="r-369002" data-claire-element-id="369002"><p id="r-369001" data-claire-element-id="369001">[port] est le port où vous contactez le serveur. Si vous utilisez le port par défaut (25 ou 465), vous n'avez pas besoin de le préciser ;</p></li><li id="r-369004" data-claire-element-id="369004"><p id="r-369003" data-claire-element-id="369003">[adresse_email] est l'adresse que vous utilisez sur ce compte (<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="690a0604191d0c290d06040800070c471d050d">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>).</p></li></ul><p id="r-369006" data-claire-element-id="369006">Si vous devez vous authentifier sur le serveur, remplacez « auth off » par :</p><pre id="r-369007" data-claire-element-id="369007"><code data-claire-semantic="bash">auth [type]
user [login]
password [password]</code></pre><p id="r-369008" data-claire-element-id="369008">Où :</p><ul id="r-369013" data-claire-element-id="369013"><li id="r-369010" data-claire-element-id="369010"><p id="r-369009" data-claire-element-id="369009">[type] est le type d'authentification (<em>login</em> ou <em>plain</em>, généralement) ;</p></li><li id="r-369012" data-claire-element-id="369012"><p id="r-369011" data-claire-element-id="369011">[login] et [password] sont respectivement le nom du compte et le mot de passe que vous utilisez pour vous authentifier.</p></li></ul><p id="r-369014" data-claire-element-id="369014">Si vous utilisez TLS/SSL, ajoutez :</p><pre id="r-369015" data-claire-element-id="369015"><code data-claire-semantic="bash">tls on
tls_starttls off  # si vous utilisez SSL (chiffrer tout, port 465)
tls_trust_file [certificat_de_la_CA]</code></pre><p id="r-369016" data-claire-element-id="369016">En remplaçant [certificat_de_la_CA] par le chemin du fichier contenant le certificat (/etc/ssl/certs/ca-file.pem).<br/> Si vous n'avez pas le certificat de la CA, vous pouvez ignorer la vérification du certificat en mettant :</p><pre id="r-369017" data-claire-element-id="369017"><code data-claire-semantic="bash">tls_certcheck off</code></pre><aside id="r-369021" data-claire-element-id="369021" data-claire-semantic="information"><p id="r-369018" data-claire-element-id="369018">Vous pouvez vérifier la configuration du serveur avec :</p><pre id="r-369019" data-claire-element-id="369019"><code data-claire-semantic="console">msmtp -a [nom] --serverinfo</code></pre><p id="r-369020" data-claire-element-id="369020">Vous obtiendrez des informations sur le certificat et le résultat d'un EHLO.</p></aside><p id="r-369022" data-claire-element-id="369022">Faites ainsi successivement pour tous vos comptes. Vous pouvez définir un compte par défaut qui sera utilisé si vous n'utilisez pas une adresse indiquée avec « From » et que vous ne précisez pas le compte (option -a) :</p><pre id="r-369023" data-claire-element-id="369023"><code data-claire-semantic="bash">account default : [nom]</code></pre><p id="r-369024" data-claire-element-id="369024">Ici encore, il est préférable de limiter la lecture à l'utilisateur du fichier .msmtprc contenant des mots de passe :</p><pre id="r-369025" data-claire-element-id="369025"><code data-claire-semantic="console">chmod 400 ~/.msmtprc</code></pre><p id="r-369026" data-claire-element-id="369026">Vérifiez aussi que votre éditeur de texte n'en a pas fait une sauvegarde (.msmtprc~). Supprimez-la si c'est le cas.</p><h5 id="r-utilisation-avec-mutt" data-claire-element-id="369071">Utilisation avec mutt</h5><p id="r-369028" data-claire-element-id="369028"><strong>Msmtp</strong> offre une interface compatible avec <strong>Sendmail</strong> (il prend les mêmes arguments). Il peut donc être utilisé avec <strong>mutt</strong> de façon transparente. Et c'est là que réside toute l'astuce : il suffit simplement d'indiquer à <strong>mutt</strong> d'utiliser /usr/bin/msmtp au lieu de /usr/sbin/sendmail, et c'est tout ! Pour cela, vous avez deux solutions :</p><ul id="r-369039" data-claire-element-id="369039"><li id="r-369034" data-claire-element-id="369034"><p id="r-369029" data-claire-element-id="369029">soit ajouter dans votre ~/.muttrc :</p><pre id="r-369030" data-claire-element-id="369030"><code data-claire-semantic="bash">set sendmail=/usr/bin/msmtp</code></pre><p id="r-369031" data-claire-element-id="369031"><strong>Mutt</strong> et lui seul utilisera <strong>msmtp</strong>.</p><aside id="r-369033" data-claire-element-id="369033" data-claire-semantic="information"><p id="r-369032" data-claire-element-id="369032">Si vous souhaitez utiliser <strong>msmtp</strong> avec mailx (voir conclusion), il vous faudra mettre la même ligne dans votre fichier ~/.mailrc (à créer s'il n'existe pas).</p></aside></li><li id="r-369038" data-claire-element-id="369038"><p id="r-369035" data-claire-element-id="369035">soit remplacer <strong>Sendmail</strong> par un lien symbolique :</p><pre id="r-369036" data-claire-element-id="369036"><code data-claire-semantic="console"># ln -s /usr/sbin/sendmail /usr/bin/msmtp</code></pre><p id="r-369037" data-claire-element-id="369037">Tous vos MUA (<strong>mutt</strong>, <strong>mailx</strong>, <strong>git</strong>, votre page PHP, etc.) utiliseront alors <strong>msmtp</strong>, sans rien changer à leur configuration (à moins qu'ils soient configurés pour utiliser autre chose, bien entendu).</p></li></ul><aside id="r-369047" data-claire-element-id="369047" data-claire-semantic="warning"><ul id="r-369046" data-claire-element-id="369046"><li id="r-369041" data-claire-element-id="369041"><p id="r-369040" data-claire-element-id="369040"><strong>Msmtp</strong> ne sait pas faire de distribution locale. Si vous choisissez cette méthode, les autres utilisateurs, mais aussi les programmes (<strong>at</strong>, <strong>cron</strong>, etc.), ne pourront plus vous envoyer de messages.</p></li><li id="r-369043" data-claire-element-id="369043"><p id="r-369042" data-claire-element-id="369042">Selon votre distribution, il faudra faire attention à ce qu'une mise à jour du MTA ne remplace pas /usr/sbin/sendmail.<br/> Sous Debian, le paquet msmtp-mta fait le lien symbolique et permet de désinstaller le MTA (<strong>Exim</strong> par défaut) en fournissant la dépendance (mail-transport-agent).</p></li><li id="r-369045" data-claire-element-id="369045"><p id="r-369044" data-claire-element-id="369044">Si vous utilisez <strong>fetchmail</strong>, il vous faudra alors indiquer <strong>procmail</strong> comme MDA (<strong>fetchmail</strong> ne pouvant plus envoyer un message au MTA en SMTP).</p></li></ul></aside><p id="r-369048" data-claire-element-id="369048">Ça y est, vous pouvez envoyer vos messages avec <strong>mutt</strong> !</p><p id="r-369049" data-claire-element-id="369049">Vous pouvez aussi envoyer un message en ligne de commande avec <strong>mailx</strong> :</p><pre id="r-369050" data-claire-element-id="369050"><code data-claire-semantic="console">mailx -s &quot;sujet du message&quot; <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="3d59584e4954535c495c544f587d5952505c54535813495159">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
Ceci est mon message. Je peux écrire ce que je veux.
Pour finir, je fais Ctrl+D.</code></pre><p id="r-369051" data-claire-element-id="369051">En une ligne :</p><pre id="r-369052" data-claire-element-id="369052"><code data-claire-semantic="console">echo &quot;Ceci est mon message&quot; | mailx -s &quot;sujet du message&quot; <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="bcd8d9cfc8d5d2ddc8ddd5ced9fcd8d3d1ddd5d2d992c8d0d8">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></code></pre><p id="r-369053" data-claire-element-id="369053">Si vous utilisez <strong>msmtp</strong>, c'est le compte par défaut qui sera utilisé.</p><p id="r-369054" data-claire-element-id="369054">Voilà, votre <strong>mutt</strong> est enfin prêt à l'emploi !</p><p id="r-369055" data-claire-element-id="369055"><strong>Mutt</strong> est assez simple à prendre en main : les touches les plus utiles sont affichées en haut. La touche « ? » vous donne accès à la liste (vous pouvez utiliser « / » pour faire une recherche). Au bout de quelque temps, il s'avère plus efficace que n'importe quel MUA graphique.</p><p id="r-369056" data-claire-element-id="369056">Pour aller plus loin, vous pouvez consulter le wiki de <strong>mutt</strong> : (en) <a href="http://wiki.mutt.org/">http://wiki.mutt.org/</a>.<br/> Il existe une traduction française de la documentation de <strong>mutt</strong> ici : <a href="http://cedricduval.free.fr/mutt/fr/">http://cedricduval.free.fr/mutt/fr/</a>.</p><p id="r-369057" data-claire-element-id="369057">Vous êtes (enfin) arrivés au bout de ce tutoriel !</p><p id="r-369058" data-claire-element-id="369058">Parmi tous les programmes présentés, je ne vous ai montré qu'une partie de leurs possibilités. N'hésitez pas à consulter leur documentation pour en tirer un meilleur parti.</p><p id="r-369059" data-claire-element-id="369059">Il existe aussi d'autres programmes qui peuvent réaliser les mêmes tâches, avec leurs avantages et leurs qualités. Vous pourriez préférer, par exemple :</p><ul id="r-369068" data-claire-element-id="369068"><li id="r-369061" data-claire-element-id="369061"><p id="r-369060" data-claire-element-id="369060"><strong>Postfix</strong> au lieu d'<strong>Exim</strong>, ou <strong>sSMTP</strong> au lieu de <strong>msmtp</strong> ;</p></li><li id="r-369063" data-claire-element-id="369063"><p id="r-369062" data-claire-element-id="369062"><strong>fdm</strong> au lieu du couple <strong>fetchmail</strong>/<strong>procmail</strong> ;</p></li><li id="r-369065" data-claire-element-id="369065"><p id="r-369064" data-claire-element-id="369064"><strong>Pine</strong> ou <strong>Gnus</strong> au lieu de <strong>mutt</strong> ;</p></li><li id="r-369067" data-claire-element-id="369067"><p id="r-369066" data-claire-element-id="369066">etc.</p></li></ul><p id="r-369069" data-claire-element-id="369069">Vous pouvez aussi vous faire votre propre serveur SMTP, gérer vos comptes ou votre carnet d'adresses sur un serveur LDAP... Bref, il existe de nombreuses méthodes pour vous construire une solution de messagerie adaptée à vos besoins et à vos envies. N'hésitez donc pas à chercher plus loin que ce tutoriel !</p><p id="r-369070" data-claire-element-id="369070">N'oubliez pas non plus de prendre <a href="http://www.apprendre-informatique.com/tutorial-25-81-Le-spam-5-conseils-pour-eviter-de-recevoir-du-Spam">des précautions contre le spam</a> et de respecter la <a href="http://fr.wikipedia.org/wiki/Nétiquette">nétiquette</a> !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix">Gérer votre mail « à la UNIX »</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Un peu de théorie pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/le-fonctionnement-de-la-messagerie-electronique">Le fonctionnement de la messagerie électronique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-organes-principaux">
Les organes principaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/autres-notions-utiles">
Autres notions utiles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/dialoguons-avec-les-serveurs">Dialoguons avec les serveurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/parlons-smtp">
Parlons SMTP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/et-pour-la-reception">
Et pour la réception ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/quelques-mots-sur-tls-ssl">
Quelques mots sur TLS/SSL
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Un facteur hors pair
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/rapatriement-basique-et-tri">Rapatriement basique et tri</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/venez-petits-messages">
Venez, petits messages !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/un-peu-de-tri-ne-serait-pas-du-luxe">
Un peu de tri ne serait pas du luxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/appel-aux-sous-traitants">
Appel aux sous-traitants
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/plus-fort-avec-imap">Plus fort avec IMAP !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/exposer-vos-messages-en-imap">
Exposer vos messages en IMAP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/les-sauvegardes-c-est-bon-mangez-en">
Les sauvegardes, c&#039;est bon, mangez-en
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Mutt : le MUA convivial
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-mutt">Configuration de mutt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/configuration-de-base-1">
Configuration de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/personnalisation-1">
Personnalisation
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/do-you-speak-smtp">Do you speak SMTP ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
Méthode Debian : en deux minutes chrono avec debconf
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-msmtp-le-msa-qui-nous-simplifie-la-vie">
Méthode msmtp : le MSA qui nous simplifie la vie
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-votre-mail-a-la-unix/methode-debian-en-deux-minutes-chrono-avec-debconf">
<span class="arrow"></span>
<span class="next">Méthode Debian : en deux minutes chrono avec debconf</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/gerer-votre-mail-a-la-unix.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 22:50:05 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/gerer-votre-mail-a-la-unix.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:02:04 GMT -->
</html>