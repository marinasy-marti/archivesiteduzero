<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/creer-des-bibliotheques-avec-code-blocks.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:41:20 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/creer-des-bibliotheques-avec-code-blocks.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:35:36 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Créer des bibliothèques avec Code::Blocks</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Créer des bibliothèques avec Code::Blocks</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#CrerdesbibliothquesavecCodeBlocks">Créer des bibliothèques avec Code::Blocks</a><br/><a href="#Quesontlesbibliothques">Que sont les bibliothèques</a><br/><a href="#Lesbibliothquesstatiques">Les bibliothèques statiques</a><br/><a href="#Lesbibliothquesdynamiques">Les bibliothèques dynamiques</a><br/></div>
<a name="CrerdesbibliothquesavecCodeBlocks"></a><h2>Créer des bibliothèques avec Code::Blocks</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/que-sont-les-bibliotheques">
<span class="next">Que sont les bibliothèques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-534123" data-claire-element-id="534123">Salut à tous.<br/> Dans ce mini tuto je vais vous parler de la création de bibliothèques en C. Comme j'utilise l'IDE Code::Blocks, les manipulations données le seront pour ce programme. Mais cela ne vous empêche pas de créer des Bibliothèques avec un autre IDE comme Dev-C++ ou Visual C++. Je précise aussi que je travaille sous Windows XP (et alors ? ...).<br/> Après la lecture de ce tuto vous serez normalement capable de:</p><ul id="r-534130" data-claire-element-id="534130"><li id="r-534125" data-claire-element-id="534125"><p id="r-534124" data-claire-element-id="534124">comprendre les bibliothèques</p></li><li id="r-534127" data-claire-element-id="534127"><p id="r-534126" data-claire-element-id="534126">créer des bibliothèques statiques,</p></li><li id="r-534129" data-claire-element-id="534129"><p id="r-534128" data-claire-element-id="534128">créer des bibliothèques dynamiques (deux types).</p></li></ul><p id="r-534131" data-claire-element-id="534131">Comme base pour lire et comprendre ce tuto, vous devez savoir utiliser les fonctions et les headers. Cela correspond à la fin de la partie 1 et au premier chapitre de la partie 2 du <a href="http://www.siteduzero.com/tuto-3-8-0-apprenez-a-programmer-en-c-c.html">cours C/C++</a> de <a href="http://www.siteduzero.com/membres-294-3.html">M@teo21</a>.</p><p id="r-534132" data-claire-element-id="534132">Autant le dire tout de suite, on emploie couramment le mot librairie de manière abusive. Cela vient du fait que le mot anglais library est un faux ami et signifie bibliothèque.</p>
</div><a name="Quesontlesbibliothques"></a><h2>Que sont les bibliothèques</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-statiques-2">
<span class="next">Les bibliothèques statiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-534133" data-claire-element-id="534133">Les Bibliothèques contiennent généralement des fonctions qui peuvent êtres utilisées par plusieurs programmes. Elles peuvent aussi contenir des icônes comme le fichier shell32.dll de Windows XP par exemple. Il existe deux types de bibliothèques : les bibliothèques statiques et les bibliothèques dynamiques.</p><h2 id="r-les-bibliotheques-statiques-1" data-claire-element-id="534135">Les bibliothèques statiques</h2><p id="r-534134" data-claire-element-id="534134">Dans le cas des bibliothèques statiques, les fonctions contenues dans la bibliothèque sont chargées lors de l'édition des liens. C'est pour cela que le fichier .h est nécessaire, il permet d'indiquer quelles fonctions sont utiles. Les fonctions sont inclues dans le fichier exécutable de votre programme, il n'y à rien d'autre à fournir donc le programme peut être exécuté sur un ordinateur ne possédant pas la bibliothèque.<br/> Les bibliothèques statiques sont des fichiers .lib ou des .a</p><h2 id="r-les-bibliotheques-dynamiques-1" data-claire-element-id="534138">Les bibliothèques dynamiques</h2><p id="r-534136" data-claire-element-id="534136">Pour les bibliothèques dynamiques, les fonctions ne sont pas inclues dans l'exécutable. Les fonctions sont appelées pendant l'exécution du programme (d'où le &quot;dynamique&quot;). L'avantage est donc que l'exécutable est plus léger mais il faut fournir la bibliothèque avec le programme. Donc au final l'ensemble exécutable + dll est plus lourd que l'exécutable contenant la bibliothèque (comme dans le cas précédent).<br/> Il faut savoir aussi que si plusieurs programmes ont besoin de la même dll, ils peuvent tous y accéder alors que la bibliothèque n'est chargée qu'une fois. Dans ce cas on parle de bibliothèque partagée.<br/> Sous Windows les bibliothèques dynamiques sont des fichiers .dll et sous GNU/Linux se sont des fichiers .so.</p><p id="r-534137" data-claire-element-id="534137">Il existe deux types de bibliothèque dynamique: les bibliothèques à chargement implicite et les bibliothèques à chargement explicite (ne fonctionne que sous Windows).<br/> La différence est que pour une bibliothèque à chargement implicite il faut linker avec un fichier .a. Si vous voulez utiliser seulement la dll il faut faire une bibliothèque à chargement explicite. En fait la construction de la bibliothèque est la même, c'est la conception de l'exécutable qui diffère.<br/> La SDL par exemple s'utilise par chargement implicite. En effet cela est portable et plus simple à coder.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks">Créer des bibliothèques avec Code::Blocks</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/que-sont-les-bibliotheques">
Que sont les bibliothèques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-statiques-2">
Les bibliothèques statiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-dynamiques-2">
Les bibliothèques dynamiques
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-statiques-2">
<span class="next">Les bibliothèques statiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesbibliothquesstatiques"></a><h2>Les bibliothèques statiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/que-sont-les-bibliotheques">
<span class="arrow"></span>
<span class="next">Que sont les bibliothèques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-dynamiques-2">
<span class="next">Les bibliothèques dynamiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-534140" data-claire-element-id="534140">Je vais d'abord vous parler des bibliothèques statiques. En effet c'est le plus simple à réaliser.</p><h2 id="r-le-projet-de-la-bibliotheque" data-claire-element-id="534148">Le projet de la bibliothèque</h2><p id="r-534141" data-claire-element-id="534141">Dans Code::Blocks vous devez créer un nouveau projet en choisissant &quot;Static Library&quot;. Cochez la case &quot;Do not create any files&quot; et appuyez sur le bouton create.<br/> Ajoutez à votre projet un fichier .c que vous pouvez par exemple nommer lib.c.</p><p id="r-534142" data-claire-element-id="534142">Comme je vous avais dit que ces bibliothèques étaient simples à réaliser, on passe tout de suite à la pratique. Il vous faut une fonction donc on va prendre comme exemple une fonction qui retourne le carré d'un nombre passé en paramètre:</p><pre id="r-534143" data-claire-element-id="534143"><code data-claire-semantic="c">#include &quot;dll.h&quot;

int carre(int entier) {
    int carre  = 0;
    carre = entier*entier;
    return carre;
}</code></pre><p id="r-534144" data-claire-element-id="534144">Maintenant il faut faire un fichier dll.h qui va contenir les prototypes de vos fonctions:</p><pre id="r-534145" data-claire-element-id="534145"><code data-claire-semantic="c">int carre(int entier);</code></pre><p id="r-534146" data-claire-element-id="534146">Il faut inclure ce fichier dans votre lib.c cela peut être utiles lorsque votre bibliothèque contient plusieurs fonctions qui se servent les unes des autres.</p><p id="r-534147" data-claire-element-id="534147">Et bien c'est déjà fini, vous n'avez plus qu'à compiler et vous obtenez un fichier libstaticlib.a. Si le nom ne vous plait pas allez dans &quot;Project&quot;, &quot;Properties&quot; puis dans l'onglet &quot;Target&quot;. Là vous modifiez &quot;Output Filename&quot;.</p><h2 id="r-le-projet-de-votre-programme" data-claire-element-id="534155">Le projet de votre programme</h2><p id="r-534149" data-claire-element-id="534149">Pour ce projet vous pouvez faire ce que vous voulez (console, SDL, OpenGL, ...) mais ici je vais prendre l'exemple d'un projet console pour faire simple. J'ose espérer que vous savez créer un projet console avec Code::Blocks. Mettez dans votre projet un fichier main.c qui contiendra votre fonction main(). <br/> Comme le but est de se servir de la fonction contenue dans la bibliothèque, il faut évidemment faire un code qui se sert de cette fonction:</p><pre id="r-534150" data-claire-element-id="534150"><code data-claire-semantic="c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &quot;dll.h&quot;

int main(int argc, char *argv[]) {
   int resultat = 0;
   resultat = carre(3);
   printf(&quot;Le resultat est %d\n&quot;, resultat);
   printf(&quot;Appuyez sur une touche pour continuer...&quot;);
   getchar();
   return 0;
}</code></pre><p id="r-534151" data-claire-element-id="534151">Comme vous le voyez j'ai inclu de fichier dll.h.<br/> Ensuite n'oubliez pas de linker avec votre belle bibliothèque. Pour cela vous allez dans &quot;Project&quot; puis &quot;Build options&quot; et enfin vous allez dans l'onglet &quot;Linker&quot;. Là vous ajoutez votre libstaticlib.a ou autre si vous avez changé le nom.</p><p id="r-534152" data-claire-element-id="534152">Et maintenant le grand moment tant attendu, la compilation et l'exécution. Si vous n'avez pas de problème et je l'espère (sinon c'est que ce tuto est nul ;) ) la console affiche fièrement:</p><pre id="r-534153" data-claire-element-id="534153"><code data-claire-semantic="console">Le resultat est 9

Appuyez sur une touche pour continuer...</code></pre><p id="r-534154" data-claire-element-id="534154">Et voila vous savez créer et utiliser une bibliothèque statique. Maintenant nous allons voir ensemble le cas des bibliothèques dynamiques, les biens connues dlls.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks">Créer des bibliothèques avec Code::Blocks</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/que-sont-les-bibliotheques">
Que sont les bibliothèques
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-statiques-2">
Les bibliothèques statiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-dynamiques-2">
Les bibliothèques dynamiques
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/que-sont-les-bibliotheques">
<span class="arrow"></span>
<span class="next">Que sont les bibliothèques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-dynamiques-2">
<span class="next">Les bibliothèques dynamiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesbibliothquesdynamiques"></a><h2>Les bibliothèques dynamiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-statiques-2">
<span class="arrow"></span>
<span class="next">Les bibliothèques statiques</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-534157" data-claire-element-id="534157">Je vais maintenant vous parler des bibliothèques dynamiques. Alors là cela va être un peu plus compliqué.</p><h2 id="r-le-projet-de-la-dll" data-claire-element-id="534170">Le projet de la dll</h2><p id="r-534158" data-claire-element-id="534158">Tout d'abord dans Code::Blocks vous devez créer un nouveau projet en choisissant &quot;Dynamic Link Library&quot;. Cochez la case &quot;Do not create any files&quot; et appuyez sur le bouton create.<br/> Ajouter un fichier .c à votre projet. Moi je le nomme dll.c (pas très original c'est vrai).</p><p id="r-534159" data-claire-element-id="534159">Alors que mettre dans ce fichier ? o_O <br/> En fait ce n'est pas très compliqué, il suffit d'avoir une fonction. Je vais prendre l'exemple d'une fonction qui renvoie la somme de deux entiers passés en paramètre. Bon ça devrait aller je pense :</p><pre id="r-534160" data-claire-element-id="534160"><code data-claire-semantic="c">int addition(int entier1, int entier2) {
   return entier1 + entier2;
}</code></pre><p id="r-534161" data-claire-element-id="534161">Donc, on met cette fonction dans le fichier dll.c mais cela ne suffit pas. En effet, il faut indiquer que cette fonction devra être exporté pour être utilisé par votre programme.<br/> Pour cela, on utilise __declspec (dllexport) placé entre le type de la fonction et son nom. On obtient donc la fonction suivante:</p><pre id="r-534162" data-claire-element-id="534162"><code data-claire-semantic="c">int __declspec (dllexport) addition(int entier1, int entier2) {
   return entier1 + entier2;
}</code></pre><p id="r-534163" data-claire-element-id="534163">Si vous avez plusieurs fonctions il est intéressant de faire la macro suivante pour faciliter le travail:</p><pre id="r-534164" data-claire-element-id="534164"><code data-claire-semantic="c">#define DllExport   __declspec(dllexport)

int DllExport addition(int entier1, int entier2) {
   return entier1 + entier2;
}</code></pre><p id="r-534165" data-claire-element-id="534165">Et voilà c'est presque finit. Il faut juste créer un fichier header dll.h.<br/> Comme vous le savez sûrement déjà (sinon relisez les cours de M@teo) ce fichier contiendra les prototypes des fonctions de la dll:</p><pre id="r-534166" data-claire-element-id="534166"><code data-claire-semantic="c">int addition(int entier1, int entier2);</code></pre><p id="r-534167" data-claire-element-id="534167">Mais ici la fonction sera importée de la dll donc il faut rajouter __declspec (dllimport). La encore on place ce code entre le type de la fonction et son nom. On obtient:</p><pre id="r-534168" data-claire-element-id="534168"><code data-claire-semantic="c">#define DllImport   __declspec(dllimport)

int DllImport addition(int entier1, int entier2);</code></pre><p id="r-534169" data-claire-element-id="534169">Voilà c'est fini. Vous n'avez plus qu'à compiler votre projet. Après la compilation vous obtenez deux fichier importants: sample.dll et libsample.a (ne jetez pas non plus le fichier dll.h).<br/> Ces deux fichiers vont vous êtres utiles par la suite.</p><h2 id="r-votre-programme-pour-une-bibliotheque-a-chargement-implicite" data-claire-element-id="534176">Votre programme pour une bibliothèque à chargement implicite</h2><p id="r-534171" data-claire-element-id="534171">Maintenant il faut utiliser cette belle bibliothèque. Pour ce projet nous allons encore faire un projet console.<br/> Une fois votre projet créé, vous devez lui rajouter un fichier main.c contenant votre fonction main(). Puis vous mettez le code pour pouvoir tester l'importation de fonctions de la dll.<br/> Par exemple:</p><pre id="r-534172" data-claire-element-id="534172"><code data-claire-semantic="c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &quot;dll.h&quot;

int main(int argc, char *argv[]) {
   int resultat = 0;
   resultat = addition(3, 7);
   printf(&quot;Le resultat est %d\n&quot;, resultat);
   printf(&quot;Appuyez sur une touche pour continuer...&quot;);
   getchar();
   return 0;
}</code></pre><p id="r-534173" data-claire-element-id="534173">Pensez bien à inclure le fichier dll.h pour avoir le prototype des fonctions de la bibliothèque. Maintenant vous compilez votre projet et ...<br/> Et cela ne marche pas. Vous obtenez un horrible &quot;undefined reference to `_imp__addition`&quot;. :waw: <br/> C'est à ce moment là qu'il faut se rappeler du fichier libsample.a qui a été généré par Code::Blocks à la compilation du projet de dll. Vous devez donc linker votre projet avec ce fichier. <br/> Vous recompilez et quelle joie cela fonctionne correctement. :)</p><p id="r-534174" data-claire-element-id="534174">Maintenant vous placez votre fichier dll.dll dans le même répertoire que votre exécutable. Vous exécutez et heureusement pour moi la console affiche:</p><pre id="r-534175" data-claire-element-id="534175"><code data-claire-semantic="console">Le resultat est 10

Appuyez sur une touche pour continuer...</code></pre><h2 id="r-votre-programme-pour-une-bibliotheque-a-chargement-explicite" data-claire-element-id="534198">Votre programme pour une bibliothèque à chargement explicite</h2><p id="r-534177" data-claire-element-id="534177">Dans ce cas, c'est un peu plus compliqué. Il n'est plus nécessaire d'inclure le fichier dll.h dans votre code ni de linker avec libsample.a (au moins vous ne l'oublierez pas :p ). Par contre, il faut inclure windows.h (donc ce code ne sera pas portable). Comme exemple je vais prendre le même que précédemment.</p><pre id="r-534178" data-claire-element-id="534178"><code data-claire-semantic="c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main(int argc, char *argv[]) {

   HINSTANCE DLLHandle;
   typedef int(*Type_Pointeur_De_Fonction)(int, int);
   Type_Pointeur_De_Fonction Pointeur_Fonction;
   DLLHandle = LoadLibrary(&quot;dll.dll&quot;);
   Pointeur_Fonction = (Type_Pointeur_De_Fonction)GetProcAddress(DLLHandle,&quot;addition&quot;);

   int resultat = 0;
   resultat = Pointeur_Fonction(3,7);
   printf(&quot;Le resultat est: %d\n&quot;, resultat);
   printf(&quot;Appuyez sur une touche pour continuer...&quot;);
   getchar();

   FreeLibrary(DLLHandle);
   return 0;
}</code></pre><p id="r-534179" data-claire-element-id="534179">Alors là je crois que des explications s'imposent non ? On va faire ça ligne par ligne (enfin pas toutes quand même).</p><pre id="r-534180" data-claire-element-id="534180"><code data-claire-semantic="c">HINSTANCE DLLHandle;</code></pre><p id="r-534181" data-claire-element-id="534181">Déclare une variable de type HINSTANCE. Cela permet de garder le handle pour notre programme. Comme Windows est multitâche cela lui permet de savoir ce que fait notre programme.</p><pre id="r-534182" data-claire-element-id="534182"><code data-claire-semantic="c">typedef int(*Type_Pointeur_De_Fonction)(int, int);</code></pre><p id="r-534183" data-claire-element-id="534183">Là on définit un type de pointeur de fonction. Je vais juste vous expliquer un petit peu ce qu'est un pointeur de fonctions. <br/> Ce n'est pas très compliqué si vous savez ce qu'est un pointeur. Un pointeur est une variable contenant l'adresse d'une autre variable. Pour une fonction, le pointeur contient donc l'adresse de la fonction. Où plus précisément l'adresse du point d'entrée dans la fonction.<br/> Pour plus d'informations sur les pointeurs de fonctions, vous pouvez aller voir le tuto <a href="http://www.siteduzero.com/tuto-3-4976-1-les-pointeurs-de-fonctions.html">Les pointeurs de fonction</a> de <a href="http://www.siteduzero.com/membres-294-2500.html">mleg</a>.</p><pre id="r-534184" data-claire-element-id="534184"><code data-claire-semantic="c">Type_Pointeur_De_Fonction Pointeur_Fonction;</code></pre><p id="r-534185" data-claire-element-id="534185">Ici on déclare un pointeur de fonction du type ci-dessus. Ce pointeur pointera (c'est son métier :) ) vers la fonction que l'on va importer de la dll.</p><pre id="r-534186" data-claire-element-id="534186"><code data-claire-semantic="c">DLLHandle = LoadLibrary(&quot;dll.dll&quot;);</code></pre><p id="r-534187" data-claire-element-id="534187">La fonction LoadLibrary permet de charger en mémoire notre bibliothèque. Celle ci est pointée par DLLHandle.</p><pre id="r-534188" data-claire-element-id="534188"><code data-claire-semantic="c">Pointeur_Fonction = (Type_Pointeur_De_Fonction)GetProcAddress(DLLHandle,&quot;addition&quot;);</code></pre><p id="r-534189" data-claire-element-id="534189">GetProcAddress renvoie l'adresse de la fonction. Le premier paramètre sert à identifier la dll que l'on utilise et le second est le nom de la fonction que l'on veut importer.</p><pre id="r-534190" data-claire-element-id="534190"><code data-claire-semantic="c">resultat = Pointeur_Fonction(3,7);</code></pre><p id="r-534191" data-claire-element-id="534191">Maintenant on utilise le pointeur de la même manière que si on utilisait la fonction.</p><pre id="r-534192" data-claire-element-id="534192"><code data-claire-semantic="c">FreeLibrary(DLLHandle);</code></pre><p id="r-534193" data-claire-element-id="534193">Et enfin il ne faut pas oublier de décharger la bibliothèque de la mémoire.</p><p id="r-534194" data-claire-element-id="534194">Et là votre programme marche correctement (surtout si vous pensez à mettre la dll dans le même répertoire que l'exécutable ;) ).</p><p id="r-534195" data-claire-element-id="534195">Voilà c'est déjà fini. <br/> J'espère que vous avez appris quelque chose et que vous avez apprécié la lecture de ce tuto. :) <br/> Mais il n'est pas nécessaire de créer une bibliothèque pour des fonctions aussi simples que mes exemples. Vous devez bien sûr utiliser des fonctions plus complexes et qui peuvent être utiles dans plusieurs de vos programmes. Sinon créer une bibliothèque n'est pas nécessaire.</p><p id="r-534196" data-claire-element-id="534196">Si vous avez des questions ou des suggestions (voire des corrections) vous pouvez me contacter par <a href="http://www.siteduzero.com/mp-273-16292.html">MP</a> ou laisser un commentaire pour ceux qui ne sont pas membres du sdz.<br/> Ce tuto est sous <a href="http://www.gnu.org/licenses/fdl.txt">licence GNU/FDL</a>. Vous pouvez donc le modifier ou le redistribuer.</p><p id="r-534197" data-claire-element-id="534197">Seb13</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks">Créer des bibliothèques avec Code::Blocks</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/que-sont-les-bibliotheques">
Que sont les bibliothèques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-statiques-2">
Les bibliothèques statiques
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-dynamiques-2">
Les bibliothèques dynamiques
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-des-bibliotheques-avec-code-blocks/les-bibliotheques-statiques-2">
<span class="arrow"></span>
<span class="next">Les bibliothèques statiques</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/creer-des-bibliotheques-avec-code-blocks.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:41:20 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/creer-des-bibliotheques-avec-code-blocks.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:35:36 GMT -->
</html>