<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/la-sauvegarde-sous-gnu-linux.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 00:29:17 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/la-sauvegarde-sous-gnu-linux.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:18:31 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : La sauvegarde sous GNU/linux</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/la-sauvegarde-sous-gnu-linux.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : La sauvegarde sous GNU/linux</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#LasauvegardesousGNU_linux">La sauvegarde sous GNU/linux</a><br/><a href="#Prambuledel039utilitdesauvegarder.">Préambule : de l&#039;utilité de sauvegarder.</a><br/><a href="#Quelsupportchoisir">Quel support choisir ?</a><br/><a href="#Lesoutilsdesauvegarde.">Les outils de sauvegarde.</a><br/><a href="#Lesdiffrentstypesdesauvegarde.">Les différents types de sauvegarde.</a><br/><a href="#Sauvegardergraphiquement">Sauvegarder graphiquement !</a><br/><a href="#Lasauvegardeenlignedecommandes.">La sauvegarde en ligne de commandes.</a><br/></div>
<a name="LasauvegardesousGNU_linux"></a><h2>La sauvegarde sous GNU/linux</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/preambule-de-l-utilite-de-sauvegarder">
<span class="next">Préambule : de l&#039;utilité de sauvegarder.</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-529262" data-claire-element-id="529262"><strong>B</strong>onjour à tous !</p><p id="r-529263" data-claire-element-id="529263">Tout le monde a déjà entendu parler de sauvegarder des données, mais vous vous êtes sûrement posé les questions suivantes :</p><ul id="r-529272" data-claire-element-id="529272"><li id="r-529265" data-claire-element-id="529265"><p id="r-529264" data-claire-element-id="529264">Que faut-il sauvegarder, à quelle fréquence ?</p></li><li id="r-529267" data-claire-element-id="529267"><p id="r-529266" data-claire-element-id="529266">Sur quels supports sauvegarder ?</p></li><li id="r-529269" data-claire-element-id="529269"><p id="r-529268" data-claire-element-id="529268">Que faire en cas de crash du disque ?</p></li><li id="r-529271" data-claire-element-id="529271"><p id="r-529270" data-claire-element-id="529270">Mes données valent-elles la peine d'être sauvegardées ?</p></li></ul><p id="r-529273" data-claire-element-id="529273">Le but de ce mini tuto est de répondre à ces questions qui vous ont certainement traversé l'esprit à un moment ou un autre.</p>
</div><a name="Prambuledel039utilitdesauvegarder."></a><h2>Préambule : de l&#039;utilité de sauvegarder.</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/quel-support-choisir">
<span class="next">Quel support choisir ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-pourquoi-sauvegarder" data-claire-element-id="529299">Pourquoi sauvegarder ?</h2><p id="r-529274" data-claire-element-id="529274">Avant de détailler ou d'expliquer quoi que ce soit, voici une question que vous vous êtes probablement posée.</p><div id="r-529276" data-claire-element-id="529276" data-claire-semantic="question"><p id="r-529275" data-claire-element-id="529275">Sauvegarder, oui ! Mais pourquoi ?</p></div><p id="r-529277" data-claire-element-id="529277">On pourrait se dire, de prime abord, que le risque d'incendie, de crash disque, d'endommagement du matériel, d'invasion de martiens (oups, je m'égare :-° ), bref, de tout ce qui pourrait rendre vos données corrompues ou inutilisables est minime !</p><p id="r-529278" data-claire-element-id="529278">On entend aussi souvent dire à ce sujet : &quot;ça n'arrive qu'aux autres&quot;.</p><p id="r-529279" data-claire-element-id="529279">Ce serait sous-estimer le hasard et l'erreur humaine.</p><p id="r-529280" data-claire-element-id="529280">En effet, voici une liste non-exhaustive de causes possibles d'endommagement des données :</p><ul id="r-529293" data-claire-element-id="529293"><li id="r-529282" data-claire-element-id="529282"><p id="r-529281" data-claire-element-id="529281">Incendie (je ne vous le souhaite pas...).</p></li><li id="r-529284" data-claire-element-id="529284"><p id="r-529283" data-claire-element-id="529283">Erreur de votre part, lors d'une modification des partitions, par exemple.</p></li><li id="r-529286" data-claire-element-id="529286"><p id="r-529285" data-claire-element-id="529285">Problème mécanique (comprennez &quot;crash du disque&quot;).</p></li><li id="r-529288" data-claire-element-id="529288"><p id="r-529287" data-claire-element-id="529287">Attaque par un pirate (risque réduit dans le cas d'une utilisation familiale du système).</p></li><li id="r-529290" data-claire-element-id="529290"><p id="r-529289" data-claire-element-id="529289">Système rendu instable par une erreur de votre part (ou non).</p></li><li id="r-529292" data-claire-element-id="529292"><p id="r-529291" data-claire-element-id="529291">Autres...</p></li></ul><p id="r-529294" data-claire-element-id="529294">Vous le voyez, cela peut arriver pour de multiples raisons.</p><p id="r-529295" data-claire-element-id="529295">Il serait dommage de voir le fruit de son travail détruit par un coup du sort (travail de fin d'études tout particulièrement ).</p><p id="r-529296" data-claire-element-id="529296">De même, il serait regrettable de perdre ses données utilisateurs si vous étiez forcé de réinstaller votre distribution linux favorite pour je ne sais quelle raison :p</p><p id="r-529297" data-claire-element-id="529297">J'espère vous avoir convaincu que réaliser des sauvegardes n'est pas seulement utile mais est réellement indispensable !</p><p id="r-529298" data-claire-element-id="529298">Je vais maintenant détailler quelques stratégies qui permettent de s'en sortir.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux">La sauvegarde sous GNU/linux</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/preambule-de-l-utilite-de-sauvegarder">
Préambule : de l&#039;utilité de sauvegarder.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/quel-support-choisir">
Quel support choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-outils-de-sauvegarde">
Les outils de sauvegarde.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-differents-types-de-sauvegarde">
Les différents types de sauvegarde.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/sauvegarder-graphiquement">
Sauvegarder graphiquement !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/la-sauvegarde-en-ligne-de-commandes">
La sauvegarde en ligne de commandes.
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/quel-support-choisir">
<span class="next">Quel support choisir ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quelsupportchoisir"></a><h2>Quel support choisir ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/preambule-de-l-utilite-de-sauvegarder">
<span class="arrow"></span>
<span class="next">Préambule : de l&#039;utilité de sauvegarder.</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-outils-de-sauvegarde">
<span class="next">Les outils de sauvegarde.</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-529301" data-claire-element-id="529301">Alors il faut savoir qu'il existe une certaine quantité de support sur lesquels on peut réaliser une sauvegarde.</p><p id="r-529302" data-claire-element-id="529302">Cela peut aller d'une clé USB, si on désire sauvegarder quelques images par exemple, au traditionnel disque dur externe, pour une sauvegarde plus importante, en passant par le serveur SSH distant.</p><p id="r-529303" data-claire-element-id="529303">Voici une liste non-exhaustive de différents supports :</p><ul id="r-529316" data-claire-element-id="529316"><li id="r-529305" data-claire-element-id="529305"><p id="r-529304" data-claire-element-id="529304">Clé USB.</p></li><li id="r-529307" data-claire-element-id="529307"><p id="r-529306" data-claire-element-id="529306">CD,DVD.</p></li><li id="r-529309" data-claire-element-id="529309"><p id="r-529308" data-claire-element-id="529308">Disque dur externe.</p></li><li id="r-529311" data-claire-element-id="529311"><p id="r-529310" data-claire-element-id="529310">Deuxième disque dur interne.</p></li><li id="r-529313" data-claire-element-id="529313"><p id="r-529312" data-claire-element-id="529312">Serveur distant par FTP.</p></li><li id="r-529315" data-claire-element-id="529315"><p id="r-529314" data-claire-element-id="529314">Serveur distant par SSH.</p></li></ul><div id="r-529318" data-claire-element-id="529318" data-claire-semantic="question"><p id="r-529317" data-claire-element-id="529317">C'est bien beau tout ça, mais ce n'est pas gratuit !</p></div><p id="r-529319" data-claire-element-id="529319">Hélas non, tout a un prix... Mais posez vous plutôt la question suivante : &quot;Est ce que mes données valent la peine que j'investisse un certain capital (ce n'est pas énorme non plus...) pour les préserver d'une quelconque altération&quot; ?</p><p id="r-529320" data-claire-element-id="529320">Alors, chaque support comporte ses avantages et ses inconvénients.</p><aside id="r-529322" data-claire-element-id="529322" data-claire-semantic="information"><p id="r-529321" data-claire-element-id="529321">En général, aucune précaution n'est inutile</p></aside><p id="r-529323" data-claire-element-id="529323">On dit toujours que le meilleur support de sauvegarde est celui qui n'est pas accessible physiquement (prennez l'exemple de l'incendie, si votre disque dur externe y passe aussi, la sauvegarde n'aura servi à rien...).</p><p id="r-529324" data-claire-element-id="529324">Le cas des clés USB est particulèrement adapté si on désire sauvegarder un volume limité de données.</p><p id="r-529325" data-claire-element-id="529325">Le cas du disque dur externe prend son utilité grâce à sa capacité de stockage importante, qui permet de sauvegarder plusieurs configurations de systèmes ainsi que les données utilisateurs qui 'y rapportent.</p><p id="r-529326" data-claire-element-id="529326">Les CDs/DVDs, dans le même ordre d'idée que les clés USB, permettent de sauvegarder un volume limité de données quoi que plus important que celui proposé par ces dernières (bien que cela ne soit plus trop vrai au vu des capacités des clés USB récentes).</p><aside id="r-529328" data-claire-element-id="529328" data-claire-semantic="information"><p id="r-529327" data-claire-element-id="529327">Toutes ces solutions présentent un point commun. Ce sont des solutions de sauvegarde rapprochées, c'est à dire qu'en cas d'incendie (pour reprendre cet exemple...) elles sont inutiles !</p></aside><p id="r-529329" data-claire-element-id="529329">On va donc également s'interesser aux solutions de sauvegardes distantes.</p><p id="r-529330" data-claire-element-id="529330">Les deux solutions les plus courantes sont l'utilisation du <strong>FTP</strong> (pour <strong>F</strong>ile <strong>T</strong>ranfer <strong>P</strong>rotocol) ainsi que l'utilisation du <strong>SSH</strong> (pour <strong>S</strong>ecured <strong>SH</strong>ell ).</p><p id="r-529331" data-claire-element-id="529331">Le SSH a été conçu pour combler certaines failles du FTP. Il est en effet bien plus sécurisé que ce dernier...</p><p id="r-529332" data-claire-element-id="529332">C'est pourquoi je ne détaillerai que l'utilisation du protocole SSH par la suite.</p><p id="r-529333" data-claire-element-id="529333">Le nec plus ultra étant, bien entendu, de faire des combinaisons des solutions énoncées ;)</p><p id="r-529334" data-claire-element-id="529334">Passons maintenant aux différents outils de sauvegarde.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux">La sauvegarde sous GNU/linux</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/preambule-de-l-utilite-de-sauvegarder">
Préambule : de l&#039;utilité de sauvegarder.
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/quel-support-choisir">
Quel support choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-outils-de-sauvegarde">
Les outils de sauvegarde.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-differents-types-de-sauvegarde">
Les différents types de sauvegarde.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/sauvegarder-graphiquement">
Sauvegarder graphiquement !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/la-sauvegarde-en-ligne-de-commandes">
La sauvegarde en ligne de commandes.
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/preambule-de-l-utilite-de-sauvegarder">
<span class="arrow"></span>
<span class="next">Préambule : de l&#039;utilité de sauvegarder.</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-outils-de-sauvegarde">
<span class="next">Les outils de sauvegarde.</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesoutilsdesauvegarde."></a><h2>Les outils de sauvegarde.</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/quel-support-choisir">
<span class="arrow"></span>
<span class="next">Quel support choisir ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-differents-types-de-sauvegarde">
<span class="next">Les différents types de sauvegarde.</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-ligne-de-commandes-ou-utilitaire-graphique" data-claire-element-id="529371">Ligne de commandes ou utilitaire graphique ?</h2><p id="r-529336" data-claire-element-id="529336">Il existe différentes façons de sauvegarder ses données sous GNU/linux !</p><p id="r-529337" data-claire-element-id="529337">On peut utiliser des outils graphiques (qui s'appuient sur les lignes de commandes) ou directement utiliser ces dernières.</p><p id="r-529338" data-claire-element-id="529338">Je vais détailler ces deux méthodes en mettant toutefois l'accent sur la méthode faisant appel à la console.</p><h3 id="r-les-outils-graphiques" data-claire-element-id="529354">Les outils graphiques</h3><p id="r-529339" data-claire-element-id="529339">Tout d'abord, voici quelques outils graphiques qui nous seront utiles.</p><p id="r-529340" data-claire-element-id="529340">Parmi les logiciels avec interface graphiques, on distingue :</p><ul id="r-529351" data-claire-element-id="529351"><li id="r-529342" data-claire-element-id="529342"><p id="r-529341" data-claire-element-id="529341">Arena_Backup</p></li><li id="r-529344" data-claire-element-id="529344"><p id="r-529343" data-claire-element-id="529343">BackupPC</p></li><li id="r-529346" data-claire-element-id="529346"><p id="r-529345" data-claire-element-id="529345">FullSync</p></li><li id="r-529348" data-claire-element-id="529348"><p id="r-529347" data-claire-element-id="529347">SBackup</p></li><li id="r-529350" data-claire-element-id="529350"><p id="r-529349" data-claire-element-id="529349">Autre...</p></li></ul><p id="r-529352" data-claire-element-id="529352">Le point commun de ces logiciels est qu'ils sont relativement simples d'utilisation.</p><p id="r-529353" data-claire-element-id="529353">En général, il suffit de spéficier quel type de sauvegarde, quels dossiers sauvegarder, sur quel média les sauvegarder, à quelle fréquence et le reste du travail s'accomplit pour vous sans que vous n'ayez à vous en soucier (il faut toutefois faire attention à bien configurer les opérations, au risque de vous faire envahir de sauvegardes :pirate: )</p><h3 id="r-les-outils-en-lignes-de-commandes" data-claire-element-id="529370">Les outils en lignes de commandes</h3><aside id="r-529356" data-claire-element-id="529356" data-claire-semantic="information"><p id="r-529355" data-claire-element-id="529355">Il existe une kyrielle de logiciels graphiques faisant tous à peu près la même chose... En revanche, l'utilisation des outils en lignes de commandes est beaucoup plus spécifique.</p></aside><p id="r-529357" data-claire-element-id="529357">Voici maintenant une liste d'outil utilisant la console.</p><ul id="r-529368" data-claire-element-id="529368"><li id="r-529359" data-claire-element-id="529359"><p id="r-529358" data-claire-element-id="529358">tar (le couteau suisse de la sauvegarde).</p></li><li id="r-529361" data-claire-element-id="529361"><p id="r-529360" data-claire-element-id="529360">partimage, clonezilla, pour les images (les images .iso ou .img, pas les images du type .jpg ou .png :-° ) !</p></li><li id="r-529363" data-claire-element-id="529363"><p id="r-529362" data-claire-element-id="529362">dump/restore (pour la sauvegarde incrémentale).</p></li><li id="r-529365" data-claire-element-id="529365"><p id="r-529364" data-claire-element-id="529364">rsync, pour la synchronisation de répertoires.</p></li><li id="r-529367" data-claire-element-id="529367"><p id="r-529366" data-claire-element-id="529366">dd, pour les sauvegardes physiques.</p></li></ul><p id="r-529369" data-claire-element-id="529369">Il est maintenant temps que je vous explique les différents types de sauvegardes.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux">La sauvegarde sous GNU/linux</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/preambule-de-l-utilite-de-sauvegarder">
Préambule : de l&#039;utilité de sauvegarder.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/quel-support-choisir">
Quel support choisir ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-outils-de-sauvegarde">
Les outils de sauvegarde.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-differents-types-de-sauvegarde">
Les différents types de sauvegarde.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/sauvegarder-graphiquement">
Sauvegarder graphiquement !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/la-sauvegarde-en-ligne-de-commandes">
La sauvegarde en ligne de commandes.
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/quel-support-choisir">
<span class="arrow"></span>
<span class="next">Quel support choisir ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-differents-types-de-sauvegarde">
<span class="next">Les différents types de sauvegarde.</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesdiffrentstypesdesauvegarde."></a><h2>Les différents types de sauvegarde.</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-outils-de-sauvegarde">
<span class="arrow"></span>
<span class="next">Les outils de sauvegarde.</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/sauvegarder-graphiquement">
<span class="next">Sauvegarder graphiquement !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-la-sauvegarde-complete-1" data-claire-element-id="529377">La sauvegarde complète</h2><p id="r-529373" data-claire-element-id="529373">Les fichiers sont sauvegardés sans tenir compte d'une éventuelle sauvegarde antérieure.</p><p id="r-529374" data-claire-element-id="529374">Inutile de dire que cette sauvegarde est celle qui occupe le plus d'espace.</p><p id="r-529375" data-claire-element-id="529375">Pour cette raison, il est préférable de n'utiliser ce type de sauvegarde qu'épisodiquement.</p><p id="r-529376" data-claire-element-id="529376">Pour restaurer sa sauvegarde, il suffit d'utiliser uniquement les fichiers créés par sauvegarde complète.</p><h2 id="r-la-sauvegarde-incrementale-1" data-claire-element-id="529382">La sauvegarde incrémentale</h2><p id="r-529378" data-claire-element-id="529378">Cette sauvegarde examine le contenu de la dernière sauvegarde en date (peu importe son type). Elle compare cette sauvegarde avec l'état actuel du système et ne sauvegarde que ce qui a changé.</p><p id="r-529379" data-claire-element-id="529379">Évidemment, la taille occupée par cette sauvegarde est réduite étant donné qu'elle ne s'occupe que des modifications récentes du système.</p><p id="r-529380" data-claire-element-id="529380">C'est le type de sauvegarde qu'il faut appliquer journalièrement, du moins, régulièrement.</p><p id="r-529381" data-claire-element-id="529381">Pour restaurer son système, il faut restaurer la dernière sauvegarde complète puis toutes les sauvegardes incrémentales effectuées depuis, et dans l'ordre !</p><h2 id="r-la-sauvegarde-differentielle-1" data-claire-element-id="529385">La sauvegarde différentielle</h2><p id="r-529383" data-claire-element-id="529383">Fort semblable à la sauvegarde incrémentale, cette sauvegarde ne s'occupe que de ce qui a changé depuis la dernière sauvegarde <strong>complète</strong>.</p><p id="r-529384" data-claire-element-id="529384">Ici, pour restaurer le système, il suffit de restaurer la sauvegarde complète puis la dernière différentielle.</p><h2 id="r-strategie-de-sauvegarde" data-claire-element-id="529398">Stratégie de sauvegarde</h2><p id="r-529386" data-claire-element-id="529386">Selon vos besoins, plusieurs stratégies me paraissent envisageables.</p><p id="r-529387" data-claire-element-id="529387">Il est nécessaire d'effectuer des sauvegardes complètes périodiquement, mais avec une fréquence assez réduite (une fois par mois, par exemple).</p><p id="r-529388" data-claire-element-id="529388">On doit combiner cela avec des sauvegardes incrémentales et différentielles plus fréquentes.</p><div id="r-529390" data-claire-element-id="529390" data-claire-semantic="question"><p id="r-529389" data-claire-element-id="529389">Pourquoi ne pas se contenter uniquement de sauvegardes complètes, à condition d'en effectuer régulièrement ?</p></div><p id="r-529391" data-claire-element-id="529391">Il est certain que si on désire se contenter de sauvegardes complètes, il faut en faire souvent (ce serait bête que survienne une panne la veille de la sauvegarde mensuelle, avouez).</p><p id="r-529392" data-claire-element-id="529392">Alors, ce type de sauvegarde prend un temps considérable comparé aux deux autres types.</p><p id="r-529393" data-claire-element-id="529393">Cela se comprend facilement étant donné le nombre important de données qu'il y a à écraser.</p><p id="r-529394" data-claire-element-id="529394">Se pose aussi le problème de la place.</p><p id="r-529395" data-claire-element-id="529395">Si vous faites des sauvegardes complètes, à moins que vous n'écrasiez vos sauvegardes antérieures, vous vous retrouverez rapidement avec l'entièreté de la capacité du média concerné saturée :p</p><p id="r-529396" data-claire-element-id="529396">Voilà pourquoi il est préférable d'effectuer une sauvegarde complète mensuellement et de la combiner à des sauvegardes incrémentales/différentielles plus fréquentes !</p><p id="r-529397" data-claire-element-id="529397">Je vais maintenant détailler le mode graphique et le mode texte permettant de sauvegarder vos précieuses données.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux">La sauvegarde sous GNU/linux</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/preambule-de-l-utilite-de-sauvegarder">
Préambule : de l&#039;utilité de sauvegarder.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/quel-support-choisir">
Quel support choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-outils-de-sauvegarde">
Les outils de sauvegarde.
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-differents-types-de-sauvegarde">
Les différents types de sauvegarde.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/sauvegarder-graphiquement">
Sauvegarder graphiquement !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/la-sauvegarde-en-ligne-de-commandes">
La sauvegarde en ligne de commandes.
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-outils-de-sauvegarde">
<span class="arrow"></span>
<span class="next">Les outils de sauvegarde.</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/sauvegarder-graphiquement">
<span class="next">Sauvegarder graphiquement !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Sauvegardergraphiquement"></a><h2>Sauvegarder graphiquement !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-differents-types-de-sauvegarde">
<span class="arrow"></span>
<span class="next">Les différents types de sauvegarde.</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/la-sauvegarde-en-ligne-de-commandes">
<span class="next">La sauvegarde en ligne de commandes.</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-529400" data-claire-element-id="529400">Dans cette section, je vais détailler l'utilisation d'un logiciel avec interface graphique simple d'utilisation : <em>SBackup</em></p><p id="r-529401" data-claire-element-id="529401">Les autres logiciels s'appuient sur la même logique, c'est pourquoi il est inutile d'en détailler l'utilisation.</p><p id="r-529402" data-claire-element-id="529402">Pour installer SBackup, installez le paquet sbackup avec votre gestionnaire de paquets préférés.</p><p id="r-529403" data-claire-element-id="529403">Ainsi, sous Debian, on peut faire :</p><pre id="r-529404" data-claire-element-id="529404"><code data-claire-semantic="console">$ sudo aptitude install sbackup</code></pre><h2 id="r-configuration-de-sbackup" data-claire-element-id="529468">Configuration de SBackup</h2><p id="r-529405" data-claire-element-id="529405">Si vous utilisez GNOME, il vous faudra lancer Simple Backup Config via Système→Administration→Simple Backup Config.</p><aside id="r-529407" data-claire-element-id="529407" data-claire-semantic="information"><p id="r-529406" data-claire-element-id="529406">Ce programme s'exécute avec les privilèges root, vous serez donc amenés à rentrer votre mot de passe.</p></aside><p id="r-529408" data-claire-element-id="529408">Vous tomberez nez à nez avec un écran de configuration du logiciel qui devrait ressembler à ceci :</p><figure id="r-529410" data-claire-element-id="529411"><img id="r-529409" data-claire-element-id="529409" src="medias/uploads.siteduzero.com_files_184001_185000_184517.png" alt="Image utilisateur"/></figure><p id="r-529412" data-claire-element-id="529412">Vous pouvez donc utiliser les paramètres par défaut, définir une configuration personnalisée ou encore sauvegarder manuellement.</p><p id="r-529413" data-claire-element-id="529413">On va détailler une configuration personnalisée.</p><h3 id="r-onglet-inclure-1" data-claire-element-id="529432">Onglet inclure</h3><p id="r-529414" data-claire-element-id="529414">L'onglet suivant l'onglet général est : <em>&quot;inclure&quot;</em>.</p><p id="r-529415" data-claire-element-id="529415">Il permet d'inclure les répertoires que vous souhaitez impérativement sauvegarder.</p><p id="r-529416" data-claire-element-id="529416">Voilà à quoi ça doit ressembler :</p><figure id="r-529418" data-claire-element-id="529419"><img id="r-529417" data-claire-element-id="529417" src="medias/uploads.siteduzero.com_files_184001_185000_184518.png" alt="Image utilisateur"/></figure><p id="r-529420" data-claire-element-id="529420">Alors, dans cet onglet <em>inclure</em>, je vous conseille de choisir :</p><ul id="r-529431" data-claire-element-id="529431"><li id="r-529422" data-claire-element-id="529422"><p id="r-529421" data-claire-element-id="529421">/home (pour vos données utilisateurs).</p></li><li id="r-529424" data-claire-element-id="529424"><p id="r-529423" data-claire-element-id="529423">/etc (les fichiers de configurations de votre système).</p></li><li id="r-529426" data-claire-element-id="529426"><p id="r-529425" data-claire-element-id="529425">/root (le dossier du super utilisateur).</p></li><li id="r-529428" data-claire-element-id="529428"><p id="r-529427" data-claire-element-id="529427">/var (stocke entre autres les logs de votre système...Utile quand ça ne va plus).</p></li><li id="r-529430" data-claire-element-id="529430"><p id="r-529429" data-claire-element-id="529429">/usr/local (stocke les paramètres locaux pour les utilisateurs).</p></li></ul><h3 id="r-onglet-exclure-1" data-claire-element-id="529446">Onglet exclure</h3><p id="r-529433" data-claire-element-id="529433">Cet onglet devrait ressembler à ceci :</p><figure id="r-529435" data-claire-element-id="529436"><img id="r-529434" data-claire-element-id="529434" src="medias/uploads.siteduzero.com_files_184001_185000_184519.png" alt="Image utilisateur"/></figure><p id="r-529437" data-claire-element-id="529437">Dans cet onglet, vous pouvez choisir d'exclure :</p><ul id="r-529444" data-claire-element-id="529444"><li id="r-529439" data-claire-element-id="529439"><p id="r-529438" data-claire-element-id="529438">Certains répertoires (comme /tmp qui se vide à chaque reboot par exemple).</p></li><li id="r-529441" data-claire-element-id="529441"><p id="r-529440" data-claire-element-id="529440">Certains fichiers, d'après leur extension (.avi,.iso,.mp3,etc...).</p></li><li id="r-529443" data-claire-element-id="529443"><p id="r-529442" data-claire-element-id="529442">Certains fichiers, selon leur taille.</p></li></ul><p id="r-529445" data-claire-element-id="529445">En effet, certains répertoires, certains types de fichiers ou certains fichiers dépassant une certaine taille peuvent ne pas être utiles à sauvegarder. C'est à cela que sert l'onglet <em>exclure</em> (vous ne vous en doutiez pas je parie ^^ ).</p><h3 id="r-onglet-destination-1" data-claire-element-id="529451">Onglet destination</h3><p id="r-529447" data-claire-element-id="529447">C'est ici qu'on choisit quel support utiliser pour la sauvegarde.</p><p id="r-529448" data-claire-element-id="529448">Vous remarquerez qu'on peut choisir un support interne. Certes, cette solution protège de la suppression accidentelle mais est d'une inutilité absolue dans la plupart des autres cas.</p><p id="r-529449" data-claire-element-id="529449">Alors, dans cet onglet, indiquez le point de montage (/media/disk par exemple) du support physique voulu si vous utilisez une solution matérielle.</p><p id="r-529450" data-claire-element-id="529450">Dans le cas où vous voulez utiliser un répertoire distant (serveur SSH), précisez les paramètres adéquats.<br/> À moins que vous ne disposiez d'espace de stockage, il faudra vous en procurer dans le commerce, si vous comptez utiliser une telle solution du moins.</p><h3 id="r-onglet-heure-1" data-claire-element-id="529459">Onglet heure</h3><p id="r-529452" data-claire-element-id="529452">Voilà à quoi devrait ressembler cet onglet :</p><figure id="r-529454" data-claire-element-id="529455"><img id="r-529453" data-claire-element-id="529453" src="medias/uploads.siteduzero.com_files_184001_185000_184520.png" alt="Image utilisateur"/></figure><p id="r-529456" data-claire-element-id="529456">Si vous choisissez une heure précise à laquelle le logiciel doit sauvegarder vos données, il est évident qu'il faudra que votre ordinateur soit allumé à cet instant là.</p><p id="r-529457" data-claire-element-id="529457">Enfin, choisissez le délai après lequel Simple Backup fera une sauvegarde complète.</p><p id="r-529458" data-claire-element-id="529458">Une <strong>précision</strong> s'impose: par défaut, Simple Backup ne sauvegarde que les fichiers modifiés depuis votre dernière sauvegarde. Les autres sont simplement ignorés. En revanche, il réalisera une sauvegarde complète - et donc aussi des fichiers non-modifiés - après le délai spécifié ici.</p><h3 id="r-onglet-nettoyage-1" data-claire-element-id="529467">Onglet nettoyage</h3><p id="r-529460" data-claire-element-id="529460">Cet onglet sert à préciser au logiciel quel type de nettoyage il doit appliquer, et ce, pour éviter que vos sauvegardes n'encombrent tout l'espace disponible, au fur et à mesure.</p><p id="r-529461" data-claire-element-id="529461">Vous pouvez et devez préciser au logiciel qu'il doit supprimer les sauvegardes trop vieilles ou incomplètes.</p><p id="r-529462" data-claire-element-id="529462">Suivant votre fréquence de sauvegarde, choisissez un nombre x qui définit la durée de vie de vos sauvegardes.</p><p id="r-529463" data-claire-element-id="529463">Pensez à prendre un nombre x supérieur à votre fréquence de sauvegarde complète (si les sauvegardes sont purgées tous les 10 jours alors que des sauvegardes complètes ne sont effectuées qu'une fois par mois, il est possible que vous tombiez dans un espace temps où vous ne disposez d'aucune sauvegarde ^^ ).</p><p id="r-529464" data-claire-element-id="529464">Si vous avez besoin de sauvegardes sur du long terme, choisissez l'algorithme de suppression logarithmique.</p><p id="r-529465" data-claire-element-id="529465">Une fois vos paramètres choisis, n'oubliez pas de cliquer sur enregistrer pour que votre configuration soit mémorisée.</p><p id="r-529466" data-claire-element-id="529466">Je crois que j'ai tout dit concernant ce logiciel, je vais donc maintenant détailler la solution en lignes de commandes.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux">La sauvegarde sous GNU/linux</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/preambule-de-l-utilite-de-sauvegarder">
Préambule : de l&#039;utilité de sauvegarder.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/quel-support-choisir">
Quel support choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-outils-de-sauvegarde">
Les outils de sauvegarde.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-differents-types-de-sauvegarde">
Les différents types de sauvegarde.
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/sauvegarder-graphiquement">
Sauvegarder graphiquement !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/la-sauvegarde-en-ligne-de-commandes">
La sauvegarde en ligne de commandes.
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-differents-types-de-sauvegarde">
<span class="arrow"></span>
<span class="next">Les différents types de sauvegarde.</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/la-sauvegarde-en-ligne-de-commandes">
<span class="next">La sauvegarde en ligne de commandes.</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lasauvegardeenlignedecommandes."></a><h2>La sauvegarde en ligne de commandes.</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/sauvegarder-graphiquement">
<span class="arrow"></span>
<span class="next">Sauvegarder graphiquement !</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-529470" data-claire-element-id="529470">J'ai détaillé divers outils en ligne de commandes, plus haut, je vais maintenant expliquer comment se servir de la commande <em>tar</em>.</p><div id="r-529472" data-claire-element-id="529472" data-claire-semantic="question"><p id="r-529471" data-claire-element-id="529471">Pourquoi <em>tar</em> ?</p></div><p id="r-529473" data-claire-element-id="529473">Il est vrai qu'il existe d'autres outils de sauvegarde en ligne de commandes, j'en ai parlé antérieurement.</p><p id="r-529474" data-claire-element-id="529474">Néanmoins, <em>tar</em> est un outil qui fait quasiment tout (à ma connaissance, il ne fait pas encore la vaisselle cependant :lol: ).</p><p id="r-529475" data-claire-element-id="529475">Il permet de sauvegarder une arborescence entière en la compressant pour en réduire la taille très simplement.<br/> Il permet, tout aussi simplement, de restaurer cette arborescence.</p><p id="r-529476" data-claire-element-id="529476">En raison de sa facilité d'utilisation et de ses possibilités, j'ai donc décidé de privilégier cet outil plutôt qu'un autre.</p><h2 id="r-presentation-generale-de-tar" data-claire-element-id="529484">Présentation générale de tar</h2><p id="r-529477" data-claire-element-id="529477">À partir d'un fichier archive, la commande <em>tar</em> est capable de restaurer des fichiers ou des arborescences de fichiers.</p><aside id="r-529479" data-claire-element-id="529479" data-claire-semantic="warning"><p id="r-529478" data-claire-element-id="529478">Une archive tar contient le chemin absolu des fichiers sauvegardés. Pensez donc, avant de restaurer quoi que ce soit, à vous placer dans le répertoire /(racine) de votre système. Dans le cas contraire, le fichier sera restauré à partir du répertoire courant.</p></aside><p id="r-529480" data-claire-element-id="529480">Cette commande peut aussi bien traiter un fichier ordinaire, une arborescence de fichier, un périphérique d'archivage local ou distant.</p><p id="r-529481" data-claire-element-id="529481">L'archive dans laquelle est assemblée la sauvegarde permet de conserver les droits relatifs aux fichiers ainsi que leur emplacements respectifs.</p><p id="r-529482" data-claire-element-id="529482">Bref, un véritable couteau suisse :p</p><p id="r-529483" data-claire-element-id="529483">On va maintenant voir comment s'en servir pour réaliser nos sauvegardes, mais je vous assure, il a encore d'autres possibilités.</p><h2 id="r-utilisation-de-tar-pour-la-sauvegarde" data-claire-element-id="529526">Utilisation de tar pour la sauvegarde</h2><h3 id="r-la-sauvegarde-manuelle" data-claire-element-id="529513">La sauvegarde manuelle</h3><aside id="r-529486" data-claire-element-id="529486" data-claire-semantic="information"><p id="r-529485" data-claire-element-id="529485">Exécutez les commandes suivantes en tant que simple utilisateur (sauf si on vous renvoit un message d'erreur de permission).</p></aside><p id="r-529487" data-claire-element-id="529487">La syntaxe générale de la commande <em>tar</em> est la suivante :</p><pre id="r-529488" data-claire-element-id="529488"><code data-claire-semantic="console">tar -paramètres opérande1(archive.tar) opérande2(cible)</code></pre><p id="r-529489" data-claire-element-id="529489">Alors, si on désire par exemple sauvegarder le dossier personnel de l'utilisateur <em>guest</em> sur un disque dur externe monté sur /media/votre_media en conservant les chemins absolus et en profitant de la compression GNU des données on fera :</p><pre id="r-529490" data-claire-element-id="529490"><code data-claire-semantic="console">tar -cvzf /media/votre_media/home_de_guest.tar.gz /home/guest</code></pre><p id="r-529491" data-claire-element-id="529491">Le paramètre <strong><em>-c</em></strong> indique qu'on veut créer une sauvegarde, le paramètre <strong><em>-v</em></strong> rend la commande un peu plus parlante (au moins, on sait ce qu'elle fait la petite cachottière :lol: ) et le paramètre <strong><em>-f</em></strong> signifie qu'on doit assembler l'archive dans un fichier.</p><aside id="r-529493" data-claire-element-id="529493" data-claire-semantic="information"><p id="r-529492" data-claire-element-id="529492">N'oubliez pas le paramètre &quot;-z&quot;, il permet de profiter de la compression GNU des données, pour réduire la place occupée par ces dernières !</p></aside><p id="r-529494" data-claire-element-id="529494">Pour restaurer le répertoire home que l'on vient de sauvegarder, on se place d'abord dans /(racine), ensuite :</p><pre id="r-529495" data-claire-element-id="529495"><code data-claire-semantic="console">tar -xvzf /media/votre_media/home_de_guest.tar.gz home/guest</code></pre><p id="r-529496" data-claire-element-id="529496">Le paramètre <em><strong>-x</strong></em> exprime qu'on extrait un fichier pour le restaurer.</p><aside id="r-529498" data-claire-element-id="529498" data-claire-semantic="warning"><p id="r-529497" data-claire-element-id="529497">Vous aurez remarquez que je n'ai pas mis le &quot;/&quot; devant home, au deuxième argument de tar. Pour une raison que j'ignore, tar omet les &quot;/&quot; dans ce cas là... C'est pour ça qu'il faut se placer dans le répertoire /(racine) avant toute restauration</p></aside><p id="r-529499" data-claire-element-id="529499">Si on désire sauvegarder l'intégralité de son système, la marche à suivre est identique, à l'exception près que le dossier n'est pas /home/guest, mais uniquement /.</p><p id="r-529500" data-claire-element-id="529500">Si on veut regarder le contenu d'une archive.tar sans en extraire quoi que ce soit, on fait :</p><pre id="r-529501" data-claire-element-id="529501"><code data-claire-semantic="console">tar -tf /emplacement_archive/archive.tar</code></pre><p id="r-529502" data-claire-element-id="529502">Le paramètre <em><strong>-t</strong></em> permet de lister le contenu de l'archive.</p><p id="r-529503" data-claire-element-id="529503">Si maintenant on s'aperçoit après création de l'archive.tar qu'on a oublié un fichier, on l'ajoute via :</p><pre id="r-529504" data-claire-element-id="529504"><code data-claire-semantic="console">tar -rvf /emplacement_archive/archive.tar /emplacement_fichier/fichier_a_ajouter</code></pre><p id="r-529505" data-claire-element-id="529505">Le paramètre <em><strong>-r</strong></em> donne la possibilité d'ajouter un fichier à l'archive.</p><div id="r-529507" data-claire-element-id="529507" data-claire-semantic="question"><p id="r-529506" data-claire-element-id="529506">C'est pénible de devoir, à chaque sauvegarde, préciser quels dossiers sauvegarder manuellement, ya pas un autre moyen de le faire ?</p></div><p id="r-529508" data-claire-element-id="529508">Évidemment si :)</p><p id="r-529509" data-claire-element-id="529509">Il faut, pour cela, utiliser ce qu'on appelle un script bash et automatiser son lancement si nécéssaire via la crontab.</p><p id="r-529510" data-claire-element-id="529510">Je vous encourage d'ailleurs à utiliser la solution du script, elle permet de sauvegarder plusieurs dossiers à la fois en un seul clic !</p><p id="r-529511" data-claire-element-id="529511">Pratique si on préfère ne pas devoir spécifier manuellement quels dossiers sauvegarder à chaque sauvegarde.</p><p id="r-529512" data-claire-element-id="529512">J'en parlerai après, je vais d'abord expliquer comment réaliser une sauvegarde incrémentale au moyen de la commande <em>tar</em> pour information.</p><h3 id="r-la-sauvegarde-incrementale-avec-tar" data-claire-element-id="529525">La sauvegarde incrémentale avec tar</h3><p id="r-529514" data-claire-element-id="529514">On va pour cela utiliser la commande touch. <br/> Imaginons qu'on veuille sauvegarder les fichiers modifiés (ou créés) après le 29 juillet à 00h05.</p><p id="r-529515" data-claire-element-id="529515">On fera :</p><pre id="r-529516" data-claire-element-id="529516"><code data-claire-semantic="console">touch -t 07290005 .comparaison
find ~ -newer .comparaison | tar -c -T - -f /media/votre_media/incr.tar</code></pre><p id="r-529517" data-claire-element-id="529517">La première commande va créer un fichier caché nommé comparaison qui servira de base pour comparer. Les paramètres à indiquer à la commande touch font croire au système que vous avez créé le fichier .comparaison le 29/07 à 00h05.</p><aside id="r-529519" data-claire-element-id="529519" data-claire-semantic="warning"><p id="r-529518" data-claire-element-id="529518">Attention au format de la date.</p></aside><p id="r-529520" data-claire-element-id="529520">Ensuite, au moyen de la commande find, on compare la date de création du fichier comparaison avec le reste du système, et tout ce qui a été créé ultérieurement au fichier .comparaison (tel qu'on a falsifié sa création ^^ ) est envoyé à la commande tar, au moyen du pipe &quot;|&quot;, qui se charge de la sauvegarde.</p><p id="r-529521" data-claire-element-id="529521">Pratique non ?</p><aside id="r-529523" data-claire-element-id="529523" data-claire-semantic="information"><p id="r-529522" data-claire-element-id="529522">Cette possibilité était donnée à titre informatif, les commandes <em>dump/restore</em> gèrent remarquablement bien la sauvegarde incrémentale.</p></aside><p id="r-529524" data-claire-element-id="529524">On sait maintenant comment réaliser une sauvegarde complète de tout le système, une sauvegarde incrémentale de tout le système. On va voir comment automatiser ces actions au moyen d'un script !</p><h2 id="r-creation-d-un-script-bash-de-sauvegarde-complete" data-claire-element-id="529556">Création d'un script bash de sauvegarde complète</h2><p id="r-529527" data-claire-element-id="529527">J'espère que vous avez lu la fin du <a href="http://www.siteduzero.com/tutoriel-3-12827-reprenez-le-controle-avec-linux.html#part_88347">tutoriel</a> de M@teo21 où est expliquée la structure des scripts bash, afin que vous comprenniez la construction de celui qui va suivre.</p><p id="r-529528" data-claire-element-id="529528">Plutot que de vous expliquer ligne par ligne, je vais vous livrer un script où les lignes seront commentées dedans même.</p><aside id="r-529530" data-claire-element-id="529530" data-claire-semantic="information"><p id="r-529529" data-claire-element-id="529529">Les données sont systématiquement écrasées à chaque sauvegarde avec les scripts suivants.</p></aside><p id="r-529531" data-claire-element-id="529531">Voici d'abord un script qui sauvegarde les dossiers que vous lui avez spécifiés dans une archive <strong>backup.tar.gz</strong> sur le support que vous aurez choisi.</p><pre id="r-529532" data-claire-element-id="529532"><code data-claire-semantic="bash">#!/bin/sh

# Enregistrez ce script sous le nom de backup.sh. Prennez note de son emplacement.

echo &quot;------------------------------------------------------&quot;;
echo &quot;- Sauvegarde complète du système&quot;;
echo &quot;------------------------------------------------------&quot;;
echo &quot;&quot;;

echo &quot;Création de l'archive&quot;;

# On crée l'archive .tar en précisant entre guillemets les chemins absolus des dossiers à sauvegarder.
tar -cvzf /votre_support/backup.tar.gz &quot;/etc/&quot; &quot;/root&quot; &quot;/home&quot; &quot;/var&quot; &quot;/usr/local&quot;
echo &quot;------------------------------------------------------&quot;;
echo &quot;&quot;;

echo &quot;Vérification de l'existence de l'archive&quot;;
# On teste si l'archive a bien été créée
if [ -e /votre_support/backup.tar.gz ]
then
echo &quot;&quot;
echo &quot;Votre archive a bien été créée.&quot;;
echo &quot;&quot;
else
echo &quot;&quot;
echo &quot;Il y a eu un problème lors de la création de l'archive.&quot;;
echo &quot;&quot;
fi

echo &quot;### Fin de la sauvegarde.  ###&quot;;</code></pre><p id="r-529533" data-claire-element-id="529533">Ensuite, un script qui va chercher l'archive précédemment créée, qui en extrait l'intégralité des fichiers/répertoires et qui les replace à leur emplacement initial.</p><pre id="r-529534" data-claire-element-id="529534"><code data-claire-semantic="bash">#!/bin/sh

# Enregistrez ce script sous le nom restore.sh. Prennez également note de son emplacement.

echo &quot;------------------------------------------------------&quot;;
echo &quot;- Restauration du système&quot;;
echo &quot;------------------------------------------------------&quot;;
echo &quot;&quot;;

echo &quot;Récupération et extraction de l'archive&quot;;

# On se place à la /(racine), comme je l'ai expliqué tout à l'heure.
cd /
# On extrait les répertoires archivés en ne mettant PAS le / devant, comme expliqué tout à l'heure.
tar -xvzf /votre_support/backup.tar.gz &quot;etc&quot; &quot;root&quot; &quot;home&quot; &quot;var&quot; &quot;usr/local&quot;
echo &quot;------------------------------------------------------&quot;;
echo &quot;&quot;;

echo &quot;### Fin de l'extraction des fichiers.  ###&quot;;</code></pre><p id="r-529535" data-claire-element-id="529535">Vous connaissez la manoeuvre à appliquer sur ces deux scripts pour les rendre exécutables.</p><p id="r-529536" data-claire-element-id="529536">Un petit coup de :</p><pre id="r-529537" data-claire-element-id="529537"><code data-claire-semantic="console">chmod +x backup.sh restore.sh</code></pre><p id="r-529538" data-claire-element-id="529538">Et le tour est joué ^^</p><p id="r-529539" data-claire-element-id="529539">Ce serait un bon exercice que de créer un script permettant de sauvegarder incrémentiellement ses données tous les jours et de les sauvegarder complètement une fois par mois !</p><p id="r-529540" data-claire-element-id="529540">Ensuite, je vous laisse le soin de créer un éventuel lanceur sur votre bureau pour éviter de devoir répéter l'opération qui consiste à se placer dans le dossier où est enregistré le script et à l'exécuter.</p><p id="r-529541" data-claire-element-id="529541">Ce qui se fait via les commandes suivantes :</p><pre id="r-529542" data-claire-element-id="529542"><code data-claire-semantic="console">cd /dossier_du_script
./votre_script.sh</code></pre><h3 id="r-automatisation-des-taches-1" data-claire-element-id="529555">Automatisation des tâches</h3><p id="r-529543" data-claire-element-id="529543">Si, comme moi, ça vous dérange encore de devoir cliquer pour sauvegarder vos données (on peut oublier de le faire, aussi...) alors il va falloir automatiser tout cela via la crontab.</p><p id="r-529544" data-claire-element-id="529544">Je ne vais pas vous la décrire dans le détail, pour cela, repportez-vous au <a href="http://www.siteduzero.com/tutoriel-3-73916-executer-un-programme-a-une-heure-differee.html#ss_part_4">tutoriel</a> de M@teo21.</p><p id="r-529545" data-claire-element-id="529545">Bon, dans un console, lancez :</p><pre id="r-529546" data-claire-element-id="529546"><code data-claire-semantic="console">crontab -e</code></pre><p id="r-529547" data-claire-element-id="529547">Et choisissez 3 pour Nano, à moins que vous ne préfériez Vim ou emacs (si vous l'avez installé).</p><p id="r-529548" data-claire-element-id="529548">Votre écran devrait ressembler à ceci :</p><pre id="r-529549" data-claire-element-id="529549"><code data-claire-semantic="console">GNU nano 2.0.7       Fichier : /tmp/crontab.4u4jHU/crontab                    

# m h  dom mon dow   command


















                             [ Lecture de 1 ligne ]
^G Aide      ^O Écrire    ^R Lire fich.^Y Page préc.^K Couper    ^C Pos. cur.
^X Quitter   ^J Justifier ^W Chercher  ^V Page suiv.^U Coller    ^T Orthograp.</code></pre><p id="r-529550" data-claire-element-id="529550">Rajoutez une ligne comme celle-ci, pour que vos sauvegardes soient effectuées tous les lundis à 19h30 par exemple.</p><pre id="r-529551" data-claire-element-id="529551"><code data-claire-semantic="console">30 19 * * 1 cd /dossier_où_est_enregistré_backup.sh | ./backup.sh</code></pre><p id="r-529552" data-claire-element-id="529552">Enregistrez votre fichier via Nano, la crontab vous informe de la prise en compte des changements et le compte est bon.</p><aside id="r-529554" data-claire-element-id="529554" data-claire-semantic="information"><p id="r-529553" data-claire-element-id="529553">Inutile d'automatiser la restauration de données. À moins que vous ne prévoyiez de perdre vos données toujours au même moment, c'est un peu inutile (je dis ça plus pour rire qu'autre chose).</p></aside><h2 id="r-cas-du-serveur-distant-par-ssh" data-claire-element-id="529581">Cas du serveur distant par SSH</h2><p id="r-529557" data-claire-element-id="529557">Alors, je n'ai pas encore trop parlé de la sauvegarde distante sur un serveur par SSH.</p><p id="r-529558" data-claire-element-id="529558">Je ne vais pas vous expliquer ici comment fonctionne la synchronisation sur un serveur par le protocole SSH, ce n'est pas le but du tuto.</p><p id="r-529559" data-claire-element-id="529559">Sachez que si vous désirez sauvegarder vos données sur un serveur distant, le mieux est encore de créer son archive.tar.gz, de la stocker localement (sur votre disque même ou sur un disque dur externe) et d'ensuite l'envoyer via SSH sur votre serveur distant.</p><p id="r-529560" data-claire-element-id="529560">Tenez, voici un exemple pratique. On souhaite envoyer l'archive backup.tar.gz sur son serveur via le protocole SSH.</p><p id="r-529561" data-claire-element-id="529561">Il faut pour cela utiliser un client SSH !</p><p id="r-529562" data-claire-element-id="529562">Je vous recommande d'utiliser <strong>SCP</strong> (pour <strong>S</strong>sh <strong>C</strong>o<strong>P</strong>y) qui s'utilise comme la commande <em>cp</em> (installation classique via le gestionnaire de paquets).</p><p id="r-529563" data-claire-element-id="529563">Il est évident qu'il faut au préalable s'identifier avant toute transaction avec le serveur.</p><p id="r-529564" data-claire-element-id="529564">La commande suivante permet de se connecter au serveur, moyennant l'entrée de votre mot de passe (il ne s'affichera pas lorsque vous le rentrerez, comme d'habitude en console) :</p><pre id="r-529565" data-claire-element-id="529565"><code data-claire-semantic="console">ssh <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="6510110c090c16041100101725130a111700160017130010174b060a08">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></code></pre><p id="r-529566" data-claire-element-id="529566">Revenons en à notre exemple ! On fera donc :</p><pre id="r-529567" data-claire-element-id="529567"><code data-claire-semantic="console">scp /emplacement_archive/backup.tar.gz <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="ef9a9b8683869c8e9b8a9a9daf9c8a9d998a9a9d8b869c9b8e819bc18a978a829f838ac1899d">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></code></pre><p id="r-529568" data-claire-element-id="529568">Ce qui aura pour effet de copier notre archive.tar.gz dans le répertoire courant du compte sous lequel vous êtes connecté sur le serveur distant !</p><aside id="r-529570" data-claire-element-id="529570" data-claire-semantic="warning"><p id="r-529569" data-claire-element-id="529569">Il est évident que si l'on désire utiliser les scripts bash mis à disposition, il faudra au préalable les modifier !</p></aside><p id="r-529571" data-claire-element-id="529571">Si on désire récupérer ses données depuis le serveur distant, il faut d'abord récupérer l'archive et en extraire ensuite les fichiers.</p><p id="r-529572" data-claire-element-id="529572">Pour récupérer l'archive, on inverse simplement les opérandes de la commande <em>cp</em><em>scp</em> :p</p><p id="r-529573" data-claire-element-id="529573">Je ne vous fait pas l'injure de vous remettre la commande d'extraction/restauration des fichiers (allez si, quand même).</p><pre id="r-529574" data-claire-element-id="529574"><code data-claire-semantic="console">tar -xvzf /votre_support/backup.tar.gz &quot;etc&quot; &quot;root&quot; &quot;home&quot; &quot;var&quot; &quot;usr/local&quot;</code></pre><p id="r-529575" data-claire-element-id="529575">Où les dossiers entre guillements sont ceux, rappelons le, que vous aviez décidé de sauvegarder.</p><p id="r-529576" data-claire-element-id="529576">N'oubliez pas d'oublier (c'est le comble ça ^^ ) le &quot;/&quot; au début du chemin de vos dossiers.</p><p id="r-529577" data-claire-element-id="529577"><strong>V</strong>ous avez maintenant une stratégie de sauvegarde qui vous permettra de retrouver vos données en cas de pépin ;)</p><p id="r-529578" data-claire-element-id="529578">En espérant que ce tutoriel vous ait plu/aidé.</p><p id="r-529579" data-claire-element-id="529579">Je suis ouvert à toute remarque et/ou toute suggestion.</p><p id="r-529580" data-claire-element-id="529580">À bientôt.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux">La sauvegarde sous GNU/linux</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/preambule-de-l-utilite-de-sauvegarder">
Préambule : de l&#039;utilité de sauvegarder.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/quel-support-choisir">
Quel support choisir ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-outils-de-sauvegarde">
Les outils de sauvegarde.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/les-differents-types-de-sauvegarde">
Les différents types de sauvegarde.
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/sauvegarder-graphiquement">
Sauvegarder graphiquement !
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/la-sauvegarde-en-ligne-de-commandes">
La sauvegarde en ligne de commandes.
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/la-sauvegarde-sous-gnu-linux/sauvegarder-graphiquement">
<span class="arrow"></span>
<span class="next">Sauvegarder graphiquement !</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/la-sauvegarde-sous-gnu-linux.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 00:29:30 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/la-sauvegarde-sous-gnu-linux.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:18:32 GMT -->
</html>