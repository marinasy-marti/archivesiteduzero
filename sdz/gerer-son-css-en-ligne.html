<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/gerer-son-css-en-ligne.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 20:50:16 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/gerer-son-css-en-ligne.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:54:03 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Gérer son CSS en ligne</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/gerer-son-css-en-ligne.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Gérer son CSS en ligne</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#GrersonCSSenligne">Gérer son CSS en ligne</a><br/><a href="#Fonctionnement">Fonctionnement</a><br/><a href="#L039utilisationdelaBDD">L&#039;utilisation de la BDD</a><br/><a href="#criture">Écriture</a><br/><a href="#Codefinal">Code final</a><br/></div>
<a name="GrersonCSSenligne"></a><h2>Gérer son CSS en ligne</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/fonctionnement-35">
<span class="next">Fonctionnement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-586687" data-claire-element-id="586687">Dans ce tuto, vous allez réaliser un script PHP pendant que je siroterai un cocktail peinard je vous aiderai. Ce script permettra de changer facilement le CSS en ligne.</p><p id="r-586688" data-claire-element-id="586688">Connaissances requises :</p><ul id="r-586693" data-claire-element-id="586693"><li id="r-586690" data-claire-element-id="586690"><p id="r-586689" data-claire-element-id="586689">notion du CHMOD et écriture / lecture dans un fichier (<a href="http://www.siteduzero.com/tuto-3-172-1-lire-et-ecrire-dans-un-fichier.html">ici</a> pour ceux qui ne connaissent pas) ;</p></li><li id="r-586692" data-claire-element-id="586692"><p id="r-586691" data-claire-element-id="586691">PHP/MySQL, ça risque d'être utile. :p</p></li></ul>
</div><a name="Fonctionnement"></a><h2>Fonctionnement</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/l-utilisation-de-la-bdd">
<span class="next">L&#039;utilisation de la BDD</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-586694" data-claire-element-id="586694">Avant de vous lancer corps et âme dans la réalisation de ce script, regardons le fonctionnement et l'organisation que je vous propose :</p><ul id="r-586703" data-claire-element-id="586703"><li id="r-586696" data-claire-element-id="586696"><p id="r-586695" data-claire-element-id="586695">un fichier style.css dans laquelle sera placé... le CSS :p ;</p></li><li id="r-586698" data-claire-element-id="586698"><p id="r-586697" data-claire-element-id="586697">une page css.php où l'on affichera le fichier CSS et où l'on traitera les modifications ;</p></li><li id="r-586700" data-claire-element-id="586700"><p id="r-586699" data-claire-element-id="586699">une page modif.php, pour modifier le code ;</p></li><li id="r-586702" data-claire-element-id="586702"><p id="r-586701" data-claire-element-id="586701">une page rajout.html, quand on rajoutera du code.</p></li></ul><p id="r-586704" data-claire-element-id="586704">Voici la structure de la table SQL à créer :</p><pre id="r-586705" data-claire-element-id="586705"><code data-claire-semantic="sql">CREATE TABLE `css` (
  `id` tinyint(4) NOT NULL AUTO_INCREMENT,
  `commentaire` varchar(50) collate latin1_general_ci NOT NULL,
  `code` varchar(255) collate latin1_general_ci NOT NULL,
  KEY `id` (`id`)
)</code></pre><p id="r-586706" data-claire-element-id="586706">Commençons par la page css.php, dans laquelle on affichera le fichier CSS et on traitera les modifications :</p><pre id="r-586707" data-claire-element-id="586707"><code data-claire-semantic="html+php">&lt;?php
// -------------------------------------------
// On affiche le fichier
// -------------------------------------------
$fichier=fopen(&quot;style.css&quot;,&quot;r&quot;);
$compteur=1;
while (!feof($fichier)) // Tant que l'on n'est pas à la fin du fichier
        {
        $ligne=fgets($fichier);
        echo $compteur.'.'.nl2br($ligne);
        $compteur++;
        }
?&gt;</code></pre><aside id="r-586709" data-claire-element-id="586709" data-claire-semantic="information"><p id="r-586708" data-claire-element-id="586708">La fonction feof()<em>(end of files)</em> vérifie si l'on est à la fin du fichier, elle renvoie true si c'est le cas.</p></aside><p id="r-586710" data-claire-element-id="586710">Ce script affiche donc tout le contenu de la feuille de style.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne">Gérer son CSS en ligne</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/fonctionnement-35">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/l-utilisation-de-la-bdd">
L&#039;utilisation de la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/ecriture-1">
Écriture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/code-final-4">
Code final
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/l-utilisation-de-la-bdd">
<span class="next">L&#039;utilisation de la BDD</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="L039utilisationdelaBDD"></a><h2>L&#039;utilisation de la BDD</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/fonctionnement-35">
<span class="arrow"></span>
<span class="next">Fonctionnement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/ecriture-1">
<span class="next">Écriture</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<div id="r-586713" data-claire-element-id="586713" data-claire-semantic="question"><p id="r-586712" data-claire-element-id="586712">Mais pourquoi utiliser une base de données ? :euh:</p></div><p id="r-586714" data-claire-element-id="586714">Pour faciliter la gestion du code, vous allez voir.</p><p id="r-586715" data-claire-element-id="586715">Attaquons-nous au fichier rajout.html, il devra comporter un formulaire :</p><pre id="r-586716" data-claire-element-id="586716"><code data-claire-semantic="html">&lt;form method=&quot;POST&quot; action=&quot;css.php&quot;&gt;
Commentaires : &lt;input type=&quot;text&quot; name=&quot;commentaire&quot; size=25/&gt;&lt;br /&gt;
Code : &lt;br /&gt;&lt;textarea name=&quot;code&quot; cols=30 rows=8&gt;&lt;/textarea&gt;&lt;br /&gt;
&lt;input type=&quot;submit&quot; value=&quot;Rajouter&quot; name=&quot;rajout&quot;/&gt;</code></pre><p id="r-586717" data-claire-element-id="586717">Revenons dans le fichier css.php pour traiter ce formulaire :</p><pre id="r-586718" data-claire-element-id="586718"><code data-claire-semantic="html+php">&lt;?
mysql_connect(******,******,*******);// Connexion à la BDD
mysql_select_db(*******);// N'oubliez pas de remplacer les ***** 
// -------------------------------------------
// Vérif. 1 : Est-ce qu'on rajoute quelque chose ?
// -------------------------------------------
if(isset($_POST['rajout'])) 
{
        $commentaire=$_POST['commentaire'];
        $code=$_POST['code'];
        mysql_query(&quot;INSERT INTO css VALUES('','&quot;.$commentaire.&quot;','&quot;.$code.&quot;')&quot;);// On rajoute tout ça dans la base de données
}
 
 
// -------------------------------------------
// On affiche le fichier
// -------------------------------------------
$fichier=fopen(&quot;style.css&quot;,&quot;r&quot;);
$compteur=1;
while (!feof($fichier)) 
{
        $ligne=fgets($fichier);
        echo $compteur.'.'.nl2br($ligne);
        $compteur++;
}
mysql_close(*****);
?&gt;</code></pre><p id="r-586719" data-claire-element-id="586719">Enfin, la page modif.php permettra de modifier ces entrées :</p><pre id="r-586720" data-claire-element-id="586720"><code data-claire-semantic="html+php">&lt;form method=&quot;POST&quot; action=&quot;css.php&quot;&gt;
&lt;?php
mysql_connect(******,******,*******);// Connexion à la BDD
mysql_select_db(*******);// N'oubliez pas de remplacer les *****  
 
$retour=mysql_query('SELECT * FROM css');// On récupère les entrées
$id=0;
 
while ($donnees=mysql_fetch_array($retour))
{
        echo &quot;&lt;input size=25 type='text' value='&quot;.$donnees['commentaire'].&quot;' name='style[$id][commentaire]' /&gt;&quot;; // Le champ de texte du commentaire
        echo &quot;&lt;a href='css.php?supr=&quot;.$donnees['id'].&quot;'&gt;Supprimer&lt;/a&gt;&lt;br /&gt;&quot;; // Le lien pour supprimer un code   
        echo &quot;&lt;textarea name='style[$id][code]' cols=30 rows=8&gt;&quot;.$donnees['code'].&quot;&lt;/textarea&gt;&lt;br/&gt;&quot;; // Un textarea qui contiendra le code
        echo &quot;&lt;input type='hidden' name='style[$id][id]' value='&quot;.$donnees['id'].&quot;' /&gt;&quot;; // Un champ caché pour récupérer l'id du code
        echo &quot;&lt;br /&gt;&lt;br /&gt;&quot;;
        $id++;
}
mysql_close(*****);
?&gt;
&lt;input type=&quot;submit&quot; value=&quot;Modifier&quot; name=&quot;modifier&quot;/&gt;</code></pre><p id="r-586721" data-claire-element-id="586721">On a créé un tableau 'style' dans $_POST pour chaque code, regardons comment l'exploiter dans css.php :</p><pre id="r-586722" data-claire-element-id="586722"><code data-claire-semantic="html+php">&lt;?php
mysql_connect(******,******,*******);// Connexion à la BDD
mysql_select_db(*******);// N'oubliez pas de remplacer les ***** 
 
// -------------------------------------------
// Vérif. 1 : Est-ce qu'on rajoute quelque chose ?
// -------------------------------------------
if(isset($_POST['rajout'])) 
{
        $commentaire=$_POST['commentaire'];
        $code=$_POST['code'];
        mysql_query(&quot;INSERT INTO css VALUES('','&quot;.$commentaire.&quot;','&quot;.$code.&quot;')&quot;);
}
 
 
// -------------------------------------------
// Vérif. 2 : Est-ce que l'on modifie le code ?
// -------------------------------------------
if (isset($_POST['modifier'])) {
    $p = $_POST['style'];// On décale les tableaux d'un rang
        foreach($p as $key =&gt;$s)
        {
        
                $code=$s['code'];
                $commentaire=$s['commentaire'];
                $id=$s['id'];
                mysql_query( 'UPDATE css SET code=\''.$code.'\', commentaire=\''.$commentaire.'\' WHERE id='.$id.' ');
        }
}
// -------------------------------------------
// On affiche le fichier
// -------------------------------------------
$fichier=fopen(&quot;style.css&quot;,&quot;r&quot;);
$compteur=1;
while (!feof($fichier)) 
{
        $ligne=fgets($fichier);
        echo $compteur.'.'.nl2br($ligne);
        $compteur++;
}
mysql_close(*****);
?&gt;</code></pre><p id="r-586723" data-claire-element-id="586723">Et on rajoute un script pour supprimer un code :</p><pre id="r-586724" data-claire-element-id="586724"><code data-claire-semantic="html+php">&lt;?php
mysql_connect(******,******,*******);// Connexion à la BDD
mysql_select_db(*******);// N'oubliez pas de remplacer les ***** 
 
// -------------------------------------------
// Vérif. 1 : Est-ce qu'on rajoute quelque chose ?
// -------------------------------------------
if(isset($_POST['rajout'])) 
{
        $commentaire=$_POST['commentaire'];
        $code=$_POST['code'];
        mysql_query(&quot;INSERT INTO css VALUES('','&quot;.$commentaire.&quot;','&quot;.$code.&quot;')&quot;);
}
 
 
// -------------------------------------------
// Vérif. 2 : Est-ce que l'on modifie le code ?
// -------------------------------------------
if (isset($_POST['modifier'])) {
    $p = $_POST['style']; // On décale les tableaux d'un rang
        foreach($p as $key =&gt;$s)
        {
        
                $code=$s['code'];
                $commentaire=$s['commentaire'];
                $id=$s['id'];
                mysql_query( 'UPDATE css SET code=\''.$code.'\', commentaire=\''.$commentaire.'\' WHERE id='.$id.' ');
        }
}
// -------------------------------------------
// Vérif. 3 : On essaye de supprimer quelque chose ?
// -------------------------------------------
if (isset($_GET['supr'])) 
        {
        $id=$_GET['supr'];
        mysql_query( &quot;DELETE FROM css WHERE id=&quot;.$id.&quot; &quot;);
        }
 
// -------------------------------------------
// On affiche le fichier
// -------------------------------------------
$fichier=fopen(&quot;style.css&quot;,&quot;r&quot;);
$compteur=1;
while (!feof($fichier)) 
{
        $ligne=fgets($fichier);
        echo $compteur.'.'.nl2br($ligne);
        $compteur++;
}
mysql_close(*****);
?&gt;</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne">Gérer son CSS en ligne</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/fonctionnement-35">
Fonctionnement
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/l-utilisation-de-la-bdd">
L&#039;utilisation de la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/ecriture-1">
Écriture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/code-final-4">
Code final
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/fonctionnement-35">
<span class="arrow"></span>
<span class="next">Fonctionnement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/ecriture-1">
<span class="next">Écriture</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="criture"></a><h2>Écriture</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/l-utilisation-de-la-bdd">
<span class="arrow"></span>
<span class="next">L&#039;utilisation de la BDD</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/code-final-4">
<span class="next">Code final</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-586726" data-claire-element-id="586726">Maintenant, on va s'occuper de l'écriture du fichier.<br/> Nous allons l'ouvrir en mode « w », ce qui permet d'écraser tout le contenu :</p><pre id="r-586727" data-claire-element-id="586727"><code data-claire-semantic="html+php">&lt;?php
mysql_connect(******,******,*******);// Connexion à la BDD
mysql_select_db(*******);// N'oubliez pas de remplacer les ***** 
 
// -------------------------------------------
// Vérif. 1 : Est-ce qu'on rajoute quelque chose ?
// -------------------------------------------
if(isset($_POST['rajout'])) 
{
        $commentaire=$_POST['commentaire'];
        $code=$_POST['code'];
        mysql_query(&quot;INSERT INTO css VALUES('','&quot;.$commentaire.&quot;','&quot;.$code.&quot;')&quot;);
}
 
 
// -------------------------------------------
// Vérif. 2 : Est-ce que l'on modifie le code ?
// -------------------------------------------
if (isset($_POST['modifier'])) {
    $p = $_POST['style'];// On décale les tableaux d'un rang
        foreach($p as $key =&gt;$s)
        {
        
                $code=$s['code'];
                $commentaire=$s['commentaire'];
                $id=$s['id'];
                mysql_query( 'UPDATE css SET code=\''.$code.'\', commentaire=\''.$commentaire.'\' WHERE id='.$id.' ');
        }
}
// -------------------------------------------
// Vérif. 3 : On essaye de supprimer quelque chose ?
// -------------------------------------------
if (isset($_GET['supr'])) {
        $id=$_GET['supr'];
        mysql_query( &quot;DELETE FROM css WHERE id=&quot;.$id.&quot; &quot;);
        }
 
// -------------------------------------------
// On écrit dans le fichier
// -------------------------------------------
$fichier=fopen(&quot;../style.css&quot;,&quot;w&quot;); // On l'ouvre en mode « w »
$retour = mysql_query('SELECT * FROM css');
while ($donnees = mysql_fetch_array($retour))
        {
        $message .= $donnees['code'];
        $message .=&quot;\n&quot;;// Retour à la ligne
        }
fputs($fichier, $message);
fclose($fichier);
 
// -------------------------------------------
// On affiche le fichier
// -------------------------------------------
$fichier=fopen(&quot;style.css&quot;,&quot;r&quot;);
$compteur=1;
while (!feof($fichier)) 
{
        $ligne=fgets($fichier);
        echo $compteur.'.'.nl2br($ligne);
        $compteur++;
}
mysql_close(*****);
?&gt;</code></pre><p id="r-586728" data-claire-element-id="586728">N'oubliez pas d'ajouter des liens entre ces pages.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne">Gérer son CSS en ligne</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/fonctionnement-35">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/l-utilisation-de-la-bdd">
L&#039;utilisation de la BDD
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/ecriture-1">
Écriture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/code-final-4">
Code final
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/l-utilisation-de-la-bdd">
<span class="arrow"></span>
<span class="next">L&#039;utilisation de la BDD</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/code-final-4">
<span class="next">Code final</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Codefinal"></a><h2>Code final</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/ecriture-1">
<span class="arrow"></span>
<span class="next">Écriture</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-586730" data-claire-element-id="586730">Voila donc les trois pages au final :</p><p id="r-586731" data-claire-element-id="586731"><strong>css.php</strong></p><pre id="r-586732" data-claire-element-id="586732"><code data-claire-semantic="html+php">&lt;a href=&quot;modif.php&quot;&gt;Modifier le code&lt;/a&gt;
&lt;a href=&quot;rajout.html&quot;&gt;Rajouter une balise &lt;/a&gt;
&lt;?php
mysql_connect(******,******,*******);// Connexion à la BDD
mysql_select_db(*******);// N'oubliez pas de remplacer les ***** 
 
// -------------------------------------------
// Vérif. 1 : Est-ce qu'on rajoute quelque chose ?
// -------------------------------------------
if(isset($_POST['rajout'])) 
{
        $commentaire=$_POST['commentaire'];
        $code=$_POST['code'];
        mysql_query(&quot;INSERT INTO css VALUES('','&quot;.$commentaire.&quot;','&quot;.$code.&quot;')&quot;);
}
 
 
// -------------------------------------------
// Vérif. 2 : Est-ce que l'on modifie le code ?
// -------------------------------------------
if (isset($_POST['modifier'])) {
    $p = $_POST['style'];// On décale les tableaux d'un rang
        foreach($p as $key =&gt;$s)
        {
        
                $code=$s['code'];
                $commentaire=$s['commentaire'];
                $id=$s['id'];
                mysql_query( 'UPDATE css SET code=\''.$code.'\', commentaire=\''.$commentaire.'\' WHERE id='.$id.' ');
        }
}
// -------------------------------------------
// Vérif. 3 : On essaye de supprimer quelque chose ?
// -------------------------------------------
if (isset($_GET['supr'])) {
        $id=$_GET['supr'];
        mysql_query( &quot;DELETE FROM css WHERE id=&quot;.$id.&quot; &quot;);
        }
 
// -------------------------------------------
// On écrit dans le fichier
// -------------------------------------------
$fichier=fopen(&quot;style.css&quot;,&quot;w&quot;); // On l'ouvre en mode « w »
$retour = mysql_query('SELECT * FROM css');
while ($donnees = mysql_fetch_array($retour))
        {
        $message .= $donnees['code'];
        $message .=&quot;\n&quot;;// Retour à la ligne
        }
fputs($fichier, $message);
fclose($fichier);
 
// -------------------------------------------
// On affiche le fichier
// -------------------------------------------
$fichier=fopen(&quot;style.css&quot;,&quot;r&quot;);
$compteur=1;
while (!feof($fichier)) 
{
        $ligne=fgets($fichier);
        echo $compteur.'.'.nl2br($ligne);
        $compteur++;
}
mysql_close(*****);
?&gt;</code></pre><p id="r-586733" data-claire-element-id="586733"><strong>rajout.html</strong></p><pre id="r-586734" data-claire-element-id="586734"><code data-claire-semantic="html">&lt;a href=&quot;css.php&quot;&gt;Index css&lt;/a&gt;
&lt;code type=&quot;html&quot;&gt;&lt;form method=&quot;POST&quot; action=&quot;css.php&quot;&gt;
Commentaires : &lt;input type=&quot;text&quot; name=&quot;commentaire&quot; size=25/&gt;&lt;br /&gt;
Code : &lt;br /&gt;&lt;textarea name=&quot;code&quot; cols=30 rows=8&gt;&lt;/textarea&gt;&lt;br /&gt;
&lt;input type=&quot;submit&quot; value=&quot;Rajouter&quot; name=&quot;rajout&quot;/&gt;</code></pre><p id="r-586735" data-claire-element-id="586735"><strong>modif.php</strong></p><pre id="r-586736" data-claire-element-id="586736"><code data-claire-semantic="html+php">&lt;a href=&quot;css.php&quot;&gt;Index css&lt;/a&gt;
&lt;a href=&quot;rajout.html&quot;&gt;Rajouter une balise &lt;/a&gt;
&lt;form method=&quot;POST&quot; action=&quot;css.php&quot;&gt;
&lt;?php
mysql_connect(******,******,*******);// Connexion à la BDD
mysql_select_db(*******);// N'oubliez pas de remplacer les *****  
 
$retour=mysql_query('SELECT * FROM css');// On récupère les entrées
$id=0;
 
while ($donnees=mysql_fetch_array($retour))
{
        echo &quot;&lt;input size=25 type='text' value='&quot;.$donnees['commentaire'].&quot;' name='style[$id][commentaire]' /&gt;&quot;; // Le champ de texte du commentaire
        echo &quot;&lt;a href='css.php?supr=&quot;.$donnees['id'].&quot;'&gt;Supprimer&lt;/a&gt;&lt;br /&gt;&quot;; // Le lien pour supprimer un code   
        echo &quot;&lt;textarea name='style[$id][code]' cols=30 rows=8&gt;&quot;.$donnees['code'].&quot;&lt;/textarea&gt;&lt;br/&gt;&quot;; // Un textarea qui contiendra le code
        echo &quot;&lt;input type='hidden' name='style[$id][id]' value='&quot;.$donnees['id'].&quot;' /&gt;&quot;; // Un champ caché pour récupérer l'id du code
        echo &quot;&lt;br /&gt;&lt;br /&gt;&quot;;
        $id++;
}
mysql_close(*****);
?&gt;
&lt;input type=&quot;submit&quot; value=&quot;Modifier&quot; name=&quot;modifier&quot;/&gt;</code></pre><p id="r-586737" data-claire-element-id="586737">Et vous devriez obtenir quelque chose comme ça :<br/><strong>css.php</strong></p><figure id="r-586739" data-claire-element-id="586740"><img id="r-586738" data-claire-element-id="586738" src="medias/uploads.siteduzero.com_files_47001_48000_47855.jpg" alt="Image utilisateur"/></figure><p id="r-586741" data-claire-element-id="586741"><strong>rajout.html</strong></p><figure id="r-586743" data-claire-element-id="586744"><img id="r-586742" data-claire-element-id="586742" src="medias/uploads.siteduzero.com_files_47001_48000_47857.jpg" alt="Image utilisateur"/></figure><p id="r-586745" data-claire-element-id="586745"><strong>modif.php</strong></p><figure id="r-586747" data-claire-element-id="586748"><img id="r-586746" data-claire-element-id="586746" src="medias/uploads.siteduzero.com_files_47001_48000_47859.jpg" alt="Image utilisateur"/></figure><p id="r-586749" data-claire-element-id="586749">Et voilà, ce tutoriel touche à sa fin.<br/> Amusez-vous bien à changer votre CSS directement depuis votre site. :p</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne">Gérer son CSS en ligne</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/fonctionnement-35">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/l-utilisation-de-la-bdd">
L&#039;utilisation de la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/ecriture-1">
Écriture
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/code-final-4">
Code final
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/gerer-son-css-en-ligne/ecriture-1">
<span class="arrow"></span>
<span class="next">Écriture</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/gerer-son-css-en-ligne.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 20:50:28 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/gerer-son-css-en-ligne.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:54:04 GMT -->
</html>