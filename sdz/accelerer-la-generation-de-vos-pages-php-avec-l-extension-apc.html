<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 08:15:15 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:27:50 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Accélérer la génération de vos pages PHP avec l&#039;extension APC</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Accélérer la génération de vos pages PHP avec l&#039;extension APC</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#AcclrerlagnrationdevospagesPHPavecl039extensionAPC">Accélérer la génération de vos pages PHP avec l&#039;extension APC</a><br/><a href="#Prsentationdel039extensionAPC">Présentation de l&#039;extension APC</a><br/><a href="#InstallationsousLinux">Installation sous Linux</a><br/><a href="#InstallationsousWindows">Installation sous Windows</a><br/><a href="#Configurationdel039extension">Configuration de l&#039;extension</a><br/><a href="#Lecacheutilisateur">Le cache utilisateur</a><br/></div>
<a name="AcclrerlagnrationdevospagesPHPavecl039extensionAPC"></a><h2>Accélérer la génération de vos pages PHP avec l&#039;extension APC</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/presentation-de-l-extension-apc">
<span class="next">Présentation de l&#039;extension APC</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-420338" data-claire-element-id="420338">Ce tutoriel présente rapidement le moyen le plus simple d'accélérer la génération de ses scripts PHP : le &quot;cache d'OPCodes&quot;.</p><p id="r-420339" data-claire-element-id="420339">Nous verrons comment installer l'extension APC de PHP et comment la configurer, et nous découvrirons son &quot;cache utilisateur&quot;.</p><aside id="r-420341" data-claire-element-id="420341" data-claire-semantic="warning"><p id="r-420340" data-claire-element-id="420340">La plupart des hébergements mutualisés ne proposent pas cette extension ( :( ). Si vous voulez l'utiliser, il vous faut soit demander à votre hébergeur de l'installer, soit disposer de votre propre serveur dédié.</p></aside>
</div><a name="Prsentationdel039extensionAPC"></a><h2>Présentation de l&#039;extension APC</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-linux-7">
<span class="next">Installation sous Linux</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-420342" data-claire-element-id="420342">L'extension APC (<strong>A</strong><em>lternative</em><strong>P</strong><em>HP</em><strong>C</strong><em>ache</em>) est un système de cache avancé permettant d'accélérer la génération de vos pages PHP et une économie de travail sur le serveur. C'est ce que l'on appelle un cache d'OPCodes.</p><p id="r-420343" data-claire-element-id="420343">Pour faire simple, l'OPCode est le code intermédiaire compilé par PHP pour exécuter vos pages. Un cache d'OPCodes permet donc de ne plus &quot;compiler&quot; systématiquement chaque page appelée en fournissant une page déjà compilée et stockée dans la mémoire vive (RAM) de votre serveur.</p><p id="r-420344" data-claire-element-id="420344">Par exemple, admettons que j'exécute ce code :</p><pre id="r-420345" data-claire-element-id="420345"><code data-claire-semantic="html+php">&lt;?php
$variable = 'BONJOUR';
echo $variable;
?&gt;</code></pre><p id="r-420346" data-claire-element-id="420346">L'OPCode généré ressemblera à quelque chose du genre :</p><pre id="r-420347" data-claire-element-id="420347"><code>ASSIGN !0, 'BONJOUR'
ECHO   $0</code></pre><aside id="r-420349" data-claire-element-id="420349" data-claire-semantic="warning"><p id="r-420348" data-claire-element-id="420348">Puisque la mémoire vive d'un ordinateur est vidée lorsqu'on l'éteint, le cache stocké par APC sera vidé à chaque redémarrage du serveur.</p></aside><p id="r-420350" data-claire-element-id="420350">En plus de mettre en cache l'OPCode de vos pages, APC fournit un &quot;cache utilisateur&quot; présenté dans la dernière partie de ce tuto.</p><p id="r-420351" data-claire-element-id="420351">Cette extension n'est pas intégrée nativement à PHP, voyons donc maintenant comment l'installer et la configurer sur votre serveur.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc">Accélérer la génération de vos pages PHP avec l&#039;extension APC</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/presentation-de-l-extension-apc">
Présentation de l&#039;extension APC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-linux-7">
Installation sous Linux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-windows-10">
Installation sous Windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/configuration-de-l-extension">
Configuration de l&#039;extension
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/le-cache-utilisateur">
Le cache utilisateur
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-linux-7">
<span class="next">Installation sous Linux</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="InstallationsousLinux"></a><h2>Installation sous Linux</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/presentation-de-l-extension-apc">
<span class="arrow"></span>
<span class="next">Présentation de l&#039;extension APC</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-windows-10">
<span class="next">Installation sous Windows</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-420353" data-claire-element-id="420353">Ce tutoriel a été testé sous Ubuntu 11.04 et devrait fonctionner pour les versions antérieures.</p><p id="r-420354" data-claire-element-id="420354">Il vous suffit d'installer le paquet php-apc :</p><pre id="r-420355" data-claire-element-id="420355"><code data-claire-semantic="console">sudo apt-get install php-apc</code></pre><p id="r-420356" data-claire-element-id="420356">Une fois l'installation terminée, vous devez modifier le php.ini pour activer l'extension : le php.ini se trouve par défaut dans <strong>/etc/php5/apache2/php.ini</strong>.</p><p id="r-420357" data-claire-element-id="420357">Ouvrez donc ce fichier en mode administrateur avec votre éditeur de texte préféré.<br/> Pour les novices, tapez :</p><pre id="r-420358" data-claire-element-id="420358"><code data-claire-semantic="console">sudo gedit /etc/php5/apache2/php.ini</code></pre><p id="r-420359" data-claire-element-id="420359">ou pour ceux qui n'ont pas gedit :</p><pre id="r-420360" data-claire-element-id="420360"><code data-claire-semantic="console">sudo nano /etc/php5/apache2/php.ini</code></pre><p id="r-420361" data-claire-element-id="420361">Et cherchez l'endroit du fichier où il est écrit <code><strong>Module settings</strong></code>.</p><p id="r-420362" data-claire-element-id="420362">Juste avant ce <code>Module settings</code>, écrivez <code><strong>extension=apc.so</strong></code> : cela permet d'indiquer à Apache qu'il doit utiliser cette extension.</p><p id="r-420363" data-claire-element-id="420363">Et juste après le <code>Module settings</code>, écrivez <br/><code><strong><br/>[APC] apc.enabled=1</strong></code></p><p id="r-420364" data-claire-element-id="420364">Vous devez donc avoir un php.ini qui ressemble à ça :</p><figure id="r-420366" data-claire-element-id="420367"><img id="r-420365" data-claire-element-id="420365" src="medias/uploads.siteduzero.com_files_145001_146000_145946.png" alt="Image utilisateur"/></figure><p id="r-420368" data-claire-element-id="420368">Redémarrez apache (en entrant la commande <code data-claire-semantic="console">/etc/init.d/apache2 restart</code>, ou mieux : un <code data-claire-semantic="console">sudo service apache2 restart</code>) et faites un <code><strong>phpinfo()</strong></code> ; vous devriez voir ces informations affichées quelque part :</p><figure id="r-420370" data-claire-element-id="420371"><img id="r-420369" data-claire-element-id="420369" src="medias/uploads.siteduzero.com_files_145001_146000_145383.png" alt="Image utilisateur"/></figure><p id="r-420372" data-claire-element-id="420372">Si c'est le cas, l'extension est bien installée et activée.</p><p id="r-420373" data-claire-element-id="420373">Vous pouvez donc passer à la phase de configuration, décrite ci-après.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc">Accélérer la génération de vos pages PHP avec l&#039;extension APC</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/presentation-de-l-extension-apc">
Présentation de l&#039;extension APC
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-linux-7">
Installation sous Linux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-windows-10">
Installation sous Windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/configuration-de-l-extension">
Configuration de l&#039;extension
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/le-cache-utilisateur">
Le cache utilisateur
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/presentation-de-l-extension-apc">
<span class="arrow"></span>
<span class="next">Présentation de l&#039;extension APC</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-windows-10">
<span class="next">Installation sous Windows</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="InstallationsousWindows"></a><h2>Installation sous Windows</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-linux-7">
<span class="arrow"></span>
<span class="next">Installation sous Linux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/configuration-de-l-extension">
<span class="next">Configuration de l&#039;extension</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-420375" data-claire-element-id="420375">Pour installer l'extension sous Windows, c'est un poil compliqué : avant, on pouvait récupérer le fichier dll directement sur le site de PHP dédié (pecl4win.php.net), mais celui-ci est fermé depuis pas mal de temps. Maintenant, il faut se débrouiller pour trouver la DLL sur internet. Un développeur de PHP fournit heureusement une page de téléchargement d'extensions PHP précompilées pour windows : <a href="http://downloads.php.net/pierre/">http://downloads.php.net/pierre/</a>.</p><p id="r-420376" data-claire-element-id="420376">Sur ce site, on vous propose plusieurs liens pour APC. Vous devez choisir le bon fichier en fonction de votre version de PHP (par exemple, php_apc-3.0.19-5.2-Win32-VC6-x86.zip est une version d'APC pour PHP 5.2). Je ne vous conseille pas de fichier en particulier, étant donné que cette page est amenée à changer régulièrement. Faites un phpinfo() et regardez dans les lignes Compiler et Architecture, par exemple : MSVC6 (Visual C++ 6.0) et x86. Basez-vous sur ces informations pour choisir le bon ficher DLL, et si ça ne marche pas, n'hésitez pas à essayer avec d'autres DLL.<br/> Ensuite, copiez ce fichier dans le dossier contenant les extensions de PHP.</p><aside id="r-420378" data-claire-element-id="420378" data-claire-semantic="information"><p id="r-420377" data-claire-element-id="420377">Si vous êtes sous WAMP, vous pouvez y accéder en allant dans son dossier d'installation. Pour ce faire, allez dans le dossier www, accédez au dossier parent, puis rendez-vous dans le dossier <strong>bin/php/php-5.x.x/ext/</strong>.</p></aside><p id="r-420379" data-claire-element-id="420379">Ensuite, rendez-vous dans votre fichier de configuration php.ini : si vous utilisez WAMP, faites un clic gauche sur l'icône dans la barre des tâches, survolez PHP, et cliquez sur php.ini.</p><p id="r-420380" data-claire-element-id="420380">Cherchez l'endroit du fichier où les extensions sont activées, et mettez-vous juste à la dernière ligne avant <code><strong>Module Settings</strong></code>. Cela ressemble à ça :</p><figure id="r-420382" data-claire-element-id="420383"><img id="r-420381" data-claire-element-id="420381" src="medias/uploads.siteduzero.com_files_145001_146000_145382.png" alt="php.ini"/></figure><p id="r-420384" data-claire-element-id="420384">Ecrivez ceci :</p><pre id="r-420385" data-claire-element-id="420385"><code>extension=php_apc.dll</code></pre><p id="r-420386" data-claire-element-id="420386">Puis écrivez ceci juste en dessous du <code>Module settings</code> :</p><pre id="r-420387" data-claire-element-id="420387"><code>[APC]
apc.enabled=1</code></pre><p id="r-420388" data-claire-element-id="420388">Vous venez d'activer l'extension.</p><p id="r-420389" data-claire-element-id="420389">Maintenant, <strong>redémarrez tous les services</strong>, et faites un <code><strong>phpinfo()</strong></code> : vous devriez voir affiché quelque part ces informations :</p><figure id="r-420391" data-claire-element-id="420392"><img id="r-420390" data-claire-element-id="420390" src="medias/uploads.siteduzero.com_files_145001_146000_145383.png" alt="Image utilisateur"/></figure><p id="r-420393" data-claire-element-id="420393">Si c'est le cas, l'extension fonctionne !</p><p id="r-420394" data-claire-element-id="420394">Vous pouvez maintenant passer à la phase de configuration.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc">Accélérer la génération de vos pages PHP avec l&#039;extension APC</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/presentation-de-l-extension-apc">
Présentation de l&#039;extension APC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-linux-7">
Installation sous Linux
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-windows-10">
Installation sous Windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/configuration-de-l-extension">
Configuration de l&#039;extension
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/le-cache-utilisateur">
Le cache utilisateur
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-linux-7">
<span class="arrow"></span>
<span class="next">Installation sous Linux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/configuration-de-l-extension">
<span class="next">Configuration de l&#039;extension</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Configurationdel039extension"></a><h2>Configuration de l&#039;extension</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-windows-10">
<span class="arrow"></span>
<span class="next">Installation sous Windows</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/le-cache-utilisateur">
<span class="next">Le cache utilisateur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-420396" data-claire-element-id="420396">Configurons maintenant votre extension APC fraîchement installée.<br/><a href="http://fr.php.net/manual/fr/apc.configuration.php">La documentation PHP sur APC</a> nous dit que :</p><p id="r-420397" data-claire-element-id="420397"><cite>Citation : Documentation PHP</cite></p><blockquote id="r-420399" data-claire-element-id="420399"><p id="r-420398" data-claire-element-id="420398">Il y a deux décisions importantes que vous devez faire. D'abord, la quantité de mémoire partagée que vous voulez allouer à APC et ensuite, si vous voulez qu'APC vérifie si un fichier a été modifié à chaque demande.</p></blockquote><p id="r-420400" data-claire-element-id="420400">Vous devez donc décider de combien de mémoire vive dispose l'extension. Pour la définir, rendez-vous dans votre php.ini à l'endroit où vous avez écrit <code><strong>apc.enabled=1</strong></code>, et écrivez à la suite :</p><pre id="r-420401" data-claire-element-id="420401"><code>apc.shm_size={mémoire en MB}</code></pre><p id="r-420402" data-claire-element-id="420402">La taille par défaut est de 30 Mo : je vous conseille de l'augmenter. Tout dépend de la RAM dont vous disposez sur votre serveur, mais si vous en avez beaucoup, vous pouvez mettre plus de 100 Mo sans problème.</p><p id="r-420403" data-claire-element-id="420403">La seconde option à paramétrer permet de définir si APC doit vérifier à chaque génération de page que la page PHP mise en cache n'a pas changé : le paramètre à définir est <code><strong>apc.stat</strong></code> :</p><p id="r-420404" data-claire-element-id="420404"><cite>Citation : Documentation PHP</cite></p><blockquote id="r-420406" data-claire-element-id="420406"><p id="r-420405" data-claire-element-id="420405">Par défaut, APC vérifie le script à <strong>chaque</strong> demande pour voir s'il a été modifié ou non.<br/> S'il a été modifié, il sera compilé à nouveau et la nouvelle version sera mise en cache.<br/> En désactivant cette option, aucune vérification n'aura lieu. Cela signifie que si vous voulez activer les modifications, vous devez redémarrer le serveur web.<br/> Sur un <strong>serveur de production</strong> où <strong>vous modifiez rarement le code</strong>, le fait de désactiver cette option permet de <strong>gagner en performances</strong> de manière significative.</p></blockquote><p id="r-420407" data-claire-element-id="420407">Je n'aurais pas mieux dit :) . En gros, si vous modifiez très régulièrement votre code, mettez un <code><strong>apc.stat=1</strong></code>. Si vous êtes sur un serveur de production et que vos pages PHP sont modifiées peu souvent, mettez <code><strong>0</strong></code>, cela améliorera les performances.</p><p id="r-420408" data-claire-element-id="420408">Votre php.ini doit donc ressembler à peu près à ceci :</p><pre id="r-420409" data-claire-element-id="420409"><code>[APC]
apc.enabled=1
apc.shm_size=128
apc.stat=1</code></pre><p id="r-420410" data-claire-element-id="420410">Je vous laisse découvrir comme des grands <a href="http://fr.php.net/manual/fr/apc.configuration.php">les autres options de configuration d'APC dans la doc de PHP</a>. Ces options sont facultatives, mais il se peut que vous en ayez besoin un jour.</p><p id="r-420411" data-claire-element-id="420411">Vous pouvez aussi obtenir plusieurs informations sur l'extension en <a href="http://pecl.php.net/package/APC">téléchargeant la dernière version d'APC</a>, et en mettant sur votre serveur web la page apc.php située dans l'archive que vous venez de télécharger : vous pourrez ainsi voir la quantité de mémoire utilisée et disponible pour l'extension, ainsi que plusieurs autres informations pratiques.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc">Accélérer la génération de vos pages PHP avec l&#039;extension APC</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/presentation-de-l-extension-apc">
Présentation de l&#039;extension APC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-linux-7">
Installation sous Linux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-windows-10">
Installation sous Windows
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/configuration-de-l-extension">
Configuration de l&#039;extension
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/le-cache-utilisateur">
Le cache utilisateur
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-windows-10">
<span class="arrow"></span>
<span class="next">Installation sous Windows</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/le-cache-utilisateur">
<span class="next">Le cache utilisateur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lecacheutilisateur"></a><h2>Le cache utilisateur</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/configuration-de-l-extension">
<span class="arrow"></span>
<span class="next">Configuration de l&#039;extension</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-420413" data-claire-element-id="420413">Le cache utilisateur est un des gros points fort de l'extension APC.</p><p id="r-420414" data-claire-element-id="420414">Vous devez normalement savoir que pour mettre en cache une information en PHP, on utilise généralement un fichier .txt : ce type de fichier est stocké sur le disque dur, le temps d'accès au fichier est donc relativement long.</p><p id="r-420415" data-claire-element-id="420415"><strong>APC, lui, permet de mettre en cache des variables directement dans la mémoire vive de votre serveur</strong>, ce qui offre des temps d'accès à l'information beaucoup plus faibles, vos scripts s'exécutent donc plus rapidement si vous l'utilisez :) .</p><p id="r-420416" data-claire-element-id="420416">Son utilisation est très simple, vous disposez en effet de trois fonctions : <code><strong>apc_add</strong></code>, <code><strong>apc_fetch</strong></code>, et <code><strong>apc_delete</strong></code>.</p><p id="r-420417" data-claire-element-id="420417">La première permet de mettre en cache une variable dans la RAM ; la deuxième, de récupérer une valeur mise en cache précédemment ; et la troisième, d'en supprimer une.</p><p id="r-420418" data-claire-element-id="420418">Exemple :</p><pre id="r-420419" data-claire-element-id="420419"><code data-claire-semantic="html+php">&lt;?php

$nombreMembres = 200000; // Par exemple, le nombre de membres du site
apc_add('nombreMembres', $nombreMembres); // On met en cache la variable
echo apc_fetch('nombreMembres'); // Affiche 200000
apc_delete('nombreMembres'); // On supprime la variable du cache (facultatif)

?&gt;</code></pre><p id="r-420420" data-claire-element-id="420420">On peut imaginer créer par exemple un module de mise en cache basé sur ces fonctions (le cache serait ainsi accessible directement en mémoire).</p><aside id="r-420422" data-claire-element-id="420422" data-claire-semantic="information"><p id="r-420421" data-claire-element-id="420421">La différence entre <code><strong>apc_add()</strong></code> et <code><strong>apc_store()</strong></code> réside dans le fait que <code><strong>apc_add()</strong></code> met la variable en cache uniquement si elle ne s'y trouve pas déjà, alors que <code><strong>apc_store()</strong></code> écrase les éventuelles données mises en cache précédemment.</p></aside><p id="r-420423" data-claire-element-id="420423">Concernant la fonction <code><strong>apc_cache_info()</strong></code>, je vous laisse la découvrir <a href="http://www.php.net/manual/fr/function.apc-cache-info.php">dans la doc de PHP</a>.</p><p id="r-420424" data-claire-element-id="420424">Le temps de génération de vos pages devrait maintenant décroître significativement sur votre site, vos scripts étant mis en cache dans la RAM de votre serveur.<br/> Le gain de temps peut aller jusqu'à 50% selon les pages !<br/> À noter que PHP6 devrait intégrer un tel système de cache nativement.</p><p id="r-420425" data-claire-element-id="420425">Liens</p><ul id="r-420432" data-claire-element-id="420432"><li id="r-420427" data-claire-element-id="420427"><p id="r-420426" data-claire-element-id="420426"><a href="http://fr.php.net/apc">La doc</a></p></li><li id="r-420429" data-claire-element-id="420429"><p id="r-420428" data-claire-element-id="420428"><a href="http://julien-pauli.developpez.com/tutoriels/php/apc/">Tutoriel sur developpez.com</a></p></li><li id="r-420431" data-claire-element-id="420431"><p id="r-420430" data-claire-element-id="420430"><a href="http://www.siteduzero.com/tutoriel-3-61977-upload-via-l-extension-apc-de-php.html">Upload de fichiers via l'extension APC</a> (Site du Zér0)</p></li></ul><p id="r-420433" data-claire-element-id="420433">Pour finir, il existe d'autres systèmes semblables (par exemple <a href="http://www.eaccelerator.net/">eAccelerator</a> et <a href="http://xcache.lighttpd.net/">xCache</a>), qui ont des performances comparables.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc">Accélérer la génération de vos pages PHP avec l&#039;extension APC</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/presentation-de-l-extension-apc">
Présentation de l&#039;extension APC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-linux-7">
Installation sous Linux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/installation-sous-windows-10">
Installation sous Windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/configuration-de-l-extension">
Configuration de l&#039;extension
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/le-cache-utilisateur">
Le cache utilisateur
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc/configuration-de-l-extension">
<span class="arrow"></span>
<span class="next">Configuration de l&#039;extension</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 08:15:17 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/accelerer-la-generation-de-vos-pages-php-avec-l-extension-apc.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:27:51 GMT -->
</html>