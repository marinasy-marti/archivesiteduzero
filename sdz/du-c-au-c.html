<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/du-c-au-c.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 08:09:06 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/du-c-au-c.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:27:11 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Du C au C++</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/du-c-au-c.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Du C au C++</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#DuCauC">Du C au C++</a><br/><a href="#PremierprogrammeCaveccoutetcin">Premier programme C++ avec cout et cin</a><br/><a href="#Configurerl039IDEpourleC">Configurer l&#039;IDE pour le C++</a><br/><a href="#AnalysedupremiercodesourceC">Analyse du premier code source C++</a><br/><a href="#Lefluxdesortiecout">Le flux de sortie cout</a><br/><a href="#Lefluxd039entrecin">Le flux d&#039;entrée cin</a><br/><a href="#Nouveautspourlesvariables">Nouveautés pour les variables</a><br/><a href="#Letypebool">Le type bool</a><br/><a href="#Lesdclarationsdevariables">Les déclarations de variables</a><br/><a href="#Lesallocationsdynamiques">Les allocations dynamiques</a><br/><a href="#Letypedefautomatique">Le typedef automatique</a><br/><a href="#Lesrfrences">Les références</a><br/><a href="#Nouveautspourlesfonctions">Nouveautés pour les fonctions</a><br/><a href="#Desvaleurspardfautpourlesparamtres">Des valeurs par défaut pour les paramètres</a><br/><a href="#Lasurchargedesfonctions">La surcharge des fonctions</a><br/><a href="#Lesfonctionsinline">Les fonctions inline</a><br/></div>
<a name="DuCauC"></a><h2>Du C au C++</h2><div class="content" role="article">
<p id="r-204558" data-claire-element-id="204558">Vous programmez en C et vous souhaitez vous mettre au C++ ?<br/> Ce tutoriel présente une introduction au C++ pour ceux qui connaissent déjà la programmation en C. Il répond notamment aux questions suivantes :</p><ul id="r-204563" data-claire-element-id="204563"><li id="r-204560" data-claire-element-id="204560"><p id="r-204559" data-claire-element-id="204559">Comment afficher et saisir du texte en console en C++ ?</p></li><li id="r-204562" data-claire-element-id="204562"><p id="r-204561" data-claire-element-id="204561">Quelles nouveautés ont été introduites pour les variables ? Et les fonctions ?</p></li></ul><aside id="r-204565" data-claire-element-id="204565" data-claire-semantic="information"><p id="r-204564" data-claire-element-id="204564">Ce tutoriel est constitué de chapitres issus du <a href="http://www.siteduzero.com/tutoriel-3-11406-apprenez-a-programmer-en-c.html">cours C++ du Site du Zéro</a>, avant qu'il ne soit entièrement adapté pour être lisible par des débutants en programmation.</p></aside>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="PremierprogrammeCaveccoutetcin"></a><h2>Premier programme C++ avec cout et cin</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
<span class="next">Configurer l&#039;IDE pour le C++</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-204566" data-claire-element-id="204566">Ce chapitre sera assez simple : nous verrons quelles techniques on utilise en C++ pour afficher du texte à l'écran (dans une console) et comment on récupère du texte saisi au clavier. Vous allez voir que c'est assez différent ce qu'on connaissait en C avec <em>printf </em>et <em>scanf</em>.</p>
</div><a name="Configurerl039IDEpourleC"></a><h2>Configurer l&#039;IDE pour le C++</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">
<span class="arrow"></span>
<span class="next">Premier programme C++ avec cout et cin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
<span class="next">Analyse du premier code source C++</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-configurer-l-ide-pour-le-c" data-claire-element-id="204582">Configurer l'IDE pour le C++</h4><p id="r-204567" data-claire-element-id="204567">Jusqu'ici, vous n'avez créé dans votre IDE que des projets en C.<br/> Or, en C++ on utilise un autre compilateur. Par exemple, il y a gcc qui est un compilateur C, et g++ qui est un compilateur C++. Il va donc falloir dire à votre IDE que vous allez faire du C++, sinon il appellera le mauvais compilateur (et là ça risque pas de marcher :-° ).</p><p id="r-204568" data-claire-element-id="204568">Lancez donc votre IDE favori. Pour ma part, vous l'aurez compris dans les chapitres précédents, je travaille principalement sous Code::Blocks. Si vous avez un autre IDE comme Visual C++ ou Dev C++ ça marche aussi ;)</p><p id="r-204569" data-claire-element-id="204569">Créez un nouveau projet de type console (eh oui, on retourne à la console pour faire nos expériences) et pensez à bien sélectionner C++.</p><figure id="r-204571" data-claire-element-id="204572"><img id="r-204570" data-claire-element-id="204570" src="medias/uploads.siteduzero.com_files_46001_47000_46644.png" alt="Nouveau projet C++"/></figure><p id="r-204573" data-claire-element-id="204573"><em>Création d'un nouveau projet. Veillez à bien sélectionner C++</em></p><aside id="r-204575" data-claire-element-id="204575" data-claire-semantic="information"><p id="r-204574" data-claire-element-id="204574">Si vous avez Dev C++ la manipulation est la même, je ne vous refais pas de screenshot vous êtes grands maintenant ^^ <br/> Sous Visual C++, le projet est par défaut compilé en C++, vous n'aurez donc pas besoin de spécifier quoi que ce soit.</p></aside><p id="r-204576" data-claire-element-id="204576">Cliquez sur &quot;Create&quot; pour créer le nouveau projet.<br/> Code::Blocks crée un premier fichier nommé main.cpp dans le projet avec quelques premières lignes de code C++.</p><aside id="r-204578" data-claire-element-id="204578" data-claire-semantic="information"><p id="r-204577" data-claire-element-id="204577">En C++, vos fichiers .c ont l'extension .cpp. Les fichiers .h, eux, gardent, l'extension .h.<br/> Certains trouvent cela illogique et ont choisi à la place d'utiliser .cc (pour les sources C++) et .hh (pour les headers C++). Ne soyez donc pas surpris par ce type de notation ;)</p></aside><p id="r-204579" data-claire-element-id="204579">Voici le code de base que nous propose Code::Blocks dans notre nouveau projet :</p><pre id="r-204580" data-claire-element-id="204580"><code data-claire-semantic="cpp">#include &lt;iostream&gt;

int main()
{
        std::cout &lt;&lt; &quot;Hello world!&quot; &lt;&lt; std::endl;
        return 0;
}</code></pre><p id="r-204581" data-claire-element-id="204581">Si vous avez un autre IDE, supprimez le code qui a été généré et utilisez celui-ci à la place pour qu'on soit sûrs de travailler sur le même code ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">
<span class="arrow"></span>
<span class="next">Premier programme C++ avec cout et cin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
<span class="next">Analyse du premier code source C++</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="AnalysedupremiercodesourceC"></a><h2>Analyse du premier code source C++</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
<span class="arrow"></span>
<span class="next">Configurer l&#039;IDE pour le C++</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
<span class="next">Le flux de sortie cout</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-analyse-du-premier-code-source-c" data-claire-element-id="204603">Analyse du premier code source C++</h4><p id="r-204583" data-claire-element-id="204583">Intéressons-nous maintenant à chacune de ces lignes de code et voyons ce qui change pour le moment par rapport au C.</p><h5 id="r-include-1" data-claire-element-id="204593">Include</h5><pre id="r-204584" data-claire-element-id="204584"><code data-claire-semantic="cpp">#include &lt;iostream&gt;</code></pre><p id="r-204585" data-claire-element-id="204585">On reconnaît là une bonne vieille directive de préprocesseur.</p><p id="r-204586" data-claire-element-id="204586">2 choses :</p><ul id="r-204591" data-claire-element-id="204591"><li id="r-204588" data-claire-element-id="204588"><p id="r-204587" data-claire-element-id="204587">Ce qui choque tout d'abord, c'est qu'<strong>il n'y a pas d'extension .h</strong>. En effet, en C++ les fichiers d'en-tête standard ne possèdent plus d'extension .h, mais vous verrez qu'il y a des exceptions (des gens qui n'ont pas encore fait l'évolution :p ).</p></li><li id="r-204590" data-claire-element-id="204590"><p id="r-204589" data-claire-element-id="204589">D'autre part, la directive d'inclusion n'est plus la même. Ici, elle s'appelle iostream, ce qui signifie &quot;flux d'entrée-sortie&quot;. Oubliez stdlib et stdio, ce sont des en-têtes du C, on ne les utilise plus en C++.</p></li></ul><p id="r-204592" data-claire-element-id="204592">On inclut donc ici la librairie iostream qui contient les outils nécessaires pour afficher du texte dans la console et récupérer la saisie au clavier.</p><h5 id="r-fonction-main" data-claire-element-id="204598">Fonction main()</h5><pre id="r-204594" data-claire-element-id="204594"><code data-claire-semantic="cpp">int main()
{
    // ...
    return 0;
}</code></pre><p id="r-204595" data-claire-element-id="204595">On retrouve notre fonction main habituelle. Cela fonctionne comme en C : tout programme commence par la fonction main(). Rien de choquant ici ;) <br/> La fonction retourne 0, ce qui est là encore logique puisque la fonction doit retourner un int.</p><aside id="r-204597" data-claire-element-id="204597" data-claire-semantic="information"><p id="r-204596" data-claire-element-id="204596">Pour info, 2 formes de <em>main </em>sont possibles. Celle-ci :<br/>int main()<br/> ... mais aussi cette forme un peu plus compliquée que vous connaissez aussi :<br/>int main(int argc, char *argv[])<br/> La seconde forme permet de récupérer les arguments d'appel du programme, ce qu'on ne fait pas toujours. Vous pouvez donc vous contenter de la première forme qui est surtout plus simple à retenir ;)</p></aside><h5 id="r-cout-1" data-claire-element-id="204602">cout</h5><pre id="r-204599" data-claire-element-id="204599"><code data-claire-semantic="cpp">std::cout &lt;&lt; &quot;Hello world!&quot; &lt;&lt; std::endl;</code></pre><p id="r-204600" data-claire-element-id="204600">La première ligne du <em>main </em>est la plus intéressante, c'est d'ailleurs la seule qui doit vraiment vous surprendre.<br/> En effet, ça ne ressemble pas à un appel de fonction, il y a plein de signes bizarres, pas de parenthèses comme on a l'habitude dans un appel de fonction. Bon sang de bonsoir qu'est-ce que c'est ? o_O</p><p id="r-204601" data-claire-element-id="204601">On va découvrir ça maintenant plus en détails ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
<span class="arrow"></span>
<span class="next">Configurer l&#039;IDE pour le C++</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
<span class="next">Le flux de sortie cout</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lefluxdesortiecout"></a><h2>Le flux de sortie cout</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
<span class="arrow"></span>
<span class="next">Analyse du premier code source C++</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
<span class="next">Le flux d&#039;entrée cin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-flux-de-sortie-cout" data-claire-element-id="204659">Le flux de sortie cout</h4><p id="r-204604" data-claire-element-id="204604"><em>cout</em> n'est pas une fonction mais un flux, un élément nouveau introduit en C++. Notez que ça n'a rien à voir avec la POO pour le moment ;)</p><aside id="r-204606" data-claire-element-id="204606" data-claire-semantic="information"><p id="r-204605" data-claire-element-id="204605">Rassurez-vous, les fonctions existent toujours en C++ (d'ailleurs vous avez vu qu'il y a un <em>main()</em>), mais vous vous rendrez compte petit à petit qu'on ne les utilise plus de la même manière.</p></aside><p id="r-204607" data-claire-element-id="204607">Le flux <em>cout </em>est l'équivalent de la fonction printf... mais en mieux, en plus simple :D</p><p id="r-204608" data-claire-element-id="204608">Revoyons cette fameuse ligne de code :</p><pre id="r-204609" data-claire-element-id="204609"><code data-claire-semantic="cpp">std::cout &lt;&lt; &quot;Hello world!&quot; &lt;&lt; std::endl;</code></pre><p id="r-204610" data-claire-element-id="204610">Il y a deux mots-clé particuliers dans cette ligne : cout et endl. Vous noterez qu'ils ont tous les deux le préfixe std::<br/> Tous les mots-clé de la librairie standard du C++ utilisent ce préfixe. Théoriquement, on est obligé de le mettre à chaque fois, mais c'est un peu lourd.<br/> On a heureusement une solution pour se simplifier la vie. Rajoutez cette ligne de code avant le <em>main()</em> :</p><pre id="r-204611" data-claire-element-id="204611"><code data-claire-semantic="cpp">using namespace std;</code></pre><p id="r-204612" data-claire-element-id="204612">Du coup, vous pouvez virer tous les préfixes std::<br/> Ca rend déjà notre code un peu plus facile à lire :</p><pre id="r-204613" data-claire-element-id="204613"><code data-claire-semantic="cpp">#include &lt;iostream&gt;

using namespace std;

int main()
{
        cout &lt;&lt; &quot;Hello world!&quot; &lt;&lt; endl;
        return 0;
}</code></pre><p id="r-204614" data-claire-element-id="204614">Voilà un premier point de réglé. Nous ne rentrerons pas dans le détail de ce &quot;using namespace&quot; pour le moment (pour ne pas compliquer inutilement les choses).</p><p id="r-204615" data-claire-element-id="204615">Intéressons-nous de plus près à cette ligne avec cout, désormais plus lisible :</p><pre id="r-204616" data-claire-element-id="204616"><code data-claire-semantic="cpp">cout &lt;&lt; &quot;Hello world!&quot; &lt;&lt; endl;</code></pre><p id="r-204617" data-claire-element-id="204617">Vous voyez qu'il y a un nouveau symbole : le chevron &lt;<br/> On le rencontre d'ailleurs toujours par paire, comme ceci : &lt;&lt;</p><p id="r-204618" data-claire-element-id="204618">Imaginez que ces chevrons représentent en fait des flèches. Du coup, la ligne se lit de droite à gauche :</p><ol id="r-204625" data-claire-element-id="204625"><li id="r-204620" data-claire-element-id="204620"><p id="r-204619" data-claire-element-id="204619">On prend le mot-clé endl, qui signifie <em>retour à la ligne</em>.</p></li><li id="r-204622" data-claire-element-id="204622"><p id="r-204621" data-claire-element-id="204621">On l'insère à la fin de la chaîne &quot;Hello world!&quot;</p></li><li id="r-204624" data-claire-element-id="204624"><p id="r-204623" data-claire-element-id="204623">On insère le résultat obtenu dans cout.</p></li></ol><p id="r-204626" data-claire-element-id="204626">cout est la contraction de &quot;c-out&quot; (console out = sortie console). En bon français, vous devez prononcer cela &quot;Ci Aoute&quot; :p <br/> cout représente la sortie en C++ (out = sortie). La sortie d'un programme, ben c'est tout simplement l'écran. Donc cout représente l'écran ;)</p><p id="r-204627" data-claire-element-id="204627">Résultat des courses, ce code signifie que le texte &quot;Hello world!&quot; suivi d'un retour à la ligne est envoyé vers l'écran. Il faut bien imaginer que les chevrons &lt;&lt; indiquent le sens dans lequel les données sont envoyées.</p><p id="r-204628" data-claire-element-id="204628">Cette ligne de code commande donc un affichage de texte à l'écran. Compilez et exécutez le programme pour voir :</p><pre id="r-204629" data-claire-element-id="204629"><code data-claire-semantic="console">Hello world!</code></pre><p id="r-204630" data-claire-element-id="204630">Revenons un peu sur <strong>endl</strong>.<br/> endl est un mot-clé qui signifie &quot;fin de ligne&quot; (<em>end line</em> en anglais). En fait, c'est tout bêtement un mot qui remplace le que vous connaissez du C, qu'on utilisait pour faire des sauts de ligne.</p><div id="r-204632" data-claire-element-id="204632" data-claire-semantic="question"><p id="r-204631" data-claire-element-id="204631">Ah bon, on ne peut plus utiliser en C++ ?</p></div><p id="r-204633" data-claire-element-id="204633">Si si. En fait, le mot-clé endl a été entre autres introduit pour améliorer la lisibilité du code source (pour ne pas qu'on mélange le &quot;n&quot; avec le texte à afficher).<br/> Vous pouvez d'ailleurs tester, vous verrez que l' fonctionne toujours :</p><pre id="r-204634" data-claire-element-id="204634"><code data-claire-semantic="cpp">cout &lt;&lt; &quot;Hello world!\n&quot;;</code></pre><p id="r-204635" data-claire-element-id="204635">Le résultat à l'écran est exactement le même :</p><pre id="r-204636" data-claire-element-id="204636"><code data-claire-semantic="console">Hello world!</code></pre><aside id="r-204638" data-claire-element-id="204638" data-claire-semantic="information"><p id="r-204637" data-claire-element-id="204637">Désormais, j'utiliserai <em>endl </em>à la place de dans la suite du cours.</p></aside><h5 id="r-l-interet-de-cout" data-claire-element-id="204658">L'intérêt de cout</h5><p id="r-204639" data-claire-element-id="204639">Pour le moment, vous devez vous dire que cout ressemble étrangement à la fonction printf, avec juste des symboles &lt;&lt; en plus pour vous embrouiller l'esprit :-°</p><p id="r-204640" data-claire-element-id="204640">En fait, c'est encore plus facile à utiliser que printf. L'intérêt se voit notamment lorsqu'on veut afficher le contenu d'une variable.<br/> Regardez ce code, c'est super simple :</p><pre id="r-204641" data-claire-element-id="204641"><code data-claire-semantic="cpp">int main()
{
    int age = 21;
    cout &lt;&lt; &quot;Salut, j'ai &quot; &lt;&lt; age &lt;&lt; &quot; ans&quot; &lt;&lt; endl;
    return 0;
}</code></pre><pre id="r-204642" data-claire-element-id="204642"><code data-claire-semantic="console">Salut, j'ai 21 ans</code></pre><p id="r-204643" data-claire-element-id="204643">Voilà, c'est assez intuitif pour que je n'aie pas besoin de vous expliquer comment ça marche ;)</p><p id="r-204644" data-claire-element-id="204644">Ce qui est génial, c'est qu'on n'a plus besoin de s'embêter avec la syntaxe des printf : %d, %lf, %s, %c etc... Ici, le langage est plus intelligent, il reconnaît le type de variable qui lui est envoyé.</p><p id="r-204645" data-claire-element-id="204645">Sceptiques ? Ok, essayez d'ajouter une variable de type chaîne de caractère dans ce cout :</p><pre id="r-204646" data-claire-element-id="204646"><code data-claire-semantic="cpp">int main()
{
    int age = 21;
    char pseudo[] = &quot;M@teo21&quot;;
    cout &lt;&lt; &quot;Salut, j'ai &quot; &lt;&lt; age &lt;&lt; &quot; ans et je m'appelle &quot; &lt;&lt; pseudo &lt;&lt; endl;
    return 0;
}</code></pre><pre id="r-204647" data-claire-element-id="204647"><code data-claire-semantic="console">Salut, j'ai 21 ans et je m'appelle M@teo21</code></pre><p id="r-204648" data-claire-element-id="204648">Vous voyez, on a envoyé d'un coup à cout un entier et une chaîne de caractères, sans préciser le type de variable, et il n'a pas bronché :p</p><p id="r-204649" data-claire-element-id="204649">Pour rappel, en C on aurait dû faire :</p><pre id="r-204650" data-claire-element-id="204650"><code data-claire-semantic="c">printf(&quot;Salut, j'ai %d ans et je m'appelle %s\n&quot;, age, pseudo);</code></pre><p id="r-204651" data-claire-element-id="204651">Non seulement il fallait se souvenir des codes %d et %s, mais en plus les variables utilisées sont indiquées à la fin. En C++ avec cout, comme vous avez pu le constater, la variable est placée au milieu, ce qui rend le code plus facile à lire :)</p><p id="r-204652" data-claire-element-id="204652">Bien entendu, vous n'êtes pas limité à un seul cout par programme ^^ <br/> Vous pouvez tout à fait faire plusieurs cout si vous le voulez :</p><pre id="r-204653" data-claire-element-id="204653"><code data-claire-semantic="cpp">cout &lt;&lt; &quot;Salut, j'ai &quot; &lt;&lt; age &lt;&lt; &quot; ans&quot; &lt;&lt; endl;
cout &lt;&lt; &quot;Je m'appelle &quot; &lt;&lt; pseudo &lt;&lt; endl;</code></pre><p id="r-204654" data-claire-element-id="204654">Résultat :</p><pre id="r-204655" data-claire-element-id="204655"><code data-claire-semantic="console">Salut, j'ai 21 ans

Je m'appelle M@teo21</code></pre><aside id="r-204657" data-claire-element-id="204657" data-claire-semantic="information"><p id="r-204656" data-claire-element-id="204656">Le endl à la fin de chaque cout n'est pas obligatoire. Si vous l'enlevez, il n'y aura juste pas de retour à la ligne.<br/> Entraînez-vous un peu avec cout, vous devriez vous y habituer rapidement !</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
<span class="arrow"></span>
<span class="next">Analyse du premier code source C++</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
<span class="next">Le flux d&#039;entrée cin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lefluxd039entrecin"></a><h2>Le flux d&#039;entrée cin</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
<span class="arrow"></span>
<span class="next">Le flux de sortie cout</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">
<span class="next">Nouveautés pour les variables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-flux-d-entree-cin" data-claire-element-id="204685">Le flux d'entrée cin</h4><p id="r-204660" data-claire-element-id="204660">Après avoir vu comment afficher du texte, voyons voir maintenant comment récupérer du texte saisi au clavier.<br/> Là encore, ça fonctionne avec un système de flux, et vous allez voir que c'est un vrai régal de simplicité :D</p><p id="r-204661" data-claire-element-id="204661">Le mot-clé à connaître ici est <strong>cin</strong>. Il vient en remplacement de la pratique (mais complexe) fonction scanf du langage C.<br/> cin est la contraction de &quot;c-in&quot;, ce qui signifie <em>entrée console</em>. Prononcez ça comme il faut siouplaît : &quot;Ci in&quot; :p</p><p id="r-204662" data-claire-element-id="204662">cin représente l'entrée en C++. Et qu'est-ce que l'entrée ? C'est le clavier ! Eh oui, c'est par le clavier qu'on entre les données.</p><p id="r-204663" data-claire-element-id="204663">cin représente donc le clavier et permet de récupérer du texte saisi par l'utilisateur.<br/> Tenez, on va faire un truc super original : on va lui demander son âge :-°</p><p id="r-204664" data-claire-element-id="204664">Regardez comment ça fonctionne :</p><pre id="r-204665" data-claire-element-id="204665"><code data-claire-semantic="cpp">cin &gt;&gt; age;</code></pre><p id="r-204666" data-claire-element-id="204666">Si vous êtes un peu observateur, 2 choses doivent vous avoir choqué :</p><ul id="r-204671" data-claire-element-id="204671"><li id="r-204668" data-claire-element-id="204668"><p id="r-204667" data-claire-element-id="204667"><strong>Les flèches ont changé de sens !</strong> Eh oui, la lecture se fait ici de gauche à droite. cin représente le clavier et <em>envoie</em> les données dans la variable age. Il faut donc imaginer que les données transitent du clavier vers la variable age. C'est ce qu'on appelle un flux ;)</p></li><li id="r-204670" data-claire-element-id="204670"><p id="r-204669" data-claire-element-id="204669"><strong>Il n'y a pas de symbole &amp; devant age !</strong> En C, on aurait dû écrire &amp;age pour envoyer l'adresse de la variable à la fonction pour qu'elle sache où écrire en mémoire. En C++, c'est plus la peine ! Il y a en effet un mécanisme qui remplace un peu les pointeurs qu'on appelle les références. On étudiera ça dans le prochain chapitre plus en détails.</p></li></ul><aside id="r-204673" data-claire-element-id="204673" data-claire-semantic="error"><p id="r-204672" data-claire-element-id="204672">Ne confondez pas le sens des flèches entre cout et cin. Le principe c'est que les données transitent dans un sens précis : de la mémoire vers l'écran (cout) ou du clavier vers la mémoire (cin).<br/> Les flèches sont donc dans le sens de déplacement des informations. Avec un peu de bon sens, vous ne devriez pas vous tromper ;)</p></aside><h5 id="r-programmes-de-test-de-cin" data-claire-element-id="204684">Programmes de test de cin</h5><p id="r-204674" data-claire-element-id="204674">Testons maintenant cin dans un petit programme. Voici le code complet :</p><pre id="r-204675" data-claire-element-id="204675"><code data-claire-semantic="cpp">#include &lt;iostream&gt;

using namespace std;

int main()
{
    int age = 0;
    cout &lt;&lt; &quot;Quel age avez-vous ?&quot; &lt;&lt; endl;
    cin &gt;&gt; age;
    cout &lt;&lt; &quot;Ah ! Vous avez donc &quot; &lt;&lt; age &lt;&lt; &quot; ans !&quot; &lt;&lt; endl;
    return 0;
}</code></pre><pre id="r-204676" data-claire-element-id="204676"><code data-claire-semantic="console">Quel age avez-vous ?

21

Ah ! Vous avez donc 21 ans !</code></pre><p id="r-204677" data-claire-element-id="204677">Désolé si je me répète, mais je trouve cela d'une simplicité effarante ^^ <br/> Finis les %d qui nous agacent, finis les oublis de symbole &amp; dans les scanf, finis :D <br/> Bon d'accord, cette nouvelle syntaxe surprend un peu quand on a fait pas mal de C avant, mais on s'y fait vite rassurez-vous.</p><p id="r-204678" data-claire-element-id="204678">On peut aussi s'entraîner à demander le pseudonyme de l'utilisateur :</p><pre id="r-204679" data-claire-element-id="204679"><code data-claire-semantic="cpp">#include &lt;iostream&gt;

using namespace std;

int main()
{
    char pseudo[50];
    cout &lt;&lt; &quot;Quel est votre pseudo ?&quot; &lt;&lt; endl;
    cin &gt;&gt; pseudo;
    cout &lt;&lt; &quot;Salut &quot; &lt;&lt; pseudo &lt;&lt; endl;
    return 0;
}</code></pre><pre id="r-204680" data-claire-element-id="204680"><code data-claire-semantic="console">Quel est votre pseudo ?

M@teo21

Salut M@teo21</code></pre><p id="r-204681" data-claire-element-id="204681">Alors, premières impressions du C++ ? :euh:</p><p id="r-204682" data-claire-element-id="204682">&quot;Ca change&quot; ? Ah ben oui un peu, c'est sûr :D <br/> En effet, la syntaxe des flux cout et cin surprend un peu... mais je suis sûr que vous serez convaincu comme moi que grâce à ce système de nombreuses choses sont simplifiées !</p><p id="r-204683" data-claire-element-id="204683">On va continuer notre tour d'horizon des ajouts-au-C++-qui-n'ont-rien-à-voir-avec-la-POO dans le chapitre suivant.<br/> Au programme, nous allons découvrir les changements au niveau de la gestion des variables. Nous verrons en particulier ce que sont ces mystérieuses <strong>références</strong> dont vous avez entendu parler.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
<span class="arrow"></span>
<span class="next">Le flux de sortie cout</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">
<span class="next">Nouveautés pour les variables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Nouveautspourlesvariables"></a><h2>Nouveautés pour les variables</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
<span class="arrow"></span>
<span class="next">Le flux d&#039;entrée cin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
<span class="next">Le type bool</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-204687" data-claire-element-id="204687">Nous continuons notre tour d'horizon des nouveautés du C++ dans ce chapitre.</p><p id="r-204688" data-claire-element-id="204688">Nous nous intéresserons aux nouveautés relatives aux variables, c'est-à-dire à la gestion de la mémoire. Nous découvrirons entre autres le type bool, les modifications par rapport aux définitions de variables, les allocations dynamiques en C++ et les références.</p><p id="r-204689" data-claire-element-id="204689">Rien de bien difficile au programme donc, mais il s'agit de nouveautés importantes, donc à ne pas négliger.</p>
</div><a name="Letypebool"></a><h2>Le type bool</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">
<span class="arrow"></span>
<span class="next">Nouveautés pour les variables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
<span class="next">Les déclarations de variables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-type-bool" data-claire-element-id="204734">Le type bool</h4><p id="r-204690" data-claire-element-id="204690">On a découvert dès le début du cours de C qu'il existait un grand nombre de types de variable différents :</p><ul id="r-204703" data-claire-element-id="204703"><li id="r-204692" data-claire-element-id="204692"><p id="r-204691" data-claire-element-id="204691">int</p></li><li id="r-204694" data-claire-element-id="204694"><p id="r-204693" data-claire-element-id="204693">long</p></li><li id="r-204696" data-claire-element-id="204696"><p id="r-204695" data-claire-element-id="204695">float</p></li><li id="r-204698" data-claire-element-id="204698"><p id="r-204697" data-claire-element-id="204697">double</p></li><li id="r-204700" data-claire-element-id="204700"><p id="r-204699" data-claire-element-id="204699">char</p></li><li id="r-204702" data-claire-element-id="204702"><p id="r-204701" data-claire-element-id="204701">etc.</p></li></ul><p id="r-204704" data-claire-element-id="204704">Le problème s'est posé lorsqu'on a voulu stocker des <strong>booléens</strong>. Faute d'avoir un type de donnée spécialisé dans le stockage des booléens, on a fait comme la plupart des programmeurs C font : on a utilisé un type entier, comme int.</p><aside id="r-204706" data-claire-element-id="204706" data-claire-semantic="information"><p id="r-204705" data-claire-element-id="204705">Rappel. Un booléen est une variable qui peut prendre 2 valeurs : vrai <em>ou </em>faux. Par exemple, &quot;majeur&quot; est un booléen : soit on est majeur, soit on ne l'est pas :p <br/> On dit que le nombre 0 représente &quot;Faux&quot;, tandis que le nombre 1 représente &quot;Vrai&quot; (en fait, tout nombre différent de 0 signifie &quot;Vrai&quot;).</p></aside><p id="r-204707" data-claire-element-id="204707">Or, si on utilise int pour les booléens, on risque de les confondre avec des variables destinées à stocker des nombres, puisque int est à la base fait pour stocker des nombres !</p><p id="r-204708" data-claire-element-id="204708">Petit exemple tout simple :</p><pre id="r-204709" data-claire-element-id="204709"><code data-claire-semantic="c">int majeur = 1;
int age = 21;</code></pre><p id="r-204710" data-claire-element-id="204710">La variable <em>majeur</em> est un booléen, car elle signifie soit vrai soit faux.<br/> La variable <em>age</em>, elle, est un nombre. Elle peut valoir par exemple 21.</p><p id="r-204711" data-claire-element-id="204711">Mais comment fait-on pour savoir laquelle de ces variables est un booléen et laquelle est un nombre ?<br/> On peut se baser sur le nom de la variable, c'est sûr, mais il aurait été plus pratique et plus clair d'avoir un type spécial pour les booléens.</p><p id="r-204712" data-claire-element-id="204712">Ca tombe bien ! Il y a justement en C++ un nouveau type de base : le type <strong>bool</strong>. Toute variable de ce type peut prendre 2 valeurs :</p><ul id="r-204717" data-claire-element-id="204717"><li id="r-204714" data-claire-element-id="204714"><p id="r-204713" data-claire-element-id="204713"><strong>true</strong>, qui signifie vrai.</p></li><li id="r-204716" data-claire-element-id="204716"><p id="r-204715" data-claire-element-id="204715"><strong>false</strong>, qui signifie faux.</p></li></ul><p id="r-204718" data-claire-element-id="204718"><em>(je vous conseille de retenir ces 2 valeurs par coeur, vous en aurez besoin :-° )</em></p><p id="r-204719" data-claire-element-id="204719">Du coup, le code qu'on a vu plus haut s'écrirait comme ceci en C++ :</p><pre id="r-204720" data-claire-element-id="204720"><code data-claire-semantic="cpp">bool majeur = true;
int age = 21;</code></pre><p id="r-204721" data-claire-element-id="204721">Voilà une bonne chose qui nous permettra d'éviter des ambigüités dans nos programmes :)</p><aside id="r-204723" data-claire-element-id="204723" data-claire-semantic="error"><p id="r-204722" data-claire-element-id="204722">Il n'y a pas de guillemets autour de true, car c'est un mot-clé du langage C++. Ce n'est pas une chaîne de caractères !</p></aside><h5 id="r-rappel-les-booleens-dans-les-conditions" data-claire-element-id="204733">Rappel : les booléens dans les conditions</h5><p id="r-204724" data-claire-element-id="204724">Je tiens juste à vous faire un petit rappel. Si vous avez bien suivi le cours de C, ça ne devrait pas vous choquer ;)</p><p id="r-204725" data-claire-element-id="204725">En théorie, on peut tester un booléen comme ceci dans une condition :</p><pre id="r-204726" data-claire-element-id="204726"><code data-claire-semantic="cpp">if (majeur == true) // S'il est majeur (forme longue)
{
    // ...
}</code></pre><p id="r-204727" data-claire-element-id="204727">Mais en général, si la variable a un nom clair, on préfèrera enlever la partie == true. C'est tout à fait possible et l'ordinateur le comprend très bien :</p><pre id="r-204728" data-claire-element-id="204728"><code data-claire-semantic="cpp">if (majeur) // S'il est majeur (forme courte)
{
    // ...
}</code></pre><p id="r-204729" data-claire-element-id="204729">Ce code est plus lisible et plus court que le précédent. On comprend bien que la condition est &quot;<em>S'il est majeur</em>&quot;.</p><p id="r-204730" data-claire-element-id="204730">Par ailleurs, le point d'exclamation sert à exprimer la négation. Dans notre cas, ce code signifierait &quot;<em>S'il n'est pas majeur</em>&quot; :</p><pre id="r-204731" data-claire-element-id="204731"><code data-claire-semantic="cpp">if (!majeur) // S'il n'est PAS majeur
{
    // ...
}</code></pre><p id="r-204732" data-claire-element-id="204732">Ce n'est pas une nouveauté du C++ car ça existait déjà en C, mais je tenais juste à vous informer que cette technique fonctionnait toujours avec le type <strong>bool </strong> ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">
<span class="arrow"></span>
<span class="next">Nouveautés pour les variables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
<span class="next">Les déclarations de variables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesdclarationsdevariables"></a><h2>Les déclarations de variables</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
<span class="arrow"></span>
<span class="next">Le type bool</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
<span class="next">Les allocations dynamiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-declarations-de-variables-1" data-claire-element-id="204755">Les déclarations de variables</h4><p id="r-204735" data-claire-element-id="204735">En C, les variables devaient être déclarées (= créées) au début des fonctions. Vous avez vu cela dans le chapitre sur les variables au tout début du cours ;)</p><p id="r-204736" data-claire-element-id="204736">Vous deviez donc faire toutes vos déclarations avant de commencer les instructions :</p><pre id="r-204737" data-claire-element-id="204737"><code data-claire-semantic="c">void maFonction()
{
    // D'abord on déclare les variables
    double prixOrigine = 0.0;
    double prixAchat = 0.0;
    double difference = 0.0;
    FILE* fichier = NULL;

    // Ensuite on peut exécuter des instructions, des appels de fonction, etc.
    fichier = fopen(&quot;exemple.txt&quot;, &quot;r&quot;);

    if (fichier != NULL)
    {
        fonction();

        fscanf(fichier, &quot;%lf&quot;, &amp;prixOrigine);
        fscanf(fichier, &quot;%lf&quot;, &amp;prixAchat);
        
        difference = prixAchat - prixOrigine;
        // etc.
    }
}</code></pre><p id="r-204738" data-claire-element-id="204738">La nouveauté en C++, c'est que l'on peut désormais déclarer des variables <em>n'importe où</em> dans une fonction. C'est plus pratique lorsqu'on programme, ça nous évite d'avoir à remonter au début de la fonction si on n'a besoin d'une variable qu'à un moment de la fonction. Cela peut aussi améliorer la lisibilité du code surtout dans de grosses fonctions.</p><p id="r-204739" data-claire-element-id="204739">On pourrait donc écrire le code précédent comme ceci en C++ :</p><pre id="r-204740" data-claire-element-id="204740"><code data-claire-semantic="cpp">void maFonction()
{
    FILE* fichier = NULL;
    fichier = fopen(&quot;exemple.txt&quot;, &quot;r&quot;);

    if (fichier != NULL)
    {
        fonction();

        double prixOrigine = 0.0; // Déclaration au milieu
        fscanf(fichier, &quot;%lf&quot;, &amp;prixOrigine);
        
        double prixAchat = 0.0; // Autre déclaration au milieu
        fscanf(fichier, &quot;%lf&quot;, &amp;prixAchat);
        
        double difference = prixAchat - prixOrigine; // Encore autre déclaration au milieu
        // etc.
    }
}</code></pre><aside id="r-204742" data-claire-element-id="204742" data-claire-semantic="information"><p id="r-204741" data-claire-element-id="204741">Avec une version récente du langage C, il est aussi possible de déclarer une variable en plein milieu d'une fonction. Cependant, les programmeurs C préfèrent en général continuer à déclarer leurs variables au début des fonctions.</p></aside><p id="r-204743" data-claire-element-id="204743">Précision importante : les variables ainsi créées sont <em>locales </em>aux blocs où elles ont été déclarées. Je m'explique.<br/> On dit que les accolades { et } délimitent des <strong>blocs</strong>. Dans le code ci-dessus, vous devriez en voir deux : la fonction et le bloc if. Comme la variable <em>prixAchat </em>a été déclarée dans le bloc if, elle sera supprimée à la fin du bloc if. Si elle avait été déclarée au début de la fonction en revanche, elle aurait été accessible dans toute la fonction.</p><p id="r-204744" data-claire-element-id="204744">Voilà, c'est assez simple à comprendre mais il faut le savoir ! La variable est détruite à la fin du bloc dans lequel elle a été déclarée.</p><pre id="r-204745" data-claire-element-id="204745"><code data-claire-semantic="cpp">void maFonction()
{
    FILE* fichier = NULL;
    fichier = fopen(&quot;exemple.txt&quot;, &quot;r&quot;);

    if (fichier != NULL)
    {
        fonction();

        double prixOrigine = 0.0; // Création de prixOrigine
        fscanf(fichier, &quot;%lf&quot;, &amp;prixOrigine);
        
        double prixAchat = 0.0; // Création de prixAchat
        fscanf(fichier, &quot;%lf&quot;, &amp;prixAchat);
        
        double difference = prixAchat - prixOrigine; // Création de difference
    } // Destruction automatique de prixOrigine, prixAchat et difference
} // Destruction automatique de fichier</code></pre><h5 id="r-declaration-dans-une-boucle" data-claire-element-id="204754">Déclaration dans une boucle</h5><p id="r-204746" data-claire-element-id="204746">Dans le même ordre d'idée, il y a une nouveauté vraiment très pratique (comprenez : je m'en sers tout le temps :p ). On peut déclarer une variable directement <em>dans </em>une instruction for.</p><p id="r-204747" data-claire-element-id="204747">Prenons un exemple. Vous codez votre programme, tout va bien. Puis à un moment, pour une raison ou une autre, vous avez besoin de faire une boucle qui se répète 10 fois. Vous allez sûrement faire un for. Mais pour boucler 10 fois, vous aurez besoin d'une variable de boucle qui va retenir le nombre de tours de boucle (quand on n'est pas inspiré on appelle en général cette variable <strong>i</strong> ).</p><p id="r-204748" data-claire-element-id="204748">En C, c'est un peu embêtant parce qu'il faut remonter au début de la fonction pour rajouter la déclaration de la variable. En plus, on ne sait pas trop quand elle sera utilisée en lisant la déclaration :</p><pre id="r-204749" data-claire-element-id="204749"><code data-claire-semantic="c">void maFonction()
{
    int i = 0;

    /* Plein de code
    ....
    ....
    */

    for (i = 0 ; i &lt; 10 ; i++)
    {

    }
}</code></pre><p id="r-204750" data-claire-element-id="204750">La nouveauté en C++, c'est que vous pouvez déclarer votre variable i directement dans l'instruction for. Elle sera détruite à la fin de la boucle, quand vous n'en aurez plus besoin.<br/> Avantages : vous n'avez pas à remonter au début de la fonction pour déclarer la variable, et celle-ci est automatiquement détruite à la fin de la boucle. Pas d'utilisation inutile de la mémoire.</p><p id="r-204751" data-claire-element-id="204751">Le code C++ ressemblera donc à cela :</p><pre id="r-204752" data-claire-element-id="204752"><code data-claire-semantic="cpp">void maFonction()
{
    /* Plein de code
    ....
    ....
    */

    for (int i = 0 ; i &lt; 10 ; i++) // Déclaration de i
    {

    } // Destruction automatique de i
}</code></pre><p id="r-204753" data-claire-element-id="204753">Ca n'a l'air de rien, mais je vous assure qu'en pratique quand on programme, ça c'est vraiment génial :D <br/> Vous me verrez donc le faire la plupart du temps dans la suite du cours.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
<span class="arrow"></span>
<span class="next">Le type bool</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
<span class="next">Les allocations dynamiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesallocationsdynamiques"></a><h2>Les allocations dynamiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
<span class="arrow"></span>
<span class="next">Les déclarations de variables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
<span class="next">Le typedef automatique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-allocations-dynamiques" data-claire-element-id="204800">Les allocations dynamiques</h4><p id="r-204756" data-claire-element-id="204756">Si je vous dis &quot;malloc&quot; et &quot;free&quot;, ça vous rappelle de joyeux souvenirs non ? ^^</p><pre id="r-204757" data-claire-element-id="204757"><code data-claire-semantic="c">int main()
{
    int *variable = NULL;

    variable = malloc(sizeof(int)); // Allocation de mémoire

    free(variable); // Libération de mémoire

    return 0;
}</code></pre><p id="r-204758" data-claire-element-id="204758">L'allocation dynamique est une technique qui permet de gérer vous-même l'allocation de mémoire pour vos variables. C'est notamment très pratique dans le cas de l'allocation de tableaux dont on ne connaît pas la taille avant compilation (revoyez le <a href="tuto-3-4830-1-l-allocation-dynamique.html">chapitre sur l'allocation dynamique</a> au besoin !).</p><p id="r-204759" data-claire-element-id="204759">En C++, les allocations dynamiques existent toujours et on en fait toujours. D'ailleurs, les fonctions malloc et free sont toujours utilisables. Cependant, le C++ dispose de nouveaux opérateurs spécialisés dans les allocations dynamiques : <strong>new </strong>et <strong>delete</strong>.</p><aside id="r-204761" data-claire-element-id="204761" data-claire-semantic="information"><p id="r-204760" data-claire-element-id="204760">new et delete sont des opérateurs, des mots-clé du langage C++. Contrairement à malloc et free, ce ne sont pas des fonctions.<br/> new et delete font en fait eux-mêmes appel aux fonctions malloc et free (on n'a pas réinventé la roue). Cependant, ils font aussi des tests et des initialisations supplémentaires, ce qui fait qu'on préfèrera toujours utiliser new et delete au lieu de malloc et free. Ils sont plus adaptés en C++.</p></aside><h5 id="r-allocation-dynamique-d-une-variable" data-claire-element-id="204777">Allocation dynamique d'une variable</h5><p id="r-204762" data-claire-element-id="204762">new et delete ne s'utilisent pas exactement de la même manière que malloc et free.<br/> On va dans un premier temps apprendre à s'en servir pour allouer une variable simple, puis on verra ensuite le cas de l'allocation de tableaux.</p><p id="r-204763" data-claire-element-id="204763">On souhaite donc allouer dynamiquement une variable (de type int par exemple).<br/> En C++, on va d'abord devoir créer le pointeur et l'initialiser à NULL, ça on n'y coupe pas :</p><pre id="r-204764" data-claire-element-id="204764"><code data-claire-semantic="cpp">int *variable = NULL;</code></pre><h6 id="r-allocation-de-memoire" data-claire-element-id="204768">Allocation de mémoire</h6><p id="r-204765" data-claire-element-id="204765">L'allocation de mémoire avec new se fait comme ceci :</p><pre id="r-204766" data-claire-element-id="204766"><code data-claire-semantic="cpp">variable = new int; // Allocation dynamique</code></pre><p id="r-204767" data-claire-element-id="204767">Comparé à la &quot;version C&quot;, il n'y a pas photo :D <br/> On n'a plus besoin d'utiliser l'opérateur sizeof() du C. Ici, on indique juste le type de variable à créer.</p><h6 id="r-liberation-de-memoire" data-claire-element-id="204773">Libération de mémoire</h6><p id="r-204769" data-claire-element-id="204769">Lorsque vous avez fini d'utiliser votre variable et que vous n'en avez plus besoin, vous devez la libérer avec l'opérateur delete. Ultra-simple :</p><pre id="r-204770" data-claire-element-id="204770"><code data-claire-semantic="cpp">delete variable; // Libération de mémoire</code></pre><aside id="r-204772" data-claire-element-id="204772" data-claire-semantic="warning"><p id="r-204771" data-claire-element-id="204771">new et delete étant des opérateurs, et non des fonctions (désolé d'insister :p ), on ne met pas de parenthèses.</p></aside><h6 id="r-resume-7" data-claire-element-id="204776">Résumé</h6><p id="r-204774" data-claire-element-id="204774">En résumé, voici à quoi ressemble un code d'allocation / libération de mémoire en C++ :</p><pre id="r-204775" data-claire-element-id="204775"><code data-claire-semantic="cpp">int main()
{
    int *variable = NULL;

    variable = new int; // Allocation de mémoire

    delete variable; // Libération de mémoire

    return 0;
}</code></pre><h5 id="r-allocation-dynamique-d-un-tableau-1" data-claire-element-id="204799">Allocation dynamique d'un tableau</h5><p id="r-204778" data-claire-element-id="204778">Si on veut allouer un tableau, l'opération est là encore très simple. On n'a plus besoin de faire un calcul du type 20 * sizeof(int) comme on devait le faire en C.</p><p id="r-204779" data-claire-element-id="204779">On commence par créer le pointeur :</p><pre id="r-204780" data-claire-element-id="204780"><code data-claire-semantic="cpp">int *tableau = NULL;</code></pre><h6 id="r-allocation-de-memoire-1" data-claire-element-id="204786">Allocation de mémoire</h6><p id="r-204781" data-claire-element-id="204781">Ensuite, l'allocation se fait comme ceci :</p><pre id="r-204782" data-claire-element-id="204782"><code data-claire-semantic="cpp">tableau = new int[20]; // Allocation de mémoire (20 cases)</code></pre><p id="r-204783" data-claire-element-id="204783">Dans ce cas, un tableau de 20 cases sera alloué. Bien entendu, il est aussi possible de remplacer ce nombre par une variable :</p><pre id="r-204784" data-claire-element-id="204784"><code data-claire-semantic="cpp">tableau = new int[taille]; // Allocation de mémoire (&quot;taille&quot; cases)</code></pre><p id="r-204785" data-claire-element-id="204785">La longueur du tableau sera définie par la valeur de la variable <em>taille</em>.</p><h6 id="r-liberation-de-memoire-1" data-claire-element-id="204789">Libération de mémoire</h6><p id="r-204787" data-claire-element-id="204787">Lorsque vous n'avez plus besoin du tableau, vous devez le libérer... avec cette fois l'opérateur delete[] pour bien préciser qu'il s'agit d'un tableau. Vous n'avez pas besoin de préciser la taille entre crochets, mais n'oubliez pas ces crochets ils sont importants.</p><pre id="r-204788" data-claire-element-id="204788"><code data-claire-semantic="cpp">delete[] tableau; // Libération de mémoire</code></pre><h6 id="r-resume-8" data-claire-element-id="204798">Résumé</h6><pre id="r-204790" data-claire-element-id="204790"><code data-claire-semantic="cpp">int main()
{
    int *tableau = NULL;

    tableau = new int[20]; // Allocation de mémoire (tableau)

    delete[] tableau; // Libération de mémoire (tableau)

    return 0;
}</code></pre><aside id="r-204797" data-claire-element-id="204797" data-claire-semantic="information"><p id="r-204791" data-claire-element-id="204791">Il y a donc en tout 4 opérateurs :</p><ul id="r-204796" data-claire-element-id="204796"><li id="r-204793" data-claire-element-id="204793"><p id="r-204792" data-claire-element-id="204792">new s'utilise avec delete pour allouer une variable</p></li><li id="r-204795" data-claire-element-id="204795"><p id="r-204794" data-claire-element-id="204794">new[] s'utilise avec delete[] pour allouer un tableau</p></li></ul></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
<span class="arrow"></span>
<span class="next">Les déclarations de variables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
<span class="next">Le typedef automatique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Letypedefautomatique"></a><h2>Le typedef automatique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
<span class="arrow"></span>
<span class="next">Les allocations dynamiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
<span class="next">Les références</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-typedef-automatique" data-claire-element-id="204815">Le typedef automatique</h4><p id="r-204801" data-claire-element-id="204801">Vous souvenez-vous du chapitre sur les <a href="tuto-3-4350-1-creez-vos-propres-types-de-variables.html">structures et énumérations</a> ? :) <br/> On y avait appris à créer nos propres types de variables. On avait notamment utilisé l'exemple d'une structure nommée <em>Coordonnees</em> :</p><pre id="r-204802" data-claire-element-id="204802"><code data-claire-semantic="c">struct Coordonnees
{
    int x;
    int y;
};</code></pre><p id="r-204803" data-claire-element-id="204803">Le problème des structures en C, c'est qu'il fallait placer le mot-clé struct au début de chaque déclaration d'une variable de type personnalisé :</p><pre id="r-204804" data-claire-element-id="204804"><code data-claire-semantic="c">struct Coordonnees point;</code></pre><p id="r-204805" data-claire-element-id="204805">Pour éviter d'avoir à répéter ce mot à chaque déclaration, on avait découvert l'instruction <strong>typedef </strong>qu'on utilisait comme ceci avant la définition de notre structure :</p><pre id="r-204806" data-claire-element-id="204806"><code data-claire-semantic="c">typedef struct Coordonnees Coordonnees; // typedef permet d'éviter d'avoir à taper &quot;struct&quot; à chaque déclaration

struct Coordonnees
{
    int x;
    int y;
};</code></pre><p id="r-204807" data-claire-element-id="204807">Du coup, on pouvait déclarer une variable sans avoir à écrire struct devant :</p><pre id="r-204808" data-claire-element-id="204808"><code data-claire-semantic="c">Coordonnees point; // Le mot-clé struct est inutile grâce au typedef</code></pre><h5 id="r-la-nouveaute" data-claire-element-id="204814">La nouveauté</h5><p id="r-204809" data-claire-element-id="204809">En C++, qu'on se rassure, les structures existent toujours (il y a même encore mieux, mais n'anticipons pas ;) ).</p><p id="r-204810" data-claire-element-id="204810">La nouveauté du C++, c'est que le typedef est désormais automatique. A chaque fois que l'on déclare une structure (ou une énumération), un typedef est réalisé automatiquement par le compilateur. On peut donc n'écrire que l'instruction de déclaration de la structure :</p><pre id="r-204811" data-claire-element-id="204811"><code data-claire-semantic="cpp">// Le typedef est réalisé automatiquement par le compilateur, pas besoin de l'écrire

struct Coordonnees
{
    int x;
    int y;
};</code></pre><p id="r-204812" data-claire-element-id="204812">Grâce à cela, le mot-clé struct devient totalement inutile lors d'une déclaration de variable :</p><pre id="r-204813" data-claire-element-id="204813"><code data-claire-semantic="cpp">Coordonnees point; // Le mot-clé struct est inutile grâce au typedef automatique</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
<span class="arrow"></span>
<span class="next">Les allocations dynamiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
<span class="next">Les références</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesrfrences"></a><h2>Les références</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
<span class="arrow"></span>
<span class="next">Le typedef automatique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">
<span class="next">Nouveautés pour les fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-references-2" data-claire-element-id="204904">Les références</h4><p id="r-204816" data-claire-element-id="204816">Nous arrivons maintenant au point le plus important (et délicat) de ce chapitre. Ouvrez grandes vos oreilles (ou plutôt vos yeux :-° ).</p><p id="r-204817" data-claire-element-id="204817">Le C++ introduit un nouveau concept : <strong>les références</strong>. Une référence est un synonyme d'une autre variable. On verra ce que ça veut dire un peu plus loin ;) <br/> Vous allez voir que les références ressemblent beaucoup aux pointeurs. Elles ont en effet été créées pour simplifier l'utilisation des pointeurs. Attention toutefois : je vous préviens qu'au début vous risquez de confondre les références avec les pointeurs (c'est assez perturbant quand on voit ça la première fois j'avoue :p ).</p><h5 id="r-les-references-a-l-interieur-d-une-fonction" data-claire-element-id="204866">Les références à l'intérieur d'une fonction</h5><p id="r-204818" data-claire-element-id="204818">Pour créer une référence, on doit utiliser le symbole &amp; dans la déclaration :</p><pre id="r-204819" data-claire-element-id="204819"><code data-claire-semantic="cpp">int &amp;referenceSurAge;</code></pre><aside id="r-204821" data-claire-element-id="204821" data-claire-semantic="error"><p id="r-204820" data-claire-element-id="204820"><strong>Attention à ne pas confondre !</strong><br/> Dans une déclaration, le symbole &amp; signifie &quot;Je veux créer une référence&quot; (c'est ce qu'on découvre maintenant). Partout ailleurs, le symbole &amp; signifie &quot;Je veux obtenir l'adresse de cette variable&quot; (ça on l'avait déjà vu).<br/> On confond facilement quand on débute. Il faut dire que les programmeurs n'ont pas été très malins en réutilisant le symbole &amp; ici, y'a rien de tel pour confondre :-° <br/> Quand vous voyez un &amp; désormais, vérifiez s'il se trouve dans une déclaration : si c'est dans une déclaration, c'est qu'on cherche à créer une référence, sinon c'est qu'on demande à obtenir l'adresse de la variable.</p></aside><p id="r-204822" data-claire-element-id="204822">Bon, on a créé une référence. Et alors ?<br/> Et alors si vous compilez le code ci-dessus, le compilateur va vous insulter poliment :</p><p id="r-204823" data-claire-element-id="204823"><cite>Citation : Compilateur C++</cite></p><blockquote id="r-204825" data-claire-element-id="204825"><p id="r-204824" data-claire-element-id="204824">error: 'referenceSurAge' declared as reference but not initialized</p></blockquote><p id="r-204826" data-claire-element-id="204826">Si vous lisez l'anglais (et si vous ne le lisez pas vous devriez), vous avez compris le problème : le compilateur veut qu'on initialise immédiatement la référence.<br/> Et ça c'est très important : une référence doit être immédiatement initialisée dès le début, contrairement aux pointeurs. Et ce n'est pas tout : une fois initialisée, la référence ne pourra plus changer !</p><p id="r-204827" data-claire-element-id="204827">Il y a donc deux règles que j'aimerais que vous reteniez par coeur :</p><ul id="r-204832" data-claire-element-id="204832"><li id="r-204829" data-claire-element-id="204829"><p id="r-204828" data-claire-element-id="204828"><strong>Règle 1</strong> : une référence doit être initialisée dès sa déclaration.</p></li><li id="r-204831" data-claire-element-id="204831"><p id="r-204830" data-claire-element-id="204830"><strong>Règle 2</strong> : une fois initialisée, une référence ne peut plus être modifiée.</p></li></ul><h6 id="r-initialisation-d-une-reference" data-claire-element-id="204839">Initialisation d'une référence</h6><p id="r-204833" data-claire-element-id="204833">On va donc initialiser notre référence.<br/> Comme je vous l'ai dit un peu plus tôt, une référence est un synonyme d'une autre variable. Cela veut donc dire qu'il faut créer une autre variable pour y trouver un minimum d'intérêt :p</p><p id="r-204834" data-claire-element-id="204834">Allez hop, il est l'heure de ressortir la bonne vieille variable qui a fait ses preuves : la variable... age !<br/><em>(le premier qui ose dire que je fais des cours pas originaux il va tâter de mon sabre :pirate: )</em></p><pre id="r-204835" data-claire-element-id="204835"><code data-claire-semantic="cpp">int age = 21; // Déclaration de la variable age (rien de nouveau)
int &amp;referenceSurAge = age; // Déclaration et initialisation d'une référence sur la variable age</code></pre><p id="r-204836" data-claire-element-id="204836">Pour initialiser une référence, vous avez juste besoin d'écrire le nom de la variable dont elle sera le synonyme. Pas besoin d'écrire &amp;age comme on le faisait avant avec les pointeurs.</p><aside id="r-204838" data-claire-element-id="204838" data-claire-semantic="warning"><p id="r-204837" data-claire-element-id="204837">Je vous avais prévenu, vous risquez de confondre avec les pointeurs.<br/> Je vous ferai un résumé comparatif pointeurs / références un peu plus loin pour que vous puissiez bien les comparer.</p></aside><h6 id="r-utilisation-de-la-reference" data-claire-element-id="204846">Utilisation de la référence</h6><p id="r-204840" data-claire-element-id="204840">Bon, maintenant notre référence est créée. On a un synonyme de la variable age.<br/> Comment on s'en sert concrètement ? Exactement comme la variable age ! Pas besoin de mettre une étoile * devant pour dire qu'on veut obtenir la valeur. Les références permettent, vous allez le voir, de simplifier l'écriture de nos programmes pour éviter au maximum les erreurs (un oubli d'une étoile est si vite arrivé !).</p><p id="r-204841" data-claire-element-id="204841">Regardez ce petit programme complet qui affiche la variable age, la modifie, et la réaffiche, le tout en passant par une référence :</p><pre id="r-204842" data-claire-element-id="204842"><code data-claire-semantic="cpp">int main()
{
    int age = 21;
    int &amp;referenceSurAge = age;

    cout &lt;&lt; referenceSurAge &lt;&lt; endl;
    cout &lt;&lt; age &lt;&lt; endl;

    referenceSurAge = 40;

    cout &lt;&lt; referenceSurAge &lt;&lt; endl;
    cout &lt;&lt; age &lt;&lt; endl;


    return 0;
}</code></pre><p id="r-204843" data-claire-element-id="204843">Résultat :</p><pre id="r-204844" data-claire-element-id="204844"><code data-claire-semantic="console">21

21

40

40</code></pre><p id="r-204845" data-claire-element-id="204845">Comme vous pouvez le voir, une référence s'utilise exactement comme la variable d'origine. C'est le compilateur qui fait la &quot;conversion&quot; et qui sait qu'il doit affecter la variable &quot;age&quot; lorsqu'on travaille avec la référence.</p><h6 id="r-comparatif-pointeur-reference" data-claire-element-id="204865">Comparatif pointeur / référence</h6><p id="r-204847" data-claire-element-id="204847">En C++, les pointeurs existent toujours. Les références sont juste une alternative aux pointeurs. Elles ont surtout l'avantage d'être plus simples à utiliser, mais elles ne peuvent pas les remplacer complètement.<br/> Pourquoi ? On l'a vu : une référence ne peut pas faire référence à une nouvelle variable une fois qu'elle a été initialisée. Un pointeur, lui, peut toujours pointer vers une nouvelle variable au cours de l'exécution du programme.</p><aside id="r-204849" data-claire-element-id="204849" data-claire-semantic="information"><p id="r-204848" data-claire-element-id="204848">Dans certains langages récents, comme le Java, les pointeurs ont complètement disparu. On n'utilise plus que des références, ce qui limite beaucoup les risques d'erreur et simplifie les programmes. La différence, c'est qu'en Java on peut modifier les références en cours de route, contrairement au C++ ;)</p></aside><p id="r-204850" data-claire-element-id="204850">Il est très courant de confondre les pointeurs et les références lorsqu'on débute (si ça peut vous rassurer, moi aussi j'ai pas mal confondu au début). Je vais donc vous donner 2 codes source : le premier utilise les pointeurs, le second les références. Si à un moment vous avez un doute et que vous vous mettez à confondre pointeurs et références, servez-vous de l'exemple ci-dessous pour vous assurer que vous faites les choses correctement :</p><table id="r-204863" data-claire-element-id="204863"><thead id="r-204856" data-claire-element-id="204856"><tr id="r-204855" data-claire-element-id="204855"><th id="r-204852" data-claire-element-id="204852"><p id="r-204851" data-claire-element-id="204851">-------- Code d'exemple avec un pointeur --------</p></th><th id="r-204854" data-claire-element-id="204854"><p id="r-204853" data-claire-element-id="204853">-------- Code d'exemple avec une référence --------</p></th></tr></thead><tbody id="r-204862" data-claire-element-id="204862"><tr id="r-204861" data-claire-element-id="204861"><td id="r-204858" data-claire-element-id="204858"><pre id="r-204857" data-claire-element-id="204857"><code data-claire-semantic="cpp">int main()
{
    int age = 21;
    int *pointeurSurAge = &amp;age;

    cout &lt;&lt; *pointeurSurAge;

    *pointeurSurAge  = 40;

    cout &lt;&lt; *pointeurSurAge;


    return 0;
}</code></pre></td><td id="r-204860" data-claire-element-id="204860"><pre id="r-204859" data-claire-element-id="204859"><code data-claire-semantic="cpp">int main()
{
    int age = 21;
    int &amp;referenceSurAge = age;

    cout &lt;&lt; referenceSurAge;

    referenceSurAge  = 40;

    cout &lt;&lt; referenceSurAge;


    return 0;
}</code></pre></td></tr></tbody></table><p id="r-204864" data-claire-element-id="204864">Voilà, j'espère que ce comparatif vous permettra d'y voir plus clair :) <br/> Ce qu'il faut retenir dans l'histoire, c'est que les références sont là pour simplifier l'écriture du code source. Comme on n'a plus besoin d'utiliser le symbole * à chaque fois qu'on veut accéder à la variable age, on minimise les risques d'erreur dans nos programmes.</p><h5 id="r-les-references-vers-des-structures" data-claire-element-id="204871">Les références vers des structures</h5><p id="r-204867" data-claire-element-id="204867">Si vous faites une référence vers une structure, il faudra utiliser le symbole point &quot;.&quot; et non le symbole flèche &quot;-&gt;&quot; lorsque vous voulez accéder à un élément d'une structure.</p><pre id="r-204868" data-claire-element-id="204868"><code data-claire-semantic="cpp">struct Coordonnees
{
    int x;
    int y;
};

int main()
{
    Coordonnees point;
    Coordonnees &amp;referenceSurPoint = point;

    referenceSurPoint.x = 10;
    referenceSurPoint.y = 5;

    cout &lt;&lt; &quot;x : &quot; &lt;&lt; referenceSurPoint.x &lt;&lt; endl;
    cout &lt;&lt; &quot;y : &quot; &lt;&lt; referenceSurPoint.y &lt;&lt; endl;


    return 0;
}</code></pre><pre id="r-204869" data-claire-element-id="204869"><code data-claire-semantic="console">x : 10

y : 5</code></pre><p id="r-204870" data-claire-element-id="204870">Une fois de plus, vous voyez qu'une référence s'utilise <em>exactement </em>comme une variable ;)</p><h5 id="r-les-references-lors-d-un-appel-de-fonction" data-claire-element-id="204903">Les références lors d'un appel de fonction</h5><p id="r-204872" data-claire-element-id="204872">Les codes qu'on a vus jusqu'ici n'étaient pas très utiles. En pratique, on n'est pas suffisamment maso pour créer des références juste &quot;pour le plaisir&quot; si elles ne sont pas indispensables.</p><p id="r-204873" data-claire-element-id="204873">En fait, comme pour les pointeurs, les références révèlent toute leur utilité lorsqu'on appelle une fonction.</p><p id="r-204874" data-claire-element-id="204874">Voyons voir ça dans un exemple :</p><pre id="r-204875" data-claire-element-id="204875"><code data-claire-semantic="cpp">struct Coordonnees
{
    int x;
    int y;
};

void remiseAZero(Coordonnees &amp;pointAModifier);

int main()
{
    Coordonnees point;

    remiseAZero(point); // Pas besoin d'indiquer l'adresse de point avec un &amp; lors de l'appel

    return 0;
}

void remiseAZero(Coordonnees &amp;pointAModifier) // La fonction indique qu'elle récupère une référence
{
    // La référence s'utilise exactement comme une variable
    // On utilise donc des points &quot;.&quot; et non des flèches &quot;-&gt;&quot;
    pointAModifier.x = 0;
    pointAModifier.y = 0;
}</code></pre><p id="r-204876" data-claire-element-id="204876">On transmet la référence à la fonction RemiseAZero le plus simplement du monde, sans avoir à mettre de symbole &amp;.</p><pre id="r-204877" data-claire-element-id="204877"><code data-claire-semantic="cpp">remiseAZero(point);</code></pre><p id="r-204878" data-claire-element-id="204878">Le but des références est là encore très clair : éviter d'avoir à taper des symboles en plus pour minimiser les erreurs.</p><p id="r-204879" data-claire-element-id="204879">La fonction doit bien préciser qu'elle reçoit une référence. On doit donc placer le symbole &amp; dans la déclaration (et dans le prototype) :</p><pre id="r-204880" data-claire-element-id="204880"><code data-claire-semantic="cpp">void remiseAZero(Coordonnees &amp;pointAModifier)</code></pre><p id="r-204881" data-claire-element-id="204881">Ensuite, à l'intérieur de la fonction, on se sert de la référence comme si c'était une variable (dans le cas présent, on utilise donc le symbole point et non la flèche -&gt; ) :</p><pre id="r-204882" data-claire-element-id="204882"><code data-claire-semantic="cpp">pointAModifier.x = 0;
pointAModifier.y = 0;</code></pre><h6 id="r-comparaison-pointeur-reference" data-claire-element-id="204902">Comparaison pointeur / référence</h6><p id="r-204883" data-claire-element-id="204883">Une fois de plus, je crois qu'il est utile que je vous fasse un comparatif du même code utilisant d'un côté un pointeur, de l'autre une référence.</p><table id="r-204896" data-claire-element-id="204896"><thead id="r-204889" data-claire-element-id="204889"><tr id="r-204888" data-claire-element-id="204888"><th id="r-204885" data-claire-element-id="204885"><p id="r-204884" data-claire-element-id="204884">----------------------- Code d'exemple avec un pointeur -------------------</p></th><th id="r-204887" data-claire-element-id="204887"><p id="r-204886" data-claire-element-id="204886">----------------- Code d'exemple avec une référence ---------------------</p></th></tr></thead><tbody id="r-204895" data-claire-element-id="204895"><tr id="r-204894" data-claire-element-id="204894"><td id="r-204891" data-claire-element-id="204891"><pre id="r-204890" data-claire-element-id="204890"><code data-claire-semantic="cpp">int main()
{
    Coordonnees point;

    remiseAZero(&amp;point);

    return 0;
}

void remiseAZero(Coordonnees *pointAModifier)
{
    pointAModifier-&gt;x = 0;
    pointAModifier-&gt;y = 0;
}</code></pre></td><td id="r-204893" data-claire-element-id="204893"><pre id="r-204892" data-claire-element-id="204892"><code data-claire-semantic="cpp">int main()
{
    Coordonnees point;

    remiseAZero(point);

    return 0;
}

void remiseAZero(Coordonnees &amp;pointAModifier)
{
    pointAModifier.x = 0;
    pointAModifier.y = 0;
}</code></pre></td></tr></tbody></table><p id="r-204897" data-claire-element-id="204897">Ces codes fonctionnent tous deux très bien en C++. Autant que possible, on utilisera des références en C++, sauf quand l'utilisation d'un pointeur est obligatoire.</p><aside id="r-204899" data-claire-element-id="204899" data-claire-semantic="information"><p id="r-204898" data-claire-element-id="204898">Pour ceux qui se posent la question : on aurait tout à fait pu appeler la référence de la fonction &quot;remiseAZero&quot; <em>point </em>au lieu de <em>pointAModifier</em>. Il n'y a pas de risque de conflit avec la variable <em>point </em> du main car elle se trouve dans une autre fonction. J'ai juste changé le nom pour que vous évitiez de les confondre ;)</p></aside><p id="r-204900" data-claire-element-id="204900"><strong>A retenir</strong> : s'il y a un code que vous devez retenir pour les références, c'est celui de l'appel d'une fonction utilisant une référence (celui que nous venons de voir). Dans 99,99% des cas, on utilise les références lorsqu'on fait appel à une fonction.</p><p id="r-204901" data-claire-element-id="204901"><em>Que de nouveautés !</em> C'est le moins qu'on puisse dire ^^ <br/> Et encore, vous n'avez pas tout vu ! Dans le prochain chapitre, nous découvrirons les nouveautés du C++ relatives aux fonctions.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
<span class="arrow"></span>
<span class="next">Le typedef automatique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">
<span class="next">Nouveautés pour les fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Nouveautspourlesfonctions"></a><h2>Nouveautés pour les fonctions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
<span class="arrow"></span>
<span class="next">Les références</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
<span class="next">Des valeurs par défaut pour les paramètres</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-204906" data-claire-element-id="204906">Nous avons vu que le C++ proposait de nombreuses nouveautés relatives pour les variables.<br/> Ce chapitre est la suite du précédent, mais est cette fois axé sur les nouveautés relatives aux fonctions.</p><p id="r-204907" data-claire-element-id="204907">Ce chapitre sera un peu plus court car il y a assez peu de changements au final. Ne vous endormez pas pour autant parce que vous allez découvrir les valeurs par défaut et les fonctions surchargées, deux éléments très importants du C++.</p>
</div><a name="Desvaleurspardfautpourlesparamtres"></a><h2>Des valeurs par défaut pour les paramètres</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">
<span class="arrow"></span>
<span class="next">Nouveautés pour les fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
<span class="next">La surcharge des fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-valeurs-par-defaut-pour-les-parametres" data-claire-element-id="204968">Des valeurs par défaut pour les paramètres</h4><p id="r-204908" data-claire-element-id="204908">Si je vous dis &quot;paramètre de fonction&quot;, vous voyez de quoi je parle n'est-ce pas ?<br/> Je l'espère, parce qu'il serait temps de le savoir à votre niveau maintenant. ^^</p><h5 id="r-bon-allez-un-petit-rappel" data-claire-element-id="204913">Bon allez, un petit rappel !</h5><p id="r-204909" data-claire-element-id="204909">Comme un petit rappel ne fait jamais de mal, voici un exemple de fonction :</p><pre id="r-204910" data-claire-element-id="204910"><code data-claire-semantic="cpp">int nombreDeSecondes(int heures, int minutes, int secondes)
{
    int total = 0;

    total = heures * 60 * 60;
    total += minutes * 60;
    total += secondes;

    return total;
}</code></pre><p id="r-204911" data-claire-element-id="204911">Cette fonction calcule le nombre de secondes en additionnant les heures, minutes et secondes qu'on lui envoie. Rien de bien compliqué ! ;)</p><p id="r-204912" data-claire-element-id="204912">Les variables <em>heures</em>, <em>minutes </em>et <em>secondes </em>sont les <strong>paramètres </strong>de la fonction nombreDeSecondes. Ce sont des valeurs qu'elle reçoit, celles avec lesquelles elle va travailler.<br/> Il est facile de reconnaître les paramètres d'une fonction, car ceux-ci se trouvent toujours écrits entre les parenthèses. ;)</p><h5 id="r-les-valeurs-par-defaut-1" data-claire-element-id="204937">Les valeurs par défaut</h5><p id="r-204914" data-claire-element-id="204914">La nouveauté en C++, c'est qu'on peut donner des valeurs par défaut à certains paramètres de nos fonctions. Ainsi, on ne sera pas obligé d'indiquer à chaque fois tous les paramètres lorsqu'on appelle une fonction !</p><p id="r-204915" data-claire-element-id="204915">Pour bien voir comment on doit procéder, on va regarder le code complet. J'aimerais que vous le copiez dans votre IDE pour faire les tests en même temps que moi :</p><pre id="r-204916" data-claire-element-id="204916"><code data-claire-semantic="cpp">#include &lt;iostream&gt;

using namespace std;

// Prototype de la fonction
int nombreDeSecondes(int heures, int minutes, int secondes);

// Main
int main()
{
    cout &lt;&lt; nombreDeSecondes(1, 10, 25) &lt;&lt; endl;

    return 0;
}

// Définition de la fonction
int nombreDeSecondes(int heures, int minutes, int secondes)
{
    int total = 0;

    total = heures * 60 * 60;
    total += minutes * 60;
    total += secondes;

    return total;
}</code></pre><p id="r-204917" data-claire-element-id="204917">Ce code donne le résultat suivant :</p><pre id="r-204918" data-claire-element-id="204918"><code data-claire-semantic="console">4225</code></pre><p id="r-204919" data-claire-element-id="204919">Sachant qu'1 heure = 3600s, 10 minutes = 600s, 25 secondes =... 25s, le résultat est logique car 3600 + 600 + 25 = 4225. ;) <br/> Bref, tout va bien.</p><p id="r-204920" data-claire-element-id="204920">Maintenant supposons que l'on veuille rendre certains paramètres facultatifs, par exemple parce qu'on utilise en pratique plus souvent les heures que le reste.<br/> On va devoir modifier le prototype de la fonction (et non sa définition, attention).</p><p id="r-204921" data-claire-element-id="204921">Indiquez la valeur par défaut que vous voulez donner aux paramètres si on ne les a pas renseigné lors de l'appel de la fonction :</p><pre id="r-204922" data-claire-element-id="204922"><code data-claire-semantic="cpp">int nombreDeSecondes(int heures, int minutes = 0, int secondes = 0);</code></pre><p id="r-204923" data-claire-element-id="204923">Dans cet exemple, seul le paramètre heures sera obligatoire, les deux autres étant désormais facultatifs. Si on ne renseigne pas les minutes et les secondes, les variables vaudront alors 0 dans la fonction.</p><p id="r-204924" data-claire-element-id="204924">Voici le code complet que vous devriez avoir sous les yeux :</p><pre id="r-204925" data-claire-element-id="204925"><code data-claire-semantic="cpp">#include &lt;iostream&gt;

using namespace std;

// Prototype avec les valeurs par défaut
int nombreDeSecondes(int heures, int minutes = 0, int secondes = 0);

// Main
int main()
{
    cout &lt;&lt; nombreDeSecondes(1, 10, 25) &lt;&lt; endl;

    return 0;
}

// Définition de la fonction, SANS les valeurs par défaut
int nombreDeSecondes(int heures, int minutes, int secondes)
{
    int total = 0;

    total = heures * 60 * 60;
    total += minutes * 60;
    total += secondes;

    return total;
}</code></pre><aside id="r-204927" data-claire-element-id="204927" data-claire-semantic="error"><p id="r-204926" data-claire-element-id="204926">Si vous avez lu attentivement ce code, vous avez dû vous rendre compte de quelque chose : les valeurs par défaut sont spécifiées uniquement dans le prototype, PAS dans la définition de la fonction ! On se fait souvent avoir, je vous préviens... :p <br/> Si vous vous trompez, le compilateur vous indiquera une erreur à la ligne de la définition de la fonction.</p></aside><p id="r-204928" data-claire-element-id="204928">Bon, ce code ne change pas beaucoup du précédent. A part les valeurs par défaut dans le prototype, rien n'a été modifié (et le résultat à l'écran sera toujours le même).<br/> La nouveauté maintenant, c'est qu'on peut supprimer des paramètres lors de l'appel de la fonction (ici dans le <em>main</em>). On peut par exemple écrire :</p><pre id="r-204929" data-claire-element-id="204929"><code data-claire-semantic="cpp">cout &lt;&lt; nombreDeSecondes(1) &lt;&lt; endl;</code></pre><p id="r-204930" data-claire-element-id="204930">Le compilateur lit les paramètres de gauche à droite. Comme il n'y en a qu'un et que seules les heures sont obligatoires, il devine que la valeur &quot;1&quot; correspond à un nombre d'heures.</p><p id="r-204931" data-claire-element-id="204931">Le résultat à l'écran sera le suivant :</p><pre id="r-204932" data-claire-element-id="204932"><code data-claire-semantic="console">3600</code></pre><p id="r-204933" data-claire-element-id="204933">Mieux encore, vous pouvez indiquer juste les heures et les minutes si vous le désirez :</p><pre id="r-204934" data-claire-element-id="204934"><code data-claire-semantic="cpp">cout &lt;&lt; nombreDeSecondes(1, 10) &lt;&lt; endl;</code></pre><pre id="r-204935" data-claire-element-id="204935"><code data-claire-semantic="console">4200</code></pre><p id="r-204936" data-claire-element-id="204936">Du temps que vous indiquez au moins les paramètres obligatoires, il n'y a pas de problème. :)</p><h5 id="r-cas-particuliers-attention-danger-1" data-claire-element-id="204960">Cas particuliers, attention danger</h5><p id="r-204938" data-claire-element-id="204938">Bon, mine de rien il y a quand même quelques pièges, ce n'est pas si simple que ça ! ^^ <br/> On va voir ces pièges sous la forme de questions / réponses :</p><div id="r-204940" data-claire-element-id="204940" data-claire-semantic="question"><p id="r-204939" data-claire-element-id="204939">Et si je veux envoyer à la fonction juste les heures et les secondes, mais pas les minutes ?</p></div><p id="r-204941" data-claire-element-id="204941">Tel quel, c'est impossible. En effet, je vous l'ai dit plus haut, le compilateur va analyser les paramètres de gauche à droite. Le premier correspondra forcément aux heures, le second aux minutes et le troisième aux secondes.</p><p id="r-204942" data-claire-element-id="204942"><strong>Vous ne pouvez PAS écrire :</strong></p><pre id="r-204943" data-claire-element-id="204943"><code data-claire-semantic="cpp">cout &lt;&lt; nombreDeSecondes(1,,25) &lt;&lt; endl;</code></pre><p id="r-204944" data-claire-element-id="204944">C'est interdit. Si vous le faites, le compilateur vous fera comprendre qu'il n'apprécie guère vos manoeuvres. C'est comme ça : en C++, on ne peut pas &quot;sauter&quot; des paramètres, même s'ils sont facultatifs. Si vous voulez indiquer le premier et le dernier paramètre, il vous faudra obligatoirement spécifier ceux du milieu. On devra donc écrire :</p><pre id="r-204945" data-claire-element-id="204945"><code data-claire-semantic="cpp">cout &lt;&lt; nombreDeSecondes(1, 0, 25) &lt;&lt; endl;</code></pre><div id="r-204947" data-claire-element-id="204947" data-claire-semantic="question"><p id="r-204946" data-claire-element-id="204946">Est-ce que je peux rendre juste les heures facultatives, et rendre les minutes et secondes obligatoires ?</p></div><p id="r-204948" data-claire-element-id="204948">Si le prototype est défini dans le même ordre que tout à l'heure : non.<br/><strong>Les paramètres facultatifs doivent obligatoirement se trouver à la fin</strong> (à droite).</p><p id="r-204949" data-claire-element-id="204949">Ce code ne compilera donc pas :</p><pre id="r-204950" data-claire-element-id="204950"><code data-claire-semantic="cpp">int nombreDeSecondes(int heures = 0, int minutes, int secondes);
                                  // Erreur, les paramètres par défaut doivent être à droite</code></pre><p id="r-204951" data-claire-element-id="204951">La solution, pour régler ce problème, consiste à placer le paramètre <em>heures </em>à la fin :</p><pre id="r-204952" data-claire-element-id="204952"><code data-claire-semantic="cpp">int nombreDeSecondes(int secondes, int minutes, int heures = 0);
                                                // OK</code></pre><div id="r-204954" data-claire-element-id="204954" data-claire-semantic="question"><p id="r-204953" data-claire-element-id="204953">Est-ce que je peux rendre tous mes paramètres facultatifs ?</p></div><p id="r-204955" data-claire-element-id="204955">Oui, ça ne pose pas de problème :</p><pre id="r-204956" data-claire-element-id="204956"><code data-claire-semantic="cpp">int nombreDeSecondes(int heures = 0, int minutes = 0, int secondes = 0);</code></pre><p id="r-204957" data-claire-element-id="204957">Dans ce cas, l'appel de la fonction pourra être fait comme ceci :</p><pre id="r-204958" data-claire-element-id="204958"><code data-claire-semantic="cpp">cout &lt;&lt; nombreDeSecondes() &lt;&lt; endl;</code></pre><p id="r-204959" data-claire-element-id="204959">Le résultat retourné sera bien entendu 0 dans notre cas. :p</p><h5 id="r-regles-a-retenir-1" data-claire-element-id="204967">Règles à retenir</h5><p id="r-204961" data-claire-element-id="204961">En résumé, il y a 2 règles que vous devez retenir pour les valeurs par défaut :</p><ul id="r-204966" data-claire-element-id="204966"><li id="r-204963" data-claire-element-id="204963"><p id="r-204962" data-claire-element-id="204962">Seul le prototype doit contenir les valeurs par défaut (pas la définition de la fonction).</p></li><li id="r-204965" data-claire-element-id="204965"><p id="r-204964" data-claire-element-id="204964">Les valeurs par défaut doivent se trouver à la fin de la liste des paramètres (&quot;à droite&quot;).</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">
<span class="arrow"></span>
<span class="next">Nouveautés pour les fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
<span class="next">La surcharge des fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lasurchargedesfonctions"></a><h2>La surcharge des fonctions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
<span class="arrow"></span>
<span class="next">Des valeurs par défaut pour les paramètres</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
<span class="next">Les fonctions inline</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-surcharge-des-fonctions" data-claire-element-id="205023">La surcharge des fonctions</h4><p id="r-204969" data-claire-element-id="204969">Ca, c'est probablement <em>la</em> nouveauté la plus importante des fonctions ! Cela nous aidera énormément lorsque nous ferons de la POO un peu plus loin :)</p><p id="r-204970" data-claire-element-id="204970">De quoi s'agit-il ? D'un nouveau système en C++ qui permet de <strong>surcharger des fonctions</strong>.<br/> En gros, et pour faire simple, c'est une technique qui nous permet de créer plusieurs fonctions ayant le même nom... sans que le compilateur crie au loup :p</p><h5 id="r-la-signature-d-une-fonction" data-claire-element-id="204993">La signature d'une fonction</h5><p id="r-204971" data-claire-element-id="204971">Avant toute chose, il faut que je vous parle de ce qu'on appelle la <strong>signature d'une fonction</strong>. C'est un peu sa carte d'identité, ce qui permet au compilateur de différencier les fonctions entre elles.</p><p id="r-204972" data-claire-element-id="204972">Chaque fonction est constituée de 3 éléments, ni plus ni moins :</p><ul id="r-204979" data-claire-element-id="204979"><li id="r-204974" data-claire-element-id="204974"><p id="r-204973" data-claire-element-id="204973">Un type de retour</p></li><li id="r-204976" data-claire-element-id="204976"><p id="r-204975" data-claire-element-id="204975">Un nom</p></li><li id="r-204978" data-claire-element-id="204978"><p id="r-204977" data-claire-element-id="204977">Une liste de paramètres</p></li></ul><p id="r-204980" data-claire-element-id="204980">On va représenter ça sur un schéma pour être sûr qu'on voie bien la même chose ^^</p><figure id="r-204982" data-claire-element-id="204983"><img id="r-204981" data-claire-element-id="204981" src="medias/uploads.siteduzero.com_files_47001_48000_47767.png" alt="Image utilisateur"/></figure><aside id="r-204985" data-claire-element-id="204985" data-claire-semantic="information"><p id="r-204984" data-claire-element-id="204984">Le compilateur se moque complètement des noms des variables passées en paramètre. Ce qui compte pour lui, c'est juste le type de ces paramètres. Je vous l'avais d'ailleurs dit dans le <a href="http://www.siteduzero.com/tuto-3-3040-1-la-programmation-modulaire.html#ss_part_1">chapitre sur la compilation modulaire</a> ;) <br/> Voilà donc pourquoi j'ai marqué (int, int, int) pour les paramètres. C'est ce que le compilateur &quot;voit&quot;, le nom des variables est donc ignoré pour l'identification de la fonction.</p></aside><p id="r-204986" data-claire-element-id="204986">Bon, qu'est-ce qui permet d'identifier une fonction d'après vous ? Comment le compilateur fait-il pour vérifier si une fonction est bien différente d'une autre ?</p><p id="r-204987" data-claire-element-id="204987"><strong>En C</strong>, le compilateur se basait sur le nom, et uniquement sur le nom. Si 2 fonctions avaient le même nom, la compilation plantait. L'identification était donc faite sur le nom.<br/><strong>En C++</strong>, le compilateur se base sur le nom et les paramètres ! On peut avoir du coup 2 fonctions avec le même nom, à condition que celles-ci reçoivent des paramètres différents.</p><p id="r-204988" data-claire-element-id="204988">Le nom et les paramètres de la fonction constituent ce qu'on appelle la <strong>signature de la fonction</strong>. C'est ce qui permet au compilateur de l'identifier en C++.</p><figure id="r-204990" data-claire-element-id="204991"><img id="r-204989" data-claire-element-id="204989" src="medias/uploads.siteduzero.com_files_47001_48000_47768.png" alt="Image utilisateur"/></figure><p id="r-204992" data-claire-element-id="204992">Le type de retour n'est donc pas pris en compte pour identifier la fonction.</p><h5 id="r-la-surcharge-d-une-fonction" data-claire-element-id="205022">La surcharge d'une fonction</h5><p id="r-204994" data-claire-element-id="204994">La surcharge consiste à créer des fonctions qui ont le même nom, mais qui ont des paramètres différents (donc une signature différente).</p><p id="r-204995" data-claire-element-id="204995">Voici ce qui peut varier :</p><ul id="r-205000" data-claire-element-id="205000"><li id="r-204997" data-claire-element-id="204997"><p id="r-204996" data-claire-element-id="204996">Le nombre de paramètres</p></li><li id="r-204999" data-claire-element-id="204999"><p id="r-204998" data-claire-element-id="204998">Le type de chacun de ces paramètres</p></li></ul><p id="r-205001" data-claire-element-id="205001">Encore une fois, je le rappelle, le nom que l'on donne à chacun des paramètres, le compilo il s'en fout complètement :p</p><p id="r-205002" data-claire-element-id="205002">Prenons un exemple pour bien comprendre ce que ça va nous permettre de faire. Imaginez une fonction addition. On peut additionner des entiers (int), mais aussi des décimaux (double).</p><p id="r-205003" data-claire-element-id="205003">En C, il aurait fallu nommer les deux fonctions différemment (par exemple sommeEntiers et sommeDecimaux). En C++, on peut leur donner le même nom et ça va grandement simplifier leur utilisation, vous allez voir.</p><pre id="r-205004" data-claire-element-id="205004"><code data-claire-semantic="cpp">int somme(int nb1, int nb2)
{
    return nb1 + nb2;
}

double somme(double nb1, double nb2)
{
    return nb1 + nb2;
}</code></pre><p id="r-205005" data-claire-element-id="205005">Les prototypes de ces fonctions sont donc :</p><pre id="r-205006" data-claire-element-id="205006"><code data-claire-semantic="cpp">int somme(int nb1, int nb2);
double somme(double nb1, double nb2);</code></pre><p id="r-205007" data-claire-element-id="205007">Leurs signatures sont :</p><pre id="r-205008" data-claire-element-id="205008"><code data-claire-semantic="cpp">somme(int, int)
somme(double, double)</code></pre><p id="r-205009" data-claire-element-id="205009">Ces fonctions ont des signatures différentes et portent le même nom. <strong>Ce sont des fonctions surchargées</strong> :)</p><p id="r-205010" data-claire-element-id="205010">Maintenant, dans le main on peut faire appel à la fonction somme pour additionner indifféremment des entiers ou des décimaux. C'est le compilateur qui décide quelle fonction il appelle en fonction du nombre et du type des paramètres.</p><p id="r-205011" data-claire-element-id="205011">Voici un code complet que vous pouvez tester :</p><pre id="r-205012" data-claire-element-id="205012"><code data-claire-semantic="cpp">#include &lt;iostream&gt;

using namespace std;


int somme(int nb1, int nb2);
double somme(double nb1, double nb2);

int main()
{
    cout &lt;&lt; somme(10, 15) &lt;&lt; endl &lt;&lt; somme(2.5, 0.3) &lt;&lt; endl;

    return 0;
}

int somme(int nb1, int nb2)
{
    return nb1 + nb2;
}

double somme(double nb1, double nb2)
{
    return nb1 + nb2;
}</code></pre><p id="r-205013" data-claire-element-id="205013">Résultat :</p><pre id="r-205014" data-claire-element-id="205014"><code data-claire-semantic="console">25

2.8</code></pre><p id="r-205015" data-claire-element-id="205015">On a appelé 2 fois la fonction &quot;somme&quot;, mais c'est en fait une fonction différente qui a été appelée à chaque fois ^^</p><p id="r-205016" data-claire-element-id="205016">Vous pouvez surcharger la fonction autant de fois que vous le désirez. On pourrait donc aussi rajouter par exemple la fonction qui fait la somme d'un entier et d'un décimal :</p><pre id="r-205017" data-claire-element-id="205017"><code data-claire-semantic="cpp">double somme(int nb1, double nb2)
{
    return nb1 + nb2;
}</code></pre><p id="r-205018" data-claire-element-id="205018">... ou encore celle qui fait la somme de 3 entiers :</p><pre id="r-205019" data-claire-element-id="205019"><code data-claire-semantic="cpp">int somme(int nb1, int nb2, int nb3)
{
    return nb1 + nb2 + nb3;
}</code></pre><p id="r-205020" data-claire-element-id="205020">Les possibilités sont infinies ^^</p><p id="r-205021" data-claire-element-id="205021">Bien entendu, on fait de la surcharge de fonction pour des choses plus &quot;intéressantes&quot; que des sommes, mais ça on le découvrira petit à petit en fonction de nos besoins.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
<span class="arrow"></span>
<span class="next">Des valeurs par défaut pour les paramètres</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
<span class="next">Les fonctions inline</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesfonctionsinline"></a><h2>Les fonctions inline</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
<span class="arrow"></span>
<span class="next">La surcharge des fonctions</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-fonctions-inline" data-claire-element-id="205039">Les fonctions inline</h4><p id="r-205024" data-claire-element-id="205024">Ce que nous allons voir ici ressemble beaucoup aux macros (relisez le <a href="http://www.siteduzero.com/tuto-3-4200-1-le-preprocesseur.html#ss_part_3">chapitre sur le préprocesseur</a> si vous avez oublié ce que c'est ;) ).</p><p id="r-205025" data-claire-element-id="205025">Les macros sont un bon moyen, utilisées intelligemment, d'accélérer la vitesse d'exécution du programme si certains bouts de code sont souvent réutilisés.<br/> Toutefois, les macros sont assez délicates à manipuler et impliquent l'utilisation du préprocesseur.</p><p id="r-205026" data-claire-element-id="205026">En C++, on a inventé le mot-clé <em>inline </em>qui permet de faire, grosso modo, la même chose que les macros sans cette fois passer par le préprocesseur. C'est donc le compilateur qui se charge de faire le &quot;remplacement de code&quot; au moment de la compilation. L'avantage, c'est qu'on peut faire plus de vérifications (notamment sur les types des paramètres).</p><h5 id="r-exemple-d-utilisation-d-une-fonction-inline" data-claire-element-id="205038">Exemple d'utilisation d'une fonction inline</h5><p id="r-205027" data-claire-element-id="205027">Prenons l'exemple suivant (on le discutera ensuite) :</p><pre id="r-205028" data-claire-element-id="205028"><code data-claire-semantic="cpp">inline int carre(int nombre);

int main()
{
    cout &lt;&lt; carre(10) &lt;&lt; endl;

    return 0;
}

inline int carre(int nombre)
{
    return nombre * nombre;
}</code></pre><p id="r-205029" data-claire-element-id="205029">Vous voyez que j'ai ajouté le mot-clé <em>inline </em>au début du prototype ET au début de la définition de la fonction. Cela signifie pour le compilateur &quot;<em>A chaque fois qu'on fera appel à la fonction carre, je placerai directement le code de cette fonction à l'endroit de l'appel</em>&quot;.</p><p id="r-205030" data-claire-element-id="205030">En clair, après compilation voici ce qu'il restera dans votre exécutable :</p><pre id="r-205031" data-claire-element-id="205031"><code data-claire-semantic="cpp">int main()
{
    cout &lt;&lt; 10 * 10 &lt;&lt; endl;

    return 0;
}</code></pre><p id="r-205032" data-claire-element-id="205032">La fonction inline disparaît complètement après compilation. Tout son code se trouve placé à l'endroit de l'appel (la ligne du cout dans notre cas).</p><p id="r-205033" data-claire-element-id="205033"><strong>L'avantage</strong> est que l'exécution du programme sera plus rapide, surtout si la fonction est appelée plusieurs fois. En effet, lors d'un appel &quot;classique&quot; de fonction, le processeur va sauter à l'adresse de la fonction en mémoire, retenir l'adresse où il en était pour revenir à la fonction appelante une fois l'autre fonction terminée... Bref, c'est très rapide, mais si la fonction est amenée à être appelée très souvent, il est préférable d'en faire une inline (on dit l'<em>inliner</em> :-° ) pour éviter de répéter tout ce processus.<br/><strong>Le défaut</strong>, c'est que le programme risque de grossir un peu une fois compilé (le même code étant répété dans l'exécutable). Mais bon, en général cette différence est quand même négligeable ;)</p><aside id="r-205035" data-claire-element-id="205035" data-claire-semantic="information"><p id="r-205034" data-claire-element-id="205034">En règle générale, les fonctions inline sont donc des fonctions très courtes que l'on est susceptible de réutiliser souvent, comme c'est le cas de la fonction carre ici.</p></aside><p id="r-205036" data-claire-element-id="205036">En pratique, on utilise quand même assez peu les fonctions inline, sachez-le (c'est comme les macros, je ne pense pas que vous vous en soyez beaucoup servis jusqu'ici ;) ). Ca reste cependant une des nouveautés du C++ relatives aux fonctions que je devais vous présenter :)</p><p id="r-205037" data-claire-element-id="205037"><em>pssst, puisqu'on y est, serez-vous capables de surcharger la fonction inlinée carre pour qu'elle calcule le carré d'un nombre décimal ? :-°</em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c">Du C au C++</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Découverte du C++
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/premier-programme-c-avec-cout-et-cin">Premier programme C++ avec cout et cin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/configurer-l-ide-pour-le-c">
Configurer l&#039;IDE pour le C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/analyse-du-premier-code-source-c">
Analyse du premier code source C++
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-de-sortie-cout">
Le flux de sortie cout
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-flux-d-entree-cin">
Le flux d&#039;entrée cin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-variables">Nouveautés pour les variables</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-type-bool">
Le type bool
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-declarations-de-variables-1">
Les déclarations de variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-allocations-dynamiques">
Les allocations dynamiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/le-typedef-automatique">
Le typedef automatique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-references-2">
Les références
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/nouveautes-pour-les-fonctions">Nouveautés pour les fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/des-valeurs-par-defaut-pour-les-parametres">
Des valeurs par défaut pour les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
La surcharge des fonctions
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/les-fonctions-inline">
Les fonctions inline
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-c-au-c/la-surcharge-des-fonctions">
<span class="arrow"></span>
<span class="next">La surcharge des fonctions</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/du-c-au-c.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 08:09:12 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/du-c-au-c.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:27:12 GMT -->
</html>