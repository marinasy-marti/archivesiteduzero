<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/simuler-l-url-rewriting-chez-free.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 05:52:15 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/simuler-l-url-rewriting-chez-free.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:04:03 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Simuler l&#039;URL Rewriting chez Free</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/simuler-l-url-rewriting-chez-free.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Simuler l&#039;URL Rewriting chez Free</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Simulerl039URLRewritingchezFree">Simuler l&#039;URL Rewriting chez Free</a><br/><a href="#Introduction">Introduction</a><br/><a href="#Analysedel039URL">Analyse de l&#039;URL</a><br/><a href="#Lapaged039index">La page d&#039;index</a><br/><a href="#Scriptcomplet">Script complet</a><br/></div>
<a name="Simulerl039URLRewritingchezFree"></a><h2>Simuler l&#039;URL Rewriting chez Free</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/introduction-85">
<span class="next">Introduction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-555766" data-claire-element-id="555766">Comme vous devez le savoir, l'<a href="http://fr.wikipedia.org/wiki/Htaccess%23URL_Rewriting">URL Rewriting</a> traditionnel (avec des directives Apache) ne fonctionne pas chez Free.</p><p id="r-555767" data-claire-element-id="555767">Je vous propose, dans ce mini-tuto, une solution simple pour faire <em>comme si</em> l'URL Rewriting fonctionnait. C'est relativement simple, mais comme on dit toujours après coup : « <em>Fallait y penser</em> ». ^^</p>
</div><a name="Introduction"></a><h2>Introduction</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/analyse-de-l-url">
<span class="next">Analyse de l&#039;URL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-555768" data-claire-element-id="555768">Partons du principe que vous avez des URL de ce type :</p><pre id="r-555769" data-claire-element-id="555769"><code>http://moulesfrites.free.fr/?type=allumettes&amp;pdt=frite</code></pre><p id="r-555770" data-claire-element-id="555770">D'après cette URL et ces variables, on peut en déduire que la page demandée va parler de frites fines allongées préparées avec des pommes de terre à frites. Mon but est d'obtenir une URL comme ceci :</p><pre id="r-555771" data-claire-element-id="555771"><code>http://moulesfrites.free.fr/?/allumettes-frite.html</code></pre><p id="r-555772" data-claire-element-id="555772">C'est beaucoup plus joli, vous ne trouvez pas ?</p><div id="r-555774" data-claire-element-id="555774" data-claire-semantic="question"><p id="r-555773" data-claire-element-id="555773">Oui, mais c'est quoi ce point d'interrogation en plein milieu ?</p></div><p id="r-555775" data-claire-element-id="555775">C'est le seul petit défaut de la technique mais c'est aussi là que se situe toute la subtilité. ^^</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free">Simuler l&#039;URL Rewriting chez Free</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/introduction-85">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/analyse-de-l-url">
Analyse de l&#039;URL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/la-page-d-index">
La page d&#039;index
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/script-complet">
Script complet
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/analyse-de-l-url">
<span class="next">Analyse de l&#039;URL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Analysedel039URL"></a><h2>Analyse de l&#039;URL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/introduction-85">
<span class="arrow"></span>
<span class="next">Introduction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/la-page-d-index">
<span class="next">La page d&#039;index</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-555777" data-claire-element-id="555777">En réalité, tout ce qui se trouve après ce point d'interrogation est en quelque sorte le nom d'une variable get : la variable <strong>/allumettes-frite.html</strong>. L'URL exacte serait :</p><pre id="r-555778" data-claire-element-id="555778"><code>http://moulesfrites.free.fr/index.php?/allumettes-frite.html</code></pre><p id="r-555779" data-claire-element-id="555779">Cela veut donc dire que la page affichée sera la page <strong>index.php</strong>. Et c'est cette page qui va analyser l'URL de façon à simuler le rewriting. :)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free">Simuler l&#039;URL Rewriting chez Free</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/introduction-85">
Introduction
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/analyse-de-l-url">
Analyse de l&#039;URL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/la-page-d-index">
La page d&#039;index
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/script-complet">
Script complet
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/introduction-85">
<span class="arrow"></span>
<span class="next">Introduction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/la-page-d-index">
<span class="next">La page d&#039;index</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lapaged039index"></a><h2>La page d&#039;index</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/analyse-de-l-url">
<span class="arrow"></span>
<span class="next">Analyse de l&#039;URL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/script-complet">
<span class="next">Script complet</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-555781" data-claire-element-id="555781">Dans un premier temps, il faut récupérer l'URL (enfin, ce qui se trouve après le point d'interrogation) :</p><pre id="r-555782" data-claire-element-id="555782"><code data-claire-semantic="html+php">&lt;?php
$VariablesURL = $_SERVER['QUERY_STRING']; // Récupération de ce qu'il y a après le ?.
if (substr($VariablesURL, -5) == '.html') { // On enlève le .html s'il est présent.
        $VariablesURL = substr($VariablesURL, 0, -5);
}
?&gt;</code></pre><p id="r-555783" data-claire-element-id="555783">On teste aussi la variable, via substr, pour savoir si .html est présent (en toute logique, oui). S'il est présent, on l'enlève.</p><p id="r-555784" data-claire-element-id="555784">Maintenant, il s'agit de décomposer la chaîne en deux morceaux. Pour cela je vais utiliser explode (ça fonctionne de la même façon que la méthode split() de JavaScript, pour ceux qui connaissent). Cette fonction coupe la chaîne et crée un tableau avec les valeurs. Je vais couper au niveau du <strong>/</strong>.</p><pre id="r-555785" data-claire-element-id="555785"><code data-claire-semantic="html+php">&lt;?php
$Argument = explode('/', $VariablesURL);
?&gt;</code></pre><ul id="r-555790" data-claire-element-id="555790"><li id="r-555787" data-claire-element-id="555787"><p id="r-555786" data-claire-element-id="555786"><strong>$Argument[0]</strong> contiendra <strong>/</strong>.</p></li><li id="r-555789" data-claire-element-id="555789"><p id="r-555788" data-claire-element-id="555788"><strong>$Argument[1]</strong> contiendra <strong>allumettes-frite</strong>.</p></li></ul><div id="r-555792" data-claire-element-id="555792" data-claire-semantic="question"><p id="r-555791" data-claire-element-id="555791">C'est bête, tu aurais pu utiliser substr aussi, non ?</p></div><aside id="r-555804" data-claire-element-id="555804" data-claire-semantic="information"><p id="r-555793" data-claire-element-id="555793">Oui, c'est vrai, mais vous pourriez avoir une URL comme ça :</p><pre id="r-555794" data-claire-element-id="555794"><code data-claire-semantic="html">&lt;lien url=&quot;http://moulesfrites/?/recettes/moules-vinblanc.html&quot;&gt;http://moulesfrites/?/recettes/moules-vinblanc.html&lt;/lien&gt;</code></pre><p id="r-555795" data-claire-element-id="555795">Dans ce cas, la fonction explode nous permet de couper la chaîne en trois :</p><ul id="r-555802" data-claire-element-id="555802"><li id="r-555797" data-claire-element-id="555797"><p id="r-555796" data-claire-element-id="555796"><strong>$Argument[0]</strong> contiendra <strong>/</strong> ;</p></li><li id="r-555799" data-claire-element-id="555799"><p id="r-555798" data-claire-element-id="555798"><strong>$Argument[1]</strong> contiendra <strong>recettes</strong> ;</p></li><li id="r-555801" data-claire-element-id="555801"><p id="r-555800" data-claire-element-id="555800"><strong>$Argument[2]</strong> contiendra <strong>moules-vinblanc</strong>.</p></li></ul><p id="r-555803" data-claire-element-id="555803">Mais ça, je ne reviendrai pas dessus.</p></aside><p id="r-555805" data-claire-element-id="555805">Après ça, on va couper <strong>$Argument[1]</strong>. Les points de coupe seront les tirets (<strong>-</strong>) :</p><pre id="r-555806" data-claire-element-id="555806"><code data-claire-semantic="html+php">&lt;?php
$SubArgument = explode('-', $Argument[1]);
?&gt;</code></pre><p id="r-555807" data-claire-element-id="555807">$SubArgument contiendra le tableau avec les différentes parties de <strong>$Argument[1]</strong>.</p><p id="r-555808" data-claire-element-id="555808">Il ne vous reste plus qu'à tester <strong>$SubArgument[0]</strong> (avec des if ou un switch) pour savoir quelle page inclure (require pour un .php et readfile pour un .html) :</p><pre id="r-555809" data-claire-element-id="555809"><code data-claire-semantic="html+php">&lt;?php
switch ($SubArgument[0]) {
        case 'allumettes':
                readfile('pages/types/frites_allumettes.html');
        break; 
        case 'maison':
                readfile('pages/types/frites_maison.html');
        break; 
        default:
                require('pages/accueil.php');
}
?&gt;</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free">Simuler l&#039;URL Rewriting chez Free</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/introduction-85">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/analyse-de-l-url">
Analyse de l&#039;URL
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/la-page-d-index">
La page d&#039;index
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/script-complet">
Script complet
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/analyse-de-l-url">
<span class="arrow"></span>
<span class="next">Analyse de l&#039;URL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/script-complet">
<span class="next">Script complet</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Scriptcomplet"></a><h2>Script complet</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/la-page-d-index">
<span class="arrow"></span>
<span class="next">La page d&#039;index</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-555811" data-claire-element-id="555811">Voici un exemple de script :</p><pre id="r-555812" data-claire-element-id="555812"><code data-claire-semantic="html+php">&lt;?php

$VariableURL = $_SERVER['QUERY_STRING'];

if (substr($VariableURL, -5) == '.html') {
        $VariableURL = substr($VariableURL, 0, -5);
}

$Argument = explode('/', $VariableURL);
if ($Argument[1]) {
        $SubArgument = explode('-', $Argument[1]);
        switch ($SubArgument[0]) {
                case 'allumettes':
                        readfile('pages/types/frites_allumettes.html');
                break; 
                case 'maison':
                        readfile('pages/types/frites_maison.html');
                break; 
                default:
                        require('pages/accueil.php');
        }
} else {
        require('pages/accueil.php');
}

?&gt;</code></pre><p id="r-555813" data-claire-element-id="555813">Bien entendu, dans vos pages incluses, vous pouvez réutiliser <strong>$SubArgument[i]</strong> pour exécuter vos scripts. Dans mon exemple, <strong>$SubArgument[1]</strong> contient <strong>frites</strong>. Vous pouvez mettre autant de SubArguments que vous le voulez, mais essayez de ne pas vous emmêler les pinceaux. ;)</p><p id="r-555814" data-claire-element-id="555814">N'oubliez pas aussi de mettre des messages d'erreur s'il manque des choses. Je ne vous ai donné que le script de base. ;)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free">Simuler l&#039;URL Rewriting chez Free</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/introduction-85">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/analyse-de-l-url">
Analyse de l&#039;URL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/la-page-d-index">
La page d&#039;index
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/script-complet">
Script complet
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/simuler-l-url-rewriting-chez-free/la-page-d-index">
<span class="arrow"></span>
<span class="next">La page d&#039;index</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/simuler-l-url-rewriting-chez-free.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 05:52:15 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/simuler-l-url-rewriting-chez-free.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:04:04 GMT -->
</html>